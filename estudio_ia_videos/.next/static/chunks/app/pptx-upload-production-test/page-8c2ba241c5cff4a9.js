(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4776],{69306:function(e,t,s){Promise.resolve().then(s.bind(s,82011))},62060:function(e,t,s){"use strict";s.d(t,{Cd:function(){return c},X:function(){return d},bZ:function(){return o}});var r=s(57437),a=s(2265),n=s(90535),i=s(22835);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),s),...n})});o.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});d.displayName="AlertDescription"},41875:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(57437);s(2265);var a=s(90535),n=s(22835);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},92595:function(e,t,s){"use strict";s.d(t,{d:function(){return l},z:function(){return o}});var r=s(57437),a=s(2265),n=s(90535),i=s(22835);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:o=!1,...c}=e;return(0,r.jsx)(o?"span":"button",{className:(0,i.cn)(l({variant:a,size:n,className:s})),ref:t,...c})});o.displayName="Button"},34029:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var r=s(57437),a=s(2265),n=s(22835);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},41236:function(e,t,s){"use strict";s.d(t,{E:function(){return i}});var r=s(57437),a=s(2265),n=s(22835);let i=a.forwardRef((e,t)=>{let{className:s,value:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:(0,r.jsx)("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName="Progress"},2980:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return y},a:function(){return w}});var r=s(57437),a=s(2265),n=s(99376),i=s(69064),l=s(27669);let o=()=>(0,l.W)(),c=e=>{let t=window.location.origin.replace(/\/$/,"");return"".concat(t).concat(e)},d={role:"user",metadata:{}};async function u(e,t){let s=o(),{data:r,error:a}=await s.auth.signInWithPassword({email:e,password:t});if(a)throw Error(a.message);return r}async function m(e,t,s){let r=o(),{data:a,error:n}=await r.auth.signUp({email:e,password:t,options:{data:{full_name:s},emailRedirectTo:c("/auth/callback")}});if(n)throw Error(n.message);return a}async function x(){let e=o(),{error:t}=await e.auth.signOut();if(t)throw Error(t.message)}async function h(e){let t=o(),{error:s}=await t.auth.resetPasswordForEmail(e,{redirectTo:c("/auth/reset-password")});if(s)throw Error(s.message)}async function f(e){let t=o(),{error:s}=await t.auth.updateUser({password:e});if(s)throw Error(s.message)}async function p(e){let t=o(),{data:s,error:r}=await t.from("users").select("*").eq("id",e).single();if(r){let e=(r.message||"").toLowerCase();return"PGRST116"===r.code||e.includes("no rows")||e.includes("jwt expired")||"PGRST303"===r.code||console.error("Error fetching user profile:",r),null}return s}async function g(e,t){let s=await p(e);if(s)return s;let r=o(),a=new Date().toISOString(),{data:n,error:i}=await r.from("users").insert({id:e,email:t,...d,created_at:a,updated_at:a}).select().single();if(i){let s=(i.message||"").toLowerCase();if(s.includes("could not find the 'role' column")||s.includes("column role")){let{data:s,error:n}=await r.from("users").insert({id:e,email:t,created_at:a,updated_at:a}).select().single();if(n)throw Error(n.message);return s}throw Error(i.message)}return n}async function v(){let e=o(),{error:t}=await e.auth.signInWithOAuth({provider:"google",options:{redirectTo:c("/auth/callback")}});if(t)throw Error(t.message)}async function j(){let e=o(),{error:t}=await e.auth.signInWithOAuth({provider:"github",options:{redirectTo:c("/auth/callback")}});if(t)throw Error(t.message)}let N=(0,a.createContext)(void 0);function y(e){var t,s;let{children:l}=e,[c,d]=(0,a.useState)(null),[y,w]=(0,a.useState)(null),[b,C]=(0,a.useState)(null),[E,Z]=(0,a.useState)(!0),[k,A]=(0,a.useState)(null),P=(0,n.useRouter)(),S=o();(0,a.useEffect)(()=>{(async()=>{try{var e;let{data:{session:t}}=await S.auth.getSession();if(C(t),d(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),null==t?void 0:t.user){let e=await p(t.user.id);if(e)w(e);else{let e=await g(t.user.id,t.user.email);w(e)}}}catch(t){console.error("Error initializing auth:",t);let e=t instanceof Error?t.message:String(t);if(A(e),e&&e.toLowerCase().includes("jwt expired")){try{await S.auth.signOut()}catch(e){}let e=encodeURIComponent(window.location.pathname+window.location.search);P.push("/login?reason=unauthorized&redirect=".concat(e))}}finally{Z(!1)}})()},[]),(0,a.useEffect)(()=>{let{data:{subscription:e}}=S.auth.onAuthStateChange(async(e,t)=>{var s;if(console.log("Auth state changed:",e),C(t),d(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),null==t?void 0:t.user){let e=await p(t.user.id);e?w(e):w(await g(t.user.id,t.user.email))}else w(null);"SIGNED_IN"===e||"SIGNED_OUT"===e&&(i.Am.success("Logout realizado com sucesso!"),P.push("/login"))});return()=>{e.unsubscribe()}},[P]);let z=(0,a.useCallback)(async(e,t)=>{Z(!0),A(null);try{await u(e,t)}catch(t){let e=t instanceof Error?t.message:"Erro ao fazer login";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),I=(0,a.useCallback)(async(e,t,s)=>{Z(!0),A(null);try{await m(e,t,s),i.Am.success("Conta criada! Verifique seu email.")}catch(t){let e=t instanceof Error?t.message:"Erro ao criar conta";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),T=(0,a.useCallback)(async()=>{Z(!0),A(null);try{await x()}catch(t){let e=t instanceof Error?t.message:"Erro ao fazer logout";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),D=(0,a.useCallback)(async()=>{Z(!0),A(null);try{await v()}catch(t){let e=t instanceof Error?t.message:"Erro ao fazer login com Google";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),R=(0,a.useCallback)(async()=>{Z(!0),A(null);try{await j()}catch(t){let e=t instanceof Error?t.message:"Erro ao fazer login com GitHub";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),O=(0,a.useCallback)(async e=>{Z(!0),A(null);try{await h(e),i.Am.success("Email de recupera\xe7\xe3o enviado!")}catch(t){let e=t instanceof Error?t.message:"Erro ao solicitar reset";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),_=(0,a.useCallback)(async e=>{Z(!0),A(null);try{await f(e),i.Am.success("Senha atualizada com sucesso!")}catch(t){let e=t instanceof Error?t.message:"Erro ao atualizar senha";throw A(e),i.Am.error(e),t}finally{Z(!1)}},[]),M=(0,a.useCallback)(async()=>{if(c)try{let e=await p(c.id);e&&w(e)}catch(e){console.error("Error refreshing profile:",e)}},[c]),U={user:c,profile:y,session:b,loading:E,error:k,signIn:z,signUp:I,signOut:T,signInWithGoogle:D,signInWithGithub:R,resetPassword:O,updatePassword:_,refreshProfile:M,isAdmin:(null==y?void 0:y.role)==="admin",isPro:(null==y?void 0:null===(t=y.metadata)||void 0===t?void 0:t.subscription_tier)==="pro",isEnterprise:(null==y?void 0:null===(s=y.metadata)||void 0===s?void 0:s.subscription_tier)==="enterprise"};return(0,r.jsx)(N.Provider,{value:U,children:l})}function w(){let e=(0,a.useContext)(N);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},27669:function(e,t,s){"use strict";s.d(t,{W:function(){return i}});var r=s(17272);let a=null,n=null;function i(){if(n)return n;let{url:e,anonKey:t}=function(){if(a)return a;let e="https://ofhzrdiadxigrvmrhaiz.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ";if(!e||!t)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables");return a={url:e,anonKey:t}}();return n=(0,r.createBrowserClient)(e,t)}},58113:function(e,t,s){"use strict";s.d(t,{OQ:function(){return a},eI:function(){return n}});var r=s(27669);let a=(0,r.W)(),n=()=>(0,r.W)()},22835:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},82011:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var r=s(57437),a=s(2265),n=s(34029),i=s(92595),l=s(41875),o=s(85598),c=s(55238),d=s(62060),u=s(41236),m=s(69064),x=s(17689),h=s(49322),f=s(48736),p=s(41671),g=s(33276),v=s(51817),j=s(91723),N=s(98728),y=s(99388),w=s(69658),b=s(99376),C=s(27648);s(45125);var E=s(58113),Z=s(2980);function k(e){let{onProcessComplete:t,onCancel:s,maxFiles:c=5,acceptedTypes:u=[".pptx",".ppt",".pdf"]}=e,v=(0,b.useRouter)(),j=(0,b.usePathname)(),N=(0,b.useSearchParams)(),{user:y,loading:w}=(0,Z.a)(),[k,P]=(0,a.useState)([]),S=(0,a.useMemo)(()=>{var e;return null!==(e=null==N?void 0:N.toString())&&void 0!==e?e:""},[N]),z=(0,a.useMemo)(()=>{let e=j||"/pptx-upload-production-test";return S?"".concat(e,"?").concat(S):e},[j,S]),I=(0,a.useMemo)(()=>"/login?redirect=".concat(encodeURIComponent(z)),[z]),T=!!y&&!w,D=(0,a.useCallback)(async e=>{if(!y){m.Am.error("Fa\xe7a login para enviar apresenta\xe7\xf5es PPTX."),v.push(I);return}console.log("\uD83D\uDCC1 Files dropped:",e.length);let t=e.map(e=>({id:crypto.randomUUID(),status:"uploading",progress:0,name:e.name,size:e.size,type:e.type,lastModified:e.lastModified,file:e}));for(let e of(P(e=>[...e,...t]),t))await R(e)},[I,v,y]),R=async e=>{try{_(e.id,"uploading",10);let t=new FormData;t.append("file",e.file),_(e.id,"uploading",50);let s=(0,E.eI)(),{data:{session:r}}=await s.auth.getSession(),a=null==r?void 0:r.access_token;a?console.log("\uD83D\uDD11 Auth token found, length:",a.length):console.warn("⚠️ No auth token found in session");let n={};a&&(n.Authorization="Bearer ".concat(a));let i=await fetch("/api/v1/pptx/upload-production",{method:"POST",headers:n,body:t,credentials:"include"});if(!i.ok){let e=await i.json();throw Error(e.error||"Erro no upload")}let l=await i.json();console.log("✅ Upload successful:",l),P(t=>t.map(t=>t.id===e.id?{...t,status:"uploaded",progress:100,s3Key:l.job.s3Key,jobId:l.job.id}:t)),await O(e.id,l.job.s3Key,l.job.id)}catch(t){console.error("File processing error:",t),_(e.id,"error",0,t instanceof Error?t.message:"Erro desconhecido"),m.Am.error("Erro ao processar ".concat(e.name))}},O=async(e,s,r)=>{try{_(e,"processing",0);let a=(0,E.eI)(),{data:{session:n}}=await a.auth.getSession(),i=null==n?void 0:n.access_token,l={"Content-Type":"application/json"};i?l.Authorization="Bearer ".concat(i):console.warn("⚠️ No auth token found while processing PPTX job");let o=await fetch("/api/v1/pptx/process-production",{method:"POST",headers:l,body:JSON.stringify({s3Key:s,jobId:r}),credentials:"include"});if(!o.ok){let e=await o.json();throw Error(e.error||"Erro no processamento")}let c=await o.json();console.log("✅ Processing successful:",c),P(t=>t.map(t=>t.id===e?{...t,status:"completed",progress:100,result:{slides:c.data.slides.map(e=>({id:e.id,title:e.title,content:e.content,images:e.images.length,duration:e.duration})),totalDuration:c.data.totalDuration,slideCount:c.data.slides.length,imageCount:c.data.slides.reduce((e,t)=>e+t.images.length,0),hasAnimations:c.data.slides.some(e=>e.animations.length>0)}}:t)),m.Am.success("Processamento conclu\xeddo: ".concat(c.data.slides.length," slides")),t&&t(c)}catch(t){console.error("Content processing error:",t),_(e,"error",0,t instanceof Error?t.message:"Erro no processamento")}},_=(e,t,s,r)=>{P(a=>a.map(a=>a.id===e?{...a,status:t,progress:s,error:r}:a))},{getRootProps:M,getInputProps:U,isDragActive:X,isDragReject:q}=(0,o.uI)({onDrop:D,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"],"application/vnd.ms-powerpoint":[".ppt"],"application/pdf":[".pdf"]},maxFiles:c,maxSize:104857600,multiple:!0,disabled:!T}),F=e=>{P(t=>t.filter(t=>t.id!==e))},W=e=>{let t=k.find(t=>t.id===e);t&&R(t)},Y=k.filter(e=>"completed"===e.status);k.some(e=>"error"===e.status);let B=k.some(e=>"uploading"===e.status||"processing"===e.status);return(0,r.jsxs)(n.Zb,{className:"w-full max-w-4xl mx-auto",children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"h-6 w-6"}),"Upload PPTX Production"]})}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{...M(),className:"\n            border-2 border-dashed rounded-lg p-8 text-center transition-all cursor-pointer\n            ".concat(X&&!q?"border-blue-500 bg-blue-50":"","\n            ").concat(q?"border-red-500 bg-red-50":"","\n            ").concat(X?"":"border-gray-300 hover:border-gray-400","\n            ").concat(T?"":"opacity-60 cursor-not-allowed","\n          "),children:[(0,r.jsx)("input",{...U()}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto"}),X?q?(0,r.jsx)("p",{className:"text-red-600",children:"Tipo de arquivo n\xe3o suportado"}):(0,r.jsx)("p",{className:"text-blue-600",children:"Solte os arquivos aqui..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:T?"Arraste arquivos PPTX aqui":"Fa\xe7a login para enviar arquivos"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:T?"ou clique para selecionar • M\xe1ximo ".concat(c," arquivos • At\xe9 100MB cada"):"Esta \xe1rea fica ativa ap\xf3s autentica\xe7\xe3o."}),(0,r.jsx)(l.C,{variant:"outline",className:"mt-2",children:".pptx • .ppt • .pdf"})]})]})]}),!w&&!y&&(0,r.jsxs)(d.bZ,{className:"border-yellow-200 bg-yellow-50",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-yellow-600"}),(0,r.jsxs)(d.X,{className:"flex flex-col gap-3 text-yellow-900",children:[(0,r.jsx)("span",{children:"\xc9 necess\xe1rio estar autenticado para usar o upload de PPTX em produ\xe7\xe3o. Fa\xe7a login e tente novamente."}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)(C.default,{href:I,prefetch:!1,children:(0,r.jsx)(i.z,{size:"sm",children:"Ir para login"})}),(0,r.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>v.refresh(),children:"J\xe1 fiz login"})]})]})]}),k.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-medium flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),"Arquivos (",k.length,")"]}),k.map(e=>(0,r.jsx)(A,{file:e,onRemove:F,onRetry:W},e.id))]}),Y.length>0&&(0,r.jsxs)(d.bZ,{children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)(d.X,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{children:[Y.length," arquivo(s) processado(s) com sucesso"]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)(i.z,{size:"sm",onClick:()=>{var e;let t=null===(e=Y[0])||void 0===e?void 0:e.jobId;t?(console.log("\uD83D\uDD17 Navigating to editor with project: ".concat(t)),v.push("/pptx-editor-real?projectId=".concat(t)),m.Am.success("Redirecionando para o editor com dados reais...")):(v.push("/pptx-editor-real"),m.Am.success("Redirecionando para o editor..."))},className:"flex items-center gap-1",children:[(0,r.jsx)(g.Z,{className:"h-3 w-3"}),"Ir para Editor"]})})]})})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,r.jsx)(i.z,{variant:"outline",onClick:s,children:"Cancelar"}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(l.C,{variant:B?"default":"secondary",children:B?"Processando...":"Pronto"})})]})]})]})}function A(e){let{file:t,onRemove:s,onRetry:a}=e;return(0,r.jsx)(n.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 flex-shrink-0",children:"completed"===t.status||"error"===t.status?(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",children:(()=>{switch(t.status){case"uploading":return(0,r.jsx)(v.Z,{className:"h-4 w-4 animate-spin text-blue-500"});case"uploaded":return(0,r.jsx)(j.Z,{className:"h-4 w-4 text-yellow-500"});case"processing":return(0,r.jsx)(N.Z,{className:"h-4 w-4 animate-spin text-orange-500"});case"completed":return(0,r.jsx)(p.Z,{className:"h-4 w-4 text-green-500"});case"error":return(0,r.jsx)(y.Z,{className:"h-4 w-4 text-red-500"});default:return(0,r.jsx)(w.Z,{className:"h-4 w-4 text-gray-400"})}})()}):(0,r.jsx)(c.Ip,{value:t.progress,text:"".concat(t.progress,"%"),styles:(0,c.y3)({textSize:"24px",pathColor:"uploading"===t.status?"#3b82f6":"processing"===t.status?"#f59e0b":"#3b82f6",textColor:"#374151",trailColor:"#e5e7eb"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:t.name}),(0,r.jsx)(l.C,{variant:"outline",className:"flex-shrink-0",children:(()=>{switch(t.status){case"uploading":return"Enviando...";case"uploaded":return"Enviado";case"processing":return"Processando...";case"completed":return"Conclu\xeddo";case"error":return"Erro";default:return"Aguardando"}})()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[(0,r.jsxs)("span",{children:[(t.size/1024/1024).toFixed(1)," MB"]}),t.result&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[t.result.slideCount," slides"]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[t.result.imageCount," imagens"]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[Math.round(t.result.totalDuration),"s"]})]})]}),t.error&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-1",children:t.error}),("uploading"===t.status||"processing"===t.status)&&(0,r.jsx)(u.E,{value:t.progress,className:"mt-2"})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:["error"===t.status&&(0,r.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>a(t.id),children:"Tentar Novamente"}),(0,r.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>s(t.id),children:(0,r.jsx)(y.Z,{className:"h-4 w-4"})})]})]})})}var P=s(11239),S=s(64372),z=s(28124),I=s(53113),T=s(32660);function D(){let[e,t]=(0,a.useState)(null),[s,o]=(0,a.useState)(!0),c=()=>{o(!0),t(null)};return s?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,r.jsx)(x.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"PPTX Upload Production Test"})]}),(0,r.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Teste completo do sistema de upload e processamento de apresenta\xe7\xf5es PPTX com integra\xe7\xe3o S3, processamento real e extra\xe7\xe3o de conte\xfado."})]}),(0,r.jsxs)(n.Zb,{className:"mb-8",children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{className:"h-5 w-5 text-yellow-500"}),"Funcionalidades Testadas"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)(x.Z,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),(0,r.jsx)("h3",{className:"font-medium",children:"Upload S3"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Upload direto para AWS S3"})]}),(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)(N.Z,{className:"h-8 w-8 mx-auto mb-2 text-orange-500"}),(0,r.jsx)("h3",{className:"font-medium",children:"Processamento"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Extra\xe7\xe3o de conte\xfado real"})]}),(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)(f.Z,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),(0,r.jsx)("h3",{className:"font-medium",children:"An\xe1lise"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Slides, imagens, textos"})]}),(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)(S.Z,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),(0,r.jsx)("h3",{className:"font-medium",children:"Timeline"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Gera\xe7\xe3o autom\xe1tica"})]})]})})]}),(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"flex justify-center py-12 text-gray-500",children:"Carregando componente de upload..."}),children:(0,r.jsx)(k,{onProcessComplete:e=>{if(console.log("\uD83C\uDF89 Processing completed:",e),e.data){var s,r,a,n;t({slides:(null===(s=e.data.slides)||void 0===s?void 0:s.map(e=>{var t;return{id:e.id,title:e.title,content:e.content,images:(null===(t=e.images)||void 0===t?void 0:t.length)||0,duration:e.duration||0}}))||[],totalDuration:e.data.totalDuration||0,slideCount:(null===(r=e.data.slides)||void 0===r?void 0:r.length)||0,imageCount:(null===(a=e.data.slides)||void 0===a?void 0:a.reduce((e,t)=>{var s;return e+((null===(s=t.images)||void 0===s?void 0:s.length)||0)},0))||0,hasAnimations:(null===(n=e.data.slides)||void 0===n?void 0:n.some(e=>e.animations&&e.animations.length>0))||!1})}o(!1),m.Am.success("Processamento conclu\xeddo! Pronto para edi\xe7\xe3o.")},onCancel:c,maxFiles:3,acceptedTypes:[".pptx",".ppt",".pdf"]})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 p-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,r.jsx)(p.Z,{className:"h-8 w-8 text-green-600"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Processamento Conclu\xeddo"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Arquivo processado com sucesso! Confira os dados extra\xeddos abaixo."})]}),e&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"text-center p-6",children:[(0,r.jsx)(z.Z,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.slideCount}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Slides"})]})}),(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"text-center p-6",children:[(0,r.jsx)(I.Z,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.imageCount}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Imagens"})]})}),(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"text-center p-6",children:[(0,r.jsx)(j.Z,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[Math.round(e.totalDuration),"s"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Dura\xe7\xe3o"})]})}),(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"text-center p-6",children:[(0,r.jsx)(P.Z,{className:"h-8 w-8 mx-auto mb-2 text-orange-500"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:e.hasAnimations?"Sim":"N\xe3o"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Anima\xe7\xf5es"})]})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"h-5 w-5"}),"Slides Detectados"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:e.slides.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsxs)(l.C,{variant:"outline",children:["Slide ",t+1]}),(0,r.jsx)("h3",{className:"font-medium",children:e.title||"Slide sem t\xedtulo ".concat(t+1)})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 truncate max-w-md",children:e.content||"Sem conte\xfado de texto"})]}),(0,r.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,r.jsxs)("div",{children:[e.images," imagem(s)"]}),(0,r.jsxs)("div",{children:[Math.round(e.duration),"s"]})]})]},e.id))})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(i.z,{variant:"outline",onClick:c,className:"flex items-center gap-2",children:[(0,r.jsx)(T.Z,{className:"h-4 w-4"}),"Voltar ao Upload"]}),(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsxs)(i.z,{variant:"default",onClick:()=>{m.Am.success("Redirecionando para o editor...")},className:"flex items-center gap-2",children:[(0,r.jsx)(S.Z,{className:"h-4 w-4"}),"Iniciar Edi\xe7\xe3o"]})})]})]}),(0,r.jsxs)(d.bZ,{className:"mt-6",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsxs)(d.X,{children:[(0,r.jsx)("strong",{children:"✅ Teste de Upload Production realizado com sucesso!"}),(0,r.jsx)("br",{}),"O arquivo foi enviado para S3, processado e os dados foram extra\xeddos corretamente. O sistema est\xe1 pronto para produ\xe7\xe3o."]})]})]})})}},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:s,strokeWidth:o?24*Number(l)/Number(a):l,className:n("lucide",c),...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:o,...c}=s;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(a(e)),o),...c})});return s.displayName="".concat(e),s}},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},64372:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])},99388:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},69658:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},27648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(72972),a=s.n(r)},90535:function(e,t,s){"use strict";s.d(t,{j:function(){return i}});var r=s(61994);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.W,i=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],r=null==l?void 0:l[e];if(null===t)return null;let n=a(t)||a(r);return i[e][n]}),c=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return n(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...c}[t]):({...l,...c})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[9062,6137,4919,7272,2972,9064,9043,5478,2971,2117,1744],function(){return e(e.s=69306)}),_N_E=e.O()}]);