(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5697],{83892:function(e,r,s){Promise.resolve().then(s.bind(s,73560))},73560:function(e,r,s){"use strict";s.d(r,{default:function(){return b}});var t=s(57437),a=s(2265),n=s(85598),o=s(99376),i=s(34029),l=s(92595),c=s(41236),d=s(17689),u=s(48736),m=s(32489),x=s(51817),f=s(41671),p=s(82023),h=s(76858),g=s(49322),v=s(14438);function b(){let e=(0,o.useRouter)(),[r,s]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[N,y]=(0,a.useState)(0),[w,C]=(0,a.useState)("idle"),[k,E]=(0,a.useState)(""),[Z,q]=(0,a.useState)(null),P=(0,a.useMemo)(()=>r?r.size/1048576:0,[r]),I=(0,a.useCallback)(e=>!(e.size/1048576>50)||(v.Am.error("Arquivo excede o limite de ".concat(50,"MB")),!1),[]),z=(0,a.useCallback)(e=>{if(e.length>0){let r=e[0];if(!r.name.endsWith(".pptx")){v.Am.error("Por favor, selecione um arquivo .pptx v\xe1lido");return}I(r)&&(s(r),C("idle"),E(""),q(null))}},[I]),{getRootProps:A,getInputProps:R,isDragActive:S}=(0,n.uI)({onDrop:z,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},maxFiles:1,multiple:!1}),F=async()=>{if(r){if(!I(r)){C("error"),E("Arquivo excede o limite de ".concat(50,"MB"));return}try{var s,t,a;j(!0),C("uploading"),y(0);let n=[10,25,40,55,70,85],o=0,i=setInterval(()=>{o<n.length&&(y(n[o]),o++)},600),l=new FormData;l.append("file",r);let c=await fetch("/api/pptx/upload",{method:"POST",body:l});if(clearInterval(i),!c.ok){let e=await c.json();throw Error(e.error||e.message||"Falha no upload")}y(90),C("processing");let d=await c.json();y(100),C("success"),q({projectId:d.projectId||(null===(s=d.data)||void 0===s?void 0:s.projectId),slidesCount:d.slidesCount||(null===(t=d.data)||void 0===t?void 0:t.slidesCount),estimatedDuration:d.estimatedDuration||(null===(a=d.data)||void 0===a?void 0:a.estimatedDuration)}),v.Am.success("Arquivo processado com sucesso!",{description:"".concat(d.slidesCount||0," slides extra\xeddos"),action:d.projectId?{label:"Abrir Editor",onClick:()=>e.push("/editor/pptx?project=".concat(d.projectId))}:void 0})}catch(e){console.error("[PPTX Upload] Error:",e),C("error"),E(e instanceof Error?e.message:"Erro desconhecido no processamento"),v.Am.error("Erro ao processar arquivo",{description:e instanceof Error?e.message:void 0})}finally{j(!1)}}},_=()=>{s(null),C("idle"),E(""),y(0),q(null)};return(0,t.jsx)(i.Zb,{className:"w-full max-w-3xl mx-auto border-2 border-dashed border-gray-200 bg-gray-50/50 transition-all duration-300 hover:border-blue-300",children:(0,t.jsx)(i.aY,{className:"p-8",children:r?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,t.jsx)(u.Z,{className:"h-6 w-6 text-orange-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 truncate max-w-[200px] sm:max-w-none",children:r.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[P.toFixed(2)," MB"]})]})]}),"uploading"!==w&&"processing"!==w&&"success"!==w&&(0,t.jsx)(l.z,{variant:"ghost",size:"icon",onClick:_,title:"Remover arquivo",children:(0,t.jsx)(m.Z,{className:"h-5 w-5 text-gray-400 hover:text-red-500 transition-colors"})})]}),("uploading"===w||"processing"===w)&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-blue-600 font-medium flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 animate-spin"}),"uploading"===w?"Enviando arquivo...":"Processando slides..."]}),(0,t.jsxs)("span",{className:"text-gray-500",children:[N,"%"]})]}),(0,t.jsx)(c.E,{value:N,className:"h-2"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"processing"===w&&"Extraindo texto, imagens e estrutura..."})]}),"success"===w&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"font-medium block",children:"Processamento conclu\xeddo!"}),(null==Z?void 0:Z.slidesCount)&&(0,t.jsxs)("span",{className:"text-sm text-green-700",children:[Z.slidesCount," slides extra\xeddos"]})]})]}),(null==Z?void 0:Z.projectId)&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)(l.z,{onClick:()=>{(null==Z?void 0:Z.projectId)&&e.push("/editor/pptx?project=".concat(Z.projectId))},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[(0,t.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Abrir no Editor",(0,t.jsx)(h.Z,{className:"ml-2 h-4 w-4"})]})})]}),"error"===w&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-red-600 bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,t.jsx)(g.Z,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium block",children:"Erro no processamento"}),(0,t.jsx)("span",{className:"text-sm text-red-700",children:k})]})]}),"success"!==w&&(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(l.z,{variant:"outline",onClick:_,disabled:b||"processing"===w,children:"Cancelar"}),(0,t.jsx)(l.z,{onClick:F,disabled:b||"processing"===w,className:"bg-blue-600 hover:bg-blue-700 text-white min-w-[180px]",children:b||"processing"===w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"processing"===w?"Processando...":"Enviando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Iniciar Processamento"]})})]}),"success"===w&&(0,t.jsx)("div",{className:"flex justify-center pt-4 border-t",children:(0,t.jsxs)(l.z,{variant:"outline",onClick:_,children:[(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Processar outro arquivo"]})})]}):(0,t.jsxs)("div",{...A(),className:"flex flex-col items-center justify-center h-64 cursor-pointer transition-all duration-200 rounded-lg\n              ".concat(S?"bg-blue-50 border-blue-400 scale-[1.02]":"hover:bg-gray-100"),children:[(0,t.jsx)("input",{...R()}),(0,t.jsx)("div",{className:"p-4 rounded-full shadow-sm mb-4 transition-all duration-200 ".concat(S?"bg-blue-100 scale-110":"bg-white"),children:(0,t.jsx)(d.Z,{className:"h-8 w-8 transition-colors ".concat(S?"text-blue-500":"text-gray-400")})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:S?"Solte o arquivo aqui":"Arraste e solte seu PPTX aqui"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"ou clique para selecionar do computador"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 bg-white px-3 py-1 rounded-full border",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3"}),"Suporta apenas arquivos .pptx at\xe9 ",50,"MB"]})]})})})}},92595:function(e,r,s){"use strict";s.d(r,{d:function(){return i},z:function(){return l}});var t=s(57437),a=s(2265),n=s(90535),o=s(22835);let i=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:s,variant:a,size:n,asChild:l=!1,...c}=e;return(0,t.jsx)(l?"span":"button",{className:(0,o.cn)(i({variant:a,size:n,className:s})),ref:r,...c})});l.displayName="Button"},34029:function(e,r,s){"use strict";s.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var t=s(57437),a=s(2265),n=s(22835);let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});o.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h3",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},41236:function(e,r,s){"use strict";s.d(r,{E:function(){return o}});var t=s(57437),a=s(2265),n=s(22835);let o=a.forwardRef((e,r)=>{let{className:s,value:a,...o}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...o,children:(0,t.jsx)("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});o.displayName="Progress"},22835:function(e,r,s){"use strict";s.d(r,{cn:function(){return n}});var t=s(61994),a=s(53335);function n(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.m6)((0,t.W)(r))}}},function(e){e.O(0,[6137,5644,9043,6971,2971,2117,1744],function(){return e(e.s=83892)}),_N_E=e.O()}]);