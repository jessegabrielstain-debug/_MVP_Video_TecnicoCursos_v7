(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2445],{6189:function(e,s,a){Promise.resolve().then(a.bind(a,87365))},87365:function(e,s,a){"use strict";a.d(s,{default:function(){return F}});var r=a(57437),t=a(2265),n=a(34029),l=a(92595),i=a(60967),d=a(81973),o=a(46393),c=a(95523),u=a(41875),x=a(14438),f=a(61649),m=a(17342),h=a(80804),p=a(75719),j=a(48736),g=a(92735),v=a(98728),y=a(90740),N=a(51817),b=a(65621),w=a(50091),C=a(41671),R=a(49322),k=a(87735),Z=a(66916);let E={csv:f.Z,json:m.Z,xlsx:f.Z,pdf:h.Z,xml:p.Z},_={events:"Eventos",performance:"Performance",users:"Usu\xe1rios",projects:"Projetos",alerts:"Alertas",reports:"Relat\xf3rios",all:"Todos os Dados"};function F(){let[e,s]=(0,t.useState)(!1),[a,f]=(0,t.useState)([]),[m,h]=(0,t.useState)(!1),[p,F]=(0,t.useState)(!1),[S,M]=(0,t.useState)({format:"json",dataType:"events",dateRange:{start:(0,k.WU)(new Date(Date.now()-6048e5),"yyyy-MM-dd"),end:(0,k.WU)(new Date,"yyyy-MM-dd")},filters:{},includeMetadata:!1,compression:!1,maxRecords:1e4});(0,t.useEffect)(()=>{Q()},[]);let Q=async()=>{h(!0);try{let e=await fetch("/api/analytics/export",{method:"PUT"});if(e.ok){let s=await e.json();f(s.exports||[])}}catch(e){console.error("Error loading export history:",e)}finally{h(!1)}},T=async()=>{s(!0);try{let e=await fetch("/api/analytics/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!e.ok){let s=await e.json();throw Error(s.details||"Falha na exporta\xe7\xe3o")}let s=await e.json(),a=await fetch("/api/analytics/export?format=".concat(S.format,"&type=").concat(S.dataType,"&start=").concat(S.dateRange.start,"&end=").concat(S.dateRange.end,"&includeMetadata=").concat(S.includeMetadata,"&maxRecords=").concat(S.maxRecords));if(!a.ok)throw Error("Falha no download do arquivo");let r=await a.blob(),t=window.URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=s.export.filename,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t),document.body.removeChild(n),x.Am.success("Exporta\xe7\xe3o conclu\xedda! ".concat(s.export.recordCount," registros exportados.")),Q()}catch(e){console.error("Export error:",e),x.Am.error("Erro na exporta\xe7\xe3o: ".concat(e.message))}finally{s(!1)}},z=async(e,s)=>{M({...S,format:e,dataType:s}),setTimeout(()=>{T()},100)},D=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB"][s]},P=e=>{let s=E[e]||j.Z;return(0,r.jsx)(s,{className:"h-4 w-4"})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5"}),"Exporta\xe7\xe3o R\xe1pida"]}),(0,r.jsx)(n.SZ,{children:"Exporte dados rapidamente nos formatos mais comuns"})]}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.z,{variant:"outline",onClick:()=>z("csv","events"),disabled:e,className:"h-20 flex-col gap-2",children:[P("csv"),(0,r.jsx)("span",{children:"Eventos CSV"})]}),(0,r.jsxs)(l.z,{variant:"outline",onClick:()=>z("json","performance"),disabled:e,className:"h-20 flex-col gap-2",children:[P("json"),(0,r.jsx)("span",{children:"Performance JSON"})]}),(0,r.jsxs)(l.z,{variant:"outline",onClick:()=>z("xlsx","users"),disabled:e,className:"h-20 flex-col gap-2",children:[P("xlsx"),(0,r.jsx)("span",{children:"Usu\xe1rios Excel"})]}),(0,r.jsxs)(l.z,{variant:"outline",onClick:()=>z("pdf","all"),disabled:e,className:"h-20 flex-col gap-2",children:[P("pdf"),(0,r.jsx)("span",{children:"Relat\xf3rio PDF"})]})]})})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5"}),"Exporta\xe7\xe3o Personalizada"]}),(0,r.jsx)(n.SZ,{children:"Configure op\xe7\xf5es avan\xe7adas para sua exporta\xe7\xe3o"})]}),(0,r.jsxs)(n.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"format",children:"Formato"}),(0,r.jsxs)(i.Ph,{value:S.format,onValueChange:e=>M(s=>({...s,format:e})),children:[(0,r.jsx)(i.i4,{children:(0,r.jsx)(i.ki,{})}),(0,r.jsxs)(i.Bw,{children:[(0,r.jsx)(i.Ql,{value:"csv",children:"CSV"}),(0,r.jsx)(i.Ql,{value:"json",children:"JSON"}),(0,r.jsx)(i.Ql,{value:"xlsx",children:"Excel (XLSX)"}),(0,r.jsx)(i.Ql,{value:"pdf",children:"PDF"}),(0,r.jsx)(i.Ql,{value:"xml",children:"XML"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"dataType",children:"Tipo de Dados"}),(0,r.jsxs)(i.Ph,{value:S.dataType,onValueChange:e=>M(s=>({...s,dataType:e})),children:[(0,r.jsx)(i.i4,{children:(0,r.jsx)(i.ki,{})}),(0,r.jsxs)(i.Bw,{children:[(0,r.jsx)(i.Ql,{value:"events",children:"Eventos"}),(0,r.jsx)(i.Ql,{value:"performance",children:"Performance"}),(0,r.jsx)(i.Ql,{value:"users",children:"Usu\xe1rios"}),(0,r.jsx)(i.Ql,{value:"projects",children:"Projetos"}),(0,r.jsx)(i.Ql,{value:"alerts",children:"Alertas"}),(0,r.jsx)(i.Ql,{value:"reports",children:"Relat\xf3rios"}),(0,r.jsx)(i.Ql,{value:"all",children:"Todos os Dados"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"maxRecords",children:"M\xe1x. Registros"}),(0,r.jsxs)(i.Ph,{value:S.maxRecords.toString(),onValueChange:e=>M(s=>({...s,maxRecords:parseInt(e)})),children:[(0,r.jsx)(i.i4,{children:(0,r.jsx)(i.ki,{})}),(0,r.jsxs)(i.Bw,{children:[(0,r.jsx)(i.Ql,{value:"1000",children:"1.000"}),(0,r.jsx)(i.Ql,{value:"5000",children:"5.000"}),(0,r.jsx)(i.Ql,{value:"10000",children:"10.000"}),(0,r.jsx)(i.Ql,{value:"25000",children:"25.000"}),(0,r.jsx)(i.Ql,{value:"50000",children:"50.000"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{children:"Per\xedodo"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o._,{htmlFor:"startDate",className:"text-sm text-muted-foreground",children:"Data Inicial"}),(0,r.jsx)(d.I,{id:"startDate",type:"date",value:S.dateRange.start,onChange:e=>M(s=>({...s,dateRange:{...s.dateRange,start:e.target.value}}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o._,{htmlFor:"endDate",className:"text-sm text-muted-foreground",children:"Data Final"}),(0,r.jsx)(d.I,{id:"endDate",type:"date",value:S.dateRange.end,onChange:e=>M(s=>({...s,dateRange:{...s.dateRange,end:e.target.value}}))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(l.z,{variant:"ghost",onClick:()=>F(!p),className:"p-0 h-auto font-normal",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),p?"Ocultar":"Mostrar"," Op\xe7\xf5es Avan\xe7adas"]}),p&&(0,r.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"category",children:"Categoria (Filtro)"}),(0,r.jsx)(d.I,{id:"category",placeholder:"ex: api, user_action",value:S.filters.category||"",onChange:e=>M(s=>({...s,filters:{...s.filters,category:e.target.value}}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"status",children:"Status (Filtro)"}),(0,r.jsxs)(i.Ph,{value:S.filters.status||"",onValueChange:e=>M(s=>({...s,filters:{...s.filters,status:e}})),children:[(0,r.jsx)(i.i4,{children:(0,r.jsx)(i.ki,{placeholder:"Todos os status"})}),(0,r.jsxs)(i.Bw,{children:[(0,r.jsx)(i.Ql,{value:"",children:"Todos"}),(0,r.jsx)(i.Ql,{value:"success",children:"Sucesso"}),(0,r.jsx)(i.Ql,{value:"error",children:"Erro"}),(0,r.jsx)(i.Ql,{value:"warning",children:"Aviso"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.X,{id:"includeMetadata",checked:S.includeMetadata,onCheckedChange:e=>M(s=>({...s,includeMetadata:!!e}))}),(0,r.jsx)(o._,{htmlFor:"includeMetadata",className:"text-sm",children:"Incluir Metadados"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.X,{id:"compression",checked:S.compression,onCheckedChange:e=>M(s=>({...s,compression:!!e}))}),(0,r.jsx)(o._,{htmlFor:"compression",className:"text-sm",children:"Compress\xe3o"})]})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(l.z,{onClick:T,disabled:e,className:"min-w-[150px]",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Exportando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Exportar Dados"]})})})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5"}),"Hist\xf3rico de Exporta\xe7\xf5es"]}),(0,r.jsx)(n.SZ,{children:"Suas exporta\xe7\xf5es recentes"})]}),(0,r.jsx)(n.aY,{children:m?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(N.Z,{className:"h-6 w-6 animate-spin"}),(0,r.jsx)("span",{className:"ml-2",children:"Carregando hist\xf3rico..."})]}):0===a.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(w.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"Nenhuma exporta\xe7\xe3o encontrada"})]}):(0,r.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[P(e.format),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.filename}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[_[e.dataType]," • "," ",(0,k.WU)(new Date(e.createdAt),"dd/MM/yyyy HH:mm",{locale:Z.F})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-right text-sm",children:[(0,r.jsxs)("div",{className:"font-medium",children:[e.recordCount.toLocaleString()," registros"]}),(0,r.jsxs)("div",{className:"text-muted-foreground",children:[D(e.fileSize)," • ",e.processingTime,"ms"]})]}),(0,r.jsxs)(u.C,{variant:"success"===e.status?"default":"destructive",children:["success"===e.status?(0,r.jsx)(C.Z,{className:"h-3 w-3 mr-1"}):(0,r.jsx)(R.Z,{className:"h-3 w-3 mr-1"}),"success"===e.status?"Sucesso":"Erro"]})]})]},e.id))})})]})]})}},41875:function(e,s,a){"use strict";a.d(s,{C:function(){return i}});var r=a(57437);a(2265);var t=a(90535),n=a(22835);let l=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),s),...t})}},92595:function(e,s,a){"use strict";a.d(s,{d:function(){return i},z:function(){return d}});var r=a(57437),t=a(2265),n=a(90535),l=a(22835);let i=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:a,variant:t,size:n,asChild:d=!1,...o}=e;return(0,r.jsx)(d?"span":"button",{className:(0,l.cn)(i({variant:t,size:n,className:a})),ref:s,...o})});d.displayName="Button"},34029:function(e,s,a){"use strict";a.d(s,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=a(57437),t=a(2265),n=a(22835);let l=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...t})});l.displayName="Card";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...t})});i.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...t})});o.displayName="CardDescription";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...t})});u.displayName="CardFooter"},95523:function(e,s,a){"use strict";a.d(s,{X:function(){return d}});var r=a(57437),t=a(2265),n=a(9270),l=a(30401),i=a(22835);let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:(0,r.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})})});d.displayName=n.fC.displayName},81973:function(e,s,a){"use strict";a.d(s,{I:function(){return l}});var r=a(57437),t=a(2265),n=a(22835);let l=t.forwardRef((e,s)=>{let{className:a,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"},46393:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var r=a(57437),t=a(2265),n=a(6394),l=a(90535),i=a(22835);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.f,{ref:s,className:(0,i.cn)(d(),a),...t})});o.displayName=n.f.displayName},60967:function(e,s,a){"use strict";a.d(s,{Bw:function(){return x},Ph:function(){return o},Ql:function(){return f},i4:function(){return u},ki:function(){return c}});var r=a(57437),t=a(2265),n=a(56873),l=a(40875),i=a(30401),d=a(22835);let o=n.fC;n.ZA;let c=n.B4,u=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(n.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:[t,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.xz.displayName;let x=t.forwardRef((e,s)=>{let{className:a,children:t,position:l="popper",...i}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsx)(n.VY,{ref:s,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:(0,r.jsx)(n.l_,{className:(0,d.cn)("popper"===l&&"p-1",a),children:t})})})});x.displayName=n.VY.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=n.__.displayName;let f=t.forwardRef((e,s)=>{let{className:a,children:t,...l}=e;return(0,r.jsxs)(n.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:t})]})});f.displayName=n.ck.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=n.Z0.displayName},22835:function(e,s,a){"use strict";a.d(s,{cn:function(){return n}});var r=a(61994),t=a(53335);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.m6)((0,r.W)(s))}}},function(e){e.O(0,[6137,7479,5644,3347,6241,51,1787,243,3566,2971,2117,1744],function(){return e(e.s=6189)}),_N_E=e.O()}]);