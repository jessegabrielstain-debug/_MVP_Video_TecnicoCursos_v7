(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5544],{20556:function(e,r,t){Promise.resolve().then(t.bind(t,58420)),Promise.resolve().then(t.bind(t,17481))},26202:function(e,r,t){"use strict";t.d(r,{F$:function(){return l},Q5:function(){return c},qE:function(){return i}});var s=t(57437),n=t(2265),a=t(22835);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n})});i.displayName="Avatar";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("img",{ref:r,className:(0,a.cn)("aspect-square h-full w-full",t),...n})});l.displayName="AvatarImage";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n})});c.displayName="AvatarFallback"},41875:function(e,r,t){"use strict";t.d(r,{C:function(){return l}});var s=t(57437);t(2265);var n=t(90535),a=t(22835);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:t}),r),...n})}},92595:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return c}});var s=t(57437),n=t(2265),a=t(90535),i=t(22835);let l=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,size:a,asChild:c=!1,...d}=e;return(0,s.jsx)(c?"span":"button",{className:(0,i.cn)(l({variant:n,size:a,className:t})),ref:r,...d})});c.displayName="Button"},34029:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var s=t(57437),n=t(2265),a=t(22835);let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...n})});i.displayName="Card";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},81973:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var s=t(57437),n=t(2265),a=t(22835);let i=n.forwardRef((e,r)=>{let{className:t,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});i.displayName="Input"},46393:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var s=t(57437),n=t(2265),a=t(6394),i=t(90535),l=t(22835);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.f,{ref:r,className:(0,l.cn)(c(),t),...n})});d.displayName=a.f.displayName},6403:function(e,r,t){"use strict";t.d(r,{B:function(){return c},x:function(){return l}});var s=t(57437),n=t(2265),a=t(43643),i=t(22835);let l=n.forwardRef((e,r)=>{let{className:t,children:n,...l}=e;return(0,s.jsxs)(a.fC,{ref:r,className:(0,i.cn)("relative overflow-hidden",t),...l,children:[(0,s.jsx)(a.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(c,{}),(0,s.jsx)(a.Ns,{})]})});l.displayName=a.fC.displayName;let c=n.forwardRef((e,r)=>{let{className:t,orientation:n="vertical",...l}=e;return(0,s.jsx)(a.gb,{ref:r,orientation:n,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 border-t border-t-transparent p-[1px]",t),...l,children:(0,s.jsx)(a.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=a.gb.displayName},58420:function(e,r,t){"use strict";t.d(r,{UserActivityLog:function(){return h}});var s=t(57437),n=t(2265),a=t(27669),i=t(34029),l=t(6403),c=t(83926),d=t(98728),o=t(92369),u=t(42488),f=t(51817),m=t(91723),x=t(39795),p=t(66916);function h(e){let{userId:r,limit:t=20,showFilters:h=!1}=e,[g,v]=(0,n.useState)([]),[j,N]=(0,n.useState)(!0),b=(0,a.W)();(0,n.useEffect)(()=>{(async()=>{try{N(!0);let{data:e,error:s}=await b.from("analytics_events").select("*").eq("user_id",r).order("created_at",{ascending:!1}).limit(t);if(s)throw s;e&&v(e)}catch(e){console.error("Error fetching activity:",e)}finally{N(!1)}})()},[r,t,b]);let y=e=>e.includes("video")||e.includes("render")?(0,s.jsx)(c.Z,{className:"h-4 w-4"}):e.includes("settings")||e.includes("config")?(0,s.jsx)(d.Z,{className:"h-4 w-4"}):e.includes("user")||e.includes("profile")?(0,s.jsx)(o.Z,{className:"h-4 w-4"}):(0,s.jsx)(u.Z,{className:"h-4 w-4"}),w=e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return j?(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsx)(i.ll,{children:"Atividade Recente"})}),(0,s.jsx)(i.aY,{className:"flex justify-center p-6",children:(0,s.jsx)(f.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5"}),"Hist\xf3rico de Atividades"]}),(0,s.jsx)(i.SZ,{children:"Suas \xfaltimas a\xe7\xf5es e eventos no sistema."})]}),(0,s.jsx)(i.aY,{children:0===g.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma atividade registrada recentemente."}):(0,s.jsx)(l.x,{className:"h-[400px] pr-4",children:(0,s.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,s.jsxs)("div",{className:"flex items-start gap-4 pb-4 border-b last:border-0 last:pb-0",children:[(0,s.jsx)("div",{className:"mt-1 bg-muted p-2 rounded-full",children:y(e.event_type)}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:w(e.event_type)}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,x.Q)(new Date(e.created_at),{addSuffix:!0,locale:p.F})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:JSON.stringify(e.event_data)})]})]},e.id))})})})]})}},17481:function(e,r,t){"use strict";t.d(r,{UserProfile:function(){return v}});var s=t(57437),n=t(2265),a=t(27669),i=t(34029),l=t(92595),c=t(81973),d=t(46393),o=t(26202),u=t(41875),f=t(51817),m=t(92369),x=t(88906),p=t(88226),h=t(31047),g=t(14438);function v(e){let{userId:r,editable:t=!1,showStats:v=!0,showActivity:j=!1}=e,[N,b]=(0,n.useState)(null),[y,w]=(0,n.useState)(!0),[_,C]=(0,n.useState)(!1),[Z,I]=(0,n.useState)(!1),[E,S]=(0,n.useState)({full_name:"",email:""}),k=(0,a.W)();(0,n.useEffect)(()=>{(async()=>{try{w(!0);let{data:e,error:t}=await k.from("users").select("*").eq("id",r).single();if(t)throw t;e&&(b(e),S({full_name:e.name||"",email:e.email||""}))}catch(e){console.error("Error fetching profile:",e),g.Am.error("Erro ao carregar perfil")}finally{w(!1)}})()},[r,k]);let A=async()=>{if(N)try{C(!0);let{error:e}=await k.from("users").update({name:E.full_name,updated_at:new Date().toISOString()}).eq("id",r);if(e)throw e;g.Am.success("Perfil atualizado com sucesso"),I(!1);let{data:t}=await k.from("users").select("*").eq("id",r).single();t&&b(t)}catch(e){console.error("Error updating profile:",e),g.Am.error("Erro ao atualizar perfil")}finally{C(!1)}};if(y)return(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(f.Z,{className:"h-8 w-8 animate-spin text-primary"})});if(!N)return(0,s.jsx)(i.Zb,{children:(0,s.jsx)(i.aY,{className:"p-6 text-center text-muted-foreground",children:"Perfil n\xe3o encontrado."})});let R=N.name||"Usu\xe1rio",z=R.substring(0,2).toUpperCase(),P=N.metadata||{},O=P.credits||0,U=P.subscription_tier||"Free";return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(o.qE,{className:"h-16 w-16",children:[(0,s.jsx)(o.F$,{src:N.avatar_url||void 0}),(0,s.jsx)(o.Q5,{children:z})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ll,{children:R}),(0,s.jsxs)(i.SZ,{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(u.C,{variant:"outline",className:"text-xs",children:N.role}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Membro desde ",N.created_at?new Date(N.created_at).toLocaleDateString():"-"]})]})]})]}),t&&!Z&&(0,s.jsx)(l.z,{onClick:()=>I(!0),variant:"outline",children:"Editar Perfil"})]})}),(0,s.jsx)(i.aY,{children:Z?(0,s.jsxs)("div",{className:"space-y-4 max-w-md",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d._,{htmlFor:"full_name",children:"Nome Completo"}),(0,s.jsx)(c.I,{id:"full_name",value:E.full_name,onChange:e=>S({...E,full_name:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(l.z,{onClick:A,disabled:_,children:[_&&(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar"]}),(0,s.jsx)(l.z,{variant:"ghost",onClick:()=>I(!1),disabled:_,children:"Cancelar"})]})]}):(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Informa\xe7\xf5es Pessoais"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{children:R})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"capitalize",children:N.role})]})]}),v&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Estat\xedsticas"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("span",{children:[O," cr\xe9ditos dispon\xedveis"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("span",{children:["Plano: ",U]})]})]})]})})]})})}},27669:function(e,r,t){"use strict";t.d(r,{W:function(){return i}});var s=t(17272);let n=null,a=null;function i(){if(a)return a;let{url:e,anonKey:r}=function(){if(n)return n;let e="https://ofhzrdiadxigrvmrhaiz.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ";if(!e||!r)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables");return n={url:e,anonKey:r}}();return a=(0,s.createBrowserClient)(e,r)}},22835:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var s=t(61994),n=t(53335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,s.W)(r))}}},function(e){e.O(0,[6137,5644,4919,7272,926,1787,9795,8939,2971,2117,1744],function(){return e(e.s=20556)}),_N_E=e.O()}]);