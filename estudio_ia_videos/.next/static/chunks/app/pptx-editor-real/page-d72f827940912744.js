(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2301],{38543:function(e,s,a){Promise.resolve().then(a.bind(a,79666))},79666:function(e,s,a){"use strict";a.d(s,{ProfessionalPPTXStudio:function(){return eE}});var t=a(57437),r=a(2265),l=a(34029),i=a(92595),n=a(51098),o=a(41875),c=a(72927),d=a(69064),m=a(51817),x=a(41671),u=a(49322),h=a(17689),p=a(12805),g=a(4554),j=a(81706),f=a(92735),v=a(50091),b=a(11239),N=a(33276),y=a(99376),w=a(85598),k=a(55238),C=a(41236),S=a(62060),z=a(98728),Z=a(48736),E=a(91723),D=a(53113);function I(e){var s;let{onProcessComplete:a,onCancel:n}=e,o=(0,y.useRouter)(),[c,p]=(0,r.useState)({status:"idle",progress:0}),[g,j]=(0,r.useState)([]),f=e=>{console.log("\uD83D\uDCCB UPLOAD LOG: ".concat(e)),j(s=>[...s.slice(-4),"".concat(new Date().toLocaleTimeString(),": ").concat(e)])},b=(0,r.useCallback)(async e=>{let s=e[0];if(s){p({status:"uploading",progress:0,file:s}),j([]),f("Iniciando upload: ".concat(s.name," (").concat((s.size/1024/1024).toFixed(2)," MB)"));try{var t,r,l,i,n,o,c,m,x,u;f("\uD83D\uDCE4 Enviando arquivo para S3...");let e=new FormData;e.append("file",s);let h=await fetch("/api/v1/pptx/upload-production",{method:"POST",body:e});if(!h.ok){let e=await h.json();throw Error(e.error||"Erro no upload")}let g=await h.json();f("✅ Upload conclu\xeddo! Projeto criado: ".concat(g.project.id)),p(e=>({...e,progress:50,projectId:g.project.id})),f("\uD83D\uDD27 Iniciando processamento do PPTX..."),p(e=>({...e,status:"processing",progress:60}));let j=await fetch("/api/v1/pptx/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s3Key:g.job.s3Key,projectId:g.project.id})});if(!j.ok){let e=await j.json();throw Error(e.error||"Erro no processamento")}let v=await j.json();f("✅ Processamento conclu\xeddo! ".concat((null===(r=v.extractedContent)||void 0===r?void 0:null===(t=r.slides)||void 0===t?void 0:t.length)||0," slides extra\xeddos"));let b={slides:(null===(i=v.extractedContent)||void 0===i?void 0:null===(l=i.slides)||void 0===l?void 0:l.length)||0,duration:Math.round((null===(o=v.extractedContent)||void 0===o?void 0:null===(n=o.timeline)||void 0===n?void 0:n.totalDuration)||0),assets:(null===(x=v.extractedContent)||void 0===x?void 0:null===(m=x.assets)||void 0===m?void 0:null===(c=m.images)||void 0===c?void 0:c.length)||0,timeline:null===(u=v.extractedContent)||void 0===u?void 0:u.timeline,s3Key:g.job.s3Key,fileName:s.name,processingTime:0,projectId:g.project.id};p({status:"complete",progress:100,file:s,result:b,projectId:g.project.id}),f("\uD83C\uDF89 Processo completo! Dados salvos no banco de dados."),d.Am.success("✅ Upload e processamento conclu\xeddos!"),a&&a(b)}catch(e){console.error("❌ Upload/Processing Error:",e),f("❌ Erro: ".concat(e instanceof Error?e.message:"Erro desconhecido")),p({status:"error",progress:0,file:s,error:e instanceof Error?e.message:"Erro desconhecido"}),d.Am.error("❌ Erro no upload/processamento")}}},[a]),{getRootProps:I,getInputProps:T,isDragActive:R}=(0,w.uI)({onDrop:b,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},maxFiles:1,disabled:"uploading"===c.status||"processing"===c.status});return(0,t.jsxs)(l.Zb,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsx)(l.Ol,{className:"text-center",children:(0,t.jsxs)(l.ll,{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-6 w-6"}),"Upload PPTX Real - Produ\xe7\xe3o"]})}),(0,t.jsxs)(l.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{...I(),className:"\n            border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all\n            ".concat(R?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400","\n            ").concat("uploading"===c.status||"processing"===c.status?"opacity-50 cursor-not-allowed":"","\n          "),children:[(0,t.jsx)("input",{...T()}),(0,t.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:R?"Solte o arquivo aqui...":"Arraste um arquivo PPTX ou clique para selecionar"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Apenas arquivos .pptx s\xe3o aceitos (m\xe1x. 100MB)"})]}),"idle"!==c.status&&(0,t.jsx)(l.Zb,{children:(0,t.jsxs)(l.aY,{className:"pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["uploading"===c.status&&(0,t.jsx)(m.Z,{className:"h-5 w-5 animate-spin text-blue-500"}),"processing"===c.status&&(0,t.jsx)(z.Z,{className:"h-5 w-5 animate-spin text-orange-500"}),"complete"===c.status&&(0,t.jsx)(x.Z,{className:"h-5 w-5 text-green-500"}),"error"===c.status&&(0,t.jsx)(u.Z,{className:"h-5 w-5 text-red-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:null===(s=c.file)||void 0===s?void 0:s.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["uploading"===c.status&&"Enviando para S3...","processing"===c.status&&"Processando conte\xfado...","complete"===c.status&&"Processamento conclu\xeddo","error"===c.status&&"Erro no processamento"]})]})]}),"error"!==c.status&&(0,t.jsx)("div",{className:"w-16 h-16",children:(0,t.jsx)(k.Ip,{value:c.progress,text:"".concat(c.progress,"%"),styles:(0,k.y3)({textSize:"20px",pathColor:"complete"===c.status?"#10B981":"#3B82F6",textColor:"complete"===c.status?"#10B981":"#3B82F6"})})})]}),(0,t.jsx)(C.E,{value:c.progress,className:"mb-4"}),c.projectId&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 text-blue-500"}),(0,t.jsxs)("span",{className:"text-sm font-mono",children:["Projeto ID: ",c.projectId]})]})]})}),"complete"===c.status&&c.result&&(0,t.jsx)(l.Zb,{className:"bg-green-50 border-green-200",children:(0,t.jsxs)(l.aY,{className:"pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-green-800",children:"Processamento Conclu\xeddo!"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(Z.Z,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),(0,t.jsx)("div",{className:"font-bold text-xl",children:c.result.slides}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Slides"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(E.Z,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),(0,t.jsxs)("div",{className:"font-bold text-xl",children:[c.result.duration,"s"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Dura\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(D.Z,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),(0,t.jsx)("div",{className:"font-bold text-xl",children:c.result.assets}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Assets"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(v.Z,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),(0,t.jsx)("div",{className:"font-bold text-xl",children:"✓"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Salvo no DB"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(i.z,{onClick:()=>{c.projectId?(f("\uD83D\uDD17 Redirecionando para editor com projeto: ".concat(c.projectId)),o.push("/pptx-editor-real?projectId=".concat(c.projectId))):d.Am.error("ID do projeto n\xe3o dispon\xedvel")},className:"flex-1",children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Ir para Editor"]}),(0,t.jsx)(i.z,{variant:"outline",onClick:()=>p({status:"idle",progress:0}),children:"Novo Upload"})]})]})}),"error"===c.status&&c.error&&(0,t.jsxs)(S.bZ,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)(S.X,{className:"text-red-800",children:c.error})]}),g.length>0&&(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)(l.ll,{className:"text-sm",children:"Logs de Processamento"})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-xs space-y-1 max-h-32 overflow-y-auto",children:g.map((e,s)=>(0,t.jsx)("div",{children:e},s))})})]})]})]})}a(45125);var T=a(65046),R=a(81973),P=a(46393),O=a(16443),A=a(61094),M=a(40519),U=a(75277),F=a(28124),L=a(42208),B=a(87769),G=a(66337),V=a(49589),_=a(18930),Y=a(58922);let X=null;function J(e){var s;let{width:a=800,height:m=600,onCanvasUpdate:x,initialData:u,projectName:h="Projeto Canvas"}=e,p=(0,r.useRef)(null),g=(0,r.useRef)(null),j=(0,r.useRef)(null),[v,b]=(0,r.useState)("select"),[N,y]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[C,S]=(0,r.useState)([100]),[E,I]=(0,r.useState)(!1),[J,q]=(0,r.useState)(20),{fabric:K}=(0,Y.h6)(),W=[{id:"select",label:"Selecionar",icon:O.Z},{id:"rect",label:"Ret\xe2ngulo",icon:A.Z},{id:"circle",label:"C\xedrculo",icon:M.Z},{id:"text",label:"Texto",icon:U.Z},{id:"image",label:"Imagem",icon:D.Z}];(0,r.useEffect)(()=>{K&&(X=K)},[K]),(0,r.useEffect)(()=>{if(!K||!p.current||g.current||!X)return;let e=new X.Canvas(p.current,{width:a,height:m,backgroundColor:"#ffffff",selection:!0,preserveObjectStacking:!0});return g.current=e,e.on("selection:created",()=>Q(e)),e.on("selection:updated",()=>Q(e)),e.on("selection:cleared",()=>Q(e)),e.on("object:added",()=>Q(e)),e.on("object:removed",()=>Q(e)),u&&e.loadFromJSON(u,()=>{e.renderAll(),Q(e)}),Q(e),()=>{e.dispose()}},[a,m,u,K]);let Q=e=>{y(e.getObjects().map((e,s)=>({id:e.id||"object-".concat(s),type:e.type||"unknown",name:e.name||"".concat(e.type||"Object"," ").concat(s+1),visible:!1!==e.visible,locked:!1===e.selectable,fabricObject:e}))),x&&x(e.toJSON())},H=()=>{let e=g.current;if(!e||!X)return;let s=new X.Rect({left:100,top:100,width:200,height:100,fill:"#3b82f6",stroke:"#1e40af",strokeWidth:2,id:"rect-".concat(Date.now())});e.add(s),e.setActiveObject(s),Q(e),d.Am.success("Ret\xe2ngulo adicionado!")},$=()=>{let e=g.current;if(!e||!X)return;let s=new X.Circle({left:150,top:150,radius:50,fill:"#10b981",stroke:"#059669",strokeWidth:2,id:"circle-".concat(Date.now())});e.add(s),e.setActiveObject(s),Q(e),d.Am.success("C\xedrculo adicionado!")},ee=()=>{let e=g.current;if(!e||!X)return;let s=new X.Text("Novo Texto",{left:200,top:200,fontSize:24,fill:"#1f2937",fontFamily:"Arial",id:"text-".concat(Date.now())});e.add(s),e.setActiveObject(s),Q(e),d.Am.success("Texto adicionado!")},es=()=>{var e;null===(e=j.current)||void 0===e||e.click()},ea=e=>{let s=g.current;if(!s)return;let a=s.getObjects().find(s=>s.id===e);a&&(a.visible=!a.visible,s.renderAll(),Q(s))},et=e=>{let s=g.current;if(!s)return;let a=s.getObjects().find(s=>s.id===e);a&&(a.selectable=!a.selectable,a.evented=a.selectable,s.renderAll(),Q(s))},er=e=>{let s=g.current;if(!s)return;let a=e[0]/100;S(e),s.setZoom(a),s.renderAll()},el=e=>{let s=g.current;if(s)switch(e){case"png":ei(s.toDataURL({multiplier:1,format:"png",quality:1}),"".concat(h,".png"));break;case"jpg":ei(s.toDataURL({multiplier:1,format:"jpeg",quality:.9}),"".concat(h,".jpg"));break;case"json":let a=JSON.stringify(s.toJSON(),null,2);ei("data:application/json;charset=utf-8,".concat(encodeURIComponent(a)),"".concat(h,".json"))}},ei=(e,s)=>{let a=document.createElement("a");a.href=e,a.download=s,a.click(),d.Am.success("".concat(s," exportado com sucesso!"))},en=e=>{switch(b(e),e){case"rect":H();break;case"circle":$();break;case"text":ee();break;case"image":es()}};return K?(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsxs)("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Canvas Editor"}),(0,t.jsx)(o.C,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Production Ready"})]}),(0,t.jsx)(R.I,{value:h,className:"text-sm",placeholder:"Nome do projeto",readOnly:!0})]}),(0,t.jsxs)(n.mQ,{defaultValue:"tools",className:"flex-1 flex flex-col",children:[(0,t.jsxs)(n.dr,{className:"grid w-full grid-cols-3 mx-4 mt-4",children:[(0,t.jsx)(n.SP,{value:"tools",children:"Ferramentas"}),(0,t.jsx)(n.SP,{value:"layers",children:"Layers"}),(0,t.jsx)(n.SP,{value:"export",children:"Export"})]}),(0,t.jsxs)(n.nU,{value:"tools",className:"flex-1 p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(P._,{className:"text-sm font-medium mb-2 block",children:"Ferramentas"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:W.map(e=>{let s=e.icon;return(0,t.jsxs)(i.z,{variant:v===e.id?"default":"outline",size:"sm",onClick:()=>en(e.id),className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(s,{className:"h-4 w-4"}),e.label]},e.id)})})]}),(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(P._,{className:"text-sm font-medium mb-2 block",children:["Zoom (",C[0],"%)"]}),(0,t.jsx)(T.i,{value:C,onValueChange:er,min:10,max:500,step:10,className:"w-full"}),(0,t.jsx)("div",{className:"flex gap-2 mt-2",children:(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>er([100]),children:"100%"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"snapToGrid",checked:E,onChange:e=>I(e.target.checked),className:"rounded"}),(0,t.jsx)(P._,{htmlFor:"snapToGrid",className:"text-sm",children:"Snap to Grid"})]})]})]}),(0,t.jsx)(n.nU,{value:"layers",className:"flex-1 p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)(P._,{className:"text-sm font-medium",children:["Layers (",N.length,")"]})}),0===N.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,t.jsx)(F.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"Nenhum objeto no canvas"})]}):(0,t.jsx)("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:N.map((e,s)=>(0,t.jsx)(l.Zb,{className:"p-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded ".concat("rect"===e.type?"bg-blue-500":"circle"===e.type?"bg-green-500":"text"===e.type?"bg-purple-500":"image"===e.type?"bg-orange-500":"bg-gray-500")}),(0,t.jsx)("span",{className:"text-xs font-medium truncate max-w-24",children:e.name})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>ea(e.id),className:"h-6 w-6 p-0",children:e.visible?(0,t.jsx)(L.Z,{className:"h-3 w-3"}):(0,t.jsx)(B.Z,{className:"h-3 w-3"})}),(0,t.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>et(e.id),className:"h-6 w-6 p-0",children:e.locked?(0,t.jsx)(G.Z,{className:"h-3 w-3"}):(0,t.jsx)(V.Z,{className:"h-3 w-3"})})]})]})},e.id))})]})}),(0,t.jsx)(n.nU,{value:"export",className:"flex-1 p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(P._,{className:"text-sm font-medium",children:"Exportar Canvas"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>el("png"),className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"PNG"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>el("jpg"),className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"JPG"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>el("json"),className:"flex items-center gap-2",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4"}),"JSON"]})]}),(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)(P._,{className:"text-sm font-medium mb-2 block",children:"Canvas Info"}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[(0,t.jsxs)("p",{children:["Tamanho: ",a,"\xd7",m,"px"]}),(0,t.jsxs)("p",{children:["Objetos: ",N.length]}),(0,t.jsxs)("p",{children:["Zoom: ",C[0],"%"]}),(0,t.jsxs)("p",{children:["Grade: ",E?"".concat(J,"px"):"Desabilitada"]})]})]})]})})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(i.z,{size:"sm",variant:"destructive",onClick:()=>{let e=g.current;if(!e)return;let s=e.getActiveObjects();s.length>0&&(e.remove(...s),e.discardActiveObject(),Q(e),d.Am.success("".concat(s.length," objeto(s) removido(s)")))},disabled:0===w.length,className:"flex items-center gap-1",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4"}),"Excluir"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.C,{variant:"secondary",className:"text-xs",children:[w.length," selecionado(s)"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4"}),"Config"]})]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-gray-100 dark:bg-gray-900 p-8",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"relative bg-white shadow-lg",children:[(0,t.jsx)("canvas",{ref:p,className:"border border-gray-300 dark:border-gray-600"}),E&&(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{backgroundImage:"\n                      linear-gradient(to right, #e5e7eb 1px, transparent 1px),\n                      linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)\n                    ",backgroundSize:"".concat(J,"px ").concat(J,"px")}})]})})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{children:["Canvas: ",a,"\xd7",m,"px"]}),(0,t.jsxs)("span",{children:["Zoom: ",C[0],"%"]}),(0,t.jsxs)("span",{children:["Objetos: ",N.length]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{children:["Tool: ",null===(s=W.find(e=>e.id===v))||void 0===s?void 0:s.label]}),(0,t.jsxs)("span",{children:["Snap: ",E?"ON":"OFF"]})]})]})})]}),(0,t.jsx)("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a||!g.current||!X)return;let t=new FileReader;t.onload=e=>{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result;X.Image.fromURL(a).then(e=>{let s=g.current,a=.5*(s.width||800),t=.5*(s.height||600),r=Math.min(a/(e.width||1),t/(e.height||1));e.set({left:100,top:100,scaleX:r,scaleY:r,id:"image-".concat(Date.now())}),s.add(e),s.setActiveObject(e),Q(s),d.Am.success("Imagem adicionada!")})},t.readAsDataURL(a)}})]}):(0,t.jsx)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Carregando Canvas Editor..."}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Inicializando Fabric.js"})]})})}var q=a(98894),K=a(67011),W=a(53289),Q=a(94222),H=a(6403),$=a(15353),ee=a(82023),es=a(29374),ea=a(48662),et=a(85954),er=a(45274),el=a(20740),ei=a(89227),en=a(86479),eo=a(51548),ec=a(45802),ed=a(43391),em=a(69076),ex=a(41414),eu=a(58896),eh=a(99397),ep=a(78867),eg=a(22835),ej=a(87735),ef=a(14438);let ev=["low","medium","high"],eb=e=>ev.some(s=>s===e),eN="timeline_item",ey=e=>{var s,a;let{item:l,track:i,zoom:n,onSelect:o,onMove:c,onResize:d,selected:m,snapToGrid:x,gridSize:u}=e,[{isDragging:h},p]=(0,q.c)({type:eN,item:{id:l.id,trackId:i.id,type:"move"},collect:e=>({isDragging:e.isDragging()})}),[g,j]=(0,r.useState)(!1);(0,r.useRef)(null);let f=(0,r.useCallback)(e=>{2!==e.detail&&o(l.id,e.ctrlKey||e.metaKey)},[l.id,o]),v=(0,r.useCallback)(e=>{e.stopPropagation(),j(!0);let s=e.clientX,a=l.duration,t=e=>{let t=a+(e.clientX-s)/(50*n);x&&(t=Math.round(t/u)*u),t=Math.max(.1,t),d(i.id,l.id,t)},r=()=>{j(!1),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",r)},[l.duration,l.id,i.id,n,d,x,u]);return(0,t.jsx)("div",{ref:p,className:(0,eg.cn)("absolute top-2 rounded-lg border-2 transition-all duration-200 cursor-pointer group","hover:shadow-lg hover:scale-105",m?"border-blue-400 bg-blue-600/20 shadow-blue-400/50":"border-transparent",h&&"opacity-50",i.locked&&"cursor-not-allowed opacity-60"),style:{left:50*l.start*n,width:Math.max(50*l.duration*n,60),height:64,backgroundColor:i.color+"80",minWidth:60},onMouseDown:f,children:(0,t.jsxs)("div",{className:"h-full flex flex-col justify-between p-2 relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-white truncate",children:l.content}),l.keyframes&&l.keyframes.length>0&&(0,t.jsx)(ee.Z,{className:"w-3 h-3 text-yellow-400"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xs text-gray-200",children:(a=l.duration,"".concat(Math.floor(a/60).toString().padStart(2,"0"),":").concat(Math.floor(a%60).toString().padStart(2,"0")))}),l.effects&&l.effects.length>0&&(0,t.jsx)(b.Z,{className:"w-3 h-3 text-purple-400"})]}),(0,t.jsx)("div",{className:"absolute right-0 top-0 w-2 h-full cursor-ew-resize bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity",onMouseDown:v}),null===(s=l.keyframes)||void 0===s?void 0:s.map(e=>(0,t.jsx)("div",{className:"absolute top-0 w-1 h-full bg-yellow-400",style:{left:(e.time-l.start)*50*n}},e.id))]})})},ew=e=>{let{track:s,zoom:a,duration:r,selectedItems:l,onItemSelect:i,onItemMove:n,onItemResize:o,snapToGrid:c,gridSize:d}=e,[{isOver:m},x]=(0,K.L)({accept:eN,drop:(e,t)=>{let r=t.getClientOffset();if(!r)return;let l=document.getElementById("track-".concat(s.id));if(!l)return;let i=l.getBoundingClientRect(),o=(r.x-i.left)/(50*a);c&&(o=Math.round(o/d)*d),o=Math.max(0,o),n(s.id,e.id,o)},collect:e=>({isOver:e.isOver()})});return(0,t.jsxs)("div",{ref:x,id:"track-".concat(s.id),className:(0,eg.cn)("relative border-b border-gray-700 transition-colors",!s.visible&&"opacity-50",m&&"bg-blue-500/10"),style:{height:s.height||80,width:50*r*a},children:[c&&Array.from({length:Math.ceil(r/d)},(e,s)=>(0,t.jsx)("div",{className:"absolute top-0 h-full w-px bg-gray-600/30",style:{left:s*d*50*a}},s)),s.items.map(e=>(0,t.jsx)(ey,{item:e,track:s,zoom:a,onSelect:i,onMove:n,onResize:o,selected:l.includes(e.id),snapToGrid:c,gridSize:d},e.id))]})};function ek(){let[e,s]=(0,r.useState)({currentTime:0,duration:300,playing:!1,zoom:1,playbackSpeed:1,snapToGrid:!0,gridSize:1,previewQuality:"medium",tracks:[{id:"video-1",type:"video",name:"V\xeddeo Principal",color:"#3B82F6",visible:!0,locked:!1,height:80,items:[{id:"v1",start:0,duration:120,content:"Intro.mp4",keyframes:[{id:"kf1",time:0,properties:{opacity:0},easing:"ease-in"},{id:"kf2",time:2,properties:{opacity:1},easing:"ease-out"}]},{id:"v2",start:130,duration:80,content:"Conteudo.mp4"}]},{id:"audio-1",type:"audio",name:"Narra\xe7\xe3o TTS",color:"#10B981",visible:!0,locked:!1,volume:80,height:80,items:[{id:"a1",start:0,duration:200,content:"Narra\xe7\xe3o completa"}]},{id:"audio-2",type:"audio",name:"M\xfasica de Fundo",color:"#8B5CF6",visible:!0,locked:!1,volume:30,height:80,items:[{id:"a2",start:0,duration:300,content:"Background.mp3"}]},{id:"text-1",type:"text",name:"Legendas",color:"#F59E0B",visible:!0,locked:!1,height:80,items:[{id:"t1",start:10,duration:30,content:"Introdu\xe7\xe3o ao tema"},{id:"t2",start:50,duration:40,content:"Conceitos principais"}]},{id:"effect-1",type:"effect",name:"Transi\xe7\xf5es",color:"#EF4444",visible:!0,locked:!1,height:80,items:[{id:"e1",start:120,duration:3,content:"Fade In",effects:[{id:"fx1",type:"fade",parameters:{direction:"in"},enabled:!0}]},{id:"e2",start:207,duration:3,content:"Fade Out"}]}],selectedItems:[],renderSettings:{resolution:"1080p",fps:30,format:"mp4",quality:"high",audioSampleRate:48e3,audioBitrate:256}}),[a,n]=(0,r.useState)([]),[d,m]=(0,r.useState)(-1),[x,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),g=(0,r.useRef)(null),v=(0,r.useRef)(null),y=(0,r.useCallback)((e,s)=>{let a={action:e,timestamp:Date.now(),state:s};n(e=>{let s=e.slice(0,d+1);return s.push(a),s.slice(-50)}),m(e=>Math.min(e+1,49))},[d]),w=(0,r.useCallback)(()=>{if(d>0){let e=a[d-1];s(s=>({...s,...e.state})),m(e=>e-1),ef.Am.success("Desfez: ".concat(e.action))}},[a,d]),k=(0,r.useCallback)(()=>{if(d<a.length-1){let e=a[d+1];s(s=>({...s,...e.state})),m(e=>e+1),ef.Am.success("Refez: ".concat(e.action))}},[a,d]),C=(0,r.useCallback)(()=>{let a=!e.playing;s(e=>({...e,playing:a})),a?v.current=setInterval(()=>{s(e=>{let s=e.currentTime+.1*e.playbackSpeed;return s>=e.duration?(v.current&&clearInterval(v.current),{...e,playing:!1,currentTime:e.duration}):{...e,currentTime:s}})},100):v.current&&clearInterval(v.current)},[e.playing]),S=(0,r.useCallback)(e=>{s(s=>({...s,currentTime:Math.max(0,Math.min(e,s.duration))}))},[]),Z=(0,r.useCallback)(e=>{let a=Math.max(.1,Math.min(10,e));s(e=>({...e,zoom:a})),y("Zoom alterado",{zoom:a})},[y]),I=(0,r.useCallback)(e=>{s(s=>({...s,playbackSpeed:e}))},[]),R=(0,r.useCallback)(e=>{s(s=>({...s,tracks:s.tracks.map(s=>s.id===e?{...s,visible:!s.visible}:s)})),y("Visibilidade da track alterada",{})},[y]),O=(0,r.useCallback)(e=>{s(s=>({...s,tracks:s.tracks.map(s=>s.id===e?{...s,locked:!s.locked}:s)})),y("Lock da track alterado",{})},[y]),A=(0,r.useCallback)((e,a)=>{s(s=>({...s,tracks:s.tracks.map(s=>s.id===e?{...s,volume:a}:s)}))},[]),M=(0,r.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(s=>({...s,selectedItems:a?s.selectedItems.includes(e)?s.selectedItems.filter(s=>s!==e):[...s.selectedItems,e]:[e]}))},[]),Y=(0,r.useCallback)((e,a,t)=>{s(s=>({...s,tracks:s.tracks.map(s=>s.id===e?{...s,items:s.items.map(e=>e.id===a?{...e,start:Math.max(0,t)}:e)}:s)})),y("Item movido",{})},[y]),X=(0,r.useCallback)((e,a,t)=>{s(s=>({...s,tracks:s.tracks.map(s=>s.id===e?{...s,items:s.items.map(e=>e.id===a?{...e,duration:Math.max(.1,t)}:e)}:s)})),y("Item redimensionado",{})},[y]),J=(0,r.useCallback)(()=>{s(e=>{let s=e.tracks.map(s=>{let a=[...s.items];return s.items.forEach(s=>{if(e.selectedItems.includes(s.id)){let e={...s,id:"".concat(s.id,"-copy-").concat(Date.now()),start:s.start+s.duration+1};a.push(e)}}),{...s,items:a}});return{...e,tracks:s,selectedItems:[]}}),y("Itens duplicados",{}),ef.Am.success("Itens duplicados com sucesso")},[y]),q=(0,r.useCallback)(()=>{s(e=>({...e,tracks:e.tracks.map(s=>({...s,items:s.items.filter(s=>!e.selectedItems.includes(s.id))})),selectedItems:[]})),y("Itens deletados",{}),ef.Am.success("Itens deletados com sucesso")},[y]),K=(0,r.useCallback)(()=>{let s=new Blob([JSON.stringify({version:"2.0",metadata:{name:"Timeline Professional Export",duration:e.duration,fps:e.renderSettings.fps,resolution:e.renderSettings.resolution,exported:new Date().toISOString(),totalTracks:e.tracks.length,totalItems:e.tracks.reduce((e,s)=>e+s.items.length,0)},renderSettings:e.renderSettings,tracks:e.tracks.map(e=>({...e,items:e.items.map(s=>({...s,absoluteStart:s.start,absoluteEnd:s.start+s.duration,trackType:e.type,renderProperties:{visible:e.visible,volume:e.volume||100,effects:s.effects||[],keyframes:s.keyframes||[]}}))})),timeline:{currentTime:e.currentTime,zoom:e.zoom,snapToGrid:e.snapToGrid,gridSize:e.gridSize}},null,2)],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download="timeline-professional-".concat((0,ej.WU)(new Date,"yyyy-MM-dd-HH-mm-ss"),".json"),t.click(),URL.revokeObjectURL(a),ef.Am.success("Timeline exportada com sucesso!")},[e]);(0,r.useEffect)(()=>{let a=a=>{if(!(a.target instanceof HTMLInputElement))switch(a.key){case" ":a.preventDefault(),C();break;case"Delete":case"Backspace":q();break;case"c":(a.ctrlKey||a.metaKey)&&J();break;case"z":(a.ctrlKey||a.metaKey)&&(a.shiftKey?k():w());break;case"a":if(a.ctrlKey||a.metaKey){a.preventDefault();let t=e.tracks.flatMap(e=>e.items.map(e=>e.id));s(e=>({...e,selectedItems:t}))}}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[C,q,J,w,k,e.tracks]);let ee=(0,r.useCallback)(s=>{let a=Math.floor(s%1*e.renderSettings.fps);return"".concat(Math.floor(s/60).toString().padStart(2,"0"),":").concat(Math.floor(s%60).toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},[e.renderSettings.fps]),eg=e=>{switch(e){case"video":return(0,t.jsx)(es.Z,{className:"w-4 h-4"});case"audio":return(0,t.jsx)(ea.Z,{className:"w-4 h-4"});case"text":return(0,t.jsx)(U.Z,{className:"w-4 h-4"});case"image":return(0,t.jsx)(D.Z,{className:"w-4 h-4"});case"effect":return(0,t.jsx)(b.Z,{className:"w-4 h-4"});default:return(0,t.jsx)(F.Z,{className:"w-4 h-4"})}},ev=(0,r.useMemo)(()=>{let s=[],a=e.gridSize;for(let r=0;r<=e.duration;r+=a)s.push((0,t.jsx)("div",{className:"absolute border-l border-gray-600",style:{left:"".concat(50*r*e.zoom,"px"),height:"100%"},children:(0,t.jsx)("span",{className:"absolute top-1 left-1 text-xs text-gray-400",children:ee(r)})},r));return s},[e.duration,e.zoom,e.gridSize,ee]);return(0,t.jsx)(W.W,{backend:Q.PD,children:(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-gray-900 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-800 border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Timeline Professional"}),(0,t.jsx)(o.C,{variant:"secondary",className:"bg-blue-600",children:"v5.0 - FASE 5"}),(0,t.jsxs)(o.C,{variant:"outline",className:"text-green-400 border-green-400",children:[(0,t.jsx)(et.Z,{className:"w-3 h-3 mr-1"}),"Real-time Sync"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>S(0),className:"text-white hover:bg-gray-700",children:(0,t.jsx)(er.Z,{className:"w-4 h-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>S(Math.max(0,e.currentTime-10)),className:"text-white hover:bg-gray-700",children:(0,t.jsx)(el.Z,{className:"w-4 h-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:C,className:"text-white hover:bg-gray-700 bg-blue-600",children:e.playing?(0,t.jsx)(ei.Z,{className:"w-4 h-4"}):(0,t.jsx)(N.Z,{className:"w-4 h-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>S(Math.min(e.duration,e.currentTime+10)),className:"text-white hover:bg-gray-700",children:(0,t.jsx)(en.Z,{className:"w-4 h-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>S(e.duration),className:"text-white hover:bg-gray-700",children:(0,t.jsx)(eo.Z,{className:"w-4 h-4"})}),(0,t.jsx)(c.Z,{orientation:"vertical",className:"h-6"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(P._,{className:"text-xs",children:"Speed"}),(0,t.jsxs)("select",{value:e.playbackSpeed,onChange:e=>I(Number(e.target.value)),className:"bg-gray-700 text-white text-xs rounded px-2 py-1",children:[(0,t.jsx)("option",{value:.25,children:"0.25x"}),(0,t.jsx)("option",{value:.5,children:"0.5x"}),(0,t.jsx)("option",{value:1,children:"1x"}),(0,t.jsx)("option",{value:1.5,children:"1.5x"}),(0,t.jsx)("option",{value:2,children:"2x"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-sm font-mono bg-gray-700 px-3 py-1 rounded",children:[ee(e.currentTime)," / ",ee(e.duration)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>Z(e.zoom-.2),className:"text-white hover:bg-gray-700",children:(0,t.jsx)(ec.Z,{className:"w-4 h-4"})}),(0,t.jsx)(T.i,{min:.1,max:10,step:.1,value:[e.zoom],onValueChange:e=>{let[s]=e;return Z(s)},className:"w-20"}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>Z(e.zoom+.2),className:"text-white hover:bg-gray-700",children:(0,t.jsx)(ed.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 min-w-[40px]",children:[Math.round(100*e.zoom),"%"]})]}),(0,t.jsx)(c.Z,{orientation:"vertical",className:"h-6"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:w,disabled:d<=0,className:"text-white hover:bg-gray-700",children:(0,t.jsx)(em.Z,{className:"w-4 h-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:k,disabled:d>=a.length-1,className:"text-white hover:bg-gray-700",children:(0,t.jsx)(ex.Z,{className:"w-4 h-4"})})]}),(0,t.jsx)(c.Z,{orientation:"vertical",className:"h-6"}),(0,t.jsxs)(i.z,{onClick:()=>p(!0),variant:"ghost",className:"text-white hover:bg-gray-700",children:[(0,t.jsx)(z.Z,{className:"w-4 h-4 mr-2"}),"Render"]}),(0,t.jsxs)(i.z,{onClick:K,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-800/50 border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)($.r,{checked:e.snapToGrid,onCheckedChange:e=>s(s=>({...s,snapToGrid:e}))}),(0,t.jsx)(P._,{className:"text-xs",children:"Snap to Grid"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(P._,{className:"text-xs",children:"Grid"}),(0,t.jsxs)("select",{value:e.gridSize,onChange:e=>s(s=>({...s,gridSize:Number(e.target.value)})),className:"bg-gray-700 text-white text-xs rounded px-2 py-1",children:[(0,t.jsx)("option",{value:.1,children:"0.1s"}),(0,t.jsx)("option",{value:.5,children:"0.5s"}),(0,t.jsx)("option",{value:1,children:"1s"}),(0,t.jsx)("option",{value:5,children:"5s"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(P._,{className:"text-xs",children:"Preview"}),(0,t.jsxs)("select",{value:e.previewQuality,onChange:e=>s(s=>eb(e.target.value)?{...s,previewQuality:e.target.value}:s),className:"bg-gray-700 text-white text-xs rounded px-2 py-1",children:[(0,t.jsx)("option",{value:"low",children:"Low"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"high",children:"High"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.C,{variant:"outline",className:"text-blue-400 border-blue-400",children:[(0,t.jsx)(eu.Z,{className:"w-3 h-3 mr-1"}),e.selectedItems.length," selecionados"]}),(0,t.jsxs)(o.C,{variant:"outline",className:"text-green-400 border-green-400",children:[(0,t.jsx)(F.Z,{className:"w-3 h-3 mr-1"}),e.tracks.length," tracks"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-80 bg-gray-800 border-r border-gray-700 flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:"Tracks"}),(0,t.jsxs)(i.z,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(eh.Z,{className:"w-4 h-4 mr-2"}),"Add Track"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:J,children:[(0,t.jsx)(ep.Z,{className:"w-4 h-4 mr-1"}),"Duplicate"]}),(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:q,children:[(0,t.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),(0,t.jsx)(H.x,{className:"flex-1",children:(0,t.jsx)("div",{className:"p-2",children:e.tracks.map((s,a)=>(0,t.jsx)(l.Zb,{className:"mb-2 bg-gray-700 border-gray-600",children:(0,t.jsxs)(l.aY,{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[eg(s.type),(0,t.jsx)("span",{className:"text-sm font-medium",children:s.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>R(s.id),className:"w-6 h-6",children:s.visible?(0,t.jsx)(L.Z,{className:"w-3 h-3"}):(0,t.jsx)(B.Z,{className:"w-3 h-3"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>O(s.id),className:"w-6 h-6",children:s.locked?(0,t.jsx)(G.Z,{className:"w-3 h-3"}):(0,t.jsx)(V.Z,{className:"w-3 h-3"})})]})]}),(0,t.jsx)("div",{className:"w-full h-2 rounded mb-2",style:{backgroundColor:s.color+"40"},children:(0,t.jsx)("div",{className:"h-full rounded transition-all duration-300",style:{backgroundColor:s.color,width:"".concat(s.items.reduce((e,s)=>e+s.duration,0)/e.duration*100,"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mb-2",children:[s.items.length," items • ",Math.round(s.items.reduce((e,s)=>e+s.duration,0)),"s"]}),"audio"===s.type&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-3 h-3"}),(0,t.jsx)(T.i,{min:0,max:100,value:[s.volume||80],onValueChange:e=>{let[a]=e;return A(s.id,a)},className:"flex-1"}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 min-w-[30px]",children:[s.volume||80,"%"]})]})]})},s.id))})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-16 bg-gray-800 border-b border-gray-700 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0",children:ev}),(0,t.jsxs)("div",{className:"absolute top-0 w-0.5 h-full bg-red-500 z-20 cursor-pointer shadow-lg",style:{left:"".concat(50*e.currentTime*e.zoom,"px"),transform:"translateX(-1px)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.5)"},onClick:s=>{let a=s.currentTarget.parentElement.getBoundingClientRect();S((s.clientX-a.left)/(50*e.zoom))},children:[(0,t.jsx)("div",{className:"w-3 h-4 bg-red-500 -translate-x-1 rounded-b-sm shadow-lg"}),(0,t.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white text-xs px-1 rounded whitespace-nowrap",children:ee(e.currentTime)})]})]}),(0,t.jsx)(H.x,{className:"flex-1",children:(0,t.jsxs)("div",{ref:g,className:"relative bg-gray-900",style:{width:"".concat(50*e.duration*e.zoom,"px"),minHeight:"".concat(80*e.tracks.length,"px")},children:[e.tracks.map((s,a)=>(0,t.jsx)(ew,{track:s,zoom:e.zoom,duration:e.duration,selectedItems:e.selectedItems,onItemSelect:M,onItemMove:Y,onItemResize:X,snapToGrid:e.snapToGrid,gridSize:e.gridSize},s.id)),(0,t.jsx)("div",{className:"absolute top-0 w-0.5 bg-red-500 z-10 pointer-events-none",style:{left:"".concat(50*e.currentTime*e.zoom,"px"),height:"".concat(80*e.tracks.length,"px"),transform:"translateX(-1px)",boxShadow:"0 0 5px rgba(239, 68, 68, 0.3)"}})]})})]})]}),(0,t.jsxs)("div",{className:"h-10 bg-gray-800 border-t border-gray-700 flex items-center justify-between px-4 text-xs text-gray-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("span",{children:["Items selecionados: ",e.selectedItems.length]}),(0,t.jsxs)("span",{children:["Tracks: ",e.tracks.length]}),(0,t.jsxs)("span",{children:["Dura\xe7\xe3o total: ",ee(e.duration)]}),(0,t.jsxs)("span",{children:["FPS: ",e.renderSettings.fps]}),(0,t.jsxs)("span",{children:["Resolu\xe7\xe3o: ",e.renderSettings.resolution]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("span",{children:["Zoom: ",Math.round(100*e.zoom),"%"]}),(0,t.jsxs)("span",{children:["Grid: ",e.gridSize,"s"]}),(0,t.jsxs)("span",{children:["Speed: ",e.playbackSpeed,"x"]}),(0,t.jsxs)(o.C,{variant:"outline",className:"text-green-400 border-green-400",children:[(0,t.jsx)(E.Z,{className:"w-3 h-3 mr-1"}),"Sync Active"]})]})]})]})})}var eC=a(49665),eS=a(95805),ez=a(29202);function eZ(e){let{onVoiceSelect:s,onAudioGenerate:a,defaultText:n="Ol\xe1! Este \xe9 um exemplo de como minha voz soar\xe1 no seu projeto de treinamento em seguran\xe7a do trabalho."}=e,[c,x]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(!0),[f,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(n),[S,Z]=(0,r.useState)(""),[E,D]=(0,r.useState)("all"),[I,P]=(0,r.useState)({stability:.5,similarityBoost:.8,style:0,useSpeakerBoost:!0});(0,r.useEffect)(()=>{O()},[]);let O=async()=>{try{g(!0);let e=await fetch("/api/v1/tts/elevenlabs/voices"),s=await e.json();if(s.success)x(s.voices),d.Am.success("✅ ".concat(s.total," vozes carregadas!"));else throw Error(s.error||"Erro ao carregar vozes")}catch(s){let e=s instanceof Error?s.message:"Erro desconhecido";d.Am.error("❌ Erro ao carregar vozes: "+e),x([])}finally{g(!1)}},A=e=>{h(e),null==s||s(e)},M=async()=>{if(!u||!k.trim()){d.Am.error("Selecione uma voz e digite o texto");return}try{v(!0),d.Am.loading("\uD83C\uDF99️ Gerando \xe1udio...",{id:"tts"});let e=await fetch("/api/v1/tts/elevenlabs/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:k,voiceId:u.id,settings:{stability:I.stability,similarityBoost:I.similarityBoost,style:I.style,useSpeakerBoost:I.useSpeakerBoost}})}),s=await e.json();if(s.success){d.Am.success("✅ \xc1udio gerado!",{id:"tts"});let e=new Blob([Uint8Array.from(atob(s.audioBase64),e=>e.charCodeAt(0))],{type:"audio/mpeg"}),t=URL.createObjectURL(e);new Audio(t).play(),null==a||a(s)}else throw Error(s.error||"Erro na gera\xe7\xe3o")}catch(s){let e=s instanceof Error?s.message:"Erro desconhecido";d.Am.error("❌ Erro: "+e,{id:"tts"})}finally{v(!1)}},U=c.filter(e=>{let s=e.name.toLowerCase().includes(S.toLowerCase())||e.description.toLowerCase().includes(S.toLowerCase()),a="all"===E||e.category===E;return s&&a}),F=[{value:"all",label:"Todas",count:c.length},{value:"premade",label:"Padr\xe3o",count:c.filter(e=>"premade"===e.category).length},{value:"cloned",label:"Clonadas",count:c.filter(e=>"cloned"===e.category).length},{value:"professional",label:"Premium",count:c.filter(e=>"professional"===e.category).length}];return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsxs)(l.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{children:"Biblioteca ElevenLabs"}),(0,t.jsxs)(o.C,{variant:"secondary",children:[c.length," vozes"]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[(0,t.jsx)(R.I,{placeholder:"Buscar vozes...",value:S,onChange:e=>Z(e.target.value),className:"flex-1"}),(0,t.jsx)("div",{className:"flex space-x-2",children:F.map(e=>(0,t.jsxs)(i.z,{variant:E===e.value?"default":"outline",size:"sm",onClick:()=>D(e.value),children:[e.label," (",e.count,")"]},e.value))})]})]}),(0,t.jsx)(l.aY,{className:"max-h-96 overflow-y-auto",children:p?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(m.Z,{className:"h-6 w-6 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Carregando vozes..."})]}):(0,t.jsxs)("div",{className:"grid gap-3",children:[U.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 cursor-pointer transition-colors ".concat((null==u?void 0:u.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>A(e),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,t.jsxs)(o.C,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(eS.Z,{className:"h-3 w-3 mr-1"}),e.gender]}),(0,t.jsxs)(o.C,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(ez.Z,{className:"h-3 w-3 mr-1"}),e.accent]}),(0,t.jsx)(o.C,{variant:"outline",className:"text-xs",children:e.category})]})]}),e.previewUrl&&(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),new Audio(e.previewUrl).play()},children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})})]})},e.id)),0===U.length&&!p&&(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma voz encontrada com os filtros selecionados"})]})})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsx)(l.ll,{className:"text-lg",children:"Voz Selecionada"})}),(0,t.jsx)(l.aY,{children:u?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:u.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:u.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,t.jsxs)("div",{children:["G\xeanero: ",u.gender]}),(0,t.jsxs)("div",{children:["Idade: ",u.age]}),(0,t.jsxs)("div",{children:["Sotaque: ",u.accent]}),(0,t.jsxs)("div",{children:["Idioma: ",u.language]})]})]}):(0,t.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Selecione uma voz"})})]}),u&&(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center text-lg",children:[(0,t.jsx)(z.Z,{className:"h-5 w-5 mr-2"}),"Configura\xe7\xf5es"]})}),(0,t.jsxs)(l.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Estabilidade: ",I.stability]}),(0,t.jsx)(T.i,{value:[I.stability],onValueChange:e=>P(s=>({...s,stability:e[0]})),min:0,max:1,step:.1,className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Similaridade: ",I.similarityBoost]}),(0,t.jsx)(T.i,{value:[I.similarityBoost],onValueChange:e=>P(s=>({...s,similarityBoost:e[0]})),min:0,max:1,step:.1,className:"mt-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium",children:["Estilo: ",I.style]}),(0,t.jsx)(T.i,{value:[I.style],onValueChange:e=>P(s=>({...s,style:e[0]})),min:0,max:1,step:.1,className:"mt-2"})]})]})]}),u&&(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center text-lg",children:[(0,t.jsx)(ea.Z,{className:"h-5 w-5 mr-2"}),"Testar Voz"]})}),(0,t.jsxs)(l.aY,{className:"space-y-4",children:[(0,t.jsx)(eC.g,{placeholder:"Digite o texto para testar a voz...",value:k,onChange:e=>C(e.target.value),rows:3}),(0,t.jsxs)(i.z,{onClick:M,disabled:f||!k.trim(),className:"w-full",children:[f?(0,t.jsx)(m.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar Teste"]})]})]})]})]})}function eE(){var e,s,a,w,k,C,S,z,Z,E,D,T,R,P;let O=(0,y.useSearchParams)(),A=null==O?void 0:O.get("projectId"),[M,U]=(0,r.useState)({step:"upload",loading:!1,data:{}}),[F,L]=(0,r.useState)("upload"),[B,G]=(0,r.useState)([]),[V,_]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null),W=e=>{console.log("\uD83C\uDFAC STUDIO LOG: ".concat(e)),G(s=>[...s.slice(-9),"".concat(new Date().toLocaleTimeString(),": ").concat(e)])};(0,r.useEffect)(()=>{A?Q(A):W("Nenhum projectId fornecido - iniciando com upload")},[A]),(0,r.useEffect)(()=>{var e;let s;return((null===(e=M.project)||void 0===e?void 0:e.status)==="PROCESSING"||Y||q)&&(s=setInterval(()=>{var e;(null===(e=M.project)||void 0===e?void 0:e.id)&&Q(M.project.id)},5e3)),()=>{s&&clearInterval(s)}},[null===(e=M.project)||void 0===e?void 0:e.status,Y,q]);let Q=async e=>{try{var s,a;W("\uD83D\uDCCB Carregando dados do projeto: ".concat(e)),U(e=>({...e,loading:!0}));let t=await fetch("/api/projects/".concat(e));if(!t.ok)throw Error("Projeto n\xe3o encontrado");let r=await t.json();if(!r.success)throw Error(r.error||"Erro ao carregar projeto");let l=r.data;W("✅ Projeto carregado: ".concat(l.name," (").concat(l.totalSlides," slides)"));let i="upload",n="upload";"COMPLETED"===l.status&&l.slidesData?(i="edit",n="edit",W("\uD83D\uDCDD Projeto completo - iniciando no editor")):"PROCESSING"===l.status?(i="upload",n="upload",W("⏳ Projeto em processamento")):"ERROR"===l.status&&W("❌ Projeto com erro: ".concat(l.errorMessage)),U({step:i,loading:!1,data:{uploadResult:l.slidesData?{slides:l.totalSlides,duration:l.duration,assets:(null===(a=l.slidesData.assets)||void 0===a?void 0:null===(s=a.images)||void 0===s?void 0:s.length)||0,timeline:l.slidesData.timeline,s3Key:l.pptxUrl,fileName:l.originalFileName,projectId:l.id}:void 0},project:l}),L(n),"COMPLETED"===l.status&&d.Am.success("✅ Projeto carregado - dados dispon\xedveis para edi\xe7\xe3o!")}catch(e){console.error("❌ Error loading project:",e),W("❌ Erro ao carregar projeto: ".concat(e instanceof Error?e.message:"Erro desconhecido")),U(e=>({...e,loading:!1})),d.Am.error("❌ Erro ao carregar projeto")}},H=async()=>{var e;if(null===(e=M.project)||void 0===e?void 0:e.id)try{_(!0),W("\uD83C\uDF99️ Iniciando gera\xe7\xe3o de narra\xe7\xe3o em massa..."),d.Am.loading("Gerando narra\xe7\xf5es para todos os slides...",{id:"batch-tts"});let e=await fetch("/api/v1/pptx/auto-narrate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:M.project.id,options:{provider:"elevenlabs",voice:"21m00Tcm4TlvDq8ikWAM"}})}),s=await e.json();if(!e.ok)throw Error(s.error||"Erro na gera\xe7\xe3o em massa");W("✅ Narra\xe7\xe3o conclu\xedda: ".concat(s.narrations.length," slides processados")),d.Am.success("Narra\xe7\xf5es geradas com sucesso!",{id:"batch-tts"}),Q(M.project.id)}catch(e){console.error("Error generating narrations:",e),W("❌ Erro na narra\xe7\xe3o: ".concat(e instanceof Error?e.message:"Erro desconhecido")),d.Am.error("Erro ao gerar narra\xe7\xf5es",{id:"batch-tts"})}finally{_(!1)}},$=async()=>{var e;if(null===(e=M.project)||void 0===e?void 0:e.id)try{X(!0),W("\uD83C\uDFAC Iniciando exporta\xe7\xe3o do v\xeddeo..."),d.Am.loading("Iniciando renderiza\xe7\xe3o do v\xeddeo...",{id:"export-video"});let e=await fetch("/api/v1/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:M.project.id,settings:{resolution:"1080p",quality:"high"}})}),s=await e.json();if(!e.ok)throw Error(s.error||"Erro ao iniciar exporta\xe7\xe3o");K(s.jobId),W("✅ Job de renderiza\xe7\xe3o criado: ".concat(s.jobId)),d.Am.success("Renderiza\xe7\xe3o iniciada! O v\xeddeo estar\xe1 dispon\xedvel em breve.",{id:"export-video"})}catch(e){console.error("Error exporting video:",e),W("❌ Erro na exporta\xe7\xe3o: ".concat(e instanceof Error?e.message:"Erro desconhecido")),d.Am.error("Erro ao iniciar exporta\xe7\xe3o",{id:"export-video"})}finally{X(!1)}};return M.loading?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)(l.Zb,{className:"w-full max-w-md",children:(0,t.jsx)(l.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Carregando projeto..."}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",A]})]})]})})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Est\xfadio PPTX Professional"}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(null===(s=M.project)||void 0===s?void 0:s.name)||"Novo Projeto",M.project&&(0,t.jsx)(o.C,{className:"ml-2",variant:"COMPLETED"===M.project.status?"default":"PROCESSING"===M.project.status?"secondary":"ERROR"===M.project.status?"destructive":"outline",children:M.project.status})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:M.project&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,t.jsxs)("div",{children:[M.project.totalSlides," slides"]}),(0,t.jsxs)("div",{children:[M.project.duration,"s"]})]}),"COMPLETED"===M.project.status&&(0,t.jsx)(x.Z,{className:"h-6 w-6 text-green-500"}),"PROCESSING"===M.project.status&&(0,t.jsx)(m.Z,{className:"h-6 w-6 animate-spin text-blue-500"}),"ERROR"===M.project.status&&(0,t.jsx)(u.Z,{className:"h-6 w-6 text-red-500"})]})})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)(n.mQ,{value:F,onValueChange:L,className:"space-y-6",children:[(0,t.jsxs)(n.dr,{className:"grid w-full grid-cols-5",children:[(0,t.jsxs)(n.SP,{value:"upload",className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),"Upload"]}),(0,t.jsxs)(n.SP,{value:"edit",className:"flex items-center gap-2",disabled:!M.data.uploadResult,children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),"Editor"]}),(0,t.jsxs)(n.SP,{value:"timeline",className:"flex items-center gap-2",disabled:!M.data.uploadResult,children:[(0,t.jsx)(g.Z,{className:"h-4 w-4"}),"Timeline"]}),(0,t.jsxs)(n.SP,{value:"tts",className:"flex items-center gap-2",disabled:!M.data.uploadResult,children:[(0,t.jsx)(j.Z,{className:"h-4 w-4"}),"TTS/\xc1udio"]}),(0,t.jsxs)(n.SP,{value:"export",className:"flex items-center gap-2",disabled:!M.data.uploadResult,children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"Exportar"]})]}),(0,t.jsx)(n.nU,{value:"upload",className:"space-y-6",children:(0,t.jsx)(I,{onProcessComplete:e=>{W("✅ Upload conclu\xeddo: Projeto ".concat(e.projectId)),U(s=>({...s,step:"edit",data:{...s.data,uploadResult:e}})),L("edit"),d.Am.success("✅ Upload conclu\xeddo! Agora voc\xea pode editar o canvas."),e.projectId&&setTimeout(()=>Q(e.projectId),1e3)}})}),(0,t.jsx)(n.nU,{value:"edit",className:"space-y-6",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-5 w-5"}),"Canvas Editor",(null===(a=M.project)||void 0===a?void 0:a.slidesData)&&(0,t.jsx)(o.C,{className:"ml-2",children:"Dados Reais Carregados"})]})}),(0,t.jsx)(l.aY,{children:(null===(w=M.project)||void 0===w?void 0:w.slidesData)?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded border border-blue-200",children:[(0,t.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCCA Dados Carregados do Banco"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Slides:"})," ",M.project.totalSlides]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Dura\xe7\xe3o:"})," ",M.project.duration,"s"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Status:"})," ",M.project.status]})]}),!!(null===(k=M.project.slidesData)||void 0===k?void 0:k.slides)&&(0,t.jsxs)("details",{className:"mt-3",children:[(0,t.jsx)("summary",{className:"cursor-pointer font-medium text-blue-700",children:"Ver dados dos slides (JSON)"}),(0,t.jsx)("pre",{className:"mt-2 bg-gray-100 p-2 rounded text-xs overflow-auto max-h-40",children:JSON.stringify(M.project.slidesData.slides.slice(0,2),null,2)})]})]}),(0,t.jsx)(J,{})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(v.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{children:"Nenhum dado carregado. Fa\xe7a o upload primeiro."})]})})]})}),(0,t.jsx)(n.nU,{value:"timeline",className:"space-y-6",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-5 w-5"}),"Timeline Editor"]})}),(0,t.jsx)(l.aY,{children:(null===(S=M.project)||void 0===S?void 0:null===(C=S.slidesData)||void 0===C?void 0:C.timeline)?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[(0,t.jsx)("h3",{className:"font-medium text-green-800 mb-2",children:"\uD83C\uDFAC Timeline Carregada"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Cenas:"})," ",(null===(Z=M.project.slidesData.timeline)||void 0===Z?void 0:null===(z=Z.scenes)||void 0===z?void 0:z.length)||0]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Dura\xe7\xe3o Total:"})," ",Math.round((null===(E=M.project.slidesData.timeline)||void 0===E?void 0:E.totalDuration)||0),"s"]})]})]}),(0,t.jsx)(ek,{})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(g.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{children:"Timeline n\xe3o dispon\xedvel. Processe um PPTX primeiro."})]})})]})}),(0,t.jsx)(n.nU,{value:"tts",className:"space-y-6",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"h-5 w-5"}),"Text-to-Speech"]})}),(0,t.jsx)(l.aY,{children:(null===(D=M.project)||void 0===D?void 0:D.slides)&&M.project.slides.length>0?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-purple-50 p-4 rounded border border-purple-200",children:[(0,t.jsx)("h3",{className:"font-medium text-purple-800 mb-2",children:"\uD83C\uDFA4 Slides para TTS"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("strong",{children:"Slides dispon\xedveis:"})," ",M.project.slides.length]}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[M.project.slides.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"text-xs bg-white p-2 rounded",children:[(0,t.jsxs)("strong",{children:["Slide ",String(e.slideNumber),":"]})," ",String(e.title)]},s)),M.project.slides.length>3&&(0,t.jsxs)("div",{className:"text-xs text-purple-600",children:["...e mais ",M.project.slides.length-3," slides"]})]})]}),(0,t.jsx)(eZ,{}),(0,t.jsx)(c.Z,{className:"my-4"}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(i.z,{onClick:H,disabled:V,className:"bg-gradient-to-r from-purple-600 to-blue-600",children:V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando Narra\xe7\xf5es..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Gerar Narra\xe7\xe3o para Todos os Slides"]})})})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(j.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{children:"Nenhum slide dispon\xedvel para TTS. Processe um PPTX primeiro."})]})})]})}),(0,t.jsx)(n.nU,{value:"export",className:"space-y-6",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5"}),"Exportar V\xeddeo"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"text-center py-12",children:(null===(T=M.project)||void 0===T?void 0:T.videoUrl)?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"relative w-full max-w-2xl aspect-video bg-black rounded-lg overflow-hidden shadow-lg",children:(0,t.jsx)("video",{src:M.project.videoUrl,controls:!0,className:"w-full h-full",poster:M.project.thumbnailUrl})})}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>window.open(M.project.videoUrl,"_blank"),children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Abrir em Nova Aba"]}),(0,t.jsxs)(i.z,{onClick:()=>{let e=document.createElement("a");e.href=M.project.videoUrl,e.download="".concat(M.project.name||"video",".mp4"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Baixar MP4"]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Renderizado em: ",new Date(M.project.updatedAt).toLocaleString()]})]}):q?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(m.Z,{className:"h-16 w-16 animate-spin text-blue-500"})}),(0,t.jsx)("h3",{className:"text-xl font-medium text-gray-900",children:"Renderizando seu v\xeddeo..."}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Job ID: ",q]}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Isso pode levar alguns minutos. Voc\xea pode fechar esta janela e voltar mais tarde."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z,{className:"h-16 w-16 text-blue-500 mx-auto mb-6"}),(0,t.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-3",children:"Pronto para Renderizar"}),(0,t.jsxs)("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:["Seu projeto tem ",null===(R=M.project)||void 0===R?void 0:R.totalSlides," slides e dura\xe7\xe3o estimada de ",null===(P=M.project)||void 0===P?void 0:P.duration,"s. Clique abaixo para iniciar a renderiza\xe7\xe3o final em 1080p."]}),(0,t.jsx)(i.z,{onClick:$,disabled:Y,size:"lg",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:Y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Iniciando Render..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"Renderizar V\xeddeo Final (MP4)"]})})]})})})]})})]}),B.length>0&&(0,t.jsxs)(l.Zb,{className:"mt-6",children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4"}),"Debug Logs"]})}),(0,t.jsx)(l.aY,{children:(0,t.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-xs space-y-1 max-h-32 overflow-y-auto",children:B.map((e,s)=>(0,t.jsx)("div",{children:e},s))})})]})]})]})}},62060:function(e,s,a){"use strict";a.d(s,{Cd:function(){return c},X:function(){return d},bZ:function(){return o}});var t=a(57437),r=a(2265),l=a(90535),i=a(22835);let n=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(n({variant:r}),a),...l})});o.displayName="Alert";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});c.displayName="AlertTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},41875:function(e,s,a){"use strict";a.d(s,{C:function(){return n}});var t=a(57437);a(2265);var r=a(90535),l=a(22835);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(i({variant:a}),s),...r})}},92595:function(e,s,a){"use strict";a.d(s,{d:function(){return n},z:function(){return o}});var t=a(57437),r=a(2265),l=a(90535),i=a(22835);let n=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,size:l,asChild:o=!1,...c}=e;return(0,t.jsx)(o?"span":"button",{className:(0,i.cn)(n({variant:r,size:l,className:a})),ref:s,...c})});o.displayName="Button"},34029:function(e,s,a){"use strict";a.d(s,{Ol:function(){return n},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return m},ll:function(){return o}});var t=a(57437),r=a(2265),l=a(22835);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});i.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},81973:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(57437),r=a(2265),l=a(22835);let i=r.forwardRef((e,s)=>{let{className:a,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},46393:function(e,s,a){"use strict";a.d(s,{_:function(){return c}});var t=a(57437),r=a(2265),l=a(6394),i=a(90535),n=a(22835);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.f,{ref:s,className:(0,n.cn)(o(),a),...r})});c.displayName=l.f.displayName},41236:function(e,s,a){"use strict";a.d(s,{E:function(){return i}});var t=a(57437),r=a(2265),l=a(22835);let i=r.forwardRef((e,s)=>{let{className:a,value:r,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...i,children:(0,t.jsx)("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName="Progress"},6403:function(e,s,a){"use strict";a.d(s,{B:function(){return o},x:function(){return n}});var t=a(57437),r=a(2265),l=a(43643),i=a(22835);let n=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.fC,{ref:s,className:(0,i.cn)("relative overflow-hidden",a),...n,children:[(0,t.jsx)(l.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(o,{}),(0,t.jsx)(l.Ns,{})]})});n.displayName=l.fC.displayName;let o=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...n}=e;return(0,t.jsx)(l.gb,{ref:s,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 border-t border-t-transparent p-[1px]",a),...n,children:(0,t.jsx)(l.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=l.gb.displayName},72927:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(57437),r=a(2265),l=a(55156),i=a(22835);let n=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...o}=e;return(0,t.jsx)(l.f,{ref:s,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...o})});n.displayName=l.f.displayName},65046:function(e,s,a){"use strict";a.d(s,{i:function(){return n}});var t=a(57437),r=a(2265),l=a(38846),i=a(22835);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsxs)(l.fC,{ref:s,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",a),...r,children:[(0,t.jsx)(l.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,t.jsx)(l.e6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(l.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});n.displayName=l.fC.displayName},15353:function(e,s,a){"use strict";a.d(s,{r:function(){return n}});var t=a(57437),r=a(2265),l=a(50721),i=a(22835);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.fC,{className:(0,i.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,t.jsx)(l.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.fC.displayName},51098:function(e,s,a){"use strict";a.d(s,{SP:function(){return c},dr:function(){return o},mQ:function(){return n},nU:function(){return d}});var t=a(57437),r=a(2265),l=a(20271),i=a(22835);let n=l.fC,o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=l.aV.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=l.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});d.displayName=l.VY.displayName},49665:function(e,s,a){"use strict";a.d(s,{g:function(){return i}});var t=a(57437),r=a(2265),l=a(22835);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});i.displayName="Textarea"},58922:function(e,s,a){"use strict";a.d(s,{ZO:function(){return i},h6:function(){return n}});var t=a(78960);let r=null;function l(){return r||(r=t),r}l();let i={getInstance:l,createCanvas:function(e,s){return new(l()).Canvas(e,s)},createStaticCanvas:function(e,s){return new(l()).StaticCanvas(e,s)}},n=()=>({fabric:l(),FabricManager:i})},22835:function(e,s,a){"use strict";a.d(s,{cn:function(){return l}});var t=a(61994),r=a(53335);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.m6)((0,t.W)(s))}}},function(e){e.O(0,[9062,7788,6137,7479,271,5644,8846,926,9064,1787,9043,243,5478,2325,2971,2117,1744],function(){return e(e.s=38543)}),_N_E=e.O()}]);