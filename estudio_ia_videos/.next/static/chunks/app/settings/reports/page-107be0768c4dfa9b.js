(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6318],{19408:function(e,t,r){Promise.resolve().then(r.bind(r,24711))},92595:function(e,t,r){"use strict";r.d(t,{d:function(){return i},z:function(){return o}});var a=r(57437),s=r(2265),n=r(90535),l=r(22835);let i=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:o=!1,...d}=e;return(0,a.jsx)(o?"span":"button",{className:(0,l.cn)(i({variant:s,size:n,className:r})),ref:t,...d})});o.displayName="Button"},34029:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var a=r(57437),s=r(2265),n=r(22835);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},81973:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(57437),s=r(2265),n=r(22835);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},60967:function(e,t,r){"use strict";r.d(t,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return f},i4:function(){return u},ki:function(){return c}});var a=r(57437),s=r(2265),n=r(56873),l=r(40875),i=r(30401),o=r(22835);let d=n.fC;n.ZA;let c=n.B4,u=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...i,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.xz.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:(0,a.jsx)(n.l_,{className:(0,o.cn)("popper"===l&&"p-1",r),children:s})})})});m.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=n.__.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});f.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=n.Z0.displayName},27669:function(e,t,r){"use strict";r.d(t,{W:function(){return l}});var a=r(17272);let s=null,n=null;function l(){if(n)return n;let{url:e,anonKey:t}=function(){if(s)return s;let e="https://ofhzrdiadxigrvmrhaiz.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ";if(!e||!t)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables");return s={url:e,anonKey:t}}();return n=(0,a.createBrowserClient)(e,t)}},58113:function(e,t,r){"use strict";r.d(t,{OQ:function(){return s},eI:function(){return n}});var a=r(27669);let s=(0,a.W)(),n=()=>(0,a.W)()},22835:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},24711:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(57437),s=r(2265),n=r(34029),l=r(92595),i=r(60967),o=r(81973),d=r(70525),c=r(48736);let u=(0,r(79205).Z)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var m=r(31047),f=r(92735),p=r(58113);let h=[{value:"analytics",label:"Analytics",description:"Projetos, renders, TTS, uploads e usu\xe1rios ativos",icon:d.Z},{value:"security",label:"Seguran\xe7a",description:"Logins, alertas de seguran\xe7a e uso de SSO",icon:c.Z},{value:"audit_logs",label:"Auditoria",description:"Hist\xf3rico completo de eventos e a\xe7\xf5es",icon:u},{value:"billing",label:"Financeiro",description:"Pagamentos, receita e ticket m\xe9dio",icon:c.Z},{value:"usage",label:"Uso de Recursos",description:"Membros, projetos e armazenamento",icon:u},{value:"sso",label:"SSO",description:"Uso de SSO por provedor",icon:c.Z},{value:"members",label:"Membros",description:"Lista de membros ativos por role",icon:u}];function x(){var e;let t=(0,s.useMemo)(()=>(0,p.eI)(),[]),[r,d]=(0,s.useState)(null),[x,b]=(0,s.useState)("analytics"),[g,v]=(0,s.useState)("pdf"),[j,y]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[k,S]=(0,s.useState)(!1),C=null==r?void 0:null===(e=r.user_metadata)||void 0===e?void 0:e.currentOrgId;(0,s.useEffect)(()=>{let e=!0;(async()=>{try{var r;let{data:a}=await t.auth.getUser();if(!e)return;d(null!==(r=a.user)&&void 0!==r?r:null)}catch(e){console.error("Erro ao carregar sess\xe3o do usu\xe1rio:",e)}})();let{data:r}=t.auth.onAuthStateChange((t,r)=>{var a;e&&d(null!==(a=null==r?void 0:r.user)&&void 0!==a?a:null)});return()=>{e=!1,null==r||r.subscription.unsubscribe()}},[t]);let Z=async()=>{if(!C||!j||!N){alert("Por favor, preencha todos os campos obrigat\xf3rios");return}if(new Date(j)>new Date(N)){alert("Data inicial deve ser anterior \xe0 data final");return}S(!0);try{let e=await fetch("/api/org/".concat(C,"/reports/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:x,startDate:j,endDate:N,format:g})});if(!e.ok){let t=await e.json();throw Error(t.error||"Erro ao gerar relat\xf3rio")}let t=await e.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="report-".concat(x,"-").concat(new Date().toISOString().split("T")[0],".").concat("pdf"===g?"html":"csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r),alert("Relat\xf3rio gerado com sucesso!")}catch(e){console.error("Erro ao gerar relat\xf3rio:",e),alert(e instanceof Error?e.message:"Erro ao gerar relat\xf3rio")}finally{S(!1)}},I=()=>{let e=new Date,t=new Date;t.setDate(t.getDate()-30),y(t.toISOString().split("T")[0]),w(e.toISOString().split("T")[0])};if((0,s.useEffect)(()=>{I()},[]),!r)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("p",{children:"Fa\xe7a login para acessar o gerador de relat\xf3rios."})});let D=h.find(e=>e.value===x);return(0,a.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\uD83D\uDCCA Gerador de Relat\xf3rios"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Crie relat\xf3rios personalizados em PDF ou CSV"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Tipos de Relat\xf3rio"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(e=>{let t=e.icon;return(0,a.jsx)("button",{onClick:()=>b(e.value),className:"p-4 rounded-lg border-2 text-left transition-all ".concat(x===e.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(t,{className:"h-6 w-6 ".concat(x===e.value?"text-blue-600":"text-gray-600")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})]})},e.value)})})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Configura\xe7\xe3o"})}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[D&&(()=>{let e=D.icon;return(0,a.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(e,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"font-semibold text-blue-900",children:D.label})]}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:D.description})]})})(),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 inline mr-1"}),"Per\xedodo"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.I,{type:"date",value:j,onChange:e=>y(e.target.value),placeholder:"Data inicial"}),(0,a.jsx)(o.I,{type:"date",value:N,onChange:e=>w(e.target.value),placeholder:"Data final"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 inline mr-1"}),"Formato"]}),(0,a.jsxs)(i.Ph,{value:g,onValueChange:e=>v(e),children:[(0,a.jsx)(i.i4,{children:(0,a.jsx)(i.ki,{})}),(0,a.jsxs)(i.Bw,{children:[(0,a.jsx)(i.Ql,{value:"pdf",children:"PDF (Apresenta\xe7\xe3o)"}),(0,a.jsx)(i.Ql,{value:"csv",children:"CSV (An\xe1lise de Dados)"})]})]})]}),(0,a.jsx)(l.z,{onClick:Z,disabled:k||!j||!N,className:"w-full",size:"lg",children:k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Gerando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Gerar Relat\xf3rio"]})}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Per\xedodos R\xe1pidos"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{label:"\xdaltimos 7 dias",days:7},{label:"\xdaltimos 30 dias",days:30},{label:"\xdaltimos 90 dias",days:90},{label:"Este ano",days:Math.floor((new Date().getTime()-new Date(new Date().getFullYear(),0,1).getTime())/864e5)}].map(e=>(0,a.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>{let t=new Date,r=new Date;r.setDate(r.getDate()-e.days),y(r.toISOString().split("T")[0]),w(t.toISOString().split("T")[0])},children:e.label},e.label))})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Formato PDF"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Relat\xf3rio corporativo formatado com logo, gr\xe1ficos e tabelas. Ideal para apresenta\xe7\xf5es."})]})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(u,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Formato CSV"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Dados em planilha para an\xe1lise avan\xe7ada. Compat\xedvel com Excel e Google Sheets."})]})]})})}),(0,a.jsx)(n.Zb,{children:(0,a.jsx)(n.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 text-purple-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Download Imediato"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Relat\xf3rio gerado instantaneamente e baixado automaticamente para seu dispositivo."})]})]})})})]})]})}},31047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},92735:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},48736:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},70525:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},99255:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var a,s=r(2265),n=r(61188),l=(a||(a=r.t(s,2)))[" useId ".trim().toString()]||(()=>void 0),i=0;function o(e){let[t,r]=s.useState(l());return(0,n.b)(()=>{e||r(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},26606:function(e,t,r){"use strict";r.d(t,{W:function(){return s}});var a=r(2265);function s(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}},90535:function(e,t,r){"use strict";r.d(t,{j:function(){return l}});var a=r(61994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.W,l=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;let n=s(t)||s(a);return l[e][n]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,o,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...d}[t]):({...i,...d})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[6137,7479,3347,6241,51,4919,7272,2971,2117,1744],function(){return e(e.s=19408)}),_N_E=e.O()}]);