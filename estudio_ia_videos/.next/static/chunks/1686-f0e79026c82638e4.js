"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1686],{41686:function(e,a,t){t.d(a,{r:function(){return es}});var s=t(57437),l=t(2265);let i={elements:[],layers:[{id:"layer-1",name:"Background",visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0,elements:[]},{id:"layer-2",name:"Content",visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0,elements:[]}],timeline:{duration:30,currentTime:0,playing:!1,loop:!1,keyframes:[],markers:[]},selectedElements:[],clipboard:[],history:[],historyIndex:-1,canvas:{width:1920,height:1080,backgroundColor:"#ffffff",zoom:1,pan:{x:0,y:0}},tools:{activeTool:"select",brush:{size:10,color:"#000000",opacity:1}},preview:{enabled:!1,quality:"medium",showGrid:!0,showRulers:!0,showGuides:!0}};var n=t(51516),r=t(63657);let c=e=>!!e&&"object"==typeof e&&"src"in e&&"string"==typeof e.src,o=()=>{!function(e){let[a,t]=(0,l.useState)(i),[s,n]=(0,l.useState)(!1),[r,c]=(0,l.useState)(null),o=(0,l.useRef)();(0,l.useEffect)(()=>{if(e)return o.current=setInterval(()=>{m()},3e4),()=>{o.current&&clearInterval(o.current)}},[e,a]);let d=(0,l.useCallback)((e,a,s)=>{let l={id:"history-".concat(Date.now()),timestamp:new Date,action:e,data:a,description:s};t(e=>({...e,history:[...e.history.slice(0,e.historyIndex+1),l],historyIndex:e.historyIndex+1}))},[]),m=((0,l.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={id:"element-".concat(Date.now()),type:e,name:"".concat(e," ").concat(Date.now()),layerId:"layer-2",position:{x:100,y:100,z:0},size:{width:200,height:100},rotation:0,opacity:1,visible:!0,locked:!1,animations:[],properties:{...function(e){switch(e){case"text":return{content:"Text Element",fontSize:24,fontFamily:"Arial",fontWeight:"normal",color:"#000000",textAlign:"left",lineHeight:1.2,letterSpacing:0};case"image":return{src:"",alt:"Image",fit:"cover"};case"shape":return{shape:"rectangle",fill:"#3b82f6",stroke:"#1e40af",strokeWidth:2};case"avatar":return{avatarId:"default",pose:"standing",expression:"neutral",clothing:"casual",background:"transparent",lighting:"natural",animation:"idle"};default:return{}}}(e),...a}};return t(e=>({...e,elements:[...e.elements,s],selectedElements:[s.id]})),d("createElement",s,"Created ".concat(e," element")),s.id},[d]),(0,l.useCallback)((e,a)=>{t(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,...a}:t)})),d("updateElement",{elementId:e,updates:a},"Updated element")},[d]),(0,l.useCallback)(e=>{t(a=>({...a,elements:a.elements.filter(a=>a.id!==e),selectedElements:a.selectedElements.filter(a=>a!==e)})),d("deleteElement",{elementId:e},"Deleted element")},[d]),(0,l.useCallback)(e=>{t(a=>{let t=a.elements.find(a=>a.id===e);if(!t)return a;let s={...t,id:"element-".concat(Date.now()),name:"".concat(t.name," Copy"),position:{...t.position,x:t.position.x+20,y:t.position.y+20}};return{...a,elements:[...a.elements,s],selectedElements:[s.id]}}),d("duplicateElement",{elementId:e},"Duplicated element")},[d]),(0,l.useCallback)(e=>{t(a=>({...a,selectedElements:[e]}))},[]),(0,l.useCallback)(()=>{t(e=>({...e,selectedElements:[]}))},[]),(0,l.useCallback)(e=>{let a={id:"layer-".concat(Date.now()),name:e||"Layer ".concat(Date.now()),visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0,elements:[]};return t(e=>({...e,layers:[...e.layers,a]})),d("createLayer",a,"Created layer: ".concat(a.name)),a.id},[d]),(0,l.useCallback)((e,a)=>{t(t=>({...t,layers:t.layers.map(t=>t.id===e?{...t,...a}:t)})),d("updateLayer",{layerId:e,updates:a},"Updated layer")},[d]),(0,l.useCallback)(e=>{t(a=>{let t=a.elements.filter(a=>a.layerId===e),s=a.elements.filter(a=>a.layerId!==e);return{...a,layers:a.layers.filter(a=>a.id!==e),elements:s,selectedElements:a.selectedElements.filter(e=>!t.some(a=>a.id===e))}}),d("deleteLayer",{layerId:e},"Deleted layer")},[d]),(0,l.useCallback)((e,a)=>{t(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,layerId:a}:t)})),d("moveElementToLayer",{elementId:e,targetLayerId:a},"Moved element to layer")},[d]),(0,l.useCallback)(()=>{t(e=>({...e,timeline:{...e.timeline,playing:!0}}))},[]),(0,l.useCallback)(()=>{t(e=>({...e,timeline:{...e.timeline,playing:!1}}))},[]),(0,l.useCallback)(e=>{t(a=>({...a,timeline:{...a.timeline,currentTime:Math.max(0,Math.min(e,a.timeline.duration))}}))},[]),(0,l.useCallback)(e=>{t(a=>({...a,timeline:{...a.timeline,duration:Math.max(1,e)}}))},[]),(0,l.useCallback)((e,a)=>{t(t=>({...t,canvas:{...t.canvas,width:e,height:a}})),d("setCanvasSize",{width:e,height:a},"Changed canvas size")},[d]),(0,l.useCallback)(e=>{t(a=>({...a,canvas:{...a.canvas,zoom:Math.max(.1,Math.min(5,e))}}))},[]),(0,l.useCallback)((e,a)=>{t(t=>({...t,canvas:{...t.canvas,pan:{x:e,y:a}}}))},[]),(0,l.useCallback)(e=>{t(a=>({...a,tools:{...a.tools,activeTool:e}}))},[]),(0,l.useCallback)(()=>{a.historyIndex>0&&t(e=>({...e,historyIndex:e.historyIndex-1}))},[a.historyIndex]),(0,l.useCallback)(()=>{a.historyIndex<a.history.length-1&&t(e=>({...e,historyIndex:e.historyIndex+1}))},[a.historyIndex,a.history.length]),(0,l.useCallback)(()=>{if(0===a.selectedElements.length)return;let e=a.elements.filter(e=>a.selectedElements.includes(e.id));e.length>0&&t(a=>({...a,clipboard:e}))},[a.selectedElements,a.elements]),(0,l.useCallback)(()=>{if(0===a.clipboard.length)return;let e=a.clipboard.map(e=>({...e,id:"element-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(e.name," Copy"),position:{...e.position,x:e.position.x+20,y:e.position.y+20}}));t(a=>({...a,elements:[...a.elements,...e],selectedElements:e.map(e=>e.id)})),d("pasteElements",e,"Pasted elements")},[a.clipboard,d]),(0,l.useCallback)(async()=>{if(e){n(!0);try{let t={id:e,name:"Project ".concat(e),description:"",thumbnail:"",createdAt:new Date,updatedAt:new Date,author:"Current User",version:"1.0.0",state:a,settings:{autoSave:!0,autoSaveInterval:3e4,snapToGrid:!0,gridSize:20,showGrid:!0,showRulers:!0,showGuides:!0,magneticGuides:!0,defaultDuration:5,defaultTransition:"fade",quality:"high",shortcuts:{}},metadata:{duration:a.timeline.duration,resolution:{width:a.canvas.width,height:a.canvas.height},frameRate:30,format:"mp4",size:0,tags:[]}};localStorage.setItem("editor-project-".concat(e),JSON.stringify(t))}catch(e){c("Failed to save project")}finally{n(!1)}}},[e,a]));(0,l.useCallback)(async e=>{n(!0);try{let a=localStorage.getItem("editor-project-".concat(e));if(a){let e=JSON.parse(a);t(e.state)}}catch(e){c("Failed to load project")}finally{n(!1)}},[]),a.historyIndex,a.historyIndex,a.history.length}();let{generateContent:e,optimizeContent:a}=(0,n.X)(),{shareDocument:t,inviteUser:s}=(0,r.H)(),[o,d]=(0,l.useState)([]),[m,u]=(0,l.useState)({duration:6e4,currentTime:0,playbackRate:1,isPlaying:!1,loop:!1,markers:[],zoom:1,viewportStart:0,viewportEnd:6e4}),[x,h]=(0,l.useState)({width:1920,height:1080,zoom:1,pan:{x:0,y:0},rotation:{x:0,y:0,z:0},projection:"perspective",camera:{position:{x:0,y:0,z:10},target:{x:0,y:0,z:0},fov:45}}),[p,y]=(0,l.useState)({states:[],currentIndex:-1,maxStates:50}),[f,g]=(0,l.useState)({isDragging:!1,draggedItem:null,dropTarget:null,dragPreview:null}),[b,v]=(0,l.useState)({selectedLayers:[],selectedKeyframes:[],selectionBounds:null}),[j,w]=(0,l.useState)(null),[N,k]=(0,l.useState)(!1),[C,z]=(0,l.useState)(!1),[S,Z]=(0,l.useState)(null),L=(0,l.useRef)();(0,l.useEffect)(()=>(A(),()=>{L.current&&cancelAnimationFrame(L.current)}),[]),(0,l.useEffect)(()=>{if(m.isPlaying){let e=()=>{u(e=>{let a=e.currentTime+16.67*e.playbackRate;return a>=e.duration?e.loop?{...e,currentTime:0}:{...e,currentTime:e.duration,isPlaying:!1}:{...e,currentTime:a}}),L.current=requestAnimationFrame(e)};L.current=requestAnimationFrame(e)}else L.current&&cancelAnimationFrame(L.current)},[m.isPlaying,m.playbackRate,m.loop,m.duration]);let A=async()=>{try{k(!0),d([{id:"background",name:"Background",type:"image",visible:!0,locked:!1,opacity:1,blendMode:"normal",position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},content:{src:"https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=industrial%20workplace%20safety%20training%20environment&image_size=landscape_16_9",type:"image"},keyframes:[],effects:[],metadata:{duration:6e4,startTime:0,endTime:6e4,tags:["background","workplace"],compliance:{nrStandards:["NR-12"],accessibilityLevel:"AA",safetyRating:95,warnings:[],suggestions:[]}}}]),em("Initial state")}catch(e){Z("Failed to initialize editor"),console.error("Editor initialization error:",e)}finally{k(!1)}},E=(0,l.useCallback)((e,a)=>{let t={id:"layer_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Layer"),type:e,visible:!0,locked:!1,opacity:1,blendMode:"normal",position:{x:0,y:0,z:o.length},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},content:a||eL(e),keyframes:[],effects:[],metadata:{duration:m.duration,startTime:m.currentTime,endTime:m.currentTime+5e3,tags:[e],compliance:{nrStandards:[],accessibilityLevel:"AA",safetyRating:80,warnings:[],suggestions:[]}}};return d(e=>[...e,t]),em("Added ".concat(e," layer")),t},[o.length,m.currentTime,m.duration]),I=(0,l.useCallback)(e=>{d(a=>a.filter(a=>a.id!==e)),v(a=>({...a,selectedLayers:a.selectedLayers.filter(a=>a!==e)})),em("Removed layer")},[]),R=(0,l.useCallback)(e=>{let a=o.find(a=>a.id===e);if(!a)throw Error("Layer not found");let t={...a,id:"layer_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:"".concat(a.name," Copy"),position:{...a.position,x:a.position.x+50,y:a.position.y+50}};return d(e=>[...e,t]),em("Duplicated layer"),t},[o]),P=(0,l.useCallback)((e,a)=>{d(t=>{let s=t.findIndex(a=>a.id===e);if(-1===s)return t;let l=[...t],[i]=l.splice(s,1);return l.splice(a,0,i),l}),em("Moved layer")},[]),T=(0,l.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,...a}:t)),em("Updated layer")},[]),D=(0,l.useCallback)(e=>{var a;T(e,{visible:!(null===(a=o.find(a=>a.id===e))||void 0===a?void 0:a.visible)})},[o,T]),M=(0,l.useCallback)(e=>{var a;T(e,{locked:!(null===(a=o.find(a=>a.id===e))||void 0===a?void 0:a.locked)})},[o,T]),_=(0,l.useCallback)(e=>{u(a=>({...a,currentTime:Math.max(0,Math.min(e,a.duration))}))},[]),O=(0,l.useCallback)(()=>{u(e=>({...e,isPlaying:!0}))},[]),U=(0,l.useCallback)(()=>{u(e=>({...e,isPlaying:!1}))},[]),F=(0,l.useCallback)(()=>{u(e=>({...e,isPlaying:!1,currentTime:0}))},[]),V=(0,l.useCallback)(e=>{u(a=>({...a,playbackRate:Math.max(.1,Math.min(e,4))}))},[]),K=(0,l.useCallback)(e=>{let a={...e,id:"marker_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))};u(e=>({...e,markers:[...e.markers,a].sort((e,a)=>e.time-a.time)})),em("Added marker")},[]),J=(0,l.useCallback)(e=>{u(a=>({...a,markers:a.markers.filter(a=>a.id!==e)})),em("Removed marker")},[]),G=(0,l.useCallback)(e=>{u(a=>({...a,zoom:Math.max(.1,Math.min(e,10))}))},[]),q=(0,l.useCallback)((e,a,t)=>{let s={id:"keyframe_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),time:a,properties:t,easing:"ease-in-out",interpolation:"bezier"};return d(a=>a.map(a=>a.id===e?{...a,keyframes:[...a.keyframes,s].sort((e,a)=>e.time-a.time)}:a)),em("Added keyframe"),s},[]),B=(0,l.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,keyframes:t.keyframes.filter(e=>e.id!==a)}:t)),em("Removed keyframe")},[]),W=(0,l.useCallback)((e,a,t)=>{d(s=>s.map(s=>s.id===e?{...s,keyframes:s.keyframes.map(e=>e.id===a?{...e,...t}:e)}:s)),em("Updated keyframe")},[]),X=(0,l.useCallback)((e,a,t)=>{W(e,a,{time:t})},[W]),Y=(0,l.useCallback)((e,a)=>{let t={...a,id:"effect_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))};return d(a=>a.map(a=>a.id===e?{...a,effects:[...a.effects,t]}:a)),em("Added effect"),t},[]),H=(0,l.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,effects:t.effects.filter(e=>e.id!==a)}:t)),em("Removed effect")},[]),Q=(0,l.useCallback)((e,a,t)=>{d(s=>s.map(s=>s.id===e?{...s,effects:s.effects.map(e=>e.id===a?{...e,...t}:e)}:s)),em("Updated effect")},[]),$=(0,l.useCallback)(e=>{h(a=>({...a,zoom:Math.max(.1,Math.min(e,10))}))},[]),ee=(0,l.useCallback)(e=>{h(a=>({...a,pan:e}))},[]),ea=(0,l.useCallback)(e=>{h(a=>({...a,rotation:e}))},[]),et=(0,l.useCallback)(()=>{h(e=>({...e,zoom:1,pan:{x:0,y:0},rotation:{x:0,y:0,z:0}}))},[]),es=(0,l.useCallback)(()=>{et()},[et]),el=(0,l.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(t=>({...t,selectedLayers:a?t.selectedLayers.includes(e)?t.selectedLayers.filter(a=>a!==e):[...t.selectedLayers,e]:[e]}))},[]),ei=(0,l.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(t=>({...t,selectedKeyframes:a?t.selectedKeyframes.includes(e)?t.selectedKeyframes.filter(a=>a!==e):[...t.selectedKeyframes,e]:[e]}))},[]),en=(0,l.useCallback)(()=>{v({selectedLayers:[],selectedKeyframes:[],selectionBounds:null})},[]),er=(0,l.useCallback)(()=>{v(e=>({...e,selectedLayers:o.map(e=>e.id)}))},[o]),ec=(0,l.useCallback)(()=>{b.selectedLayers.length>0&&w({type:"layer",data:o.filter(e=>b.selectedLayers.includes(e.id)),timestamp:new Date})},[o,b.selectedLayers]),eo=(0,l.useCallback)(()=>{ec(),b.selectedLayers.forEach(e=>I(e))},[ec,b.selectedLayers,I]),ed=(0,l.useCallback)(()=>{if(!j||"layer"!==j.type)return;let e=j.data.map(e=>({...e,id:"layer_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:"".concat(e.name," Copy"),position:{...e.position,x:e.position.x+50,y:e.position.y+50}}));d(a=>[...a,...e]),em("Pasted layers")},[j]),em=(0,l.useCallback)(e=>{let a={id:"state_".concat(Date.now()),timestamp:new Date,layers:JSON.parse(JSON.stringify(o)),timeline:JSON.parse(JSON.stringify(m)),viewport:JSON.parse(JSON.stringify(x)),description:e};y(e=>{let t=e.states.slice(0,e.currentIndex+1);return t.push(a),t.length>e.maxStates&&t.shift(),{...e,states:t,currentIndex:t.length-1}})},[o,m,x]),eu=(0,l.useCallback)(()=>{if(p.currentIndex>0){let e=p.states[p.currentIndex-1];d(e.layers),u(e.timeline),h(e.viewport),y(e=>({...e,currentIndex:e.currentIndex-1}))}},[p]),ex=(0,l.useCallback)(()=>{if(p.currentIndex<p.states.length-1){let e=p.states[p.currentIndex+1];d(e.layers),u(e.timeline),h(e.viewport),y(e=>({...e,currentIndex:e.currentIndex+1}))}},[p]),eh=(0,l.useCallback)(async e=>{z(!0);try{let a=await eA(e);return E(eE(e),a)}finally{z(!1)}},[E]),ep=(0,l.useCallback)(async e=>{z(!0);try{let a={layers:o,timeline:m,viewport:x,metadata:{version:"1.0",created:new Date,format:e}};if("json"===e)return new Blob([JSON.stringify(a,null,2)],{type:"application/json"});throw Error("Export format ".concat(e," not yet implemented"))}finally{z(!1)}},[o,m,x]),ey=(0,l.useCallback)(async(e,a)=>{let t=o.find(a=>a.id===e);if(!t)throw Error("Layer not found");if("json"===a)return new Blob([JSON.stringify(t,null,2)],{type:"application/json"});throw Error("Export format ".concat(a," not yet implemented"))},[o]),ef=(0,l.useCallback)(async(a,t)=>{z(!0);try{let s="text"===t?"text":"image"===t?"image":"audio"===t?"audio":"text",l=await e({type:s,prompt:a,model:"gpt-4",parameters:{},context:{previousContent:"safety-training"}}),i=l?l.content:eL(t);return E(t,i)}finally{z(!1)}},[e,E]),eg=(0,l.useCallback)(async()=>{z(!0);try{let e=await Promise.all(o.map(async e=>{let t=await a(e.content,{type:"layer-optimization",goals:["performance","engagement","accessibility"]});return{...e,content:t}}));d(e),em("Optimized timeline")}finally{z(!1)}},[o,a]),eb=(0,l.useCallback)(async e=>{let a=o.find(a=>a.id===e);return a?[{id:"fade_in",name:"Fade In",type:"transition",enabled:!0,parameters:{duration:1e3,easing:"ease-in"},startTime:a.metadata.startTime,duration:1e3},{id:"glow",name:"Safety Glow",type:"filter",enabled:!0,parameters:{color:"#FFD700",intensity:.5},startTime:a.metadata.startTime,duration:a.metadata.duration}]:[]},[o]),ev=(0,l.useCallback)(async()=>{em("Auto-synced timeline")},[]),ej=(0,l.useCallback)(async()=>await t("editor-project",{layers:o,timeline:m,viewport:x}),[o,m,x,t]),ew=(0,l.useCallback)(async(e,a)=>{await s(e,a)},[s]),eN=(0,l.useCallback)(async()=>{let e=[],a=[],t=new Set,s="AAA",l=0;return o.forEach(i=>{i.metadata.compliance.warnings.forEach(a=>e.push(a)),i.metadata.compliance.suggestions.forEach(e=>a.push(e)),i.metadata.compliance.nrStandards.forEach(e=>t.add(e)),"A"===i.metadata.compliance.accessibilityLevel?s="A":"AA"===i.metadata.compliance.accessibilityLevel&&"AAA"===s&&(s="AA"),l+=i.metadata.compliance.safetyRating}),l=o.length>0?l/o.length:0,{nrStandards:Array.from(t),accessibilityLevel:s,safetyRating:l,warnings:[...new Set(e)],suggestions:[...new Set(a)]}},[o]),ek=(0,l.useCallback)(async()=>{z(!0);try{let e=await Promise.all(o.map(async e=>{if(e.metadata.compliance.warnings.length>0){let t=await a(e.content,{type:"compliance-optimization",goals:["accessibility","safety","standards"],constraints:{nrStandards:e.metadata.compliance.nrStandards,accessibilityLevel:"AA"}});return{...e,content:t,metadata:{...e.metadata,compliance:{...e.metadata.compliance,warnings:[],safetyRating:Math.min(100,e.metadata.compliance.safetyRating+10)}}}}return e}));d(e),em("Fixed compliance issues")}finally{z(!1)}},[o,a]),eC=(0,l.useCallback)(async()=>{let e=await eN();return"\n# Relat\xf3rio de Acessibilidade\n\n## Resumo\n- N\xedvel de Acessibilidade: ".concat(e.accessibilityLevel,"\n- Avalia\xe7\xe3o de Seguran\xe7a: ").concat(e.safetyRating.toFixed(1),"/100\n- Normas NR: ").concat(e.nrStandards.join(", "),"\n\n## Avisos (").concat(e.warnings.length,")\n").concat(e.warnings.map(e=>"- ".concat(e)).join("\n"),"\n\n## Sugest\xf5es (").concat(e.suggestions.length,")\n").concat(e.suggestions.map(e=>"- ".concat(e)).join("\n"),"\n\n## Camadas Analisadas\n").concat(o.map(e=>"\n### ".concat(e.name,"\n- Tipo: ").concat(e.type,"\n- Dura\xe7\xe3o: ").concat(e.metadata.duration/1e3,"s\n- Avalia\xe7\xe3o: ").concat(e.metadata.compliance.safetyRating,"/100\n")).join("\n"),"\n    ")},[eN,o]),ez=(0,l.useCallback)(async()=>{z(!0);try{let e=o.map(e=>({...e,effects:e.effects.filter(e=>e.enabled),keyframes:e.keyframes.filter((e,a,t)=>0===a||a===t.length-1||Math.abs(e.time-t[a-1].time)>100)}));d(e),em("Optimized performance")}finally{z(!1)}},[o]),eS=(0,l.useCallback)(async()=>{let e=o.map(e=>c(e.content)?e.content.src:null).filter(e=>"string"==typeof e&&e.length>0);await Promise.all(e.map(e=>new Promise((a,t)=>{let s=new Image;s.onload=a,s.onerror=t,s.src=e})))},[o]),eZ=(0,l.useCallback)(()=>{"caches"in window&&caches.delete("editor-assets")},[]),eL=e=>{switch(e){case"text":return{text:"Novo texto",fontSize:24,color:"#000000"};case"image":return{src:"",alt:"Nova imagem"};case"video":case"audio":return{src:"",autoplay:!1,loop:!1};case"animation":return{type:"fade",duration:1e3};case"interaction":return{type:"button",action:"next"};case"safety":return{type:"warning",message:"Aten\xe7\xe3o: \xe1rea de risco"};default:return{}}},eA=async e=>({src:URL.createObjectURL(e),name:e.name,size:e.size}),eE=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":"image";return{layers:o,timeline:m,viewport:x,history:p,dragDrop:f,selection:b,clipboard:j,isLoading:N,isProcessing:C,error:S,addLayer:E,removeLayer:I,duplicateLayer:R,moveLayer:P,updateLayer:T,toggleLayerVisibility:D,toggleLayerLock:M,setCurrentTime:_,play:O,pause:U,stop:F,setPlaybackRate:V,addMarker:K,removeMarker:J,setTimelineZoom:G,addKeyframe:q,removeKeyframe:B,updateKeyframe:W,moveKeyframe:X,addEffect:Y,removeEffect:H,updateEffect:Q,setViewportZoom:$,setViewportPan:ee,setViewportRotation:ea,resetViewport:et,fitToContent:es,selectLayer:el,selectKeyframe:ei,clearSelection:en,selectAll:er,copy:ec,cut:eo,paste:ed,undo:eu,redo:ex,saveState:em,importAsset:eh,exportProject:ep,exportLayer:ey,generateContent:ef,optimizeTimeline:eg,suggestEffects:eb,autoSync:ev,shareProject:ej,inviteCollaborator:ew,validateCompliance:eN,fixComplianceIssues:ek,generateAccessibilityReport:eC,optimizePerformance:ez,preloadAssets:eS,clearCache:eZ}};var d=t(92595),m=t(34029),u=t(51098),x=t(65046),h=t(41875),p=t(41236),y=t(75277),f=t(53113),g=t(29374),b=t(22106),v=t(82023),j=t(58896),w=t(88906),N=t(28124),k=t(83229),C=t(17689),z=t(92735),S=t(68919),Z=t(75965),L=t(44353),A=t(78867),E=t(40292),I=t(5136),R=t(37533),P=t(1740),T=t(41473),D=t(45884),M=t(64972),_=t(41671),O=t(45274),U=t(89227),F=t(33276),V=t(61094),K=t(51548),J=t(66337),G=t(43391),q=t(45802),B=t(69076),W=t(98728),X=t(76865),Y=t(42208),H=t(87769),Q=t(49589),$=t(18930),ee=t(11239),ea=t(48736),et=t(22835);let es=e=>{let{projectId:a,initialData:t,onSave:i,onExport:n,className:r}=e,c=o(),es=(0,l.useRef)(null),el=(0,l.useRef)(null),[ei,en]=(0,l.useState)("layers"),[er,ec]=(0,l.useState)("select"),[eo,ed]=(0,l.useState)(!0),[em,eu]=(0,l.useState)(!0),[ex,eh]=(0,l.useState)("2d"),[ep,ey]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"z":e.preventDefault(),e.shiftKey?c.redo():c.undo();break;case"c":e.preventDefault(),c.copy();break;case"x":e.preventDefault(),c.cut();break;case"v":e.preventDefault(),c.paste();break;case"s":e.preventDefault(),ef();break;case"a":e.preventDefault(),c.selectAll()}switch(e.key){case"v":ec("select");break;case"m":ec("move");break;case"t":ec("text");break;case" ":e.preventDefault(),c.timeline.isPlaying?c.pause():c.play()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]);let ef=(0,l.useCallback)(()=>{let e={layers:c.layers,timeline:c.timeline,viewport:c.viewport};null==i||i(e)},[c,i]),eg=(0,l.useCallback)(async e=>{try{let a=await c.exportProject(e),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="project.".concat(e),s.click(),URL.revokeObjectURL(t),null==n||n(e)}catch(e){console.error("Export failed:",e)}},[c,n]),eb=(0,l.useCallback)(async e=>{let a=e.target.files;if(a)for(let e of Array.from(a))try{await c.importAsset(e)}catch(e){console.error("Import failed:",e)}},[c]),ev=e=>{let a=Math.floor(e/1e3);return"".concat(Math.floor(a/60),":").concat((a%60).toString().padStart(2,"0"))},ej=e=>{switch(e){case"text":return y.Z;case"image":return f.Z;case"video":return g.Z;case"audio":return b.Z;case"animation":return v.Z;case"interaction":return j.Z;case"safety":return w.Z;default:return N.Z}};return c.isLoading?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{children:"Carregando editor..."})]})}):(0,s.jsxs)("div",{className:(0,et.cn)("flex flex-col h-screen bg-gray-100",r),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white border-b",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:ef,title:"Salvar (Ctrl+S)",children:(0,s.jsx)(k.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("label",{children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",title:"Importar arquivo",asChild:!0,children:(0,s.jsx)("span",{children:(0,s.jsx)(C.Z,{className:"w-4 h-4"})})}),(0,s.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*,audio/*",onChange:eb,className:"hidden"})]}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>eg("json"),title:"Exportar projeto",children:(0,s.jsx)(z.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.shareProject(),title:"Compartilhar",children:(0,s.jsx)(S.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.undo,disabled:c.history.currentIndex<=0,title:"Desfazer (Ctrl+Z)",children:(0,s.jsx)(Z.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.redo,disabled:c.history.currentIndex>=c.history.states.length-1,title:"Refazer (Ctrl+Shift+Z)",children:(0,s.jsx)(L.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.copy,disabled:0===c.selection.selectedLayers.length,title:"Copiar (Ctrl+C)",children:(0,s.jsx)(A.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.cut,disabled:0===c.selection.selectedLayers.length,title:"Recortar (Ctrl+X)",children:(0,s.jsx)(E.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.paste,disabled:!c.clipboard,title:"Colar (Ctrl+V)",children:(0,s.jsx)(I.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"flex items-center gap-1 border-r pr-2",children:[{id:"select",icon:R.Z,title:"Selecionar (V)"},{id:"move",icon:P.Z,title:"Mover (M)"},{id:"text",icon:y.Z,title:"Texto (T)"},{id:"image",icon:f.Z,title:"Imagem"},{id:"video",icon:g.Z,title:"V\xeddeo"},{id:"audio",icon:b.Z,title:"\xc1udio"},{id:"animation",icon:v.Z,title:"Anima\xe7\xe3o"},{id:"interaction",icon:j.Z,title:"Intera\xe7\xe3o"},{id:"safety",icon:w.Z,title:"Seguran\xe7a"}].map(e=>(0,s.jsx)(d.z,{variant:er===e.id?"default":"ghost",size:"sm",onClick:()=>ec(e.id),title:e.title,children:(0,s.jsx)(e.icon,{className:"w-4 h-4"})},e.id))}),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[(0,s.jsx)(d.z,{variant:eo?"default":"ghost",size:"sm",onClick:()=>ed(!eo),title:"Mostrar grade",children:(0,s.jsx)(T.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>eh("2d"===ex?"3d":"2d"),title:"Modo ".concat("2d"===ex?"3D":"2D"),children:"2d"===ex?"3D":"2D"}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>ey(!ep),title:"Tela cheia",children:(0,s.jsx)(D.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.optimizeTimeline(),disabled:c.isProcessing,title:"Otimizar com IA",children:(0,s.jsx)(M.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.validateCompliance(),title:"Verificar conformidade",children:(0,s.jsx)(_.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 border-b",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.setCurrentTime(0),title:"Ir para o in\xedcio",children:(0,s.jsx)(O.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.timeline.isPlaying?c.pause:c.play,title:c.timeline.isPlaying?"Pausar (Espa\xe7o)":"Reproduzir (Espa\xe7o)",children:c.timeline.isPlaying?(0,s.jsx)(U.Z,{className:"w-4 h-4"}):(0,s.jsx)(F.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:c.stop,title:"Parar",children:(0,s.jsx)(V.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.setCurrentTime(c.timeline.duration),title:"Ir para o fim",children:(0,s.jsx)(K.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("span",{className:"text-sm font-mono",children:ev(c.timeline.currentTime)}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"/"}),(0,s.jsx)("span",{className:"text-sm font-mono text-gray-500",children:ev(c.timeline.duration)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("span",{className:"text-sm",children:"Velocidade:"}),(0,s.jsxs)("select",{value:c.timeline.playbackRate,onChange:e=>c.setPlaybackRate(Number(e.target.value)),className:"text-sm border rounded px-2 py-1",children:[(0,s.jsx)("option",{value:.25,children:"0.25x"}),(0,s.jsx)("option",{value:.5,children:"0.5x"}),(0,s.jsx)("option",{value:1,children:"1x"}),(0,s.jsx)("option",{value:1.5,children:"1.5x"}),(0,s.jsx)("option",{value:2,children:"2x"})]})]}),c.isProcessing&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{className:"text-sm",children:"Processando..."})]})]}),(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-1 relative bg-gray-100 overflow-hidden",children:[em&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute top-0 left-8 right-0 h-8 bg-white border-b flex items-end",children:Array.from({length:Math.ceil(c.viewport.width/50)},(e,a)=>(0,s.jsxs)("div",{className:"relative",style:{width:50*c.viewport.zoom},children:[(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-px h-2 bg-gray-400"}),(0,s.jsx)("span",{className:"absolute bottom-0 left-1 text-xs text-gray-500",children:50*a})]},a))}),(0,s.jsx)("div",{className:"absolute top-8 left-0 bottom-0 w-8 bg-white border-r flex flex-col justify-end",children:Array.from({length:Math.ceil(c.viewport.height/50)},(e,a)=>(0,s.jsxs)("div",{className:"relative",style:{height:50*c.viewport.zoom},children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 h-px w-2 bg-gray-400"}),(0,s.jsx)("span",{className:"absolute top-1 right-1 text-xs text-gray-500 transform -rotate-90 origin-center",style:{fontSize:"10px"},children:50*a})]},a))})]}),(0,s.jsxs)("div",{className:(0,et.cn)("absolute bg-white shadow-lg",em?"top-8 left-8":"top-4 left-4"),style:{width:c.viewport.width*c.viewport.zoom,height:c.viewport.height*c.viewport.zoom,transform:"translate(".concat(c.viewport.pan.x,"px, ").concat(c.viewport.pan.y,"px)")},children:[(0,s.jsx)("canvas",{ref:es,width:c.viewport.width,height:c.viewport.height,className:"w-full h-full",style:{background:eo?"radial-gradient(circle, #ccc 1px, transparent 1px)":"white",backgroundSize:eo?"20px 20px":"auto"}}),c.layers.filter(e=>e.visible).map(e=>{var a,t,l,i;let n=ej(e.type);return(0,s.jsxs)("div",{className:(0,et.cn)("absolute border-2 cursor-pointer transition-all",c.selection.selectedLayers.includes(e.id)?"border-blue-500 bg-blue-50":"border-transparent hover:border-gray-300"),style:{left:e.position.x,top:e.position.y,width:100,height:60,transform:"scale(".concat(e.scale.x,", ").concat(e.scale.y,") rotate(").concat(e.rotation.z,"deg)"),opacity:e.opacity,zIndex:e.position.z},onClick:()=>c.selectLayer(e.id),children:[(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-white rounded",children:"image"===e.type&&(null===(a=e.content)||void 0===a?void 0:a.src)?(0,s.jsx)("img",{src:e.content.src,alt:e.name,className:"w-full h-full object-cover rounded"}):"text"===e.type?(0,s.jsx)("div",{className:"text-center text-xs",style:{fontSize:Math.min((null===(t=e.content)||void 0===t?void 0:t.fontSize)||12,12),color:(null===(l=e.content)||void 0===l?void 0:l.color)||"#000"},children:(null===(i=e.content)||void 0===i?void 0:i.text)||e.name}):(0,s.jsx)(n,{className:"w-6 h-6 text-gray-400"})}),e.locked&&(0,s.jsx)(J.Z,{className:"absolute -top-2 -right-2 w-4 h-4 text-red-500 bg-white rounded-full p-0.5"})]},e.id)})]}),(0,s.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>c.setViewportZoom(1.2*c.viewport.zoom),title:"Zoom in",children:(0,s.jsx)(G.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>c.setViewportZoom(c.viewport.zoom/1.2),title:"Zoom out",children:(0,s.jsx)(q.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:c.resetViewport,title:"Reset view",children:(0,s.jsx)(B.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:c.fitToContent,title:"Fit to content",children:(0,s.jsx)(D.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsx)("div",{className:"w-80 bg-white border-l flex flex-col",children:(0,s.jsxs)(u.mQ,{value:ei,onValueChange:en,className:"flex-1",children:[(0,s.jsxs)(u.dr,{className:"grid w-full grid-cols-4",children:[(0,s.jsxs)(u.SP,{value:"layers",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),"Camadas"]}),(0,s.jsxs)(u.SP,{value:"properties",children:[(0,s.jsx)(W.Z,{className:"w-4 h-4 mr-1"}),"Props"]}),(0,s.jsxs)(u.SP,{value:"effects",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),"Efeitos"]}),(0,s.jsxs)(u.SP,{value:"ai",children:[(0,s.jsx)(M.Z,{className:"w-4 h-4 mr-1"}),"IA"]})]}),(0,s.jsx)(u.nU,{value:"layers",className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Camadas"}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.addLayer("text"),title:"Adicionar camada de texto",children:(0,s.jsx)(y.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.addLayer("image"),title:"Adicionar camada de imagem",children:(0,s.jsx)(f.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.addLayer("safety"),title:"Adicionar elemento de seguran\xe7a",children:(0,s.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsx)("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:c.layers.map((e,a)=>{let t=ej(e.type),l=c.selection.selectedLayers.includes(e.id);return(0,s.jsxs)("div",{className:(0,et.cn)("flex items-center gap-2 p-2 rounded cursor-pointer",l?"bg-blue-100":"hover:bg-gray-100"),onClick:()=>c.selectLayer(e.id),children:[(0,s.jsx)(t,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"flex-1 text-sm truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[e.metadata.compliance.warnings.length>0&&(0,s.jsx)(X.Z,{className:"w-3 h-3 text-yellow-500"}),e.metadata.compliance.safetyRating>=90&&(0,s.jsx)(_.Z,{className:"w-3 h-3 text-green-500"}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),c.toggleLayerVisibility(e.id)},className:"p-0 h-auto",children:e.visible?(0,s.jsx)(Y.Z,{className:"w-3 h-3"}):(0,s.jsx)(H.Z,{className:"w-3 h-3 text-gray-400"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),c.toggleLayerLock(e.id)},className:"p-0 h-auto",children:e.locked?(0,s.jsx)(J.Z,{className:"w-3 h-3 text-red-500"}):(0,s.jsx)(Q.Z,{className:"w-3 h-3"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),c.removeLayer(e.id)},className:"p-0 h-auto text-red-500 hover:text-red-700",children:(0,s.jsx)($.Z,{className:"w-3 h-3"})})]})]},e.id)})})]})}),(0,s.jsx)(u.nU,{value:"properties",className:"flex-1 p-4",children:c.selection.selectedLayers.length>0?(0,s.jsx)("div",{className:"space-y-4",children:c.selection.selectedLayers.map(e=>{var a,t,l;let i=c.layers.find(a=>a.id===e);return i?(0,s.jsxs)(m.Zb,{children:[(0,s.jsx)(m.Ol,{className:"pb-2",children:(0,s.jsx)(m.ll,{className:"text-sm",children:i.name})}),(0,s.jsxs)(m.aY,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Opacidade"}),(0,s.jsx)(x.i,{value:[100*i.opacity],onValueChange:a=>{let[t]=a;return c.updateLayer(e,{opacity:t/100})},min:0,max:100,step:1,className:"mt-1"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"X"}),(0,s.jsx)("input",{type:"number",value:i.position.x,onChange:a=>c.updateLayer(e,{position:{...i.position,x:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Y"}),(0,s.jsx)("input",{type:"number",value:i.position.y,onChange:a=>c.updateLayer(e,{position:{...i.position,y:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Z"}),(0,s.jsx)("input",{type:"number",value:i.position.z,onChange:a=>c.updateLayer(e,{position:{...i.position,z:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Escala X"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:i.scale.x,onChange:a=>c.updateLayer(e,{scale:{...i.scale,x:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Escala Y"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:i.scale.y,onChange:a=>c.updateLayer(e,{scale:{...i.scale,y:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Rota\xe7\xe3o"}),(0,s.jsx)("input",{type:"number",value:i.rotation.z,onChange:a=>c.updateLayer(e,{rotation:{...i.rotation,z:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]})]}),"text"===i.type&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Texto"}),(0,s.jsx)("textarea",{value:(null===(a=i.content)||void 0===a?void 0:a.text)||"",onChange:a=>c.updateLayer(e,{content:{...i.content,text:a.target.value}}),className:"w-full text-xs border rounded px-2 py-1 mt-1",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Tamanho"}),(0,s.jsx)("input",{type:"number",value:(null===(t=i.content)||void 0===t?void 0:t.fontSize)||16,onChange:a=>c.updateLayer(e,{content:{...i.content,fontSize:Number(a.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium",children:"Cor"}),(0,s.jsx)("input",{type:"color",value:(null===(l=i.content)||void 0===l?void 0:l.color)||"#000000",onChange:a=>c.updateLayer(e,{content:{...i.content,color:a.target.value}}),className:"w-full h-6 border rounded"})]})]})]}),(0,s.jsxs)("div",{className:"pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-xs font-medium",children:"Conformidade"}),(0,s.jsxs)(h.C,{variant:i.metadata.compliance.safetyRating>=90?"default":"secondary",children:[i.metadata.compliance.safetyRating,"/100"]})]}),(0,s.jsx)(p.E,{value:i.metadata.compliance.safetyRating,className:"h-2"}),i.metadata.compliance.nrStandards.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:i.metadata.compliance.nrStandards.map(e=>(0,s.jsx)(h.C,{variant:"outline",className:"text-xs",children:e},e))})]})]})]},e):null})}):(0,s.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,s.jsx)(N.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"Selecione uma camada para ver as propriedades"})]})}),(0,s.jsx)(u.nU,{value:"effects",className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Efeitos"}),c.selection.selectedLayers.length>0&&(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:async()=>{let e=c.selection.selectedLayers[0];await c.suggestEffects(e)},children:[(0,s.jsx)(ee.Z,{className:"w-4 h-4 mr-1"}),"Sugerir"]})]}),c.selection.selectedLayers.length>0?c.selection.selectedLayers.map(e=>{let a=c.layers.find(a=>a.id===e);return a?(0,s.jsxs)(m.Zb,{children:[(0,s.jsx)(m.Ol,{className:"pb-2",children:(0,s.jsxs)(m.ll,{className:"text-sm",children:[a.name," - Efeitos"]})}),(0,s.jsx)(m.aY,{children:a.effects.length>0?(0,s.jsx)("div",{className:"space-y-2",children:a.effects.map(a=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:a.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[a.type," • ",ev(a.duration)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.updateEffect(e,a.id,{enabled:!a.enabled}),className:"p-0 h-auto",children:a.enabled?(0,s.jsx)(Y.Z,{className:"w-3 h-3"}):(0,s.jsx)(H.Z,{className:"w-3 h-3 text-gray-400"})}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>c.removeEffect(e,a.id),className:"p-0 h-auto text-red-500",children:(0,s.jsx)($.Z,{className:"w-3 h-3"})})]})]},a.id))}):(0,s.jsxs)("div",{className:"text-center text-gray-500 py-4",children:[(0,s.jsx)(v.Z,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"Nenhum efeito aplicado"})]})})]},e):null}):(0,s.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,s.jsx)(v.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"Selecione uma camada para gerenciar efeitos"})]})]})}),(0,s.jsx)(u.nU,{value:"ai",className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Assistente de IA"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.optimizeTimeline(),disabled:c.isProcessing,children:[(0,s.jsx)(M.Z,{className:"w-4 h-4 mr-2"}),"Otimizar Timeline"]}),(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.validateCompliance(),disabled:c.isProcessing,children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Verificar Conformidade"]}),(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.fixComplianceIssues(),disabled:c.isProcessing,children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Corrigir Problemas"]}),(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.generateAccessibilityReport(),disabled:c.isProcessing,children:[(0,s.jsx)(ea.Z,{className:"w-4 h-4 mr-2"}),"Relat\xf3rio de Acessibilidade"]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Gerar Conte\xfado"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("textarea",{placeholder:"Descreva o conte\xfado que deseja gerar...",className:"w-full text-sm border rounded px-2 py-1",rows:3}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","text"),disabled:c.isProcessing,children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),"Texto"]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","image"),disabled:c.isProcessing,children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"Imagem"]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","animation"),disabled:c.isProcessing,children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),"Anima\xe7\xe3o"]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","safety"),disabled:c.isProcessing,children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),"Seguran\xe7a"]})]})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Estat\xedsticas do Projeto"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Camadas:"}),(0,s.jsx)("span",{children:c.layers.length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Dura\xe7\xe3o:"}),(0,s.jsx)("span",{children:ev(c.timeline.duration)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Keyframes:"}),(0,s.jsx)("span",{children:c.layers.reduce((e,a)=>e+a.keyframes.length,0)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Efeitos:"}),(0,s.jsx)("span",{children:c.layers.reduce((e,a)=>e+a.effects.length,0)})]})]})]})]})})]})})]}),(0,s.jsxs)("div",{className:"h-48 bg-gray-50 border-t",children:[(0,s.jsxs)("div",{className:"h-8 bg-white border-b flex items-center px-4",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Timeline"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,s.jsx)("span",{className:"text-xs",children:"Zoom:"}),(0,s.jsx)(x.i,{value:[c.timeline.zoom],onValueChange:e=>{let[a]=e;return c.setTimelineZoom(a)},min:.1,max:5,step:.1,className:"w-20"})]})]}),(0,s.jsxs)("div",{ref:el,className:"flex-1 relative overflow-x-auto overflow-y-hidden",style:{height:"calc(100% - 2rem)"},children:[(0,s.jsx)("div",{className:"h-6 bg-gray-100 border-b flex",children:Array.from({length:Math.ceil(c.timeline.duration/1e3)},(e,a)=>(0,s.jsx)("div",{className:"relative border-r border-gray-300",style:{width:100*c.timeline.zoom},children:(0,s.jsxs)("span",{className:"absolute top-0 left-1 text-xs",children:[a,"s"]})},a))}),(0,s.jsx)("div",{className:"absolute top-0 bottom-0 w-px bg-red-500 z-10 pointer-events-none",style:{left:c.timeline.currentTime/1e3*100*c.timeline.zoom},children:(0,s.jsx)("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-red-500 transform rotate-45"})}),(0,s.jsx)("div",{className:"flex-1",children:c.layers.map((e,a)=>(0,s.jsxs)("div",{className:"h-8 border-b border-gray-200 flex items-center relative",children:[(0,s.jsx)("div",{className:(0,et.cn)("absolute h-6 rounded border-2 flex items-center px-2","video"===e.type?"bg-blue-100 border-blue-300":"audio"===e.type?"bg-green-100 border-green-300":"text"===e.type?"bg-yellow-100 border-yellow-300":"image"===e.type?"bg-purple-100 border-purple-300":"bg-gray-100 border-gray-300"),style:{left:e.metadata.startTime/1e3*100*c.timeline.zoom,width:e.metadata.duration/1e3*100*c.timeline.zoom,top:4},children:(0,s.jsx)("span",{className:"text-xs font-medium truncate",children:e.name})}),e.keyframes.map(e=>(0,s.jsx)("div",{className:"absolute w-2 h-2 bg-orange-500 rounded-full border border-white cursor-pointer",style:{left:e.time/1e3*100*c.timeline.zoom-4,top:12},onClick:()=>c.selectKeyframe(e.id),title:"Keyframe at ".concat(ev(e.time))},e.id))]},e.id))}),c.timeline.markers.map(e=>(0,s.jsx)("div",{className:"absolute top-6 bottom-0 w-px bg-yellow-500 cursor-pointer",style:{left:e.time/1e3*100*c.timeline.zoom},title:e.title,children:(0,s.jsx)("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-yellow-500 rounded-full text-xs flex items-center justify-center text-white",children:"safety"===e.type?"⚠":"quiz"===e.type?"?":"checkpoint"===e.type?"✓":"•"})},e.id))]})]}),c.error&&(0,s.jsx)("div",{className:"absolute bottom-4 left-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded",children:c.error})]})}},65046:function(e,a,t){t.d(a,{i:function(){return r}});var s=t(57437),l=t(2265),i=t(38846),n=t(22835);let r=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsxs)(i.fC,{ref:a,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",t),...l,children:[(0,s.jsx)(i.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,s.jsx)(i.e6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(i.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});r.displayName=i.fC.displayName}}]);