"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{512:function(e,t,s){s.d(t,{Z:function(){return ea}});var a=s(57437),r=s(2265),i=s(69064);let n={maxSize:100,ttl:3e5,enableMetrics:!0};class l{get(e){let t=this.cache.get(e);if(!t){this.metrics.misses++;return}if(Date.now()-t.timestamp>this.config.ttl){this.cache.delete(e),this.metrics.misses++;return}return t.hitCount++,this.metrics.hits++,t.data}set(e,t){if(this.cache.size>=this.config.maxSize){let e=this.findOldestKey();e&&(this.cache.delete(e),this.metrics.evictions++)}this.cache.set(e,{key:e,data:t,timestamp:Date.now(),hitCount:0}),this.metrics.sets++}has(e){let t=this.cache.get(e);return!!t&&(!(Date.now()-t.timestamp>this.config.ttl)||(this.cache.delete(e),!1))}delete(e){return this.cache.delete(e)}clear(){this.cache.clear(),this.metrics={hits:0,misses:0,sets:0,evictions:0}}getMetrics(){let e=this.metrics.hits+this.metrics.misses;return{...this.metrics,hitRate:e>0?this.metrics.hits/e*100:0,size:this.cache.size,maxSize:this.config.maxSize}}findOldestKey(){let e;let t=Date.now();for(let[s,a]of this.cache)a.timestamp<t&&(t=a.timestamp,e=s);return e}constructor(e={}){this.cache=new Map,this.metrics={hits:0,misses:0,sets:0,evictions:0},this.config={...n,...e}}}let o=null,c={light:{canvas:"#ffffff",toolbar:"#f8f9fa",sidebar:"#f1f3f4",accent:"#6366f1",text:"#1f2937",textSecondary:"#6b7280",border:"#e5e7eb",background:"#ffffff",surface:"#f9fafb"},dark:{canvas:"#1a1a1a",toolbar:"#2d2d2d",sidebar:"#242424",accent:"#8b5cf6",text:"#ffffff",textSecondary:"#a1a1aa",border:"#374151",background:"#111111",surface:"#1f1f1f"},pro:{canvas:"#0f0f23",toolbar:"#1a1a2e",sidebar:"#16213e",accent:"#e94560",text:"#eeeeff",textSecondary:"#9ca3af",border:"#2d3748",background:"#0a0a1a",surface:"#141428"}},d=(0,r.createContext)(void 0);function m(e){let{children:t}=e,[s,i]=(0,r.useState)("system"),[n,l]=(0,r.useState)("light");(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");l(e.matches?"dark":"light");let t=e=>{l(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("canvas-editor-theme");e&&i(e)},[]);let o=e=>{i(e),localStorage.setItem("canvas-editor-theme",e)},m="system"===s?n:s,u=c[m],h={background:u.background,color:u.text,"--theme-canvas":u.canvas,"--theme-toolbar":u.toolbar,"--theme-sidebar":u.sidebar,"--theme-accent":u.accent,"--theme-text":u.text,"--theme-textSecondary":u.textSecondary,"--theme-border":u.border,"--theme-background":u.background,"--theme-surface":u.surface};return(0,r.useEffect)(()=>{let e=document.documentElement;Object.entries(u).forEach(t=>{let[s,a]=t;e.style.setProperty("--theme-".concat(s),a)})},[u]),(0,a.jsx)(d.Provider,{value:{theme:s,actualTheme:m,colors:u,setTheme:o,toggleTheme:()=>{let e=["light","dark","pro"],t=e.indexOf(m);o(e[(t+1)%e.length])}},children:(0,a.jsx)("div",{className:"theme-".concat(m),style:h,children:t})})}let u=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useTheme must be used within AdvancedThemeProvider");return e};function h(){let{theme:e,setTheme:t,actualTheme:s}=u();return(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-surface",children:[(0,a.jsx)("button",{onClick:()=>t("light"),className:"p-2 rounded ".concat("light"===s?"bg-accent text-white":"bg-transparent"),title:"Tema Claro",children:"☀️"}),(0,a.jsx)("button",{onClick:()=>t("dark"),className:"p-2 rounded ".concat("dark"===s?"bg-accent text-white":"bg-transparent"),title:"Tema Escuro",children:"\uD83C\uDF19"}),(0,a.jsx)("button",{onClick:()=>t("pro"),className:"p-2 rounded ".concat("pro"===s?"bg-accent text-white":"bg-transparent"),title:"Tema Profissional",children:"\uD83D\uDCBC"})]})}function f(e){let{canvas:t,enabled:s,snapDistance:a=5}=e,i=(0,r.useRef)([]),[n,l]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if(!t||!s)return;let e=e=>{let s=e.target;if(!s)return;let r=[];t.getObjects().filter(e=>e!==s).forEach(e=>{let t=e.getBoundingRect(),i=s.getBoundingRect(),n=Math.abs(t.left-i.left),l=Math.abs(t.left+t.width/2-(i.left+i.width/2)),o=Math.abs(t.left+t.width-(i.left+i.width));if(n<a)r.push({type:"vertical",position:t.left,objects:[e.id,s.id],color:"#ff6b6b"}),s.set({left:t.left});else if(l<a){let a=t.left+t.width/2-i.width/2;r.push({type:"vertical",position:t.left+t.width/2,objects:[e.id,s.id],color:"#4ecdc4"}),s.set({left:a})}else if(o<a){let a=t.left+t.width-i.width;r.push({type:"vertical",position:t.left+t.width,objects:[e.id,s.id],color:"#45b7d1"}),s.set({left:a})}let c=Math.abs(t.top-i.top),d=Math.abs(t.top+t.height/2-(i.top+i.height/2)),m=Math.abs(t.top+t.height-(i.top+i.height));if(c<a)r.push({type:"horizontal",position:t.top,objects:[e.id,s.id],color:"#ff6b6b"}),s.set({top:t.top});else if(d<a){let a=t.top+t.height/2-i.height/2;r.push({type:"horizontal",position:t.top+t.height/2,objects:[e.id,s.id],color:"#4ecdc4"}),s.set({top:a})}else if(m<a){let a=t.top+t.height-i.height;r.push({type:"horizontal",position:t.top+t.height,objects:[e.id,s.id],color:"#45b7d1"}),s.set({top:a})}}),i.current=r,l([...r]),n()},r=()=>{o(),l([])},n=()=>{o(),i.current.forEach(e=>{try{if(t.add){var s,a;let r="vertical"===e.type?[e.position,0,e.position,(null===(s=t.getHeight)||void 0===s?void 0:s.call(t))||600]:[0,e.position,(null===(a=t.getWidth)||void 0===a?void 0:a.call(t))||800,e.position],i={stroke:e.color,strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,excludeFromExport:!0,name:"smart-guide",coords:r};t.add(i)}}catch(e){console.warn("Error rendering guide:",e)}}),t.renderAll&&t.renderAll()},o=()=>{try{t.getObjects&&t.getObjects().filter(e=>"smart-guide"===e.name).forEach(e=>{t.remove&&t.remove(e)})}catch(e){console.warn("Error clearing guides:",e)}};return t.on&&(t.on("object:moving",e),t.on("object:moved",r)),()=>{t.off&&(t.off("object:moving",e),t.off("object:moved",r)),o()}},[t,s,a]),null}var x=s(92595),g=s(41875),p=s(75965),v=s(44353),b=s(45802),j=s(43391),N=s(45884),y=s(31734),w=s(58310),k=s(17881),C=s(46263),z=s(57308),A=s(74509),Z=s(49589),S=s(66337),D=s(42208),E=s(87769),I=s(78867),M=s(40292),R=s(3289),F=s(55062);function T(e){let{selectedObjects:t,canUndo:s,canRedo:r,zoom:i,onUndo:n,onRedo:l,onZoomIn:o,onZoomOut:c,onFitToScreen:d,onAlign:m,onLock:u,onUnlock:h,onToggleVisibility:f,onCopy:T,onCut:O,onGroup:P,onUngroup:V}=e,L=t.length>0,U=t.length>1,B=t.every(e=>e.lockMovementX&&e.lockMovementY),Y=t.every(e=>!1!==e.visible);return(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-2 shadow-lg backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("div",{className:"flex gap-1 pr-2 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:n,disabled:!s,title:"Desfazer (Ctrl+Z)",className:"h-8 w-8 p-0",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:l,disabled:!r,title:"Refazer (Ctrl+Y)",className:"h-8 w-8 p-0",children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:c,title:"Diminuir zoom",className:"h-8 w-8 p-0",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(g.C,{variant:"outline",className:"text-xs min-w-[50px] justify-center",children:[Math.round(i),"%"]}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:o,title:"Aumentar zoom",className:"h-8 w-8 p-0",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:d,title:"Ajustar \xe0 tela",className:"h-8 w-8 p-0",children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]}),L&&(0,a.jsxs)("div",{className:"flex gap-1 px-2 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>m("left"),title:"Alinhar \xe0 esquerda",className:"h-8 w-8 p-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>m("center"),title:"Centralizar horizontalmente",className:"h-8 w-8 p-0",children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>m("right"),title:"Alinhar \xe0 direita",className:"h-8 w-8 p-0",children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>m("top"),title:"Alinhar ao topo",className:"h-8 w-8 p-0",children:(0,a.jsx)(C.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>m("middle"),title:"Centralizar verticalmente",className:"h-8 w-8 p-0",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>m("bottom"),title:"Alinhar \xe0 base",className:"h-8 w-8 p-0",children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})]}),L&&(0,a.jsxs)("div",{className:"flex gap-1 px-2 border-r border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:B?h:u,title:B?"Desbloquear":"Bloquear",className:"h-8 w-8 p-0",children:B?(0,a.jsx)(Z.Z,{className:"h-4 w-4"}):(0,a.jsx)(S.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:f,title:Y?"Ocultar":"Mostrar",className:"h-8 w-8 p-0",children:Y?(0,a.jsx)(D.Z,{className:"h-4 w-4"}):(0,a.jsx)(E.Z,{className:"h-4 w-4"})})]}),L&&(0,a.jsxs)("div",{className:"flex gap-1 px-2",children:[(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:T,title:"Copiar (Ctrl+C)",className:"h-8 w-8 p-0",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:O,title:"Recortar (Ctrl+X)",className:"h-8 w-8 p-0",children:(0,a.jsx)(M.Z,{className:"h-4 w-4"})}),U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:P,title:"Agrupar (Ctrl+G)",className:"h-8 w-8 p-0",children:(0,a.jsx)(R.Z,{className:"h-4 w-4"})})]}),t.some(e=>"group"===e.type)&&(0,a.jsx)(x.z,{variant:"ghost",size:"sm",onClick:V,title:"Desagrupar (Ctrl+Shift+G)",className:"h-8 w-8 p-0",children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]}),L&&(0,a.jsx)("div",{className:"flex items-center gap-2 px-2 border-l border-gray-200 dark:border-gray-700",children:(0,a.jsxs)(g.C,{variant:"secondary",className:"text-xs",children:[t.length," selecionado",t.length>1?"s":""]})})]})})}var O=s(58922);class P{static getInstance(){return P.instance||(P.instance=new P),P.instance}initialize(){this.isActive||(this.isActive=!0,this.captureContext(),this.registerFixes(),this.startMonitoring(),console.log("✅ Emergency fixes initialized (improved version)"))}captureContext(){this.context={userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight},performance:{memory:this.getPerformanceMemory(),navigation:this.getPerformanceNavigation()},errors:[],timestamp:Date.now()}}registerFixes(){this.fixes.set("fabric-conflicts",()=>{window.fabric&&!window.fabricLoaded&&(window.fabricLoaded=!0,console.log("\uD83D\uDD27 Fixed: Fabric.js conflicts resolved"))}),this.fixes.set("canvas-textbaseline",()=>{var e;let t=null===(e=window.CanvasRenderingContext2D)||void 0===e?void 0:e.prototype;if(!t)return;let s=t.fillText;t.fillText=function(e,t,a,r){return"alphabetical"===this.textBaseline&&(this.textBaseline="alphabetic"),s.call(this,e,t,a,r)},console.log("\uD83D\uDD27 Fixed: Canvas TextBaseline corrected")}),this.fixes.set("performance-monitor",()=>{if("undefined"==typeof PerformanceObserver)return;let e=new PerformanceObserver(e=>{for(let t of e.getEntries())t.duration>50&&(console.warn("⚠️ Long task detected:","".concat(t.duration,"ms")),setTimeout(()=>this.optimizePerformance(),100))});try{e.observe({entryTypes:["longtask","measure"]})}catch(e){console.log("Long task monitoring not supported",e)}}),this.fixes.set("memory-cleanup",()=>{console.log("\uD83D\uDD27 Fixed: Memory leak prevention active")})}startMonitoring(){let e=window.setInterval(()=>{this.checkForIssues()},3e4);window.addEventListener("beforeunload",()=>{clearInterval(e)})}checkForIssues(){let e=this.getPerformanceMemory();if(e){let t=e.usedJSHeapSize/e.totalJSHeapSize;t>.9&&(console.warn("\uD83D\uDEA8 High memory usage detected:","".concat((100*t).toFixed(1),"%")),this.optimizePerformance())}this.context&&Date.now()-this.context.timestamp>6e4&&this.captureContext()}optimizePerformance(){if(window.gc)try{window.gc(),console.log("\uD83D\uDDD1️ Forced garbage collection")}catch(e){}document.querySelectorAll("canvas").forEach(e=>{let t=e.getContext("2d");null==t||t.clearRect(0,0,e.width,e.height)}),console.log("⚡ Performance optimization applied")}applyFix(e){let t=this.fixes.get(e);try{null==t||t()}catch(t){console.error("Error applying fix ".concat(e,":"),t)}}applyAllFixes(){this.fixes.forEach((e,t)=>this.applyFix(t))}getStatus(){return{isActive:this.isActive,fixesCount:this.fixes.size,context:this.context}}getPerformanceMemory(){if("undefined"==typeof performance)return;let e=performance.memory;if(!e)return;let{jsHeapSizeLimit:t,totalJSHeapSize:s,usedJSHeapSize:a}=e;if("number"==typeof t&&"number"==typeof s&&"number"==typeof a)return{jsHeapSizeLimit:t,totalJSHeapSize:s,usedJSHeapSize:a}}getPerformanceNavigation(){if("undefined"!=typeof performance)return performance.navigation}constructor(){this.fixes=new Map,this.isActive=!1,this.context=null}}P.instance=null;{let e=P.getInstance();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.initialize()):e.initialize()}var V=s(51098),L=s(65046),U=s(81973),B=s(6403),Y=s(33276),q=s(89227),X=s(61094),H=s(92735),W=s(75277),_=s(53113),G=s(50417),Q=s(18930),J=s(98728),K=s(45274),$=s(51548),ee=s(81706);let et=null;function es(){let e=(0,r.useRef)(null),t=(0,r.useRef)(null),[s,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0),[m,p]=(0,r.useState)(10),[v,N]=(0,r.useState)(100),[y,w]=(0,r.useState)([]),[k,C]=(0,r.useState)(null),[z,A]=(0,r.useState)([]),[I,M]=(0,r.useState)({format:"mp4",quality:"high",fps:30,duration:10});!function(e){let t=(0,r.useRef)();t.current||(o||(o=new l(void 0)),t.current=o);let s=(0,r.useMemo)(()=>t.current,[]);(0,r.useCallback)(e=>s.get(e),[s]),(0,r.useCallback)((e,t)=>{s.set(e,t)},[s]),(0,r.useCallback)(e=>s.has(e),[s]),(0,r.useCallback)(()=>s.getMetrics(),[s]),(0,r.useCallback)(()=>{s.clear()},[s]),s.delete.bind(s)}();let R=function(e){let[t,s]=(0,r.useState)(!0),[i,n]=(0,r.useState)(5);return{enabled:t,setEnabled:s,snapDistance:i,setSnapDistance:n,component:(0,a.jsx)(f,{canvas:e,enabled:t,snapDistance:i})}}(t.current),F=function(e){let[t,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!1),[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(100);return(0,r.useEffect)(()=>{if(!e)return;let t=()=>{s(e.getActiveObjects?e.getActiveObjects():[])},a=()=>{c(Math.round(100*(e.getZoom?e.getZoom():1)))};return e.on&&(e.on("selection:created",t),e.on("selection:updated",t),e.on("selection:cleared",t),e.on("canvas:zoom",a)),()=>{e.off&&(e.off("selection:created",t),e.off("selection:updated",t),e.off("selection:cleared",t),e.off("canvas:zoom",a))}},[e]),{selectedObjects:t,canUndo:a,canRedo:n,zoom:o,onUndo:()=>{(null==e?void 0:e.undo)&&e.undo()},onRedo:()=>{(null==e?void 0:e.redo)&&e.redo()},onZoomIn:()=>{if(null==e?void 0:e.setZoom){let t=e.getZoom()||1;e.setZoom(Math.min(1.1*t,5))}},onZoomOut:()=>{if(null==e?void 0:e.setZoom){let t=e.getZoom()||1;e.setZoom(Math.max(.9*t,.1))}},onFitToScreen:()=>{(null==e?void 0:e.setZoom)&&(e.setZoom(1),e.centerObject)},onAlign:s=>{e&&0!==t.length&&console.log("Aligning objects:",s,t)},onLock:()=>{t.forEach(e=>{e.set&&e.set({lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,lockRotation:!0})}),(null==e?void 0:e.renderAll)&&e.renderAll()},onUnlock:()=>{t.forEach(e=>{e.set&&e.set({lockMovementX:!1,lockMovementY:!1,lockScalingX:!1,lockScalingY:!1,lockRotation:!1})}),(null==e?void 0:e.renderAll)&&e.renderAll()},onToggleVisibility:()=>{t.forEach(e=>{e.set&&e.set({visible:!e.visible})}),(null==e?void 0:e.renderAll)&&e.renderAll()},onCopy:()=>{console.log("Copying objects:",t)},onCut:()=>{console.log("Cutting objects:",t)},onGroup:()=>{(null==e?void 0:e.group)&&t.length>1&&console.log("Grouping objects:",t)},onUngroup:()=>{(null==e?void 0:e.ungroup)&&console.log("Ungrouping objects:",t)}}}(t.current),{colors:es,actualTheme:ea}=u(),{fabric:er}=(0,O.h6)();(0,r.useEffect)(()=>{er&&(et=er,P.getInstance().applyAllFixes())},[er]),(0,r.useEffect)(()=>{if(er&&e.current&&!t.current&&et){let s=new et.Canvas(e.current,{width:1920,height:1080,backgroundColor:"#ffffff"});s.on("selection:created",e=>{e.selected&&e.selected.length>0&&C(e.selected[0].customId||null)}),s.on("selection:cleared",()=>{C(null)}),t.current=s,ei(s)}return()=>{var e;null===(e=t.current)||void 0===e||e.dispose()}},[er]);let ei=e=>{if(!et)return;let t=new et.Text("Est\xfadio IA de V\xeddeos",{left:100,top:100,fontSize:48,fontFamily:"Arial",fill:"#333333"});t.customId="text-1",e.add(t);let s=new et.Rect({left:100,top:200,width:200,height:100,fill:"#4F46E5",rx:10,ry:10});s.customId="rect-1",e.add(s);let a=new et.Circle({left:400,top:200,radius:50,fill:"#EF4444"});a.customId="circle-1",e.add(a),w([{id:"text-1",type:"text",name:"T\xedtulo Principal",visible:!0,locked:!1,animation:{type:"fadeIn",duration:1,delay:0}},{id:"rect-1",type:"shape",name:"Ret\xe2ngulo Azul",visible:!0,locked:!1,animation:{type:"slideIn",duration:.8,delay:.5}},{id:"circle-1",type:"shape",name:"C\xedrculo Vermelho",visible:!0,locked:!1,animation:{type:"zoomIn",duration:.6,delay:1}}])},en=e=>{let s;if(!t.current||!et)return;let a="".concat(e,"-").concat(Date.now());switch(e){case"rectangle":s=new et.Rect({left:200,top:200,width:150,height:100,fill:"#4F46E5"});break;case"circle":s=new et.Circle({left:200,top:200,radius:75,fill:"#10B981"});break;case"triangle":s=new et.Triangle({left:200,top:200,width:150,height:130,fill:"#F59E0B"})}s.customId=a,t.current.add(s),t.current.setActiveObject(s),w(t=>[...t,{id:a,type:"shape",name:"".concat(e.charAt(0).toUpperCase()+e.slice(1)),visible:!0,locked:!1}]),i.Am.success("".concat(e," adicionado"))},el=e=>{if(w(t=>t.map(t=>t.id===e?{...t,visible:!t.visible}:t)),t.current){let s=t.current.getObjects().find(t=>t.customId===e);s&&(s.visible=!s.visible,t.current.renderAll())}},eo=e=>{if(w(t=>t.map(t=>t.id===e?{...t,locked:!t.locked}:t)),t.current){let s=t.current.getObjects().find(t=>t.customId===e);if(s){let e=!1===s.selectable;s.selectable=e,s.evented=e,t.current.renderAll()}}},ec=e=>{if(w(t=>t.filter(t=>t.id!==e)),t.current){let s=t.current.getObjects().find(t=>t.customId===e);s&&t.current.remove(s)}i.Am.success("Objeto removido")},ed=async()=>{if(t.current){i.Am.loading("Exportando v\xeddeo...");try{await new Promise(e=>setTimeout(e,3e3));let e=t.current.toDataURL({format:"png",quality:1,multiplier:2}),s=document.createElement("a");s.download="estudio-ia-video.png",s.href=e,s.click(),i.Am.success("V\xeddeo exportado com sucesso!")}catch(e){console.error(e),i.Am.error("Erro ao exportar v\xeddeo")}}};return er?(0,a.jsxs)("div",{className:"h-screen flex flex-col",style:{backgroundColor:es.background,color:es.text},children:[R.component,(0,a.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-50",children:(0,a.jsx)(T,{...F})}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",style:{backgroundColor:es.toolbar,borderColor:es.border},children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Canvas Editor Pro"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.z,{size:"sm",variant:"outline",onClick:()=>{n(!0),i.Am.success("Iniciando reprodu\xe7\xe3o da timeline")},disabled:s,children:(0,a.jsx)(Y.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{size:"sm",variant:"outline",onClick:()=>{n(!1),(0,i.Am)("Reprodu\xe7\xe3o pausada")},disabled:!s,children:(0,a.jsx)(q.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{size:"sm",variant:"outline",onClick:()=>{n(!1),d(0),(0,i.Am)("Reprodu\xe7\xe3o parada")},children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"mx-4 text-sm text-muted-foreground",children:[Math.floor(c),"s / ",m,"s"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h,{}),(0,a.jsx)("div",{className:"w-px h-6 bg-border mx-2"}),(0,a.jsx)(x.z,{size:"sm",variant:"outline",onClick:()=>{let e=Math.max(v-25,25);N(e),t.current&&(t.current.setZoom(e/100),t.current.renderAll())},children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm w-16 text-center",children:[v,"%"]}),(0,a.jsx)(x.z,{size:"sm",variant:"outline",onClick:()=>{let e=Math.min(v+25,500);N(e),t.current&&(t.current.setZoom(e/100),t.current.renderAll())},children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})}),(0,a.jsxs)(x.z,{size:"sm",onClick:ed,className:"ml-4",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsx)("div",{className:"w-80 border-r",style:{backgroundColor:es.sidebar,borderColor:es.border},children:(0,a.jsxs)(V.mQ,{defaultValue:"tools",className:"h-full",children:[(0,a.jsxs)(V.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(V.SP,{value:"tools",onClick:()=>console.log("Ferramentas tab clicked"),children:"Ferramentas"}),(0,a.jsx)(V.SP,{value:"layers",onClick:()=>console.log("Camadas tab clicked"),children:"Camadas"}),(0,a.jsx)(V.SP,{value:"assets",onClick:()=>console.log("Assets tab clicked"),children:"Assets"})]}),(0,a.jsxs)(V.nU,{value:"tools",className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>{if(!t.current||!et)return;let e=new et.Text("Novo Texto",{left:200,top:200,fontSize:32,fontFamily:"Arial",fill:"#000000"}),s="text-".concat(Date.now());e.customId=s,t.current.add(e),t.current.setActiveObject(e),w(e=>[...e,{id:s,type:"text",name:"Novo Texto",visible:!0,locked:!1}]),i.Am.success("Texto adicionado")},className:"h-20 flex flex-col",children:[(0,a.jsx)(W.Z,{className:"h-6 w-6 mb-1"}),"Texto"]}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a||!t.current||!et)return;let r=new FileReader;r.onload=e=>{var s;et.Image.fromURL(null===(s=e.target)||void 0===s?void 0:s.result,e=>{var s,r;e.scaleToWidth(300);let n="image-".concat(Date.now());e.customId=n,e.set({left:100,top:100}),null===(s=t.current)||void 0===s||s.add(e),null===(r=t.current)||void 0===r||r.setActiveObject(e),w(e=>[...e,{id:n,type:"image",name:a.name,visible:!0,locked:!1}]),i.Am.success("Imagem adicionada")})},r.readAsDataURL(a)},e.click()},className:"h-20 flex flex-col",children:[(0,a.jsx)(_.Z,{className:"h-6 w-6 mb-1"}),"Imagem"]}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>en("rectangle"),className:"h-20 flex flex-col",children:[(0,a.jsx)(G.Z,{className:"h-6 w-6 mb-1"}),"Ret\xe2ngulo"]}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>en("circle"),className:"h-20 flex flex-col",children:[(0,a.jsx)(G.Z,{className:"h-6 w-6 mb-1"}),"C\xedrculo"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Cor de Fundo"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-white border rounded"}),(0,a.jsx)(U.I,{type:"color",defaultValue:"#ffffff",className:"w-16 h-8"})]})]})})]}),(0,a.jsx)(V.nU,{value:"layers",className:"p-4",children:(0,a.jsx)(B.x,{className:"h-96",children:(0,a.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded border ".concat(k===e.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,a.jsx)(x.z,{size:"sm",variant:"ghost",onClick:()=>el(e.id),className:"w-8 h-8 p-0",children:e.visible?(0,a.jsx)(D.Z,{className:"h-4 w-4"}):(0,a.jsx)(E.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{size:"sm",variant:"ghost",onClick:()=>eo(e.id),className:"w-8 h-8 p-0",children:e.locked?(0,a.jsx)(S.Z,{className:"h-4 w-4"}):(0,a.jsx)(Z.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)(g.C,{variant:"outline",className:"text-xs",children:e.type})]}),(0,a.jsx)(x.z,{size:"sm",variant:"ghost",onClick:()=>ec(e.id),className:"w-8 h-8 p-0 text-red-600 hover:text-red-700",children:(0,a.jsx)(Q.Z,{className:"h-4 w-4"})})]},e.id))})})}),(0,a.jsx)(V.nU,{value:"assets",className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Templates NR"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("div",{className:"aspect-video bg-gradient-to-br from-blue-400 to-blue-600 rounded p-2 cursor-pointer hover:opacity-80",children:(0,a.jsx)("div",{className:"text-white text-xs",children:"NR-12"})}),(0,a.jsx)("div",{className:"aspect-video bg-gradient-to-br from-green-400 to-green-600 rounded p-2 cursor-pointer hover:opacity-80",children:(0,a.jsx)("div",{className:"text-white text-xs",children:"NR-33"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"\xcdcones"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"aspect-square bg-gray-100 rounded flex items-center justify-center cursor-pointer hover:bg-gray-200",children:(0,a.jsx)(J.Z,{className:"h-6 w-6 text-gray-600"})},t))})]})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",style:{backgroundColor:es.canvas},children:[(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-100 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,a.jsx)("canvas",{ref:e,className:"border",style:{maxWidth:"100%",maxHeight:"100%",transform:"scale(".concat(Math.min(1,v/100),")")}})})}),(0,a.jsxs)("div",{className:"h-48 bg-gray-900 text-white p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Timeline"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.z,{size:"sm",variant:"secondary",children:(0,a.jsx)(K.Z,{className:"h-4 w-4"})}),(0,a.jsx)(x.z,{size:"sm",variant:"secondary",children:(0,a.jsx)($.Z,{className:"h-4 w-4"})}),(0,a.jsx)(ee.Z,{className:"h-4 w-4 ml-4"}),(0,a.jsx)(L.i,{value:[75],max:100,step:1,className:"w-20"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex border-b border-gray-700 pb-2 mb-2",children:[...Array(Math.ceil(m))].map((e,t)=>(0,a.jsxs)("div",{className:"flex-1 text-xs text-gray-400",children:[t,"s"]},t))}),(0,a.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-24 text-xs truncate",children:e.name}),(0,a.jsx)("div",{className:"flex-1 h-8 bg-gray-800 rounded relative",children:e.animation&&(0,a.jsx)("div",{className:"absolute h-full bg-blue-500 rounded opacity-80",style:{left:"".concat(e.animation.delay/m*100,"%"),width:"".concat(e.animation.duration/m*100,"%")},children:(0,a.jsx)("div",{className:"p-1 text-xs",children:e.animation.type})})})]},e.id))}),(0,a.jsx)("div",{className:"absolute top-0 w-0.5 bg-red-500 h-full pointer-events-none",style:{left:"".concat(c/m*100,"%")}})]})]})]}),(0,a.jsx)("div",{className:"w-80 border-l",style:{backgroundColor:es.sidebar,borderColor:es.border},children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium mb-4",children:"Propriedades"}),k?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Nome"}),(0,a.jsx)(U.I,{className:"mt-1",defaultValue:"Objeto Selecionado"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"X"}),(0,a.jsx)(U.I,{type:"number",className:"mt-1",defaultValue:"100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Y"}),(0,a.jsx)(U.I,{type:"number",className:"mt-1",defaultValue:"100"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Largura"}),(0,a.jsx)(U.I,{type:"number",className:"mt-1",defaultValue:"200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Altura"}),(0,a.jsx)(U.I,{type:"number",className:"mt-1",defaultValue:"100"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Opacidade"}),(0,a.jsx)(L.i,{defaultValue:[100],max:100,step:1,className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Anima\xe7\xe3o"}),(0,a.jsxs)("select",{className:"mt-1 w-full p-2 border rounded",children:[(0,a.jsx)("option",{value:"none",children:"Nenhuma"}),(0,a.jsx)("option",{value:"fadeIn",children:"Fade In"}),(0,a.jsx)("option",{value:"slideIn",children:"Slide In"}),(0,a.jsx)("option",{value:"zoomIn",children:"Zoom In"})]})]})]}):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Selecione um objeto para editar suas propriedades"})]})})]})]}):(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Carregando Editor Canvas..."}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Inicializando ferramentas profissionais"})]})})}function ea(){return(0,a.jsx)(m,{children:(0,a.jsx)(es,{})})}},41875:function(e,t,s){s.d(t,{C:function(){return l}});var a=s(57437);s(2265);var r=s(90535),i=s(22835);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:s}),t),...r})}},92595:function(e,t,s){s.d(t,{d:function(){return l},z:function(){return o}});var a=s(57437),r=s(2265),i=s(90535),n=s(22835);let l=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:o=!1,...c}=e;return(0,a.jsx)(o?"span":"button",{className:(0,n.cn)(l({variant:r,size:i,className:s})),ref:t,...c})});o.displayName="Button"},81973:function(e,t,s){s.d(t,{I:function(){return n}});var a=s(57437),r=s(2265),i=s(22835);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},6403:function(e,t,s){s.d(t,{B:function(){return o},x:function(){return l}});var a=s(57437),r=s(2265),i=s(43643),n=s(22835);let l=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(i.fC,{ref:t,className:(0,n.cn)("relative overflow-hidden",s),...l,children:[(0,a.jsx)(i.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(o,{}),(0,a.jsx)(i.Ns,{})]})});l.displayName=i.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,a.jsx)(i.gb,{ref:t,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 border-t border-t-transparent p-[1px]",s),...l,children:(0,a.jsx)(i.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=i.gb.displayName},65046:function(e,t,s){s.d(t,{i:function(){return l}});var a=s(57437),r=s(2265),i=s(38846),n=s(22835);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(i.fC,{ref:t,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(i.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,a.jsx)(i.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(i.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});l.displayName=i.fC.displayName},51098:function(e,t,s){s.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var a=s(57437),r=s(2265),i=s(20271),n=s(22835);let l=i.fC,o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});o.displayName=i.aV.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});c.displayName=i.xz.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});d.displayName=i.VY.displayName},58922:function(e,t,s){s.d(t,{ZO:function(){return n},h6:function(){return l}});var a=s(78960);let r=null;function i(){return r||(r=a),r}i();let n={getInstance:i,createCanvas:function(e,t){return new(i()).Canvas(e,t)},createStaticCanvas:function(e,t){return new(i()).StaticCanvas(e,t)}},l=()=>({fabric:i(),FabricManager:n})},22835:function(e,t,s){s.d(t,{cn:function(){return i}});var a=s(61994),r=s(53335);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}}]);