"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3289],{33289:function(e,s,i){var a=i(57437),t=i(2265),l=i(92595),r=i(34029),c=i(65046),d=i(81973),o=i(46393),n=i(45274),m=i(89227),x=i(33276),h=i(61094),p=i(51548),v=i(81706),f=i(45802),u=i(43391),j=i(99397),y=i(98728),g=i(18930),b=i(36498);s.Z=()=>{var e,s,i,k,N,w;let z=(0,t.useRef)(null),[C,S]=(0,t.useState)(!1),[T,Z]=(0,t.useState)(0),[M,_]=(0,t.useState)(300),[K,E]=(0,t.useState)(1),[V,A]=(0,t.useState)(null),[O,R]=(0,t.useState)([{id:"track-video-1",name:"Video Track 1",type:"video",height:60,locked:!1,visible:!0,color:"#3b82f6"},{id:"track-audio-1",name:"Audio Track 1",type:"audio",height:40,locked:!1,visible:!0,color:"#10b981"},{id:"track-overlay-1",name:"Overlay Track 1",type:"overlay",height:50,locked:!1,visible:!0,color:"#f59e0b"}]),[D,I]=(0,t.useState)([{id:"obj-1",name:"Slide 1",type:"video",startTime:0,duration:30,track:0,keyframes:[{id:"kf-1",time:0,property:"opacity",value:0,easing:"power2.out"},{id:"kf-2",time:2,property:"opacity",value:1,easing:"power2.out"},{id:"kf-3",time:28,property:"opacity",value:1,easing:"power2.in"},{id:"kf-4",time:30,property:"opacity",value:0,easing:"power2.in"}],properties:{x:0,y:0,scale:1,opacity:1}},{id:"obj-2",name:"Narration 1",type:"audio",startTime:2,duration:26,track:1,keyframes:[{id:"kf-5",time:2,property:"volume",value:0,easing:"power1.out"},{id:"kf-6",time:4,property:"volume",value:1,easing:"power1.out"}],properties:{volume:1}},{id:"obj-3",name:"Title Text",type:"text",startTime:5,duration:20,track:2,keyframes:[{id:"kf-7",time:5,property:"y",value:-50,easing:"back.out(1.7)"},{id:"kf-8",time:7,property:"y",value:0,easing:"back.out(1.7)"}],properties:{x:100,y:50,scale:1,opacity:1,color:"#ffffff"}}]),P=(0,t.useCallback)(()=>{if(S(!C),C)b.p8.killTweensOf("*");else{let e=b.p8.timeline({onUpdate:()=>{Z(e.time())},onComplete:()=>{S(!1),Z(0)}});D.forEach(s=>{s.keyframes.forEach(s=>{e.set({},{},s.time)})}),e.play()}},[C,D]),U=e=>"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0"),":").concat(Math.floor(e%1*30).toString().padStart(2,"0")),X=e=>e/M*1e3*K,B=e=>e/(1e3*K)*M,Y=e=>{let s={id:"track-".concat(e,"-").concat(Date.now()),name:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Track ").concat(O.filter(s=>s.type===e).length+1),type:e,height:"audio"===e?40:"video"===e?60:50,locked:!1,visible:!0,color:"video"===e?"#3b82f6":"audio"===e?"#10b981":"#f59e0b"};R([...O,s])},q=(e,s)=>{I(D.map(i=>i.id===e?{...i,...s}:i))},F=(e,s,i)=>{var a;let t={id:"kf-".concat(Date.now()),time:T,property:s,value:i,easing:"power2.out"};q(e,{keyframes:[...(null===(a=D.find(s=>s.id===e))||void 0===a?void 0:a.keyframes)||[],t]})},G=(e,s)=>{let i=D.find(s=>s.id===e);i&&q(e,{keyframes:i.keyframes.filter(e=>e.id!==s)})};return(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"h-16 bg-white dark:bg-gray-800 border-b flex items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>Z(0),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{size:"sm",onClick:P,children:C?(0,a.jsx)(m.Z,{className:"h-4 w-4"}):(0,a.jsx)(x.Z,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>S(!1),children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>Z(M),children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm font-mono",children:[U(T)," / ",U(M)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),(0,a.jsx)(c.i,{value:[100],max:100,step:1,className:"w-20"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>E(Math.max(.1,K/1.5)),children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm w-12 text-center",children:[Math.round(100*K),"%"]}),(0,a.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>E(Math.min(5,1.5*K)),children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})]})]})]}),(0,a.jsxs)("div",{className:"h-8 bg-gray-50 dark:bg-gray-700 border-b flex",children:[(0,a.jsx)("div",{className:"w-48 border-r"}),(0,a.jsxs)("div",{className:"flex-1 relative overflow-x-auto",children:[(0,a.jsx)("div",{className:"flex h-full",style:{width:"".concat(1e3*K,"px")},children:Array.from({length:Math.ceil(M/10)},(e,s)=>(0,a.jsx)("div",{className:"border-r border-gray-300 dark:border-gray-600 flex-shrink-0 relative",style:{width:"".concat(10/M*1e3*K,"px")},children:(0,a.jsx)("div",{className:"absolute top-0 left-1 text-xs text-gray-500",children:U(10*s)})},s))}),(0,a.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10 pointer-events-none",style:{left:"".concat(X(T),"px")},children:(0,a.jsx)("div",{className:"absolute -top-1 -left-2 w-4 h-3 bg-red-500 clip-path-triangle"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-48 bg-white dark:bg-gray-800 border-r",children:[(0,a.jsx)("div",{className:"p-2 border-b",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(l.z,{size:"sm",onClick:()=>Y("video"),children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Video"]}),(0,a.jsxs)(l.z,{size:"sm",onClick:()=>Y("audio"),children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Audio"]}),(0,a.jsxs)(l.z,{size:"sm",onClick:()=>Y("overlay"),children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Text"]})]})}),O.map((e,s)=>(0,a.jsxs)("div",{className:"border-b p-2 flex items-center justify-between",style:{height:"".concat(e.height,"px")},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(0,a.jsx)(l.z,{size:"sm",variant:"ghost",children:(0,a.jsx)(y.Z,{className:"h-3 w-3"})})})]},e.id))]}),(0,a.jsx)("div",{ref:z,className:"flex-1 overflow-auto cursor-pointer",onClick:e=>{let s=e.currentTarget.getBoundingClientRect();Z(Math.max(0,Math.min(M,B(e.clientX-s.left-200))))},children:(0,a.jsx)("div",{style:{width:"".concat(1e3*K,"px")},children:O.map((e,s)=>(0,a.jsxs)("div",{className:"border-b relative",style:{height:"".concat(e.height,"px")},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-50 dark:bg-gray-700"}),D.filter(e=>e.track===s).map(e=>(0,a.jsxs)("div",{className:"absolute top-1 bottom-1 rounded cursor-move border-2 transition-colors\n                        ".concat(V===e.id?"border-blue-500 bg-blue-200 dark:bg-blue-800":"border-gray-400 bg-white dark:bg-gray-600","\n                      "),style:{left:"".concat(X(e.startTime),"px"),width:"".concat(X(e.duration),"px")},onClick:s=>{s.stopPropagation(),A(e.id)},children:[(0,a.jsxs)("div",{className:"p-1 truncate",children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:U(e.duration)})]}),e.keyframes.map(s=>(0,a.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-yellow-400",style:{left:"".concat(X(s.time-e.startTime),"px")},title:"".concat(s.property,": ").concat(s.value)},s.id))]},e.id))]},e.id))})})]}),V&&(0,a.jsx)("div",{className:"h-48 bg-white dark:bg-gray-800 border-t p-4",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsxs)(r.ll,{className:"text-sm",children:["Keyframe Editor - ",null===(e=D.find(e=>e.id===V))||void 0===e?void 0:e.name]})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Opacity"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(c.i,{value:[(null===(s=D.find(e=>e.id===V))||void 0===s?void 0:s.properties.opacity)||1],onValueChange:e=>{let[s]=e;if(V){var i;q(V,{properties:{...null===(i=D.find(e=>e.id===V))||void 0===i?void 0:i.properties,opacity:s}})}},min:0,max:1,step:.1,className:"flex-1"}),(0,a.jsx)(l.z,{size:"sm",onClick:()=>V&&F(V,"opacity",1),children:"+Key"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Scale"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(c.i,{value:[(null===(i=D.find(e=>e.id===V))||void 0===i?void 0:i.properties.scale)||1],onValueChange:e=>{let[s]=e;if(V){var i;q(V,{properties:{...null===(i=D.find(e=>e.id===V))||void 0===i?void 0:i.properties,scale:s}})}},min:.1,max:3,step:.1,className:"flex-1"}),(0,a.jsx)(l.z,{size:"sm",onClick:()=>V&&F(V,"scale",1),children:"+Key"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Rotation"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(c.i,{value:[(null===(k=D.find(e=>e.id===V))||void 0===k?void 0:k.properties.rotation)||0],onValueChange:e=>{let[s]=e;if(V){var i;q(V,{properties:{...null===(i=D.find(e=>e.id===V))||void 0===i?void 0:i.properties,rotation:s}})}},min:-180,max:180,step:1,className:"flex-1"}),(0,a.jsx)(l.z,{size:"sm",onClick:()=>V&&F(V,"rotation",0),children:"+Key"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Position X"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(d.I,{type:"number",value:(null===(N=D.find(e=>e.id===V))||void 0===N?void 0:N.properties.x)||0,onChange:e=>{if(V){var s;q(V,{properties:{...null===(s=D.find(e=>e.id===V))||void 0===s?void 0:s.properties,x:parseInt(e.target.value)}})}},className:"flex-1"}),(0,a.jsx)(l.z,{size:"sm",onClick:()=>V&&F(V,"x",0),children:"+Key"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o._,{className:"text-sm",children:"Keyframes"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Time: ",U(T)]})]}),(0,a.jsx)("div",{className:"mt-2 space-y-1 max-h-20 overflow-y-auto",children:null===(w=D.find(e=>e.id===V))||void 0===w?void 0:w.keyframes.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs p-1 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,a.jsxs)("span",{children:[U(e.time)," - ",e.property,": ",e.value]}),(0,a.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>V&&G(V,e.id),children:(0,a.jsx)(g.Z,{className:"h-3 w-3"})})]},e.id))})]})]})]})})]})}}}]);