"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7521],{37521:function(e,t,s){s.r(t),s.d(t,{default:function(){return eC}});var a=s(57437),r=s(2265),l=s(34029),n=s(92595),i=s(51098),o=s(72927),c=s(41875),d=s(65046),u=s(46393),m=s(62060),h=s(69064),f=s(58922);function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:52428800,t=(0,r.useRef)(new Map),[s,a]=(0,r.useState)({hits:0,misses:0,evictions:0,totalSize:0,entryCount:0}),l=(0,r.useCallback)(()=>{let e=t.current;if(0===e.size)return;let s=null,r=Date.now();for(let[t,a]of e.entries())a.lastAccessed<r&&(r=a.lastAccessed,s=[t,a]);s&&(e.delete(s[0]),a(e=>({...e,evictions:e.evictions+1,totalSize:e.totalSize-s[1].size,entryCount:e.entryCount-1})))},[]),n=(0,r.useCallback)((r,n)=>{if(n&&r)try{let i=n.getObjects().find(e=>e.id===r);if(!i)return;let o=i.getBoundingRect(),c=document.createElement("canvas"),d=c.getContext("2d");if(!d)return;c.width=o.width||100,c.height=o.height||100,i.render(d);let u=d.getImageData(0,0,c.width,c.height),m=u.data.length,h=t.current;for(;s.totalSize+m>e&&h.size>0;)l();h.set(r,{id:r,imageData:u,lastAccessed:Date.now(),size:m,type:"object"}),a(e=>({...e,totalSize:e.totalSize+m,entryCount:e.entryCount+1}))}catch(e){console.warn("Cache object failed:",e)}},[e,s.totalSize,l]),i=(0,r.useCallback)(e=>{let s=t.current,r=s.get(e);return r?(r.lastAccessed=Date.now(),s.set(e,r),a(e=>({...e,hits:e.hits+1})),r.imageData):(a(e=>({...e,misses:e.misses+1})),null)},[]),o=(0,r.useCallback)(()=>{t.current.clear(),a({hits:0,misses:0,evictions:0,totalSize:0,entryCount:0})},[]),c=(0,r.useCallback)(e=>{let t=document.createElement("canvas"),s=window.fabric;if(!s||"object"!=typeof s)return;let a=new s.Canvas(t);a&&(e.forEach(e=>{if(e&&"object"==typeof e&&"id"in e){let t=e.id;a.add(e),null!=t&&n(String(t),a)}}),a.dispose())},[n]);return{cacheObject:n,renderFromCache:i,clearCache:o,getCacheStats:(0,r.useCallback)(()=>s,[s]),preloadObjects:c}}function g(){let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)({fps:60,renderTime:0,memoryUsage:0,objectCount:0,cacheHitRate:0,totalRenders:0}),l=(0,r.useRef)(0),n=(0,r.useRef)(Date.now()),i=(0,r.useRef)([]),o=(0,r.useRef)(0),c=(0,r.useRef)(0),d=(0,r.useRef)(0),u=(0,r.useRef)(),m=(0,r.useCallback)(e=>{let t=Date.now(),s=t-n.current;if(l.current++,s>=1e3){let r=1e3*l.current/s;l.current=0,n.current=t;let u=i.current.length>0?i.current.reduce((e,t)=>e+t,0)/i.current.length:0,m=e?.1*e.getObjects().length:0,h=c.current+d.current,f=h>0?c.current/h*100:0;a({fps:Math.min(r,60),renderTime:u,memoryUsage:m,objectCount:e?e.getObjects().length:0,cacheHitRate:f,totalRenders:o.current}),i.current=[]}},[]),h=(0,r.useCallback)(s=>{if(!s||e)return;t(!0);let a=s.renderAll.bind(s);s.renderAll=function(){let e=performance.now();a();let t=performance.now();o.current++,i.current.push(t-e),i.current.length>60&&i.current.shift()},u.current=setInterval(()=>{m(s)},100)},[m,e]),f=(0,r.useCallback)(()=>{t(!1),u.current&&clearInterval(u.current)},[]),x=(0,r.useCallback)(()=>s,[s]);return(0,r.useEffect)(()=>()=>{f()},[f]),{startMonitoring:h,stopMonitoring:f,getMetrics:x,isMonitoring:e}}let b=null;function p(e){let{width:t=1920,height:s=1080,backgroundColor:l="#ffffff",onCanvasReady:n,onObjectModified:i,enableGPUAcceleration:o=!0}=e,c=(0,r.useRef)(null),[d,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(!0),[v,j]=(0,r.useState)(!1),y=(0,r.useRef)(null),{cacheObject:w,clearCache:N}=x(),{startMonitoring:C,getMetrics:k}=g(),S=(0,r.useCallback)(async()=>{if(c.current&&!y.current&&(!c.current.dataset||"true"!==c.current.dataset.fabricInit))try{let e;if(p(!0),!(b=await f.ZO.getInstance()))return;let a=new b.Canvas(c.current,{width:t,height:s,backgroundColor:l,selection:!0,preserveObjectStacking:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,fireRightClick:!0,stopContextMenu:!0,...o&&{imageSmoothingEnabled:!0,allowTouchScrolling:!1,isDrawingMode:!1}}),r=!1;if(o)try{let e=a.getContext();e&&"filter"in e&&(r=!0,a.contextContainer&&(a.contextContainer.imageSmoothingQuality="high"),a.contextTop&&(a.contextTop.imageSmoothingQuality="high"))}catch(e){console.warn("GPU acceleration not available:",e)}a.on("object:modified",e=>{let t=e.target;t&&(w(t.id,a),null==i||i(t))}),a.on("object:added",e=>{let t=e.target;t&&!t.id&&(t.id="obj_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)))});let d=a.renderAll.bind(a);a.renderAll=function(){clearTimeout(e),e=setTimeout(()=>{d()},16)},y.current=a,c.current.dataset&&(c.current.dataset.fabricInit="true"),u(a),null==n||n(a),C(a),j(r),p(!1),h.Am.success("Canvas Engine ".concat(r?"GPU":"CPU"," Ready"))}catch(e){console.error("Canvas initialization error:",e),p(!1),h.Am.error("Canvas initialization failed")}},[t,s,l,n,i,o,w,C]);(0,r.useEffect)(()=>(S(),()=>{y.current&&(y.current.dispose(),y.current=null),c.current&&c.current.dataset&&delete c.current.dataset.fabricInit,u(null),j(!1),N()}),[S,N]);let Z=k();return(0,a.jsxs)("div",{className:"relative",children:[m&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-10",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),(0,a.jsx)("p",{children:"Initializing Canvas Engine..."})]})}),!m&&(0,a.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex gap-2",children:[(0,a.jsx)("div",{className:"bg-black/80 text-white px-2 py-1 rounded text-xs font-mono",children:v?"⚡ GPU":"\uD83D\uDD27 CPU"}),(0,a.jsxs)("div",{className:"bg-green-600/80 text-white px-2 py-1 rounded text-xs font-mono",children:[Z.fps.toFixed(0)," FPS"]}),(0,a.jsxs)("div",{className:"bg-blue-600/80 text-white px-2 py-1 rounded text-xs font-mono",children:[Z.objectCount," obj"]})]}),(0,a.jsx)("canvas",{ref:c,className:"block border border-gray-200 rounded-lg shadow-lg",style:{maxWidth:"100%",maxHeight:"100vh",imageRendering:v?"crisp-edges":"auto"}}),!1]})}let v={light:{mode:"light",colors:{canvas:"#ffffff",toolbar:"#f8f9fa",sidebar:"#f1f3f4",accent:"#6366f1",text:"#1f2937",border:"#e5e7eb",shadow:"rgba(0, 0, 0, 0.1)",hover:"#f3f4f6",active:"#e5e7eb",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},animations:{duration:"200ms",easing:"cubic-bezier(0.4, 0, 0.2, 1)"},shadows:{light:"0 1px 3px rgba(0, 0, 0, 0.1)",medium:"0 4px 6px rgba(0, 0, 0, 0.1)",heavy:"0 10px 15px rgba(0, 0, 0, 0.1)"}},dark:{mode:"dark",colors:{canvas:"#1a1a1a",toolbar:"#2d2d2d",sidebar:"#242424",accent:"#8b5cf6",text:"#ffffff",border:"#404040",shadow:"rgba(0, 0, 0, 0.3)",hover:"#3a3a3a",active:"#4a4a4a",success:"#34d399",warning:"#fbbf24",error:"#f87171"},animations:{duration:"200ms",easing:"cubic-bezier(0.4, 0, 0.2, 1)"},shadows:{light:"0 1px 3px rgba(0, 0, 0, 0.3)",medium:"0 4px 6px rgba(0, 0, 0, 0.3)",heavy:"0 10px 15px rgba(0, 0, 0, 0.3)"}},pro:{mode:"pro",colors:{canvas:"#0f0f23",toolbar:"#1a1a2e",sidebar:"#16213e",accent:"#e94560",text:"#eeeeeee",border:"#0f3460",shadow:"rgba(233, 69, 96, 0.2)",hover:"#233e61",active:"#16213e",success:"#00d4aa",warning:"#ff6b35",error:"#e94560"},animations:{duration:"300ms",easing:"cubic-bezier(0.25, 0.8, 0.25, 1)"},shadows:{light:"0 2px 4px rgba(233, 69, 96, 0.1)",medium:"0 8px 16px rgba(233, 69, 96, 0.15)",heavy:"0 16px 32px rgba(233, 69, 96, 0.2)"}},auto:{mode:"auto",colors:{canvas:"#ffffff",toolbar:"#f8f9fa",sidebar:"#f1f3f4",accent:"#6366f1",text:"#1f2937",border:"#e5e7eb",shadow:"rgba(0, 0, 0, 0.1)",hover:"#f3f4f6",active:"#e5e7eb",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},animations:{duration:"200ms",easing:"cubic-bezier(0.4, 0, 0.2, 1)"},shadows:{light:"0 1px 3px rgba(0, 0, 0, 0.1)",medium:"0 4px 6px rgba(0, 0, 0, 0.1)",heavy:"0 10px 15px rgba(0, 0, 0, 0.1)"}}},j=(0,r.createContext)(void 0);function y(){let e=(0,r.useContext)(j);if(void 0===e)throw Error("useCanvasTheme must be used within a CanvasThemeProvider");return e}function w(e){let{children:t,defaultTheme:s="auto"}=e,[l,n]=(0,r.useState)(s),[i,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");o(e.matches);let t=e=>{o(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("canvas-theme");e&&v[e]&&n(e)},[]);let c="auto"===l?i?"dark":"light":l,d=v[c];(0,r.useEffect)(()=>{let e=document.documentElement;Object.entries(d.colors).forEach(t=>{let[s,a]=t;e.style.setProperty("--canvas-".concat(s),a)}),e.style.setProperty("--canvas-duration",d.animations.duration),e.style.setProperty("--canvas-easing",d.animations.easing),Object.entries(d.shadows).forEach(t=>{let[s,a]=t;e.style.setProperty("--canvas-shadow-".concat(s),a)}),document.body.classList.remove("canvas-light","canvas-dark","canvas-pro"),document.body.classList.add("canvas-".concat(c))},[d,c]);let u=e=>{n(e),localStorage.setItem("canvas-theme",e),h.Am.success("".concat({light:"Tema Claro",dark:"Tema Escuro",pro:"Tema Profissional",auto:"Sistema"}[e]," ativado"),{duration:2e3,icon:"light"===e?"☀️":"dark"===e?"\uD83C\uDF19":"pro"===e?"⚡":"\uD83D\uDD04"})};return(0,a.jsx)(j.Provider,{value:{theme:d,setTheme:u,toggleTheme:()=>{let e=["light","dark","pro","auto"],t=(e.indexOf(l)+1)%e.length;u(e[t])},isSystemDark:i},children:(0,a.jsx)("div",{className:"canvas-theme-root",style:{"--canvas-current-theme":c,transition:"all ".concat(d.animations.duration," ").concat(d.animations.easing)},children:t})})}let N=e=>({light:"Claro",dark:"Escuro",pro:"Profissional",auto:"Autom\xe1tico"})[e];var C=s(61312),k=s(22835);let S=C.zt,Z=C.fC,z=C.xz,A=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(C.VY,{ref:t,sideOffset:r,className:(0,k.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});A.displayName=C.VY.displayName;var R=s(14064),T=s(18477),D=s(78867),O=s(43044),P=s(43391),M=s(45802),E=s(45884),F=s(31734),G=s(58310),I=s(17881),U=s(46263),V=s(57308),Y=s(74509),H=s(68428),B=s(28842),W=s(22135),_=s(40875),L=s(3289),X=s(55062),q=s(49589),Q=s(66337),J=s(16443),K=s(80512),$=s(61094),ee=s(40519),et=s(75277),es=s(53113),ea=s(41473),er=s(73559),el=s(12805),en=s(83229),ei=s(33276),eo=s(92735);function ec(e){let{canvas:t,onAction:s,selectedObjects:l=[],canUndo:i=!1,canRedo:u=!1,zoomLevel:m=100}=e,{theme:f,toggleTheme:x}=y(),[g,b]=(0,r.useState)("edit"),[p,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[N,C]=(0,r.useState)("select"),k=[{id:"undo",icon:(0,a.jsx)(R.Z,{className:"h-4 w-4"}),label:"Desfazer",shortcut:"Ctrl+Z",category:"edit",disabled:!i},{id:"redo",icon:(0,a.jsx)(T.Z,{className:"h-4 w-4"}),label:"Refazer",shortcut:"Ctrl+Y",category:"edit",disabled:!u},{id:"copy",icon:(0,a.jsx)(D.Z,{className:"h-4 w-4"}),label:"Copiar",shortcut:"Ctrl+C",category:"edit",disabled:0===l.length},{id:"paste",icon:(0,a.jsx)(O.Z,{className:"h-4 w-4"}),label:"Colar",shortcut:"Ctrl+V",category:"edit"},{id:"zoom-in",icon:(0,a.jsx)(P.Z,{className:"h-4 w-4"}),label:"Ampliar",shortcut:"Ctrl++",category:"zoom"},{id:"zoom-out",icon:(0,a.jsx)(M.Z,{className:"h-4 w-4"}),label:"Reduzir",shortcut:"Ctrl+-",category:"zoom"},{id:"fit-to-screen",icon:(0,a.jsx)(E.Z,{className:"h-4 w-4"}),label:"Ajustar \xe0 Tela",shortcut:"Ctrl+0",category:"zoom"},{id:"align-left",icon:(0,a.jsx)(F.Z,{className:"h-4 w-4"}),label:"Alinhar \xe0 Esquerda",category:"align",disabled:l.length<2},{id:"align-center",icon:(0,a.jsx)(G.Z,{className:"h-4 w-4"}),label:"Alinhar ao Centro",category:"align",disabled:l.length<2},{id:"align-right",icon:(0,a.jsx)(I.Z,{className:"h-4 w-4"}),label:"Alinhar \xe0 Direita",category:"align",disabled:l.length<2},{id:"align-top",icon:(0,a.jsx)(U.Z,{className:"h-4 w-4"}),label:"Alinhar ao Topo",category:"align",disabled:l.length<2},{id:"align-middle",icon:(0,a.jsx)(V.Z,{className:"h-4 w-4"}),label:"Alinhar ao Meio",category:"align",disabled:l.length<2},{id:"align-bottom",icon:(0,a.jsx)(Y.Z,{className:"h-4 w-4"}),label:"Alinhar \xe0 Base",category:"align",disabled:l.length<2},{id:"distribute-horizontal",icon:(0,a.jsx)(H.Z,{className:"h-4 w-4"}),label:"Distribuir Horizontalmente",category:"align",disabled:l.length<3},{id:"distribute-vertical",icon:(0,a.jsx)(B.Z,{className:"h-4 w-4"}),label:"Distribuir Verticalmente",category:"align",disabled:l.length<3},{id:"bring-to-front",icon:(0,a.jsx)(W.Z,{className:"h-4 w-4"}),label:"Trazer para Frente",category:"layer",disabled:0===l.length},{id:"send-to-back",icon:(0,a.jsx)(_.Z,{className:"h-4 w-4"}),label:"Enviar para Tr\xe1s",category:"layer",disabled:0===l.length},{id:"group",icon:(0,a.jsx)(L.Z,{className:"h-4 w-4"}),label:"Agrupar",category:"layer",disabled:l.length<2},{id:"ungroup",icon:(0,a.jsx)(X.Z,{className:"h-4 w-4"}),label:"Desagrupar",category:"layer",disabled:0===l.length},{id:"lock",icon:l.some(e=>e.lockMovementX||e.lockMovementY)?(0,a.jsx)(q.Z,{className:"h-4 w-4"}):(0,a.jsx)(Q.Z,{className:"h-4 w-4"}),label:l.some(e=>e.lockMovementX||e.lockMovementY)?"Desbloquear":"Bloquear",category:"layer",disabled:0===l.length},{id:"select",icon:(0,a.jsx)(J.Z,{className:"h-4 w-4"}),label:"Selecionar",shortcut:"V",category:"tools"},{id:"pan",icon:(0,a.jsx)(K.Z,{className:"h-4 w-4"}),label:"Mover Tela",shortcut:"H",category:"tools"},{id:"rectangle",icon:(0,a.jsx)($.Z,{className:"h-4 w-4"}),label:"Ret\xe2ngulo",shortcut:"R",category:"tools"},{id:"circle",icon:(0,a.jsx)(ee.Z,{className:"h-4 w-4"}),label:"C\xedrculo",shortcut:"O",category:"tools"},{id:"text",icon:(0,a.jsx)(et.Z,{className:"h-4 w-4"}),label:"Texto",shortcut:"T",category:"tools"},{id:"image",icon:(0,a.jsx)(es.Z,{className:"h-4 w-4"}),label:"Imagem",shortcut:"I",category:"tools"}],ec=(0,r.useCallback)(e=>{var a,r,n;if(!e.disabled)switch(e.id){case"undo":null==t||null===(a=t.undo)||void 0===a||a.call(t),h.Am.success("A\xe7\xe3o desfeita");break;case"redo":null==t||null===(r=t.redo)||void 0===r||r.call(t),h.Am.success("A\xe7\xe3o refeita");break;case"zoom-in":if(t){let e=Math.min(1.1*t.getZoom(),5);t.setZoom(e)}break;case"zoom-out":if(t){let e=Math.max(.9*t.getZoom(),.1);t.setZoom(e)}break;case"fit-to-screen":t&&t.setViewportTransform([1,0,0,1,0,0]);break;case"copy":t&&l.length>0&&(null===(n=t.getActiveObject())||void 0===n||n.clone(e=>{t.clipboard=e}),h.Am.success("".concat(l.length," objeto(s) copiado(s)")));break;case"paste":(null==t?void 0:t.clipboard)&&(t.clipboard.clone(e=>{t.discardActiveObject(),e.set({left:e.left+10,top:e.top+10,evented:!0}),t.add(e),t.setActiveObject(e),t.requestRenderAll()}),h.Am.success("Objeto colado"));break;case"select":case"pan":case"rectangle":case"circle":case"text":case"image":C(e.id),h.Am.success("Ferramenta ".concat(e.label," selecionada"));break;default:null==s||s(e.id)}},[t,l,s]),ed=k.filter(e=>"all"===g||e.category===g);return(0,a.jsx)("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2",style:{backgroundColor:f.colors.toolbar,borderColor:f.colors.border,boxShadow:f.shadows.medium},children:(0,a.jsxs)(S,{delayDuration:300,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 mr-2",children:[["edit","zoom","align","layer","tools"].map(e=>(0,a.jsx)(n.z,{variant:g===e?"default":"ghost",size:"sm",onClick:()=>b(e),className:"h-7 px-2 text-xs capitalize",children:"edit"===e?"Editar":"zoom"===e?"Zoom":"align"===e?"Alinhar":"layer"===e?"Camada":"Ferramentas"},e)),(0,a.jsx)(o.Z,{orientation:"vertical",className:"h-6"})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:ed.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:N===e.id?"default":"ghost",size:"sm",onClick:()=>ec(e),disabled:e.disabled,className:"h-8 w-8 p-0 relative",style:{backgroundColor:N===e.id?f.colors.accent:"transparent",color:N===e.id?"white":f.colors.text},children:[e.icon,e.badge&&(0,a.jsx)(c.C,{variant:"secondary",className:"absolute -top-1 -right-1 h-4 w-4 p-0 text-xs",children:e.badge})]})}),(0,a.jsx)(A,{side:"bottom",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-medium",children:e.label}),e.shortcut&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.shortcut})]})})]}),(1===t||4===t||7===t||15===t)&&(0,a.jsx)(o.Z,{orientation:"vertical",className:"h-6 mx-1"})]},e.id))}),(0,a.jsx)(o.Z,{orientation:"vertical",className:"h-6 mx-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-[120px]",children:[(0,a.jsxs)("span",{className:"text-xs font-mono",children:[Math.round(m),"%"]}),(0,a.jsx)(d.i,{value:[m],onValueChange:e=>{let[s]=e;t&&t.setZoom(s/100)},min:10,max:500,step:10,className:"w-16"})]}),(0,a.jsx)(o.Z,{orientation:"vertical",className:"h-6 mx-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsx)(n.z,{variant:p?"default":"ghost",size:"sm",onClick:()=>{v(!p),null==s||s("toggle-grid",!p)},className:"h-8 w-8 p-0",children:(0,a.jsx)(ea.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(A,{children:"Grade"})]}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsx)(n.z,{variant:j?"default":"ghost",size:"sm",onClick:()=>{w(!j),null==s||s("toggle-rulers",!j)},className:"h-8 w-8 p-0",children:(0,a.jsx)(er.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(A,{children:"R\xe9guas"})]}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:x,className:"h-8 w-8 p-0",children:(0,a.jsx)(el.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(A,{children:"Alternar Tema"})]}),(0,a.jsx)(o.Z,{orientation:"vertical",className:"h-6 mx-1"}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>null==s?void 0:s("save"),className:"h-8 w-8 p-0",children:(0,a.jsx)(en.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(A,{children:"Salvar (Ctrl+S)"})]}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>null==s?void 0:s("preview"),className:"h-8 w-8 p-0",children:(0,a.jsx)(ei.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(A,{children:"Pr\xe9via"})]}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(z,{asChild:!0,children:(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>null==s?void 0:s("export"),className:"h-8 w-8 p-0",children:(0,a.jsx)(eo.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(A,{children:"Exportar"})]})]})]}),l.length>0&&(0,a.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:[l.length," objeto(s) selecionado(s)"]}),(0,a.jsxs)("span",{children:["Zoom: ",Math.round(m),"%"]})]})})]})})}let ed={snapToGrid:!0,snapToObjects:!0,showGrid:!0,showRulers:!0,gridSize:20,snapDistance:10,showMeasurements:!0};function eu(e){let{canvas:t,options:s={},onOptionsChange:l}=e,{theme:n}=y(),[i,o]=(0,r.useState)({...ed,...s});(0,r.useRef)(null);let[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)([]);(0,r.useCallback)(e=>{let t={...i,...e};o(t),null==l||l(t)},[i,l]);let h=(0,r.useCallback)(()=>{if(!t||!i.showGrid)return;let e=t.getElement().getContext("2d");if(!e)return;let s=t.getZoom();t.viewportTransform;let a=i.gridSize*s;e.save(),e.globalAlpha=.1,e.strokeStyle=n.colors.border,e.lineWidth=1;let r=t.getWidth(),l=t.getHeight();for(let t=0;t<=r;t+=a)e.beginPath(),e.moveTo(t,0),e.lineTo(t,l),e.stroke();for(let t=0;t<=l;t+=a)e.beginPath(),e.moveTo(0,t),e.lineTo(r,t),e.stroke();e.restore()},[t,i.showGrid,i.gridSize,n.colors.border]),f=(0,r.useCallback)(()=>{if(!t||!i.showRulers)return;let e=t.getElement().getContext("2d");if(!e)return;let s=t.getZoom(),a=100*s,r=25*s;e.save(),e.fillStyle=n.colors.toolbar,e.strokeStyle=n.colors.border,e.font="10px monospace",e.textAlign="center",e.textBaseline="middle",e.fillRect(0,0,t.getWidth(),20),e.strokeRect(0,0,t.getWidth(),20);for(let l=0;l<=t.getWidth();l+=r){let t=l%a==0;e.beginPath(),e.moveTo(l,20),e.lineTo(l,20-(t?10:5)),e.stroke(),t&&l>0&&(e.fillStyle=n.colors.text,e.fillText(Math.round(l/s).toString(),l,10),e.fillStyle=n.colors.toolbar)}e.fillRect(0,0,20,t.getHeight()),e.strokeRect(0,0,20,t.getHeight()),e.textAlign="center",e.textBaseline="middle";for(let l=0;l<=t.getHeight();l+=r){let t=l%a==0;e.beginPath(),e.moveTo(20,l),e.lineTo(20-(t?10:5),l),e.stroke(),t&&l>0&&(e.save(),e.translate(10,l),e.rotate(-Math.PI/2),e.fillStyle=n.colors.text,e.fillText(Math.round(l/s).toString(),0,0),e.restore())}e.fillStyle=n.colors.sidebar,e.fillRect(0,0,20,20),e.strokeRect(0,0,20,20),e.restore()},[t,i.showRulers,n.colors]),x=(0,r.useCallback)(e=>{if(!i.snapToGrid)return e;let t=i.gridSize;return{x:Math.round(e.x/t)*t,y:Math.round(e.y/t)*t}},[i.snapToGrid,i.gridSize]),g=(0,r.useCallback)((e,t)=>{if(!i.snapToObjects)return[];let s=[];return t.getObjects().filter(t=>t!==e).forEach(e=>{let t=e.getBoundingRect();s.push({x:t.left,y:t.top,type:"edge",object:e},{x:t.left+t.width,y:t.top,type:"edge",object:e},{x:t.left,y:t.top+t.height,type:"edge",object:e},{x:t.left+t.width,y:t.top+t.height,type:"edge",object:e},{x:t.left+t.width/2,y:t.top,type:"center",object:e},{x:t.left+t.width/2,y:t.top+t.height,type:"center",object:e},{x:t.left,y:t.top+t.height/2,type:"center",object:e},{x:t.left+t.width,y:t.top+t.height/2,type:"center",object:e},{x:t.left+t.width/2,y:t.top+t.height/2,type:"center",object:e})}),s},[i.snapToObjects]),b=(0,r.useCallback)(()=>{if(!t||0===c.length)return;let e=t.getElement().getContext("2d");e&&(e.save(),e.strokeStyle=n.colors.accent,e.lineWidth=1,e.setLineDash([5,5]),e.globalAlpha=.8,c.forEach(s=>{e.beginPath(),"vertical"===s.type?(e.moveTo(s.position,0),e.lineTo(s.position,t.getHeight())):"horizontal"===s.type&&(e.moveTo(0,s.position),e.lineTo(t.getWidth(),s.position)),e.stroke()}),e.restore())},[t,c,n.colors.accent]),p=(0,r.useCallback)(()=>{if(!t||!i.showMeasurements||0===u.length)return;let e=t.getElement().getContext("2d");e&&(e.save(),e.font="12px monospace",e.fillStyle=n.colors.text,e.strokeStyle=n.colors.accent,e.lineWidth=1,u.forEach(t=>{e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.stroke();let s=(t.from.x+t.to.x)/2,a=(t.from.y+t.to.y)/2,r=Math.round(t.distance);e.fillStyle=n.colors.toolbar,e.fillRect(s-20,a-10,40,20),e.strokeRect(s-20,a-10,40,20),e.fillStyle=n.colors.text,e.textAlign="center",e.textBaseline="middle",e.fillText("".concat(r,"px"),s,a)}),e.restore())},[t,i.showMeasurements,u,n.colors]);return(0,r.useEffect)(()=>{if(!t)return;let e=e=>{let s=e.target;if(s){if(i.snapToGrid){let e=x({x:s.left,y:s.top});s.set({left:e.x,top:e.y})}if(i.snapToObjects){let e=g(s,t),a=s.getBoundingRect(),r=[];e.forEach(e=>{let t=Math.abs(e.x-(a.left+a.width/2)),l=Math.abs(e.y-(a.top+a.height/2));t<i.snapDistance&&(s.set({left:e.x-a.width/2}),r.push({type:"vertical",position:e.x})),l<i.snapDistance&&(s.set({top:e.y-a.height/2}),r.push({type:"horizontal",position:e.y}))}),d(r)}t.renderAll()}},s=()=>{d([]),m([])},a=e=>{if(i.showMeasurements&&e.selected&&e.selected.length>1){let t=[],s=e.selected;for(let e=0;e<s.length-1;e++)for(let a=e+1;a<s.length;a++){let r=s[e].getBoundingRect(),l=s[a].getBoundingRect(),n={x:r.left+r.width/2,y:r.top+r.height/2},i={x:l.left+l.width/2,y:l.top+l.height/2},o=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2));t.push({from:n,to:i,distance:o})}m(t)}};return t.on("object:moving",e),t.on("object:moved",s),t.on("selection:created",a),t.on("selection:updated",a),t.on("selection:cleared",()=>m([])),()=>{t.off("object:moving",e),t.off("object:moved",s),t.off("selection:created",a),t.off("selection:updated",a),t.off("selection:cleared")}},[t,i,x,g]),(0,r.useEffect)(()=>{if(!t)return;let e=()=>{h(),f(),b(),p()};return t.on("after:render",e),e(),()=>{t.off("after:render",e)}},[t,h,f,b,p]),(0,a.jsx)("div",{className:"smart-guides-overlay absolute inset-0 pointer-events-none"})}var em=s(28124),eh=s(42488),ef=s(70525),ex=s(14822),eg=s(84428),eb=s(76865),ep=s(89227),ev=s(48736),ej=s(41671),ey=s(99897),ew=s(11239);function eN(e){var t;let{width:s=1920,height:f=1080,backgroundColor:b="#ffffff",onExportTimeline:v,onSceneUpdate:j,initialObjects:w=[]}=e,{theme:C}=y(),[k,S]=(0,r.useState)(null),[Z,z]=(0,r.useState)([]),[A,R]=(0,r.useState)(w),[T,D]=(0,r.useState)(100),[O,P]=(0,r.useState)(!1),[M,E]=(0,r.useState)(!1),[F,G]=(0,r.useState)(!1),{startMonitoring:I,getMetrics:U}=g(),V=U(),Y=function(e){let[t,s]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let t=[];e.fps<30&&t.push("Low FPS detected - Consider reducing object count"),e.renderTime>16&&t.push("High render time - Performance optimization needed"),e.memoryUsage>100&&t.push("High memory usage - Consider clearing unused objects"),e.objectCount>500&&t.push("Too many objects - Performance may be affected"),e.cacheHitRate<50&&e.totalRenders>100&&t.push("Low cache efficiency - Cache strategy needs optimization"),s(t)},[e]),t}(V),{getCacheStats:H}=x(),B=H(),[W,_]=(0,r.useState)("canvas"),[L,X]=(0,r.useState)(!1),[q,Q]=(0,r.useState)({snapToGrid:!0,snapToObjects:!0,showGrid:!0,showRulers:!0,gridSize:20,snapDistance:10,showMeasurements:!0}),J=(0,r.useCallback)(e=>{S(e),I(e),e.on("selection:created",e=>{K(e.selected||[])}),e.on("selection:updated",e=>{K(e.selected||[])}),e.on("selection:cleared",()=>{z([])}),e.on("object:modified",e=>{let t=ea();t&&(null==j||j(t))}),e.on("mouse:wheel",()=>{D(Math.round(100*e.getZoom()))}),h.Am.success("Canvas Editor Pro iniciado",{icon:"\uD83D\uDE80",duration:3e3})},[I,j]),K=(0,r.useCallback)(e=>{z(e.map(e=>({id:e.id||"obj_".concat(Date.now()),type:e.type||"shape",name:e.name||"".concat(e.type," ").concat(e.id),visible:!1!==e.visible,locked:e.lockMovementX||e.lockMovementY||!1,opacity:e.opacity||1,layer:e.zIndex||0,data:e})))},[]),ea=(0,r.useCallback)(()=>k?{objects:k.getObjects().map(e=>({id:e.id||"",type:e.type||"unknown",properties:e.toObject(),visible:e.visible||!0,locked:!!(e.lockMovementX||e.lockMovementY)})),dimensions:{width:k.getWidth(),height:k.getHeight()},backgroundColor:k.backgroundColor,zoom:k.getZoom(),timestamp:Date.now()}:null,[k]),er=(0,r.useCallback)((e,t)=>{if(k){switch(e){case"add-text":let s=new window.fabric.Textbox("Click to edit",{left:100,top:100,fontFamily:"Arial",fontSize:24,fill:C.colors.text});s.id="text_".concat(Date.now()),k.add(s),k.setActiveObject(s);break;case"add-rectangle":let a=new window.fabric.Rect({left:100,top:100,width:200,height:100,fill:C.colors.accent,stroke:C.colors.border,strokeWidth:2});a.id="rect_".concat(Date.now()),k.add(a),k.setActiveObject(a);break;case"add-circle":let r=new window.fabric.Circle({left:100,top:100,radius:50,fill:C.colors.accent,stroke:C.colors.border,strokeWidth:2});r.id="circle_".concat(Date.now()),k.add(r),k.setActiveObject(r);break;case"export":let l=ea();l&&(null==v||v(l),h.Am.success("Canvas exportado para timeline!"));break;case"save":let n=k.toJSON();localStorage.setItem("canvas-save",JSON.stringify(n)),h.Am.success("Canvas salvo!");break;case"preview":G(!F),h.Am.success(F?"Preview pausado":"Preview iniciado");break;case"toggle-grid":Q(e=>({...e,showGrid:t}));break;case"toggle-rulers":Q(e=>({...e,showRulers:t}));break;default:console.log("Action not handled:",e,t)}k.renderAll()}},[k,C.colors,ea,v,F]);return(0,r.useEffect)(()=>{if(Y.length>0){let e=Y.filter(e=>e.includes("Low FPS")||e.includes("High memory"));e.length>0&&(X(!0),h.Am.error("Performance Alert: ".concat(e[0]),{duration:5e3,icon:"⚠️"}))}},[Y]),(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(ec,{canvas:k,onAction:er,selectedObjects:Z,canUndo:O,canRedo:M,zoomLevel:T}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden mt-16",children:[(0,a.jsx)("div",{className:"w-80 border-r bg-white/95 backdrop-blur-sm overflow-y-auto",style:{backgroundColor:C.colors.sidebar,borderColor:C.colors.border},children:(0,a.jsxs)(i.mQ,{value:W,onValueChange:e=>{_(e),"layers"===e?h.Am.success("\uD83D\uDD27 Gerenciador de camadas ativo!"):"canvas"===e?h.Am.success("\uD83C\uDFA8 Ferramentas do canvas ativas!"):"assets"===e?h.Am.success("\uD83D\uDCC1 Biblioteca de assets ativa!"):"perf"===e&&h.Am.success("\uD83D\uDCCA Monitor de performance ativo!")},children:[(0,a.jsxs)(i.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(i.SP,{value:"canvas",children:"Canvas"}),(0,a.jsx)(i.SP,{value:"layers",children:"Camadas"}),(0,a.jsx)(i.SP,{value:"assets",children:"Assets"}),(0,a.jsx)(i.SP,{value:"perf",children:"Perf"})]}),(0,a.jsxs)(i.nU,{value:"canvas",className:"p-4 space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(el.Z,{className:"h-4 w-4"}),"Ferramentas de Desenho"]})}),(0,a.jsxs)(l.aY,{className:"space-y-2",children:[(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:()=>er("add-text"),children:[(0,a.jsx)(et.Z,{className:"h-4 w-4 mr-2"}),"Adicionar Texto"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:()=>er("add-rectangle"),children:[(0,a.jsx)($.Z,{className:"h-4 w-4 mr-2"}),"Ret\xe2ngulo"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:()=>er("add-circle"),children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"C\xedrculo"]})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsx)(l.ll,{className:"text-sm",children:"Configura\xe7\xf5es"})}),(0,a.jsxs)(l.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(u._,{className:"text-xs",children:"Tamanho da Grade"}),(0,a.jsx)(d.i,{value:[q.gridSize],onValueChange:e=>{let[t]=e;return Q(e=>({...e,gridSize:t}))},min:10,max:100,step:5,className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u._,{className:"text-xs",children:"Dist\xe2ncia de Snap"}),(0,a.jsx)(d.i,{value:[q.snapDistance],onValueChange:e=>{let[t]=e;return Q(e=>({...e,snapDistance:t}))},min:5,max:50,step:5,className:"mt-1"})]})]})]})]}),(0,a.jsxs)(i.nU,{value:"layers",className:"p-4 space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(em.Z,{className:"h-4 w-4"}),"Objetos (",A.length,")"]})}),(0,a.jsx)(l.aY,{children:0===A.length?(0,a.jsxs)("div",{className:"text-center text-muted-foreground text-sm py-8",children:[(0,a.jsx)(em.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Nenhum objeto no canvas"}),(0,a.jsx)("p",{className:"text-xs",children:"Use as ferramentas para come\xe7ar"})]}):(0,a.jsx)("div",{className:"space-y-1",children:A.map((e,t)=>(0,a.jsx)("div",{className:"p-2 rounded border text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ".concat(Z.some(t=>t.id===e.id)?"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800":"border-gray-200 dark:border-gray-700"),onClick:()=>{k&&e.data&&(k.setActiveObject(e.data),k.renderAll())},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["text"===e.type&&(0,a.jsx)(et.Z,{className:"h-3 w-3"}),"image"===e.type&&(0,a.jsx)(es.Z,{className:"h-3 w-3"}),"shape"===e.type&&(0,a.jsx)($.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)(c.C,{variant:"secondary",className:"text-xs",children:[Math.round(100*e.opacity),"%"]})})]})},e.id))})})]}),Z.length>0&&(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-sm",children:["Propriedades (",Z.length," selecionado)"]})}),(0,a.jsx)(l.aY,{className:"space-y-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(u._,{className:"text-xs",children:"Opacidade"}),(0,a.jsx)(d.i,{value:[(null===(t=Z[0])||void 0===t?void 0:t.opacity)*100||100],onValueChange:e=>{let[t]=e;if(k){let e=k.getActiveObject();e&&(e.set("opacity",t/100),k.renderAll())}},min:0,max:100,step:5,className:"mt-1"})]})})]})]}),(0,a.jsx)(i.nU,{value:"assets",className:"p-4",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsx)(l.ll,{className:"text-sm",children:"Biblioteca de Assets"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"text-center text-muted-foreground text-sm py-8",children:[(0,a.jsx)(es.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Assets em desenvolvimento"}),(0,a.jsx)("p",{className:"text-xs",children:"Integra\xe7\xe3o com APIs externas"})]})})]})}),(0,a.jsx)(i.nU,{value:"perf",className:"p-4 space-y-4",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{className:"h-4 w-4"}),"Performance Monitor"]})}),(0,a.jsxs)(l.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ef.Z,{className:"h-3 w-3 text-green-500"}),(0,a.jsxs)("span",{children:["FPS: ",V.fps.toFixed(0)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.Z,{className:"h-3 w-3 text-blue-500"}),(0,a.jsxs)("span",{children:["Render: ",V.renderTime.toFixed(1),"ms"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eg.Z,{className:"h-3 w-3 text-purple-500"}),(0,a.jsxs)("span",{children:["Mem: ",V.memoryUsage.toFixed(1),"MB"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(em.Z,{className:"h-3 w-3 text-orange-500"}),(0,a.jsxs)("span",{children:["Obj: ",V.objectCount]})]})]}),(0,a.jsx)(o.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"Cache Hit Rate"}),(0,a.jsxs)("span",{children:[B.hits>0?(B.hits/(B.hits+B.misses)*100).toFixed(1):0,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"Cache Size"}),(0,a.jsxs)("span",{children:[(B.totalSize/1024/1024).toFixed(1),"MB"]})]})]}),Y.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)("div",{className:"space-y-1",children:Y.map((e,t)=>(0,a.jsxs)(m.bZ,{className:"py-2",children:[(0,a.jsx)(eb.Z,{className:"h-3 w-3"}),(0,a.jsx)(m.X,{className:"text-xs",children:e})]},t))})]})]})]})})]})}),(0,a.jsxs)("div",{className:"flex-1 relative overflow-hidden bg-gray-100 dark:bg-gray-800",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p,{width:s,height:f,backgroundColor:b,onCanvasReady:J,enableGPUAcceleration:!0}),(0,a.jsx)(eu,{canvas:k,options:q,onOptionsChange:Q})]})}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 bg-black/80 text-white p-2 rounded text-xs font-mono",children:[(0,a.jsxs)("div",{children:["Canvas: ",s,"\xd7",f]}),(0,a.jsxs)("div",{children:["Theme: ",N(C.mode)]}),(0,a.jsxs)("div",{children:["Objects: ",V.objectCount]}),F&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-green-400",children:[(0,a.jsx)(ei.Z,{className:"h-3 w-3"}),"Preview Mode"]})]})]}),(0,a.jsx)("div",{className:"w-60 border-l bg-white/95 backdrop-blur-sm overflow-y-auto",style:{backgroundColor:C.colors.sidebar,borderColor:C.colors.border},children:(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsxs)(l.ll,{className:"text-sm flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4"}),"Export & Actions"]})}),(0,a.jsxs)(l.aY,{className:"space-y-2",children:[(0,a.jsxs)(n.z,{className:"w-full",onClick:()=>er("export"),disabled:!k,children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 mr-2"}),"Export Timeline"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"w-full",onClick:()=>er("preview"),disabled:!k,children:[F?(0,a.jsx)(ep.Z,{className:"h-4 w-4 mr-2"}):(0,a.jsx)(ei.Z,{className:"h-4 w-4 mr-2"}),F?"Pause":"Preview"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"w-full",onClick:()=>er("save"),disabled:!k,children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4 mr-2"}),"Salvar Canvas"]})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{className:"pb-2",children:(0,a.jsx)(l.ll,{className:"text-sm",children:"Status"})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(ej.Z,{className:"h-3 w-3 text-green-500"}),"Engine"]}),(0,a.jsx)(c.C,{variant:"secondary",children:"Ready"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(ey.Z,{className:"h-3 w-3 text-blue-500"}),"Performance"]}),(0,a.jsx)(c.C,{variant:V.fps>45?"default":"destructive",children:V.fps>45?"Optimal":"Warning"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(ew.Z,{className:"h-3 w-3 text-yellow-500"}),"GPU"]}),(0,a.jsx)(c.C,{variant:"secondary",children:"Active"})]})]})})]})]})})]})]})}function eC(e){return(0,a.jsx)(w,{defaultTheme:"pro",children:(0,a.jsx)(eN,{...e})})}},62060:function(e,t,s){s.d(t,{Cd:function(){return c},X:function(){return d},bZ:function(){return o}});var a=s(57437),r=s(2265),l=s(90535),n=s(22835);let i=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,...l}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:r}),s),...l})});o.displayName="Alert";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});c.displayName="AlertTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...r})});d.displayName="AlertDescription"},41875:function(e,t,s){s.d(t,{C:function(){return i}});var a=s(57437);s(2265);var r=s(90535),l=s(22835);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...r})}},92595:function(e,t,s){s.d(t,{d:function(){return i},z:function(){return o}});var a=s(57437),r=s(2265),l=s(90535),n=s(22835);let i=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:o=!1,...c}=e;return(0,a.jsx)(o?"span":"button",{className:(0,n.cn)(i({variant:r,size:l,className:s})),ref:t,...c})});o.displayName="Button"},34029:function(e,t,s){s.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var a=s(57437),r=s(2265),l=s(22835);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},46393:function(e,t,s){s.d(t,{_:function(){return c}});var a=s(57437),r=s(2265),l=s(6394),n=s(90535),i=s(22835);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.f,{ref:t,className:(0,i.cn)(o(),s),...r})});c.displayName=l.f.displayName},72927:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(57437),r=s(2265),l=s(55156),n=s(22835);let i=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(l.f,{ref:t,decorative:i,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=l.f.displayName},65046:function(e,t,s){s.d(t,{i:function(){return i}});var a=s(57437),r=s(2265),l=s(38846),n=s(22835);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(l.fC,{ref:t,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(l.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,a.jsx)(l.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(l.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});i.displayName=l.fC.displayName},51098:function(e,t,s){s.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return i},nU:function(){return d}});var a=s(57437),r=s(2265),l=s(20271),n=s(22835);let i=l.fC,o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});o.displayName=l.aV.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});c.displayName=l.xz.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});d.displayName=l.VY.displayName},58922:function(e,t,s){s.d(t,{ZO:function(){return n},h6:function(){return i}});var a=s(78960);let r=null;function l(){return r||(r=a),r}l();let n={getInstance:l,createCanvas:function(e,t){return new(l()).Canvas(e,t)},createStaticCanvas:function(e,t){return new(l()).StaticCanvas(e,t)}},i=()=>({fabric:l(),FabricManager:n})},22835:function(e,t,s){s.d(t,{cn:function(){return l}});var a=s(61994),r=s(53335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}}]);