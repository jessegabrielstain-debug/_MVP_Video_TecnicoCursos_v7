"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6274],{92595:function(e,t,r){r.d(t,{d:function(){return i},z:function(){return c}});var a=r(57437),n=r(2265),o=r(90535),l=r(22835);let i=(0,o.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:c=!1,...s}=e;return(0,a.jsx)(c?"span":"button",{className:(0,l.cn)(i({variant:n,size:o,className:r})),ref:t,...s})});c.displayName="Button"},34029:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return s},Zb:function(){return l},aY:function(){return u},eW:function(){return d},ll:function(){return c}});var a=r(57437),n=r(2265),o=r(22835);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",r),...n})});c.displayName="CardTitle";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...n})});s.displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...n})});u.displayName="CardContent";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...n})});d.displayName="CardFooter"},53904:function(e,t,r){r.d(t,{m:function(){return o}});var a=r(2265),n=r(14438);function o(){let[e,t]=(0,a.useState)(null),[r,o]=(0,a.useState)(null),[l,i]=(0,a.useState)(!1),[c,s]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),m=(0,a.useRef)(),f=(0,a.useRef)();(0,a.useEffect)(()=>()=>{m.current&&clearInterval(m.current),f.current&&clearInterval(f.current)},[]),(0,a.useEffect)(()=>{u&&("queued"===u.status||"processing"===u.status)?f.current||(f.current=setInterval(async()=>{try{let e=await fetch("/api/render/jobs/".concat(u.id));if(e.ok){let t=await e.json();t.success&&t.data&&(d(t.data),("completed"===t.data.status||"failed"===t.data.status)&&(f.current&&(clearInterval(f.current),f.current=void 0),"completed"===t.data.status?n.Am.success("Renderiza\xe7\xe3o conclu\xedda!"):n.Am.error("Renderiza\xe7\xe3o falhou: ".concat(t.data.error_message))))}}catch(e){console.error("Error polling job status",e)}},2e3)):f.current&&(clearInterval(f.current),f.current=void 0)},[u]);let p=(0,a.useCallback)((e,r)=>{t({id:"project-".concat(Date.now()),name:e,duration:120,fps:30,width:1920,height:1080,currentTime:0,isPlaying:!1,zoom:1,tracks:[{id:"track-video",name:"V\xeddeo Principal",type:"video",visible:!0,locked:!1,elements:[]},{id:"track-audio",name:"\xc1udio",type:"audio",visible:!0,locked:!1,elements:[]},{id:"track-overlay",name:"Sobreposi\xe7\xf5es",type:"overlay",visible:!0,locked:!1,elements:[]}],...r}),s(null),n.Am.success('Projeto "'.concat(e,'" criado com sucesso!'))},[]),v=(0,a.useCallback)(async e=>{i(!0),s(null);try{let r=await fetch("/api/timeline/projects/".concat(e));if(!r.ok)throw Error("Erro ao carregar projeto");let a=await r.json();t(a),n.Am.success("Projeto carregado com sucesso!")}catch(t){let e=t instanceof Error?t.message:"Erro desconhecido";s(e),n.Am.error("Erro ao carregar projeto: ".concat(e))}finally{i(!1)}},[]),y=(0,a.useCallback)(async()=>{if(!e)return null;i(!0);try{var r;let a=e.id.startsWith("project-")||e.id.startsWith("pptx-project-"),o=a?"/api/timeline/projects":"/api/timeline/projects/".concat(e.id),l=await fetch(o,{method:a?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok)throw Error("Erro ao salvar projeto");let i=await l.json(),c=e;return a&&(null===(r=i.data)||void 0===r?void 0:r.id)&&(c={...e,id:i.data.id},t(c),window.history.replaceState(null,"","?project=".concat(i.data.id))),n.Am.success("Projeto salvo com sucesso!"),c}catch(t){let e=t instanceof Error?t.message:"Erro desconhecido";return n.Am.error("Erro ao salvar projeto: ".concat(e)),null}finally{i(!1)}},[e]),k=(0,a.useCallback)(e=>{t(t=>t?{...t,...e}:null)},[]),h=(0,a.useCallback)(()=>{e&&(e.isPlaying?(m.current&&clearInterval(m.current),t(e=>e?{...e,isPlaying:!1}:null)):(t(e=>e?{...e,isPlaying:!0}:null),m.current=setInterval(()=>{t(e=>{if(!e||!e.isPlaying)return e;let t=e.currentTime+1/e.fps;return t>=e.duration?(m.current&&clearInterval(m.current),{...e,currentTime:e.duration,isPlaying:!1}):{...e,currentTime:t}})},1e3/(e.fps||30))))},[e]),b=(0,a.useCallback)(()=>{m.current&&clearInterval(m.current),t(e=>e?{...e,isPlaying:!1}:null)},[]),g=(0,a.useCallback)(()=>{m.current&&clearInterval(m.current),t(e=>e?{...e,currentTime:0,isPlaying:!1}:null)},[]),x=(0,a.useCallback)(e=>{t(t=>t?{...t,currentTime:Math.max(0,Math.min(e,t.duration))}:null)},[]),j=(0,a.useCallback)((e,r)=>{let a={...e,id:"element-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))};t(e=>e?{...e,tracks:e.tracks.map(e=>e.id===r?{...e,elements:[...e.elements,a]}:e)}:null),n.Am.success('Elemento "'.concat(e.name,'" adicionado \xe0 timeline'))},[]),w=(0,a.useCallback)((e,r)=>{t(t=>t?{...t,tracks:t.tracks.map(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,...r}:t)}))}:null)},[]),C=(0,a.useCallback)(e=>{t(t=>t?{...t,tracks:t.tracks.map(t=>({...t,elements:t.elements.filter(t=>t.id!==e)}))}:null),r===e&&o(null),n.Am.success("Elemento removido da timeline")},[r]),E=(0,a.useCallback)(e=>{t(t=>{if(!t)return null;let r=null,a=null;for(let n of t.tracks){let t=n.elements.find(t=>t.id===e);if(t){r=t,a=n.id;break}}if(!r||!a)return t;let n={...r,id:"element-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(r.name," (C\xf3pia)"),startTime:r.startTime+r.duration};return{...t,tracks:t.tracks.map(e=>e.id===a?{...e,elements:[...e.elements,n]}:e)}}),n.Am.success("Elemento duplicado com sucesso")},[]),T=(0,a.useCallback)(e=>{o(e)},[]),P=(0,a.useCallback)(e=>{let r={...e,id:"track-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))};t(e=>e?{...e,tracks:[...e.tracks,r]}:null),n.Am.success('Track "'.concat(e.name,'" adicionada'))},[]),N=(0,a.useCallback)((e,r)=>{t(t=>t?{...t,tracks:t.tracks.map(t=>t.id===e?{...t,...r}:t)}:null)},[]),S=(0,a.useCallback)(e=>{t(t=>t?{...t,tracks:t.tracks.filter(t=>t.id!==e)}:null),n.Am.success("Track removida")},[]),A=(0,a.useCallback)((e,r)=>{t(t=>{if(!t)return null;let a=[...t.tracks],[n]=a.splice(e,1);return a.splice(r,0,n),{...t,tracks:a}})},[]),z=(0,a.useCallback)(e=>{if(!e||!e.slides){n.Am.error("Dados PPTX inv\xe1lidos");return}let r=e.fileName||"Projeto PPTX",a=5*e.slides.length,o=e.slides.map((e,t)=>({id:"slide-".concat(t),type:"image",name:e.title||"Slide ".concat(t+1),duration:5,startTime:5*t,layer:0,visible:!0,locked:!1,properties:{opacity:1,x:0,y:0,scale:1,rotation:0,src:e.thumbnail||e.image||"/api/placeholder/slide-".concat(t+1)}})),l=e.slides.flatMap((e,t)=>e.textElements&&0!==e.textElements.length?e.textElements.map((e,r)=>{var a,n,o,l;return{id:"text-".concat(t,"-").concat(r),type:"text",name:"Texto Slide ".concat(t+1),duration:5,startTime:5*t,layer:1,visible:!0,locked:!1,properties:{opacity:1,x:null!==(a=null==e?void 0:e.x)&&void 0!==a?a:0,y:null!==(n=null==e?void 0:e.y)&&void 0!==n?n:0,scale:1,rotation:null!==(o=null==e?void 0:e.rotation)&&void 0!==o?o:0,content:(null==e?void 0:e.content)||(null==e?void 0:e.text)||"",fontSize:null!==(l=null==e?void 0:e.fontSize)&&void 0!==l?l:24,color:(null==e?void 0:e.color)||"#000000"}}}):[]);t({id:"pptx-project-".concat(Date.now()),name:r,duration:a,fps:30,width:1920,height:1080,currentTime:0,isPlaying:!1,zoom:1,tracks:[{id:"track-slides",name:"Slides PPTX",type:"video",visible:!0,locked:!1,elements:o},{id:"track-text",name:"Textos",type:"overlay",visible:!0,locked:!1,elements:l},{id:"track-audio",name:"Narra\xe7\xe3o",type:"audio",visible:!0,locked:!1,elements:[]},{id:"track-effects",name:"Efeitos",type:"overlay",visible:!0,locked:!1,elements:[]}]}),n.Am.success("Timeline criada: ".concat(e.slides.length," slides, dura\xe7\xe3o total ").concat(a,"s"))},[]),R=(0,a.useCallback)(async()=>{if(!e){n.Am.error("Nenhum projeto carregado");return}i(!0);try{let e=await y();if(!e)throw Error("Falha ao salvar projeto antes da exporta\xe7\xe3o");let t=await fetch("/api/render/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e.id,type:"video",metadata:{project_name:e.name,duration:e.duration,fps:e.fps,resolution:"".concat(e.width,"x").concat(e.height)}})});if(!t.ok){let e=await t.json();throw Error(e.error||"Erro ao iniciar renderiza\xe7\xe3o")}let r=await t.json();d(r.data),n.Am.success("Renderiza\xe7\xe3o iniciada! Job ID: ".concat(r.data.id))}catch(t){let e=t instanceof Error?t.message:"Erro desconhecido";n.Am.error("Erro na renderiza\xe7\xe3o: ".concat(e))}finally{i(!1)}},[e,y]);return{project:e,selectedElementId:r,isLoading:l,error:c,renderJob:u,createProject:p,loadProject:v,saveProject:y,updateProject:k,play:h,pause:b,stop:g,seek:x,addElement:j,updateElement:w,deleteElement:C,duplicateElement:E,selectElement:T,addTrack:P,updateTrack:N,deleteTrack:S,reorderTracks:A,loadFromPPTX:z,exportToVideo:R}}},22835:function(e,t,r){r.d(t,{cn:function(){return o}});var a=r(61994),n=r(53335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},92735:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},42208:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},33276:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},98728:function(e,t,r){r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}}]);