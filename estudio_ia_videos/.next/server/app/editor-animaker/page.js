(()=>{var e={};e.id=6102,e.ids=[6102],e.modules={572934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},554580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},345869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},220399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},978893:e=>{"use strict";e.exports=require("buffer")},532615:e=>{"use strict";e.exports=require("http")},735240:e=>{"use strict";e.exports=require("https")},768621:e=>{"use strict";e.exports=require("punycode")},276162:e=>{"use strict";e.exports=require("stream")},917360:e=>{"use strict";e.exports=require("url")},671568:e=>{"use strict";e.exports=require("zlib")},629282:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),t(78954),t(800635),t(35866);var a=t(723191),l=t(88716),r=t(637922),i=t.n(r),n=t(595231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["editor-animaker",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,78954)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\editor-animaker\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,800635)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\editor-animaker\\page.tsx"],m="/editor-animaker/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/editor-animaker/page",pathname:"/editor-animaker",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},399173:(e,s,t)=>{Promise.resolve().then(t.bind(t,551771)),Promise.resolve().then(t.bind(t,697754)),Promise.resolve().then(t.bind(t,581966)),Promise.resolve().then(t.bind(t,825146)),Promise.resolve().then(t.bind(t,108563)),Promise.resolve().then(t.bind(t,735265)),Promise.resolve().then(t.bind(t,243796)),Promise.resolve().then(t.bind(t,474008)),Promise.resolve().then(t.bind(t,754055))},955546:(e,s,t)=>{Promise.resolve().then(t.bind(t,191836))},1817:(e,s,t)=>{"use strict";t.d(s,{Cd:()=>c,X:()=>d,bZ:()=>o});var a=t(210326),l=t(517577),r=t(630542),i=t(747405);let n=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=l.forwardRef(({className:e,variant:s,...t},l)=>a.jsx("div",{ref:l,role:"alert",className:(0,i.cn)(n({variant:s}),e),...t}));o.displayName="Alert";let c=l.forwardRef(({className:e,...s},t)=>a.jsx("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));c.displayName="AlertTitle";let d=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},962329:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var a=t(210326);t(517577);var l=t(630542),r=t(747405);let i=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return a.jsx("div",{className:(0,r.cn)(i({variant:s}),e),...t})}},464070:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(210326),l=t(517577),r=t(747405);let i=l.forwardRef(({className:e,type:s,...t},l)=>a.jsx("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:l,...t}));i.displayName="Input"},830370:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(210326),l=t(517577),r=t(747405);let i=l.forwardRef(({className:e,value:s,...t},l)=>a.jsx("div",{ref:l,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));i.displayName="Progress"},289427:(e,s,t)=>{"use strict";t.d(s,{x:()=>n});var a=t(210326),l=t(517577),r=t(416999),i=t(747405);let n=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(r.fC,{ref:l,className:(0,i.cn)("relative overflow-hidden",e),...t,children:[a.jsx(r.l_,{className:"h-full w-full rounded-[inherit]",children:s}),a.jsx(o,{}),a.jsx(r.Ns,{})]}));n.displayName=r.fC.displayName;let o=l.forwardRef(({className:e,orientation:s="vertical",...t},l)=>a.jsx(r.gb,{ref:l,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 border-t border-t-transparent p-[1px]",e),...t,children:a.jsx(r.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=r.gb.displayName},898268:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>d});var a=t(210326),l=t(517577),r=t(44875),i=t(300941),n=t(732933),o=t(747405);let c=r.fC;r.ZA;let d=r.B4,m=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(r.xz,{ref:l,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:[s,a.jsx(r.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=r.xz.displayName;let x=l.forwardRef(({className:e,children:s,position:t="popper",...l},i)=>a.jsx(r.h_,{children:a.jsx(r.VY,{ref:i,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...l,children:a.jsx(r.l_,{className:(0,o.cn)("popper"===t&&"p-1",e),children:s})})}));x.displayName=r.VY.displayName,l.forwardRef(({className:e,...s},t)=>a.jsx(r.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=r.__.displayName;let h=l.forwardRef(({className:e,children:s,...t},l)=>(0,a.jsxs)(r.ck,{ref:l,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(r.wU,{children:a.jsx(n.Z,{className:"h-4 w-4"})})}),a.jsx(r.eT,{children:s})]}));h.displayName=r.ck.displayName,l.forwardRef(({className:e,...s},t)=>a.jsx(r.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=r.Z0.displayName},16013:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(210326),l=t(517577),r=t(390220),i=t(747405);let n=l.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...l},n)=>a.jsx(r.f,{ref:n,decorative:t,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...l}));n.displayName=r.f.displayName},55009:(e,s,t)=>{"use strict";t.d(s,{SP:()=>c,dr:()=>o,mQ:()=>n,nU:()=>d});var a=t(210326),l=t(517577),r=t(839648),i=t(747405);let n=r.fC,o=l.forwardRef(({className:e,...s},t)=>a.jsx(r.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));o.displayName=r.aV.displayName;let c=l.forwardRef(({className:e,...s},t)=>a.jsx(r.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));c.displayName=r.xz.displayName;let d=l.forwardRef(({className:e,...s},t)=>a.jsx(r.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=r.VY.displayName},363617:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var a=t(210326),l=t(517577),r=t(747405);let i=l.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));i.displayName="Textarea"},191836:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ef});var a=t(210326),l=t(517577),r=t(483431),i=t(482610),n=t(830370),o=t(962329),c=t(1817),d=t(996517),m=t(630361),x=t(350949),h=t(161182),u=t(671709),p=t(849758),f=t(549163),y=t(782685),g=t(63685),v=t(898360),b=t(331540),j=t(136283),N=t(694019),w=t(908644);function k({onAnalysisComplete:e,onCancel:s}){let[t,k]=(0,l.useState)(null),[z,Z]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[M,P]=(0,l.useState)(0),[E,T]=(0,l.useState)(0),[A,_]=(0,l.useState)(""),[I,D]=(0,l.useState)(null),R=async e=>{let s=new FormData;s.append("file",e),s.append("type","pptx_v2");let t=await fetch("/api/v1/pptx/upload",{method:"POST",body:s});if(!t.ok){let e=await t.text();throw Error(`Erro no upload: ${e}`)}return(await t.json()).s3Key},q=async(e,s)=>{let t=[{stage:"Baixando do S3...",progress:10},{stage:"Extraindo estrutura PPTX...",progress:25},{stage:"Analisando slides individuais...",progress:45},{stage:"Extraindo elementos edit\xe1veis...",progress:65},{stage:"Processando assets (imagens/v\xeddeos)...",progress:80},{stage:"Gerando timeline e keyframes...",progress:90},{stage:"Finalizando an\xe1lise...",progress:100}],a=(async()=>{for(let{stage:e,progress:s}of t)_(e),T(s),await new Promise(e=>setTimeout(e,500))})();try{let t=await fetch("/api/v1/pptx/enhanced-process-v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s3Key:e,filename:s,options:{generateThumbnails:!0,analyzeCompliance:!0,extractAnimations:!0,parseElements:!0}})});if(!t.ok){let e=await t.json();throw Error(e.error||`HTTP ${t.status}`)}let l=await t.json();if(!l.success)throw Error(l.error||"Falha na an\xe1lise");return await a,console.log("✅ An\xe1lise v2 conclu\xedda:",{slides:l.data.slides.length,totalElements:l.statistics.totalElements,editableElements:l.statistics.editableElements,elementsByType:l.statistics.elementsByType}),0===l.statistics.editableElements&&(console.warn("⚠️ Nenhum elemento edit\xe1vel extra\xeddo!"),d.Am.error("Nenhum elemento edit\xe1vel foi encontrado no PPTX")),l.data}catch(e){throw await a.catch(()=>{}),e}},V=async s=>{if(D(null),!s.name.toLowerCase().endsWith(".pptx")){D("Apenas arquivos .pptx s\xe3o aceitos");return}if(s.size>104857600){D("Arquivo muito grande (m\xe1x. 100MB)");return}k({file:s});try{Z(!0),P(0);let t=setInterval(()=>{P(e=>Math.min(e+10,90))},200),a=await R(s);clearInterval(t),P(100),Z(!1),d.Am.success("Upload conclu\xeddo!"),S(!0),T(0),_("Iniciando an\xe1lise...");let l=await q(a,s.name);if(k(e=>e?{...e,s3Key:a,analysis:l}:null),S(!1),d.Am.success("An\xe1lise conclu\xedda!"),!l.slides||0===l.slides.length)throw Error("Nenhum slide foi extra\xeddo do PPTX");let r=l.slides.reduce((e,s)=>e+s.elements.length,0);if(0===r)throw Error("Nenhum elemento foi extra\xeddo do PPTX");let i={name:s.name,size:s.size,type:s.type,lastModified:s.lastModified,s3Key:a};e({...l,fileInfo:i})}catch(e){console.error("Erro no processamento:",e),D(e instanceof Error?e.message:"Erro desconhecido"),Z(!1),S(!1),k(null)}},$=(0,l.useCallback)(e=>{e.length>0&&V(e[0])},[]),{getRootProps:X,getInputProps:B,isDragActive:Y}=(0,w.uI)({onDrop:$,accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},multiple:!1,disabled:z||C});return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Upload e An\xe1lise PPTX v2.0"}),a.jsx("p",{className:"text-gray-600",children:"Parser real que extrai elementos edit\xe1veis individuais (textos, formas, imagens)"})]}),a.jsx(r.Zb,{className:"mb-6","data-testid":"pptx-uploader",children:a.jsx(r.aY,{className:"p-6",children:(0,a.jsxs)("div",{...X(),className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer ${Y?"border-blue-400 bg-blue-50":z||C?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:[a.jsx("input",{...B()}),z?(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(g.Z,{className:"w-16 h-16 mx-auto text-blue-600 animate-bounce"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-medium",children:"Fazendo upload..."}),a.jsx(n.E,{value:M,className:"w-full max-w-md mx-auto mt-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[M,"%"]})]})]}):C?(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(v.Z,{className:"w-16 h-16 mx-auto text-purple-600 animate-pulse"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-medium",children:"Extraindo elementos edit\xe1veis..."}),a.jsx(n.E,{value:E,className:"w-full max-w-md mx-auto mt-2"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A})]})]}):Y?(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(b.Z,{className:"w-16 h-16 mx-auto text-blue-600"}),a.jsx("p",{className:"text-lg font-medium text-blue-600",children:"Solte o arquivo aqui"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(j.Z,{className:"w-16 h-16 mx-auto text-gray-600"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-medium",children:"Arraste um arquivo PPTX ou clique para selecionar"}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Parser v2.0 - Extrai elementos edit\xe1veis individuais"})]}),(0,a.jsxs)(i.z,{className:"mt-4",children:[a.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"Selecionar Arquivo"]})]})]})})}),I&&(0,a.jsxs)(c.bZ,{className:"mb-6 border-red-200 bg-red-50",children:[a.jsx(x.Z,{className:"w-4 h-4 text-red-600"}),a.jsx(c.X,{className:"text-red-800",children:I})]}),(()=>{if(!t?.analysis)return null;let{slides:s,assets:l,statistics:n}=t.analysis;return(0,a.jsxs)(r.Zb,{className:"mt-4","data-testid":"analysis-complete",children:[a.jsx(r.Ol,{children:(0,a.jsxs)(r.ll,{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-5 h-5 text-green-500"}),"An\xe1lise Conclu\xedda (Parser v2.0)"]})}),(0,a.jsxs)(r.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4","data-testid":"processing-stats",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600","data-stat":"slides",children:s.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Slides"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600","data-stat":"elements",children:n.totalElements}),a.jsx("div",{className:"text-sm text-gray-600",children:"Elementos"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600","data-stat":"editable-elements",children:n.editableElements}),a.jsx("div",{className:"text-sm text-gray-600",children:"Edit\xe1veis"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.images.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Imagens"})]})]}),n.editableElements>0?(0,a.jsxs)(c.bZ,{className:"border-green-200 bg-green-50",children:[a.jsx(m.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)(c.X,{className:"text-green-800",children:["✅ ",n.editableElements," elementos edit\xe1veis extra\xeddos com sucesso! O editor poder\xe1 manipular textos, formas e outros objetos individualmente."]})]}):(0,a.jsxs)(c.bZ,{className:"border-yellow-200 bg-yellow-50",children:[a.jsx(x.Z,{className:"h-4 w-4 text-yellow-600"}),a.jsx(c.X,{className:"text-yellow-800",children:"⚠️ Nenhum elemento edit\xe1vel foi encontrado. O PPTX pode conter apenas imagens ou elementos n\xe3o suportados."})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Elementos Extra\xeddos:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(n.elementsByType).map(([e,s])=>(0,a.jsxs)(o.C,{variant:"secondary",className:"text-xs",children:["text"===e&&a.jsx(h.Z,{className:"w-3 h-3 mr-1"}),"image"===e&&a.jsx(u.Z,{className:"w-3 h-3 mr-1"}),"video"===e&&a.jsx(p.Z,{className:"w-3 h-3 mr-1"}),"shape"===e&&a.jsx(f.Z,{className:"w-3 h-3 mr-1"}),s," ",e]},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Preview dos Slides:"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-60 overflow-y-auto",children:s.slice(0,6).map((e,s)=>(0,a.jsxs)("div",{className:"aspect-video bg-gray-100 rounded-lg p-2 border text-center flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"text-xs font-bold text-gray-700 mb-1",children:["Slide ",e.index]}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.elements.length," elementos"]}),(0,a.jsxs)("div",{className:"text-xs text-blue-600",children:[e.elements.filter(e=>"image"!==e.type).length," edit\xe1veis"]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsxs)(i.z,{className:"flex-1",onClick:()=>t.analysis&&e({...t.analysis,fileInfo:{name:t.file.name,size:t.file.size,s3Key:t.s3Key}}),"data-testid":"open-editor-btn",children:[a.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Abrir no Editor"]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:()=>{k(null),D(null)},children:[a.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"Novo Upload"]})]})]})]})})(),a.jsx("div",{className:"flex justify-center mt-6",children:(0,a.jsxs)(i.z,{variant:"outline",onClick:s,children:[a.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"Cancelar"]})})]})}var z=t(55009),Z=t(289427),C=t(16013),S=t(323133),M=t(899316),P=t(920176),E=t(821608),T=t(6309),A=t(871059),_=t(794893),I=t(110976),D=t(31215),R=t(100924),q=t(211962),V=t(707937),$=t(464070),X=t(9015),B=t(891216),Y=t(143810),O=t(898091),U=t(454689),F=t(181178),G=t(146226);let K=(0,l.forwardRef)(({slide:e,selectedElements:s,editorState:t,onElementSelect:r,onElementUpdate:n,onElementDelete:c,onElementAdd:d,onEventEmit:m},x)=>{let p=(0,l.useRef)(null),[f,y]=(0,l.useState)({isDragging:!1,elementId:"",startMousePos:{x:0,y:0},startElementPos:{x:0,y:0},dragType:"move"}),[g,v]=(0,l.useState)({startX:0,startY:0,endX:0,endY:0,active:!1}),[b,j]=(0,l.useState)(null),[N,w]=(0,l.useState)(null);(0,l.useImperativeHandle)(x,()=>({addElement:e=>_(e),deleteSelectedElements:()=>I(),copySelectedElements:()=>D(),pasteElements:()=>R(),selectAll:()=>q(),clearSelection:()=>r([])}));let k=e?.elements.filter(e=>!1!==e.visible)||[],z=[...k].sort((e,s)=>(e.zIndex||0)-(s.zIndex||0)),Z=t.canvas||{showGrid:!1,gridSize:20,width:1920,height:1080,zoom:100,snapToGrid:!0,snapDistance:5,showRulers:!1},C=(0,l.useCallback)(e=>{if(!p.current)return;let t=p.current.getBoundingClientRect(),a=(e.clientX-t.left)/(Z.zoom/100),l=(e.clientY-t.top)/(Z.zoom/100),i=T(a,l);if(i){let t=s.includes(i.id);e.shiftKey||e.metaKey?t?r(s.filter(e=>e!==i.id)):r([...s,i.id]):t||r([i.id]),(t||!e.shiftKey)&&y({isDragging:!0,elementId:i.id,startMousePos:{x:e.clientX,y:e.clientY},startElementPos:{x:i.x,y:i.y},dragType:"move"})}else e.shiftKey||e.metaKey||r([]),v({startX:a,startY:l,endX:a,endY:l,active:!0});w(null)},[s,r,t.canvas?.zoom]),S=(0,l.useCallback)(e=>{if(p.current){if(f.isDragging&&f.elementId){let t=(e.clientX-f.startMousePos.x)/(Z.zoom/100),a=(e.clientY-f.startMousePos.y)/(Z.zoom/100),l=f.startElementPos.x+t,r=f.startElementPos.y+a,i=l,o=r;Z.snapToGrid&&(i=Math.round(l/Z.gridSize)*Z.gridSize,o=Math.round(r/Z.gridSize)*Z.gridSize),n(f.elementId,{x:i,y:o}),s.length>1&&s.includes(f.elementId)&&s.forEach(e=>{if(e!==f.elementId){let s=k.find(s=>s.id===e);s&&n(e,{x:s.x+t,y:s.y+a})}})}else if(g.active){let s=p.current.getBoundingClientRect(),t=(e.clientX-s.left)/(Z.zoom/100),a=(e.clientY-s.top)/(Z.zoom/100);v(e=>({...e,endX:t,endY:a}))}}},[f,g,s,n,t.canvas?.zoom,k]),M=(0,l.useCallback)(()=>{g.active&&(r(A(g)),v(e=>({...e,active:!1}))),y(e=>({...e,isDragging:!1})),m&&m({type:"element_update",data:{selectedElements:s},timestamp:Date.now()})},[g,r,s,m]),P=(0,l.useCallback)(e=>{e.preventDefault();let s=p.current?.getBoundingClientRect();if(!s)return;let t=T((e.clientX-s.left)/(Z.zoom/100),(e.clientY-s.top)/(Z.zoom/100));t&&w({x:e.clientX,y:e.clientY,elementId:t.id})},[t.canvas?.zoom]);(0,l.useEffect)(()=>{let e=e=>{if(!e.target||"INPUT"!==e.target.tagName)switch(e.key){case"Delete":case"Backspace":s.length>0&&I();break;case"c":(e.metaKey||e.ctrlKey)&&D();break;case"v":(e.metaKey||e.ctrlKey)&&R();break;case"a":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),q());break;case"Escape":r([]),j(null),w(null)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]);let T=(e,s)=>{for(let t=z.length-1;t>=0;t--){let a=z[t];if(e>=a.x&&e<=a.x+a.width&&s>=a.y&&s<=a.y+a.height)return a}return null},A=e=>{let s=Math.min(e.startX,e.endX),t=Math.max(e.startX,e.endX),a=Math.min(e.startY,e.endY),l=Math.max(e.startY,e.endY);return k.filter(e=>{let r=e.x+e.width/2,i=e.y+e.height/2;return r>=s&&r<=t&&i>=a&&i<=l}).map(e=>e.id)},_=e=>{d({type:e,x:100,y:100,width:"text"===e?200:100,height:"text"===e?50:100,zIndex:Math.max(...k.map(e=>e.zIndex||0))+1,visible:!0,locked:!1,content:"text"===e?"Novo texto":null,style:{position:{x:100,y:100,width:100,height:100},fontSize:"text"===e?16:void 0,backgroundColor:"shape"===e?"#3b82f6":void 0},animations:[],properties:{}})},I=()=>{s.length>0&&c(s)},D=()=>{console.log("Copying elements:",s)},R=()=>{console.log("Pasting elements")},q=()=>{r(k.map(e=>e.id))};return(0,a.jsxs)("div",{className:"relative w-full h-full overflow-auto bg-gray-100",children:[(0,a.jsxs)("div",{ref:p,className:"relative bg-white shadow-lg mx-auto my-8 cursor-crosshair",style:{width:Z.width,height:Z.height,transform:`scale(${Z.zoom/100})`,transformOrigin:"top left"},onMouseDown:C,onMouseMove:S,onMouseUp:M,onContextMenu:P,children:[(()=>{if(!Z.showGrid)return null;let e=Z.gridSize,s=Z.width,t=Z.height,l=[];for(let r=0;r<=s;r+=e)l.push(a.jsx("line",{x1:r,y1:0,x2:r,y2:t,stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.5"},`v-${r}`));for(let r=0;r<=t;r+=e)l.push(a.jsx("line",{x1:0,y1:r,x2:s,y2:r,stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.5"},`h-${r}`));return a.jsx("svg",{className:"absolute inset-0 pointer-events-none",width:s,height:t,children:l})})(),z.map(e=>{let t=s.includes(e.id);return Z.zoom,(0,a.jsxs)("div",{className:`absolute cursor-move ${t?"ring-2 ring-blue-500":""} ${e.locked?"cursor-not-allowed":""}`,style:{left:e.x,top:e.y,width:e.width,height:e.height,zIndex:e.zIndex||0,opacity:e.style.opacity||1,transform:e.style.rotation?`rotate(${e.style.rotation}deg)`:void 0,pointerEvents:e.locked?"none":"auto"},onDoubleClick:s=>{s.stopPropagation(),"text"===e.type&&j(e.id)},children:["text"===e.type&&(b===e.id?a.jsx($.I,{defaultValue:e.content||"",className:"w-full h-full border-none bg-transparent p-0",style:{fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,color:e.style.color,textAlign:e.style.textAlign,fontWeight:e.style.fontWeight,fontStyle:e.style.fontStyle},onBlur:s=>{n(e.id,{content:s.target.value}),j(null)},onKeyDown:s=>{"Enter"===s.key&&(n(e.id,{content:s.currentTarget.value}),j(null))},autoFocus:!0}):a.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 select-none",style:{fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,color:e.style.color,backgroundColor:e.style.backgroundColor,textAlign:e.style.textAlign,fontWeight:e.style.fontWeight,fontStyle:e.style.fontStyle,wordWrap:"break-word",overflow:"hidden"},children:e.content||"Texto"})),"shape"===e.type&&a.jsx("div",{className:"w-full h-full",style:{backgroundColor:e.style.backgroundColor||"#3b82f6",borderColor:e.style.borderColor,borderWidth:e.style.borderWidth,borderRadius:e.properties?.shape==="circle"?"50%":"0"}}),"image"===e.type&&e.properties?.src&&a.jsx("div",{className:"w-full h-full relative overflow-hidden",children:a.jsx(G.default,{src:e.properties.src,alt:e.properties.alt||"Imagem",fill:!0,className:"object-cover",draggable:!1,onError:s=>{console.error("Erro ao carregar imagem:",e.properties?.src),s.target.src="/placeholder-image.png"}})}),t&&!e.locked&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 bg-blue-500 cursor-nw-resize"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 cursor-ne-resize"}),a.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 bg-blue-500 cursor-sw-resize"}),a.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 bg-blue-500 cursor-se-resize"}),a.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-blue-500 cursor-n-resize"}),a.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-blue-500 cursor-s-resize"}),a.jsx("div",{className:"absolute -left-1 top-1/2 transform -translate-y-1/2 w-2 h-2 bg-blue-500 cursor-w-resize"}),a.jsx("div",{className:"absolute -right-1 top-1/2 transform -translate-y-1/2 w-2 h-2 bg-blue-500 cursor-e-resize"})]}),(e.locked||!e.visible)&&(0,a.jsxs)("div",{className:"absolute -top-6 left-0 flex space-x-1",children:[e.locked&&a.jsx(X.Z,{className:"w-4 h-4 text-red-500"}),!e.visible&&a.jsx(B.Z,{className:"w-4 h-4 text-gray-500"})]})]},e.id)}),(()=>{if(!g.active)return null;let e=Math.min(g.startX,g.endX),s=Math.max(g.startX,g.endX),t=Math.min(g.startY,g.endY),l=Math.max(g.startY,g.endY);return a.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-100 bg-opacity-20 pointer-events-none",style:{left:e,top:t,width:s-e,height:l-t}})})()]}),N&&(0,a.jsxs)("div",{className:"fixed bg-white shadow-lg rounded-lg border py-2 z-50",style:{left:N.x,top:N.y},children:[(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full justify-start px-3",children:[a.jsx(Y.Z,{className:"w-4 h-4 mr-2"}),"Copiar"]}),(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full justify-start px-3",children:[a.jsx(O.Z,{className:"w-4 h-4 mr-2"}),"Excluir"]}),(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full justify-start px-3",children:[a.jsx(X.Z,{className:"w-4 h-4 mr-2"}),"Bloquear"]})]}),s.length>0&&(0,a.jsxs)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white shadow-lg rounded-lg border p-2 flex items-center space-x-2 z-40",children:[(0,a.jsxs)(o.C,{variant:"secondary",children:[s.length," selecionado(s)"]}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:D,children:a.jsx(Y.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:I,children:a.jsx(O.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"outline",size:"sm",children:a.jsx(U.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"outline",size:"sm",children:a.jsx(F.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white shadow-lg rounded-lg border p-2 flex items-center space-x-2 z-40",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>_("text"),children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Texto"]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>_("shape"),children:[a.jsx(E.Z,{className:"w-4 h-4 mr-2"}),"Forma"]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>_("image"),children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Imagem"]})]})]})});K.displayName="CanvasEditorV2";var W=t(112714),L=t(43426),H=t(15128),Q=t(269145),J=t(583855),ee=t(187444);let es=["scene","audio","effects","text","video"],et=e=>es.includes(e),ea=(0,l.forwardRef)(({slides:e,timeline:s,editorState:t,onTimeUpdate:r,onSlideSelect:n,onTimelineUpdate:o,onEventEmit:c},d)=>{let m=(0,l.useRef)(null),[x,h]=(0,l.useState)(50),[u]=(0,l.useState)(60),[p,f]=(0,l.useState)([]),[y,g]=(0,l.useState)(!1),[v,b]=(0,l.useState)(0),[j,N]=(0,l.useState)(()=>{let t=s.scenes.map((s,t)=>{let a=e.find(e=>e.id===s.slideId);return{id:`scene-${s.slideId}`,type:"scene",name:a?.title||`Slide ${t+1}`,height:u,color:"#3b82f6",visible:!0,locked:!1,items:[{id:`scene-item-${s.slideId}`,name:a?.title||`Slide ${t+1}`,slideId:s.slideId,startTime:s.startTime,duration:s.duration,color:"#3b82f6",keyframes:[]}]}}),a=[];return e.forEach(e=>{e.elements.forEach(e=>{if(e.animations.length>0){let s=["text","video","audio"].includes(e.type)?e.type:"effects";a.push({id:`element-${e.id}`,type:s,name:e.content||`${e.type} ${e.id.slice(-8)}`,height:u,color:er(e.type),visible:!0,locked:!1,items:[{id:`element-item-${e.id}`,name:e.content||e.type,elementId:e.id,startTime:0,duration:e.animations[0]?.duration||2,color:er(e.type),keyframes:e.animations.map(e=>({id:`kf-${e.id}`,time:e.delay,property:e.type,value:e,easing:e.easing}))}]})}})}),[...t,...a]});(0,l.useImperativeHandle)(d,()=>({togglePlayback:()=>w(),stop:()=>k(),seek:e=>z(e),addTrack:e=>M(e),deleteSelectedItems:()=>R(),zoomIn:()=>h(e=>Math.min(1.5*e,200)),zoomOut:()=>h(e=>Math.max(e/1.5,10))}));let w=(0,l.useCallback)(()=>{c&&c({type:"timeline_update",data:{action:t.playback.isPlaying?"pause":"play"},timestamp:Date.now()})},[t.playback.isPlaying,c]),k=(0,l.useCallback)(()=>{r(0),b(0),c&&c({type:"timeline_update",data:{action:"stop"},timestamp:Date.now()})},[r,c]),z=(0,l.useCallback)(t=>{let a=Math.max(0,Math.min(t,s.totalDuration));r(a),b(a*x);let l=s.scenes.find(e=>t>=e.startTime&&t<e.startTime+e.duration);if(l){let s=e.findIndex(e=>e.id===l.slideId);s>=0&&n(s)}},[s.totalDuration,s.scenes,x,r,n,e]),S=(0,l.useCallback)(e=>{if(!m.current)return;let s=m.current.getBoundingClientRect();z((e.clientX-s.left)/x)},[x,z]);(0,l.useCallback)((e,s)=>{N(t=>t.map(t=>({...t,items:t.items.map(t=>t.id===e?{...t,startTime:Math.max(0,s)}:t)})))},[]),(0,l.useCallback)((e,s)=>{N(t=>t.map(t=>({...t,items:t.items.map(t=>t.id===e?{...t,duration:Math.max(.1,s)}:t)})))},[]);let M=(0,l.useCallback)(e=>{let s=et(e)?e:"effects",t={id:`track-${Date.now()}`,type:s,name:`Nova ${s}`,height:u,color:er(e),visible:!0,locked:!1,items:[]};N(e=>[...e,t])},[]);(0,l.useCallback)(e=>{N(s=>s.filter(s=>s.id!==e))},[]);let P=(0,l.useCallback)(e=>{N(s=>s.map(s=>s.id===e?{...s,visible:!s.visible}:s))},[]),D=(0,l.useCallback)(e=>{N(s=>s.map(s=>s.id===e?{...s,locked:!s.locked}:s))},[]),R=(0,l.useCallback)(()=>{p.length>0&&(N(e=>e.map(e=>({...e,items:e.items.filter(e=>!p.includes(e.id))}))),f([]))},[p]);(0,l.useEffect)(()=>{b(t.playback.currentTime*x)},[t.playback.currentTime,x]);let $=(e,s)=>{let t=p.includes(e.id),l=e.duration*x,r=e.startTime*x;return(0,a.jsxs)("div",{className:`absolute h-10 rounded-md flex items-center px-2 text-white text-xs font-medium cursor-move select-none ${t?"ring-2 ring-white ring-offset-1":""}`,style:{left:r,width:l,backgroundColor:e.color||s,top:"50%",transform:"translateY(-50%)",minWidth:40},onClick:s=>{s.stopPropagation(),s.shiftKey?f(s=>s.includes(e.id)?s.filter(s=>s!==e.id):[...s,e.id]):f([e.id])},children:[a.jsx("span",{className:"truncate",children:e.name}),e.keyframes.map(e=>a.jsx("div",{className:"absolute top-0 w-1 h-full bg-yellow-400 opacity-80",style:{left:e.time*x}},e.id)),t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"absolute left-0 top-0 w-2 h-full bg-white opacity-50 cursor-w-resize"}),a.jsx("div",{className:"absolute right-0 top-0 w-2 h-full bg-white opacity-50 cursor-e-resize"})]})]},e.id)},U=(e,t)=>(0,a.jsxs)("div",{className:"border-b border-gray-700",children:[a.jsx("div",{className:"flex items-center h-15 px-3 bg-gray-800 border-r border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[a.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-sm text-white truncate flex-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(i.z,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",onClick:()=>P(e.id),children:e.visible?a.jsx(W.Z,{className:"w-3 h-3"}):a.jsx(B.Z,{className:"w-3 h-3"})}),a.jsx(i.z,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",onClick:()=>D(e.id),children:e.locked?a.jsx(X.Z,{className:"w-3 h-3"}):a.jsx(L.Z,{className:"w-3 h-3"})}),"audio"===e.type&&a.jsx(i.z,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-400 hover:text-white",children:e.muted?a.jsx(H.Z,{className:"w-3 h-3"}):a.jsx(Q.Z,{className:"w-3 h-3"})})]})]})}),(0,a.jsxs)("div",{className:"relative bg-gray-900",style:{height:e.height},onClick:S,children:[e.items.map(s=>$(s,e.color)),a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:Math.ceil(s.totalDuration)+1},(e,s)=>a.jsx("div",{className:"absolute top-0 h-full border-l border-gray-700 opacity-30",style:{left:s*x}},s))})]})]},e.id);return(0,a.jsxs)("div",{className:"bg-gray-900 text-white flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"bg-gray-800 px-4 py-2 border-b border-gray-700 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(i.z,{variant:"ghost",size:"sm",onClick:k,className:"text-white hover:bg-gray-700",children:a.jsx(E.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>z(Math.max(0,t.playback.currentTime-5)),className:"text-white hover:bg-gray-700",children:a.jsx(T.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{onClick:w,className:"bg-blue-600 hover:bg-blue-700 text-white",children:t.playback.isPlaying?a.jsx(A.Z,{className:"w-4 h-4"}):a.jsx(_.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>z(Math.min(s.totalDuration,t.playback.currentTime+5)),className:"text-white hover:bg-gray-700",children:a.jsx(I.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"text-sm font-mono",children:[el(t.playback.currentTime)," / ",el(s.totalDuration)]}),a.jsx(C.Z,{orientation:"vertical",className:"h-6 bg-gray-600"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>h(e=>Math.max(e/1.5,10)),className:"text-white hover:bg-gray-700",children:a.jsx(q.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[Math.round(x),"px/s"]}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>h(e=>Math.min(1.5*e,200)),className:"text-white hover:bg-gray-700",children:a.jsx(V.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>M("audio"),className:"text-white hover:bg-gray-700",children:[a.jsx(J.Z,{className:"w-4 h-4 mr-2"}),"\xc1udio"]}),(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>M("effects"),className:"text-white hover:bg-gray-700",children:[a.jsx(J.Z,{className:"w-4 h-4 mr-2"}),"Efeitos"]}),p.length>0&&a.jsx(i.z,{variant:"ghost",size:"sm",onClick:R,className:"text-red-400 hover:bg-red-600 hover:text-white",children:a.jsx(O.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"bg-gray-800 px-3 py-1 border-b border-gray-700 relative",children:(0,a.jsxs)("div",{className:"flex items-center h-6",children:[a.jsx("div",{className:"w-48 border-r border-gray-700"}),(0,a.jsxs)("div",{className:"flex-1 relative",ref:m,children:[Array.from({length:Math.ceil(s.totalDuration)+1},(e,s)=>(0,a.jsxs)("div",{className:"absolute top-0 h-full",style:{left:s*x},children:[a.jsx("div",{className:"border-l border-gray-600 h-full"}),a.jsx("span",{className:"absolute top-0 left-1 text-xs text-gray-400",children:el(s)})]},s)),a.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-red-500 z-10 pointer-events-none",style:{left:v}})]})]})}),a.jsx(Z.x,{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[j.map((e,s)=>U(e,s)),a.jsx("div",{className:"absolute top-0 w-0.5 bg-red-500 z-10 pointer-events-none",style:{left:192+v,height:j.length*(u+1)}})]})}),p.length>0&&(0,a.jsxs)("div",{className:"bg-gray-800 px-4 py-2 border-t border-gray-700 flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{children:[p.length," item(s) selecionado(s)"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(i.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-gray-700",children:a.jsx(Y.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-gray-700",children:a.jsx(ee.Z,{className:"w-4 h-4"})})]})]})]})});function el(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${Math.floor(e%60).toString().padStart(2,"0")}.${Math.floor(e%1*100).toString().padStart(2,"0")}`}function er(e){return({text:"#10b981",image:"#f59e0b",video:"#8b5cf6",shape:"#3b82f6",audio:"#ef4444",scene:"#6366f1",effects:"#ec4899"})[e]||"#6b7280"}ea.displayName="TimelineEditorV2";var ei=t(48998);function en({scenes:e,currentScene:s,onSceneSelect:t,onSceneUpdate:n,onSceneAdd:c,onSceneDelete:d,onSceneDuplicate:m}){let[x,p]=(0,l.useState)(null),y=(e,s)=>{n(e,{title:s}),p(null)},g=(l,n)=>{let c=n===s,g=l.elements.reduce((e,s)=>(e[s.type]=(e[s.type]||0)+1,e),{});return a.jsx(r.Zb,{className:`mb-3 cursor-pointer transition-all ${c?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>t(n),children:(0,a.jsxs)(r.aY,{className:"p-3",children:[(0,a.jsxs)("div",{className:"aspect-video bg-gray-200 rounded mb-2 flex items-center justify-center relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(f.Z,{className:"w-8 h-8 text-gray-400 mb-1"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[l.elements.length," elementos"]})]}),a.jsx("div",{className:"absolute top-1 left-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:n+1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[x===n?a.jsx($.I,{defaultValue:l.title,className:"text-sm h-8",onBlur:e=>y(n,e.target.value),onKeyDown:e=>{"Enter"===e.key&&y(n,e.currentTarget.value),"Escape"===e.key&&p(null)},autoFocus:!0}):a.jsx("h4",{className:"font-medium text-sm truncate cursor-pointer hover:text-blue-600",onDoubleClick:()=>p(n),title:l.title,children:l.title}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ei.Z,{className:"w-3 h-3 mr-1"}),l.duration,"s"]}),Object.keys(g).length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(g).map(([e,s])=>(0,a.jsxs)(o.C,{variant:"secondary",className:"text-xs px-1 py-0 h-5",children:["text"===e&&a.jsx(h.Z,{className:"w-3 h-3 mr-1"}),"image"===e&&a.jsx(u.Z,{className:"w-3 h-3 mr-1"}),"shape"===e&&a.jsx(f.Z,{className:"w-3 h-3 mr-1"}),s]},e))}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-1",children:[a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx(i.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:e=>{e.stopPropagation()},children:a.jsx(W.Z,{className:"w-3 h-3"})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[m&&a.jsx(i.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:e=>{e.stopPropagation(),m(n)},children:a.jsx(Y.Z,{className:"w-3 h-3"})}),d&&a.jsx(i.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",onClick:s=>{s.stopPropagation(),e.length>1&&d(n)},children:a.jsx(O.Z,{className:"w-3 h-3"})})]})]})]})]})},l.id)};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Cenas"}),(0,a.jsxs)(o.C,{variant:"secondary",className:"text-xs",children:[e.length," slide",1!==e.length?"s":""]})]}),c&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:c,className:"w-full",children:[a.jsx(J.Z,{className:"w-4 h-4 mr-2"}),"Nova Cena"]})]}),a.jsx(Z.x,{className:"flex-1 p-4",children:a.jsx("div",{className:"space-y-3",children:e.map((e,s)=>g(e,s))})}),a.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Dura\xe7\xe3o total:"}),(0,a.jsxs)("span",{children:[e.reduce((e,s)=>e+s.duration,0),"s"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Elementos totais:"}),a.jsx("span",{children:e.reduce((e,s)=>e+s.elements.length,0)})]})]})})]})}var eo=t(363617),ec=t(898268),ed=t(258775),em=t(579635),ex=t(701572);function eh({onContentGenerated:e,onAddToSlide:s}){let[t,r]=(0,l.useState)(""),[c,d]=(0,l.useState)("pt-BR-female-1"),[m,x]=(0,l.useState)("instructor-male"),[h,u]=(0,l.useState)(!1),[p,f]=(0,l.useState)(0),y=[{id:"pt-BR-female-1",name:"Ana (Feminina)",language:"Portugu\xeas",premium:!1},{id:"pt-BR-male-1",name:"Carlos (Masculino)",language:"Portugu\xeas",premium:!1},{id:"pt-BR-female-2",name:"Beatriz (Profissional)",language:"Portugu\xeas",premium:!0},{id:"pt-BR-male-2",name:"Eduardo (Corporativo)",language:"Portugu\xeas",premium:!0}],g=async()=>{if(t.trim()){u(!0),f(0);try{let s=setInterval(()=>{f(e=>Math.min(e+10,90))},200);await new Promise(e=>setTimeout(e,2e3)),clearInterval(s),f(100);let a={type:"tts",data:{text:t,voice:c,audioUrl:`/api/tts/generated/${Date.now()}.mp3`,duration:Math.ceil(.1*t.length)}};e(a)}catch(e){console.error("Erro na gera\xe7\xe3o TTS:",e)}finally{u(!1),f(0)}}},v=async()=>{if(t.trim()){u(!0),f(0);try{let s=setInterval(()=>{f(e=>Math.min(e+8,85))},300);await new Promise(e=>setTimeout(e,3e3)),clearInterval(s),f(100);let a={type:"avatar",data:{text:t,avatar:m,voice:c,videoUrl:`/api/avatar/generated/${Date.now()}.mp4`,duration:Math.ceil(.12*t.length)}};e(a)}catch(e){console.error("Erro na gera\xe7\xe3o Avatar:",e)}finally{u(!1),f(0)}}};return a.jsx("div",{className:"h-full flex flex-col",children:(0,a.jsxs)(z.mQ,{defaultValue:"tts",className:"flex-1 flex flex-col",children:[(0,a.jsxs)(z.dr,{className:"grid w-full grid-cols-2",children:[(0,a.jsxs)(z.SP,{value:"tts",className:"flex items-center",children:[a.jsx(ed.Z,{className:"w-4 h-4 mr-2"}),"TTS"]}),(0,a.jsxs)(z.SP,{value:"avatar",className:"flex items-center",children:[a.jsx(em.Z,{className:"w-4 h-4 mr-2"}),"Avatar"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[a.jsx(z.nU,{value:"tts",className:"h-full",children:a.jsx(Z.x,{className:"h-full p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Texto para Narra\xe7\xe3o"}),a.jsx(eo.g,{placeholder:"Digite o texto que ser\xe1 narrado...",value:t,onChange:e=>r(e.target.value),rows:4,className:"resize-none"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[t.length," caracteres • ~",Math.ceil(.1*t.length),"s"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Voz"}),(0,a.jsxs)(ec.Ph,{value:c,onValueChange:d,children:[a.jsx(ec.i4,{children:a.jsx(ec.ki,{placeholder:"Selecionar voz"})}),a.jsx(ec.Bw,{children:y.map(e=>a.jsx(ec.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{children:e.name}),e.premium&&a.jsx(o.C,{variant:"secondary",className:"text-xs",children:"Premium"})]})},e.id))})]})]}),h&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(n.E,{value:p}),(0,a.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Gerando narra\xe7\xe3o... ",p,"%"]})]}),a.jsx("div",{className:"flex gap-2",children:(0,a.jsxs)(i.z,{onClick:g,disabled:!t.trim()||h,className:"flex-1",children:[a.jsx(Q.Z,{className:"w-4 h-4 mr-2"}),"Gerar TTS"]})})]})})}),a.jsx(z.nU,{value:"avatar",className:"h-full",children:a.jsx(Z.x,{className:"h-full p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Texto para Avatar"}),a.jsx(eo.g,{placeholder:"Digite o texto que o avatar falar\xe1...",value:t,onChange:e=>r(e.target.value),rows:4,className:"resize-none"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[t.length," caracteres • ~",Math.ceil(.12*t.length),"s"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Avatar"}),(0,a.jsxs)(ec.Ph,{value:m,onValueChange:x,children:[a.jsx(ec.i4,{children:a.jsx(ec.ki,{placeholder:"Selecionar avatar"})}),a.jsx(ec.Bw,{children:[{id:"instructor-male",name:"Instrutor Masculino",category:"Profissional"},{id:"instructor-female",name:"Instrutora Feminina",category:"Profissional"},{id:"safety-engineer",name:"Engenheiro de Seguran\xe7a",category:"T\xe9cnico"},{id:"worker",name:"Operador",category:"Industrial"}].map(e=>a.jsx(ec.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{children:e.name}),a.jsx(o.C,{variant:"outline",className:"text-xs",children:e.category})]})},e.id))})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Voz do Avatar"}),(0,a.jsxs)(ec.Ph,{value:c,onValueChange:d,children:[a.jsx(ec.i4,{children:a.jsx(ec.ki,{placeholder:"Selecionar voz"})}),a.jsx(ec.Bw,{children:y.map(e=>a.jsx(ec.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{children:e.name}),e.premium&&a.jsx(o.C,{variant:"secondary",className:"text-xs",children:"Premium"})]})},e.id))})]})]}),h&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(n.E,{value:p}),(0,a.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Gerando avatar falante... ",p,"%"]})]}),a.jsx("div",{className:"flex gap-2",children:(0,a.jsxs)(i.z,{onClick:v,disabled:!t.trim()||h,className:"flex-1",children:[a.jsx(ex.Z,{className:"w-4 h-4 mr-2"}),"Gerar Avatar"]})})]})})})]})]})})}let eu={canvas:{width:1920,height:1080,zoom:50,showGrid:!1,gridSize:20,showRulers:!1,snapToGrid:!0,snapDistance:5},timeline:{pixelsPerSecond:50,trackHeight:60,visibleTracks:10,showKeyframes:!0,snapToKeyframes:!0},export:{format:"mp4",quality:"high",fps:30,bitrate:"8000k",resolution:{width:1920,height:1080}}};function ep({projectData:e,onSave:s,onExport:t}){var n;let[c,m]=(0,l.useState)(e.slides),[x,u]=(0,l.useState)(eu),[y,v]=(0,l.useState)({currentSlide:0,selectedElements:[],clipboard:[],history:{past:[],future:[],maxSteps:50},playback:{isPlaying:!1,currentTime:0,playbackRate:1,loop:!1},tools:{activeTool:"select",brush:{size:5,color:"#3b82f6",opacity:1}},canvas:eu.canvas}),j=(0,l.useRef)(null),N=(0,l.useRef)(null),w=(0,l.useRef)(null),k=(0,l.useCallback)((s={})=>({slides:c,metadata:e.metadata,timeline:e.timeline,...s}),[c,e.metadata,e.timeline]),$=(0,l.useCallback)(e=>{switch(console.log("\uD83C\uDFAC Editor Event:",e),e.type){case"element_select":v(s=>({...s,selectedElements:e.data.elementIds||[]}));break;case"element_update":s&&(w.current&&clearTimeout(w.current),w.current=window.setTimeout(()=>{s(k())},2e3));break;case"timeline_update":"play"===e.data.action?v(e=>({...e,playback:{...e.playback,isPlaying:!0}})):"pause"===e.data.action?v(e=>({...e,playback:{...e.playback,isPlaying:!1}})):"stop"===e.data.action&&v(e=>({...e,playback:{...e.playback,isPlaying:!1,currentTime:0}}))}},[k,s]),X=(0,l.useCallback)(e=>{v(s=>({...s,currentSlide:e,selectedElements:[]})),$({type:"slide_change",data:{slideIndex:e},timestamp:Date.now()})},[$]),B=(0,l.useCallback)(e=>{v(s=>({...s,selectedElements:e})),$({type:"element_select",data:{elementIds:e},timestamp:Date.now()})},[$]),Y=(0,l.useCallback)((e,s)=>{m(t=>{let a=[...t],l=a[y.currentSlide];if(l){let t=l.elements.findIndex(s=>s.id===e);t>=0&&(l.elements[t]={...l.elements[t],...s,style:{...l.elements[t].style,...s.style,position:{...l.elements[t].style.position,...void 0!==s.x?{x:s.x}:{},...void 0!==s.y?{y:s.y}:{},...void 0!==s.width?{width:s.width}:{},...void 0!==s.height?{height:s.height}:{}}}})}return a}),$({type:"element_update",data:{elementId:e,updates:s},timestamp:Date.now()})},[y.currentSlide,$]),O=(0,l.useCallback)(e=>{m(s=>{let t=[...s],a=t[y.currentSlide];return a&&(a.elements=a.elements.filter(s=>!e.includes(s.id))),t}),v(s=>({...s,selectedElements:s.selectedElements.filter(s=>!e.includes(s))})),d.Am.success(`${e.length} elemento(s) exclu\xeddo(s)`)},[y.currentSlide]),U=(0,l.useCallback)(e=>{let s={id:`element_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e.type||"text",content:e.content||null,x:e.x||100,y:e.y||100,width:e.width||200,height:e.height||100,zIndex:e.zIndex||(c[y.currentSlide]?.elements.length||0)+1,visible:!1!==e.visible,locked:e.locked||!1,style:{position:{x:e.x||100,y:e.y||100,width:e.width||200,height:e.height||100},fontSize:16,fontFamily:"Arial",color:"#000000",...e.style},animations:e.animations||[],properties:e.properties||{}};m(e=>{let t=[...e],a=t[y.currentSlide];return a&&a.elements.push(s),t}),v(e=>({...e,selectedElements:[s.id]})),d.Am.success(`${s.type} adicionado`)},[c,y.currentSlide]),F=(0,l.useCallback)(()=>{let e=!y.playback.isPlaying;v(s=>({...s,playback:{...s.playback,isPlaying:e}})),N.current?.togglePlayback()},[y.playback.isPlaying]),G=(0,l.useCallback)(()=>{v(e=>({...e,playback:{...e.playback,isPlaying:!1,currentTime:0}})),N.current?.stop()},[]),W=(0,l.useCallback)(e=>{v(s=>({...s,playback:{...s.playback,currentTime:e}}))},[]),L=(0,l.useCallback)(()=>{let e=k({lastModified:new Date().toISOString(),version:"2.0"});s&&s(e),d.Am.success("Projeto salvo com sucesso!")},[k,s]),H=(0,l.useCallback)(async()=>{try{d.Am.loading("Iniciando renderiza\xe7\xe3o...",{id:"export-toast"}),$({type:"export_start",data:{settings:x.export},timestamp:Date.now()});let s=await fetch("/api/v1/render/video-production-v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slides:c,timeline:e.timeline,settings:x.export})});if(!s.ok)throw Error("Erro na renderiza\xe7\xe3o");let a=await s.json();if(!a.success)throw Error(a.error||"Falha na renderiza\xe7\xe3o");let l=a.jobId;d.Am.success(`Renderiza\xe7\xe3o iniciada! ID: ${l}`,{id:"export-toast"}),t&&t(),$({type:"export_complete",data:{jobId:l},timestamp:Date.now()})}catch(e){console.error("❌ Erro no export:",e),d.Am.error(`Erro: ${e instanceof Error?e.message:"Erro desconhecido"}`,{id:"export-toast"})}},[c,e.timeline,x.export,t,$]),Q=(0,l.useCallback)(()=>{(0,d.Am)("Desfazer (em desenvolvimento)")},[]),J=(0,l.useCallback)(()=>{(0,d.Am)("Refazer (em desenvolvimento)")},[]),ee=(0,l.useCallback)(e=>{v(s=>({...s,tools:{...s.tools,activeTool:e}}))},[]),es=(0,l.useCallback)(()=>{u(e=>({...e,canvas:{...e.canvas,zoom:Math.min(1.2*e.canvas.zoom,200)}})),v(e=>({...e,canvas:e.canvas?{...e.canvas,zoom:Math.min(1.2*e.canvas.zoom,200)}:eu.canvas}))},[]),et=(0,l.useCallback)(()=>{u(e=>({...e,canvas:{...e.canvas,zoom:Math.max(e.canvas.zoom/1.2,25)}})),v(e=>({...e,canvas:e.canvas?{...e.canvas,zoom:Math.max(e.canvas.zoom/1.2,25)}:eu.canvas}))},[]),el=c[y.currentSlide];return(0,a.jsxs)("div",{className:"h-screen bg-gray-50 flex flex-col overflow-hidden","data-testid":"animaker-editor",children:[(0,a.jsxs)("header",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded flex items-center justify-center",children:a.jsx(p.Z,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"font-semibold text-gray-900",children:e.metadata.title})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(i.z,{variant:"outline",size:"sm",onClick:Q,children:a.jsx(S.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:J,children:a.jsx(M.Z,{className:"w-4 h-4"})}),a.jsx(C.Z,{orientation:"vertical",className:"h-6"}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>ee("select"),className:"select"===y.tools.activeTool?"bg-blue-100":"",children:a.jsx(P.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>ee("text"),className:"text"===y.tools.activeTool?"bg-blue-100":"",children:a.jsx(h.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg px-3 py-2",children:[a.jsx(i.z,{variant:"ghost",size:"sm",onClick:G,children:a.jsx(E.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{variant:"ghost",size:"sm",children:a.jsx(T.Z,{className:"w-4 h-4"})}),a.jsx(i.z,{onClick:F,className:"w-10 h-10 rounded-full bg-blue-600 hover:bg-blue-700 text-white","data-testid":"timeline-play",children:y.playback.isPlaying?a.jsx(A.Z,{className:"w-5 h-5"}):a.jsx(_.Z,{className:"w-5 h-5"})}),a.jsx(i.z,{variant:"ghost",size:"sm",children:a.jsx(I.Z,{className:"w-4 h-4"})}),a.jsx("div",{className:"text-sm text-gray-600","data-testid":"current-time",children:(n=y.playback.currentTime,`${Math.floor(n/60).toString().padStart(2,"0")}:${Math.floor(n%60).toString().padStart(2,"0")}.${Math.floor(n%1*100).toString().padStart(2,"0")}`)})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:L,children:[a.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Salvar"]}),(0,a.jsxs)(i.z,{onClick:H,className:"bg-green-600 hover:bg-green-700 text-white","data-testid":"export-button",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[a.jsx("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:(0,a.jsxs)(z.mQ,{defaultValue:"elements",className:"flex-1 flex flex-col",children:[(0,a.jsxs)(z.dr,{className:"grid w-full grid-cols-4",children:[a.jsx(z.SP,{value:"elements",children:"Assets"}),a.jsx(z.SP,{value:"ai-voice",children:"IA Voice"}),a.jsx(z.SP,{value:"templates",children:"Templates"}),a.jsx(z.SP,{value:"uploads",children:"Upload"})]}),a.jsx(z.nU,{value:"elements",className:"flex-1 p-3",children:a.jsx(Z.x,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(r.Zb,{children:[a.jsx(r.Ol,{className:"py-3",children:a.jsx(r.ll,{className:"text-sm",children:"Elementos R\xe1pidos"})}),a.jsx(r.aY,{className:"py-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>U({type:"text",content:"Novo texto"}),className:"h-12 flex flex-col",children:[a.jsx(h.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:"Texto"})]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>U({type:"shape"}),className:"h-12 flex flex-col",children:[a.jsx(f.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:"Forma"})]})]})})]}),(0,a.jsxs)(r.Zb,{children:[a.jsx(r.Ol,{className:"py-3",children:a.jsx(r.ll,{className:"text-sm",children:"Biblioteca"})}),a.jsx(r.aY,{className:"py-2",children:(0,a.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:["Assets carregados: ",e.assets.images.length," imagens"]})})]})]})})}),a.jsx(z.nU,{value:"ai-voice",className:"flex-1 p-2",children:a.jsx(eh,{onContentGenerated:e=>{d.Am.success(`${e.type} gerado!`)},onAddToSlide:(e,s)=>{d.Am.success(`${e.type} adicionado ao slide!`)}})}),a.jsx(z.nU,{value:"templates",className:"flex-1 p-3",children:a.jsx("div",{className:"text-center text-gray-500",children:"Templates em desenvolvimento"})}),a.jsx(z.nU,{value:"uploads",className:"flex-1 p-3",children:(0,a.jsxs)(i.z,{className:"w-full",children:[a.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"Upload de Assets"]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-gray-100",children:[(0,a.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>u(e=>({...e,canvas:{...e.canvas,showGrid:!e.canvas.showGrid}})),className:x.canvas.showGrid?"bg-blue-100":"",children:a.jsx(R.Z,{className:"w-4 h-4"})}),a.jsx(C.Z,{orientation:"vertical",className:"h-6"}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:et,children:a.jsx(q.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[Math.round(x.canvas.zoom),"%"]}),a.jsx(i.z,{variant:"outline",size:"sm",onClick:es,children:a.jsx(V.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Slide ",y.currentSlide+1," de ",c.length]}),a.jsx(o.C,{variant:"outline",children:el?.layout||"padr\xe3o"})]})]}),a.jsx("div",{className:"flex-1 relative overflow-auto","data-testid":"canvas-editor",children:a.jsx(K,{ref:j,slide:el,selectedElements:y.selectedElements,editorState:y,onElementSelect:B,onElementUpdate:Y,onElementDelete:O,onElementAdd:U,onEventEmit:$})})]}),a.jsx("div",{className:"w-80 bg-white border-l border-gray-200",children:a.jsx(en,{scenes:c,currentScene:y.currentSlide,onSceneSelect:X,onSceneUpdate:(e,s)=>{m(t=>{let a=[...t];return a[e]&&(a[e]={...a[e],...s}),a})}})})]}),a.jsx("div",{className:"h-64 bg-gray-900 border-t border-gray-700","data-testid":"timeline-editor",children:a.jsx(ea,{ref:N,slides:c,timeline:e.timeline,editorState:y,onTimeUpdate:W,onSlideSelect:X,onTimelineUpdate:e=>{},onEventEmit:$})}),!1]})}function ef(){let[e,s]=(0,l.useState)("upload"),[t,r]=(0,l.useState)(null);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:["upload"===e&&a.jsx(k,{onAnalysisComplete:e=>{console.log("\uD83C\uDFAC Dados do projeto carregados:",{slides:e.slides.length,totalElements:e.statistics.totalElements,editableElements:e.statistics.editableElements,elementsByType:e.statistics.elementsByType}),r(e),s("editor")},onCancel:()=>window.history.back()}),"editor"===e&&t&&a.jsx(ep,{projectData:t,onSave:e=>{console.log("\uD83D\uDCBE Salvando projeto v2:",e)},onExport:()=>{s("export"),console.log("\uD83C\uDFAC Iniciando renderiza\xe7\xe3o v2...")}}),"export"===e&&a.jsx("div",{className:"h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-4",children:a.jsx("div",{className:"w-8 h-8 border-4 border-green-600 border-t-transparent rounded-full animate-spin"})}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Renderizando V\xeddeo v2.0"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Pipeline de renderiza\xe7\xe3o real em execu\xe7\xe3o..."}),a.jsx("button",{onClick:()=>s("editor"),className:"text-blue-600 hover:underline",children:"← Voltar ao Editor"})]})})]})}},898360:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},143810:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},891216:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},112714:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},100924:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},671709:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},43426:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])},9015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},258775:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},920176:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]])},871059:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},782685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},583855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},899316:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]])},454689:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},181178:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},31215:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},187444:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]])},6309:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]])},110976:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]])},821608:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},898091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},350949:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},161182:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]])},323133:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])},579635:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},269145:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},15128:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},707937:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},211962:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},78954:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(768570).createProxy)(String.raw`C:\xampp\htdocs\_MVP_Video_TecnicoCursos_v7\estudio_ia_videos\app\editor-animaker\page.tsx#default`)},537125:(e,s,t)=>{"use strict";function a(e,[s,t]){return Math.min(t,Math.max(s,e))}t.d(s,{u:()=>a})},217124:(e,s,t)=>{"use strict";t.d(s,{gm:()=>r});var a=t(517577);t(210326);var l=a.createContext(void 0);function r(e){let s=a.useContext(l);return e||s||"ltr"}},390220:(e,s,t)=>{"use strict";t.d(s,{f:()=>c});var a=t(517577),l=t(545226),r=t(210326),i="horizontal",n=["horizontal","vertical"],o=a.forwardRef((e,s)=>{let{decorative:t,orientation:a=i,...o}=e,c=n.includes(a)?a:i;return(0,r.jsx)(l.WV.div,{"data-orientation":c,...t?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:s})});o.displayName="Separator";var c=o},853405:(e,s,t)=>{"use strict";t.d(s,{D:()=>l});var a=t(517577);function l(e){let s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}},602566:(e,s,t)=>{"use strict";t.d(s,{t:()=>r});var a=t(517577),l=t(265819);function r(e){let[s,t]=a.useState(void 0);return(0,l.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let a,l;if(!Array.isArray(s)||!s.length)return;let r=s[0];if("borderBoxSize"in r){let e=r.borderBoxSize,s=Array.isArray(e)?e[0]:e;a=s.inlineSize,l=s.blockSize}else a=e.offsetWidth,l=e.offsetHeight;t({width:a,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}t(void 0)},[e]),s}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,605,9648,489,266,6999,3711,6226,6430],()=>t(629282));module.exports=a})();