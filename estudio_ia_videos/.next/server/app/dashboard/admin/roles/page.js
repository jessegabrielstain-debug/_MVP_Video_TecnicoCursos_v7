(()=>{var e={};e.id=7237,e.ids=[7237],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},61212:e=>{"use strict";e.exports=require("async_hooks")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},27920:e=>{"use strict";e.exports=require("diagnostics_channel")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},85807:e=>{"use strict";e.exports=require("module")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},96119:e=>{"use strict";e.exports=require("perf_hooks")},35816:e=>{"use strict";e.exports=require("process")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},17718:e=>{"use strict";e.exports=require("node:child_process")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},85690:e=>{"use strict";e.exports=require("node:inspector")},82033:e=>{"use strict";e.exports=require("node:module")},87503:e=>{"use strict";e.exports=require("node:net")},70612:e=>{"use strict";e.exports=require("node:os")},49411:e=>{"use strict";e.exports=require("node:path")},51747:e=>{"use strict";e.exports=require("node:readline")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},47261:e=>{"use strict";e.exports=require("node:util")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},76613:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>l,routeModule:()=>x,tree:()=>d}),s(72732),s(13321),s(14118),s(26083),s(81754);var t=s(23191),a=s(88716),i=s(48001),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(r,o);let d=["",{children:["dashboard",{children:["admin",{children:["roles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,72732)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\dashboard\\admin\\roles\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,14118)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,26083)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,81754)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\not-found.tsx"]}],l=["C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\dashboard\\admin\\roles\\page.tsx"],c="/dashboard/admin/roles/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/admin/roles/page",pathname:"/dashboard/admin/roles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},86908:(e,r,s)=>{Promise.resolve().then(s.bind(s,43898))},62329:(e,r,s)=>{"use strict";s.d(r,{C:()=>o});var t=s(10326);s(17577);var a=s(79360),i=s(47405);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...s}){return t.jsx("div",{className:(0,i.cn)(n({variant:r}),e),...s})}},43898:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var t=s(10326),a=s(17577),i=s.n(a);function n(){return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}function o({children:e,fallback:r=null,loading:s=t.jsx(n,{})}){let{isAdmin:i,loading:o,error:d}=function(){let[e,r]=(0,a.useState)(!1),[s,t]=(0,a.useState)(!0),[i,n]=(0,a.useState)(null);return{isAdmin:e,loading:s,error:i}}();return o?t.jsx(t.Fragment,{children:s}):d||!i?t.jsx(t.Fragment,{children:r}):t.jsx(t.Fragment,{children:e})}function d({label:e="Carregando...",description:r,fullscreen:s}){let a=(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 py-6 text-center","aria-busy":"true","data-testid":"loading-state",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-neutral-300 border-t-primary"}),t.jsx("p",{className:"font-medium text-sm text-neutral-700",children:e}),r&&t.jsx("p",{className:"text-xs text-neutral-500 max-w-md",children:r})]});return s?t.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:a}):a}function l({title:e="Ocorreu um erro",message:r="Tente novamente em alguns instantes.",actionLabel:s="Recarregar",onRetry:a,fullscreen:i}){let n=(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 py-6 text-center",role:"alert","data-testid":"error-state",children:[t.jsx("div",{className:"text-red-600","aria-hidden":!0,children:"⚠️"}),t.jsx("p",{className:"font-semibold text-sm text-neutral-800",children:e}),r&&t.jsx("p",{className:"text-xs text-neutral-600 max-w-md",children:r}),a&&t.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 rounded bg-red-600/90 hover:bg-red-600 text-white text-xs font-medium",children:s})]});return i?t.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:n}):n}s(87007);var c=s(79360),u=s(47405);(0,c.j)("inline-flex items-center justify-center",{variants:{variant:{spinner:"animate-spin rounded-full border-2 border-current border-t-transparent",dots:"space-x-2",pulse:"animate-pulse",skeleton:"bg-muted rounded"},size:{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}},defaultVariants:{variant:"spinner",size:"md"}});var x=s(50949),m=s(69669),p=s(41291),h=s(21405);let g=(0,c.j)("rounded-lg border p-4 flex flex-col gap-3",{variants:{variant:{default:"bg-background border-destructive/50 text-destructive",destructive:"bg-destructive/10 border-destructive text-destructive",warning:"bg-yellow-50 dark:bg-yellow-900/10 border-yellow-500/50 text-yellow-900 dark:text-yellow-200"},size:{sm:"text-sm",md:"text-base",lg:"text-lg"}},defaultVariants:{variant:"default",size:"md"}});s(30361),s(94019);var f=s(32933);function v({message:e,className:r}){return(0,t.jsxs)("div",{className:(0,u.cn)("flex items-center gap-2 text-sm text-green-700 dark:text-green-400",r),children:[t.jsx(f.Z,{className:"h-4 w-4"}),t.jsx("span",{children:e})]})}(0,c.j)("rounded-lg border p-4 flex items-start gap-3",{variants:{variant:{default:"bg-green-50 dark:bg-green-900/10 border-green-500/50 text-green-900 dark:text-green-200",subtle:"bg-background border-green-500/30 text-foreground",celebration:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/10 dark:to-emerald-900/10 border-green-500 text-green-900 dark:text-green-200"},size:{sm:"text-sm",md:"text-base",lg:"text-lg"}},defaultVariants:{variant:"default",size:"md"}});var j=s(82610),b=s(83431),y=s(62329),_=s(58038),N=s(98091),q=s(74975);function k(){let[e,r]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[n,o]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),[x,m]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[g,f]=(0,a.useState)(null);async function k(){o(!0),u(null);try{let[e,s]=await Promise.all([fetch("/api/admin/roles"),fetch("/api/admin/users")]);if(!e.ok)throw Error("Falha ao carregar roles");if(!s.ok)throw Error("Falha ao carregar usu\xe1rios");let t=await e.json(),a=await s.json();r(t.roles||[]),i(a.users||[])}catch(e){u(e instanceof Error?e.message:"Erro ao carregar dados")}finally{o(!1)}}async function w(e,r){u(null),m(null);try{if(!(await fetch(`/api/admin/users/${e}/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:r})})).ok)throw Error("Falha ao atribuir role");m(`Role "${r}" atribu\xedda com sucesso!`),await k(),setTimeout(()=>m(null),3e3)}catch(e){u(e instanceof Error?e.message:"Erro ao atribuir role")}}async function C(e,r){u(null),m(null);try{if(!(await fetch(`/api/admin/users/${e}/roles/${r}`,{method:"DELETE"})).ok)throw Error("Falha ao remover role");m(`Role "${r}" removida com sucesso!`),await k(),setTimeout(()=>m(null),3e3)}catch(e){u(e instanceof Error?e.message:"Erro ao remover role")}}return n?t.jsx("div",{className:"container mx-auto p-6",children:t.jsx(d,{label:"Carregando gerenciamento de roles..."})}):c&&!e.length?t.jsx("div",{className:"container mx-auto p-6",children:t.jsx(l,{title:"Erro ao carregar dados",message:c,onRetry:k})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[t.jsx(_.Z,{className:"w-8 h-8"}),"Gerenciamento de Roles"]}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure pap\xe9is e permiss\xf5es de usu\xe1rios"})]})}),c&&t.jsx(l,{title:"Erro",message:c}),x&&t.jsx(v,{message:x}),(0,t.jsxs)(b.Zb,{children:[(0,t.jsxs)(b.Ol,{children:[t.jsx(b.ll,{children:"Roles Dispon\xedveis"}),t.jsx(b.SZ,{children:"Pap\xe9is definidos no sistema e suas descri\xe7\xf5es"})]}),t.jsx(b.aY,{children:t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-2 hover:border-primary transition-colors",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx(y.C,{variant:"secondary",className:"text-sm",children:e.name})}),e.description&&t.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),e.permissions&&e.permissions.length>0&&(0,t.jsxs)("div",{className:"pt-2 border-t",children:[t.jsx("p",{className:"text-xs font-medium mb-1",children:"Permiss\xf5es:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.permissions.slice(0,3).map(e=>t.jsx(y.C,{variant:"outline",className:"text-xs",children:e},e)),e.permissions.length>3&&(0,t.jsxs)(y.C,{variant:"outline",className:"text-xs",children:["+",e.permissions.length-3]})]})]})]},e.id))})})]}),(0,t.jsxs)(b.Zb,{children:[(0,t.jsxs)(b.Ol,{children:[t.jsx(b.ll,{children:"Atribui\xe7\xe3o de Roles"}),t.jsx(b.SZ,{children:"Gerencie os pap\xe9is dos usu\xe1rios cadastrados"})]}),t.jsx(b.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[s.map(r=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 hover:bg-accent/50 transition-colors",children:[t.jsx("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:r.name||r.email||r.id}),r.email&&r.name&&t.jsx("p",{className:"text-sm text-muted-foreground",children:r.email}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",r.id]})]})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"Roles atuais:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:r.roles.length>0?r.roles.map(e=>(0,t.jsxs)(y.C,{variant:"default",className:"gap-1",children:[e,t.jsx("button",{onClick:()=>C(r.id,e),className:"ml-1 hover:text-destructive","aria-label":`Remover role ${e}`,children:t.jsx(N.Z,{className:"w-3 h-3"})})]},e)):t.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma role atribu\xedda"})})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"Adicionar role:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.filter(e=>!r.roles.includes(e.name)).map(e=>(0,t.jsxs)(j.z,{variant:"outline",size:"sm",onClick:()=>w(r.id,e.name),className:"gap-1",children:[t.jsx(q.Z,{className:"w-3 h-3"}),e.name]},e.id))})]})]},r.id)),0===s.length&&t.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum usu\xe1rio cadastrado no sistema"})]})})]})]})}function w(){return t.jsx(o,{fallback:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-8",children:[t.jsx(_.Z,{className:"w-16 h-16 text-red-500 mb-4"}),t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Acesso Restrito"}),t.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:"Esta p\xe1gina \xe9 restrita a administradores do sistema."})]}),loading:t.jsx(d,{label:"Verificando permiss\xf5es..."}),children:t.jsx(k,{})})}},41291:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},69669:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},98091:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},74975:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(62881).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},72732:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\xampp\htdocs\_MVP_Video_TecnicoCursos_v7\estudio_ia_videos\app\dashboard\admin\roles\page.tsx#default`)}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,7362,6999,3539,9874,4715],()=>s(76613));module.exports=t})();