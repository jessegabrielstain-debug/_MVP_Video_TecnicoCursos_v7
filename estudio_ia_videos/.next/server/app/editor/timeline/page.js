(()=>{var e={};e.id=4774,e.ids=[4774],e.modules={572934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},554580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},345869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},220399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},978893:e=>{"use strict";e.exports=require("buffer")},532615:e=>{"use strict";e.exports=require("http")},735240:e=>{"use strict";e.exports=require("https")},768621:e=>{"use strict";e.exports=require("punycode")},276162:e=>{"use strict";e.exports=require("stream")},917360:e=>{"use strict";e.exports=require("url")},671568:e=>{"use strict";e.exports=require("zlib")},936492:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(458948),t(800635),t(35866);var a=t(723191),r=t(88716),i=t(637922),l=t.n(i),n=t(595231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["editor",{children:["timeline",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,458948)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\editor\\timeline\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,800635)),"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\editor\\timeline\\page.tsx"],m="/editor/timeline/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/editor/timeline/page",pathname:"/editor/timeline",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},399173:(e,s,t)=>{Promise.resolve().then(t.bind(t,551771)),Promise.resolve().then(t.bind(t,697754)),Promise.resolve().then(t.bind(t,581966)),Promise.resolve().then(t.bind(t,825146)),Promise.resolve().then(t.bind(t,108563)),Promise.resolve().then(t.bind(t,735265)),Promise.resolve().then(t.bind(t,243796)),Promise.resolve().then(t.bind(t,474008)),Promise.resolve().then(t.bind(t,754055))},54379:(e,s,t)=>{Promise.resolve().then(t.bind(t,782063))},962329:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var a=t(210326);t(517577);var r=t(630542),i=t(747405);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(l({variant:s}),e),...t})}},464070:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var a=t(210326),r=t(517577),i=t(747405);let l=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));l.displayName="Input"},870293:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(210326),r=t(517577),i=t(490621),l=t(630542),n=t(747405);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(i.f,{ref:t,className:(0,n.cn)(o(),e),...s}));d.displayName=i.f.displayName},830370:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(210326),r=t(517577),i=t(747405);let l=r.forwardRef(({className:e,value:s,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));l.displayName="Progress"},289427:(e,s,t)=>{"use strict";t.d(s,{x:()=>n});var a=t(210326),r=t(517577),i=t(416999),l=t(747405);let n=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.fC,{ref:r,className:(0,l.cn)("relative overflow-hidden",e),...t,children:[a.jsx(i.l_,{className:"h-full w-full rounded-[inherit]",children:s}),a.jsx(o,{}),a.jsx(i.Ns,{})]}));n.displayName=i.fC.displayName;let o=r.forwardRef(({className:e,orientation:s="vertical",...t},r)=>a.jsx(i.gb,{ref:r,orientation:s,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 border-t border-t-transparent p-[1px]",e),...t,children:a.jsx(i.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=i.gb.displayName},16013:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(210326),r=t(517577),i=t(390220),l=t(747405);let n=r.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...r},n)=>a.jsx(i.f,{ref:n,decorative:t,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));n.displayName=i.f.displayName},506598:(e,s,t)=>{"use strict";t.d(s,{i:()=>n});var a=t(210326),r=t(517577),i=t(87131),l=t(747405);let n=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(i.fC,{ref:t,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[a.jsx(i.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:a.jsx(i.e6,{className:"absolute h-full bg-primary"})}),a.jsx(i.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));n.displayName=i.fC.displayName},281892:(e,s,t)=>{"use strict";t.d(s,{r:()=>n});var a=t(210326),r=t(517577),i=t(141959),l=t(747405);let n=r.forwardRef(({className:e,...s},t)=>a.jsx(i.fC,{className:(0,l.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:a.jsx(i.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));n.displayName=i.fC.displayName},55009:(e,s,t)=>{"use strict";t.d(s,{SP:()=>d,dr:()=>o,mQ:()=>n,nU:()=>c});var a=t(210326),r=t(517577),i=t(839648),l=t(747405);let n=i.fC,o=r.forwardRef(({className:e,...s},t)=>a.jsx(i.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));o.displayName=i.aV.displayName;let d=r.forwardRef(({className:e,...s},t)=>a.jsx(i.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=i.xz.displayName;let c=r.forwardRef(({className:e,...s},t)=>a.jsx(i.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=i.VY.displayName},581297:(e,s,t)=>{"use strict";t.d(s,{_v:()=>c,aJ:()=>d,pn:()=>n,u:()=>o});var a=t(210326),r=t(517577),i=t(939313),l=t(747405);let n=i.zt,o=i.fC,d=i.xz,c=r.forwardRef(({className:e,sideOffset:s=4,...t},r)=>a.jsx(i.VY,{ref:r,sideOffset:s,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));c.displayName=i.VY.displayName},782063:(e,s,t)=>{"use strict";let a;t.r(s),t.d(s,{default:()=>ex});var r=t(210326),i=t(517577),l=t(690434),n=t(273144),o=t(107409),d=t(968699),c=t(674843),m=t(581297),u=t(482610),x=t(962329),h=t(55009),p=t(870293),f=t(464070),g=t(506598),v=t(281892),j=t(16013),b=t(289427),y=t(830370),N=t(849758),w=t(161182),k=t(671709),z=t(486755),S=t(701572),_=t(112714),C=t(891216),Z=t(9015),P=t(43426),T=t(886333),M=t(31215),R=t(853473),E=t(331540),V=t(258775),O=t(794893),I=t(821608),A=t(6309),U=t(871059),q=t(110976),$=t(211962),F=t(707937),D=t(187444),J=t(143810),G=t(898091);let L=(0,t(862881).Z)("Magnet",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]);var Q=t(355993),X=t(971312),H=t(677506),K=t(350949),W=t(253468),Y=t(48998);let B=e=>{let s;let t=new Set,a=(e,a)=>{let r="function"==typeof e?e(s):e;if(!Object.is(r,s)){let e=s;s=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},s,r),t.forEach(t=>t(s,e))}},r=()=>s,i={setState:a,getState:r,getInitialState:()=>l,subscribe:e=>(t.add(e),()=>t.delete(e))},l=s=e(a,r,i);return i},ee=e=>e?B(e):B,es=e=>e,et=new Map,ea=e=>{let s=et.get(e);return s?Object.fromEntries(Object.entries(s.stores).map(([e,s])=>[e,s.getState()])):{}},er=(e,s,t)=>{if(void 0===e)return{type:"untracked",connection:s.connect(t)};let a=et.get(t.name);if(a)return{type:"tracked",store:e,...a};let r={connection:s.connect(t),stores:{}};return et.set(t.name,r),{type:"tracked",store:e,...r}},ei=(e,s)=>{if(void 0===s)return;let t=et.get(e);t&&(delete t.stores[s],0===Object.keys(t.stores).length&&et.delete(e))},el=e=>{var s,t;if(!e)return;let a=e.split("\n"),r=a.findIndex(e=>e.includes("api.setState"));if(r<0)return;let i=(null==(s=a[r+1])?void 0:s.trim())||"";return null==(t=/.+ (.+) .+/.exec(i))?void 0:t[1]},en=(e,s)=>{let t;try{t=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==t&&s(t)};var eo=t(597394);let ed=(e=>{let s=ee(e),t=e=>(function(e,s=es){let t=i.useSyncExternalStore(e.subscribe,i.useCallback(()=>s(e.getState()),[e,s]),i.useCallback(()=>s(e.getInitialState()),[e,s]));return i.useDebugValue(t),t})(s,e);return Object.assign(t,s),t})(((e,s={})=>(t,a,r)=>{let i;let{enabled:l,anonymousActionType:n,store:o,...d}=s;try{i=(null==l||l)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!i)return e(t,a,r);let{connection:c,...m}=er(o,i,d),u=!0;r.setState=(e,s,i)=>{let l=t(e,s);if(!u)return l;let m=void 0===i?{type:n||el(Error().stack)||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===o?null==c||c.send(m,a()):null==c||c.send({...m,type:`${o}/${m.type}`},{...ea(d.name),[o]:r.getState()}),l},r.devtools={cleanup:()=>{c&&"function"==typeof c.unsubscribe&&c.unsubscribe(),ei(d.name,o)}};let x=(...e)=>{let s=u;u=!1,t(...e),u=s},h=e(r.setState,a,r);if("untracked"===m.type?null==c||c.init(h):(m.stores[m.store]=r,null==c||c.init(Object.fromEntries(Object.entries(m.stores).map(([e,s])=>[e,e===m.store?h:s.getState()])))),r.dispatchFromDevtools&&"function"==typeof r.dispatch){let e=!1,s=r.dispatch;r.dispatch=(...t)=>{"__setState"!==t[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),s(...t)}}return c.subscribe(e=>{var s;switch(e.type){case"ACTION":if("string"!=typeof e.payload){console.error("[zustand devtools middleware] Unsupported action format");return}return en(e.payload,e=>{if("__setState"===e.type){if(void 0===o){x(e.state);return}1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let s=e.state[o];if(null==s)return;JSON.stringify(r.getState())!==JSON.stringify(s)&&x(s);return}r.dispatchFromDevtools&&"function"==typeof r.dispatch&&r.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(x(h),void 0===o)return null==c?void 0:c.init(r.getState());return null==c?void 0:c.init(ea(d.name));case"COMMIT":if(void 0===o){null==c||c.init(r.getState());break}return null==c?void 0:c.init(ea(d.name));case"ROLLBACK":return en(e.state,e=>{if(void 0===o){x(e),null==c||c.init(r.getState());return}x(e[o]),null==c||c.init(ea(d.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return en(e.state,e=>{if(void 0===o){x(e);return}JSON.stringify(r.getState())!==JSON.stringify(e[o])&&x(e[o])});case"IMPORT_STATE":{let{nextLiftedState:t}=e.payload,a=null==(s=t.computedStates.slice(-1)[0])?void 0:s.state;if(!a)return;void 0===o?x(a):x(a[o]),null==c||c.send(null,t);break}case"PAUSE_RECORDING":return u=!u}return}}),h})((a=(e,s)=>({slides:[],setSlides:s=>e(e=>{e.slides=s.map(e=>({...e,ttsState:"idle"}))}),updateSlide:(s,t)=>e(e=>{let a=e.slides.find(e=>e.id===s);a&&Object.assign(a,t)}),generateTTS:async(e,t)=>{s().updateSlide(e,{ttsState:"generating"});try{let a=await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,slideId:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Falha ao gerar \xe1udio")}let r=await a.json();s().updateSlide(e,{ttsState:"success",audioUrl:r.audioUrl})}catch(a){let t=a instanceof Error?a.message:"Erro desconhecido";s().updateSlide(e,{ttsState:"error",errorMessage:t})}}}),(e,s,t)=>(t.setState=(s,t,...a)=>e("function"==typeof s?(0,eo.Uy)(s):s,t,...a),a(t.setState,s,t))))),ec=({item:e,track:s,zoom:t,onSelect:a,selected:i})=>{let l=50*e.duration*t,o=50*e.start*t;return(0,r.jsxs)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:cn("absolute top-2 h-16 rounded-lg border-2 cursor-pointer transition-all","flex items-center px-3 text-white text-sm font-medium",i?"border-white shadow-lg":"border-transparent","hover:shadow-md"),style:{left:`${o}px`,width:`${Math.max(l,60)}px`,backgroundColor:s.color},onClick:s=>a(e.id,s.ctrlKey||s.metaKey),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(()=>{switch(s.type){case"video":default:return r.jsx(N.Z,{className:"w-4 h-4"});case"audio":return r.jsx(Waveform,{className:"w-4 h-4"});case"text":return r.jsx(w.Z,{className:"w-4 h-4"});case"image":return r.jsx(k.Z,{className:"w-4 h-4"});case"pptx":return r.jsx(z.Z,{className:"w-4 h-4"});case"3d":return r.jsx(S.Z,{className:"w-4 h-4"})}})(),r.jsx("span",{className:"truncate",children:e.content})]}),r.jsx("div",{className:"absolute left-0 top-0 w-2 h-full cursor-ew-resize bg-white/20 opacity-0 hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute right-0 top-0 w-2 h-full cursor-ew-resize bg-white/20 opacity-0 hover:opacity-100 transition-opacity"})]})},em=({track:e,zoom:s,duration:t,selectedItems:a,onSelectItem:i,onToggleVisibility:l,onToggleLock:n})=>{let o=50*t*s;return(0,r.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"w-64 bg-gray-50 border-r border-gray-200 p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:e.name}),r.jsx("p",{className:"text-xs text-gray-500",children:e.type.toUpperCase()})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(u.z,{variant:"ghost",size:"sm",onClick:()=>l(e.id),className:"p-1",children:e.visible?r.jsx(_.Z,{className:"w-4 h-4"}):r.jsx(C.Z,{className:"w-4 h-4"})}),r.jsx(u.z,{variant:"ghost",size:"sm",onClick:()=>n(e.id),className:"p-1",children:e.locked?r.jsx(Z.Z,{className:"w-4 h-4"}):r.jsx(P.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"relative bg-white",style:{height:`${e.height}px`,minWidth:`${Math.max(o,800)}px`},children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:Math.ceil(t)}).map((e,t)=>r.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200",style:{left:`${50*t*s}px`}},t))}),e.items.map(t=>r.jsx(ec,{item:t,track:e,zoom:s,onSelect:i,selected:a.includes(t.id)},t.id))]})]})},eu=({currentTime:e,zoom:s,duration:t,onSeek:a})=>r.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10 cursor-pointer",style:{left:`${50*e*s+256}px`},children:r.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full"})});function ex(){let{slides:e,generateTTS:s,setSlides:t}=ed(),[a,n]=(0,i.useState)({currentTime:0,duration:120,playing:!1,zoom:1,selectedItems:[],playbackSpeed:1,snapToGrid:!0,gridSize:1,previewQuality:"medium"}),k=e.map(e=>({id:`track-${e.id}`,type:"pptx",name:e.title||`Slide ${e.order_index}`,color:"#8b5cf6",visible:!0,locked:!1,height:80,items:[{id:e.id,start:10*(e.order_index||0),duration:e.duration||10,content:e.content||"",properties:{...e.visualSettings,ttsState:e.ttsState,audioUrl:e.audioUrl},thumbnail:e.visualSettings.backgroundImageUrl||"/api/placeholder/120/60"}]})),[S,_]=(0,i.useState)(!0),C=(0,i.useRef)(null),{renderVideo:Z,isRendering:P,progress:B,result:ee,error:es,reset:et}=function(){let{renderVideo:e,...s}=function(){let[e,s]=(0,i.useState)({isRendering:!1,progress:0,result:null,error:null}),t=(0,i.useCallback)(async e=>{s({isRendering:!0,progress:0,result:null,error:null});try{console.log("\uD83C\uDFAC Starting Remotion render:",e.compositionId);let t=await fetch("/api/remotion/render",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Render failed")}let a=await t.json();return s({isRendering:!1,progress:100,result:a,error:null}),console.log("✅ Render completed:",a),a}catch(e){throw s({isRendering:!1,progress:0,result:null,error:e instanceof Error?e.message:"Unknown error"}),console.error("❌ Render error:",e),e}},[]),a=(0,i.useCallback)(async e=>{try{let s=await fetch(`/api/remotion/render?compositionId=${e}`);if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to get composition")}return(await s.json()).composition}catch(e){throw console.error("❌ Get composition error:",e),e}},[]),r=(0,i.useCallback)(()=>{s({isRendering:!1,progress:0,result:null,error:null})},[]);return{...e,renderVideo:t,getComposition:a,reset:r}}(),t=(0,i.useCallback)(async(s,t)=>{let a=t?.advanced?"AdvancedVideoComposition":"VideoComposition",r={project:s,config:{width:s.width,height:s.height,fps:s.fps,durationInFrames:Math.round(s.duration/1e3*s.fps),composition:a}};return e({compositionId:a,props:r,quality:t?.quality,codec:t?.codec})},[e]);return{...s,renderTimeline:t}}(),ea=(0,i.useCallback)(async()=>{try{let e={id:"timeline-project-1",name:"Treinamento NR-35",duration:a.duration,fps:30,width:1920,height:1080,tracks:k.map(e=>({id:e.id,type:e.type,name:e.name,visible:e.visible,locked:e.locked,elements:e.items.map(s=>({id:s.id,type:e.type,start:s.start,duration:s.duration,content:s.content,properties:{}}))}))};c.Am.info("Iniciando renderiza\xe7\xe3o do v\xeddeo..."),await Z(e),ee&&c.Am.success("V\xeddeo renderizado com sucesso!")}catch(e){console.error("Erro na renderiza\xe7\xe3o:",e),c.Am.error("Erro ao renderizar v\xeddeo")}},[a,Z,ee,k]),er=(0,i.useCallback)(()=>{n(e=>({...e,playing:!e.playing})),a.playing?c.Am.info("Reprodu\xe7\xe3o pausada"):c.Am.success("Reprodu\xe7\xe3o iniciada")},[a.playing]),ei=(0,i.useCallback)(()=>{n(e=>({...e,playing:!1,currentTime:0})),c.Am.info("Reprodu\xe7\xe3o parada")},[]),el=(0,i.useCallback)(e=>{n(s=>({...s,currentTime:Math.max(0,Math.min(e,s.duration))}))},[]),en=(0,i.useCallback)(()=>{n(e=>({...e,zoom:Math.min(1.5*e.zoom,10)}))},[]),eo=(0,i.useCallback)(()=>{n(e=>({...e,zoom:Math.max(e.zoom/1.5,.1)}))},[]),ec=(0,i.useCallback)(e=>{console.log("Toggling visibility for",e)},[]),ex=(0,i.useCallback)(e=>{console.log("Toggling lock for",e)},[]),eh=(0,i.useCallback)((e,s)=>{n(t=>({...t,selectedItems:s?t.selectedItems.includes(e)?t.selectedItems.filter(s=>s!==e):[...t.selectedItems,e]:[e]}))},[]),ep=(0,i.useCallback)(e=>{console.log("Adding new track of type",e),c.Am.success(`Fun\xe7\xe3o de adicionar slide pendente.`)},[]);return r.jsx(o.W,{backend:d.PD,children:(0,r.jsxs)("div",{className:"h-screen bg-gray-900 text-white flex flex-col",children:[r.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(l.default,{href:"/editor",children:(0,r.jsxs)(u.z,{variant:"ghost",size:"sm",children:[r.jsx(T.Z,{className:"w-4 h-4 mr-2"}),"Voltar"]})}),r.jsx("h1",{className:"text-xl font-bold",children:"Timeline Editor Profissional"}),r.jsx(x.C,{variant:"secondary",children:"Projeto: Treinamento NR-35"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(u.z,{variant:"outline",size:"sm",children:[r.jsx(M.Z,{className:"w-4 h-4 mr-2"}),"Salvar"]}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:ea,disabled:P,children:[r.jsx(R.Z,{className:"w-4 h-4 mr-2"}),P?`Renderizando... ${Math.round(B)}%`:"Renderizar"]}),(0,r.jsxs)(u.z,{size:"sm",children:[r.jsx(E.Z,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]})}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[r.jsx("div",{className:"w-64 bg-gray-800 border-r border-gray-700 p-4",children:(0,r.jsxs)(h.mQ,{defaultValue:"media",className:"w-full",children:[(0,r.jsxs)(h.dr,{className:"grid w-full grid-cols-3",children:[r.jsx(h.SP,{value:"media",children:"M\xeddia"}),r.jsx(h.SP,{value:"effects",children:"Efeitos"}),r.jsx(h.SP,{value:"text",children:"Texto"})]}),(0,r.jsxs)(h.nU,{value:"media",className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Adicionar Track"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>ep("video"),children:[r.jsx(N.Z,{className:"w-4 h-4 mr-1"}),"V\xeddeo"]}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>ep("audio"),children:[r.jsx(V.Z,{className:"w-4 h-4 mr-1"}),"\xc1udio"]}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>ep("text"),children:[r.jsx(w.Z,{className:"w-4 h-4 mr-1"}),"Texto"]}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>ep("pptx"),children:[r.jsx(z.Z,{className:"w-4 h-4 mr-1"}),"PPTX"]})]})]}),r.jsx(j.Z,{}),(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Biblioteca de M\xeddia"}),r.jsx(b.x,{className:"h-64 mt-2",children:r.jsx("div",{className:"space-y-2",children:["video1.mp4","audio1.wav","slide1.pptx"].map(e=>r.jsx("div",{className:"p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(N.Z,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm truncate",children:e})]})},e))})})]})]}),r.jsx(h.nU,{value:"effects",className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Transi\xe7\xf5es"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsx(u.z,{variant:"outline",size:"sm",children:"Fade"}),r.jsx(u.z,{variant:"outline",size:"sm",children:"Slide"}),r.jsx(u.z,{variant:"outline",size:"sm",children:"Zoom"}),r.jsx(u.z,{variant:"outline",size:"sm",children:"Rotate"})]})]})}),r.jsx(h.nU,{value:"text",className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Estilos de Texto"}),(0,r.jsxs)("div",{className:"space-y-2 mt-2",children:[r.jsx(u.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:"T\xedtulo Principal"}),r.jsx(u.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:"Subt\xedtulo"}),r.jsx(u.z,{variant:"outline",size:"sm",className:"w-full justify-start",children:"Legenda"})]})]})})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[S&&r.jsx("div",{className:"h-64 bg-black border-b border-gray-700 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(O.Z,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Preview do V\xeddeo"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[Math.floor(a.currentTime/60),":",(a.currentTime%60).toFixed(0).padStart(2,"0")," /",Math.floor(a.duration/60),":",(a.duration%60).toFixed(0).padStart(2,"0")]})]})}),r.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.z,{variant:"ghost",size:"sm",onClick:ei,children:r.jsx(I.Z,{className:"w-4 h-4"})}),r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(A.Z,{className:"w-4 h-4"})}),r.jsx(u.z,{variant:"ghost",size:"sm",onClick:er,children:a.playing?r.jsx(U.Z,{className:"w-5 h-5"}):r.jsx(O.Z,{className:"w-5 h-5"})}),r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(q.Z,{className:"w-4 h-4"})})]}),r.jsx(j.Z,{orientation:"vertical",className:"h-6"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.z,{variant:"ghost",size:"sm",onClick:eo,children:r.jsx($.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("span",{className:"text-sm w-12 text-center",children:[Math.round(100*a.zoom),"%"]}),r.jsx(u.z,{variant:"ghost",size:"sm",onClick:en,children:r.jsx(F.Z,{className:"w-4 h-4"})})]}),r.jsx(j.Z,{orientation:"vertical",className:"h-6"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(D.Z,{className:"w-4 h-4"})}),r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(J.Z,{className:"w-4 h-4"})}),r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(G.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(v.r,{checked:a.snapToGrid,onCheckedChange:e=>n(s=>({...s,snapToGrid:e}))}),(0,r.jsxs)(p._,{className:"text-sm",children:[r.jsx(L,{className:"w-4 h-4 inline mr-1"}),"Snap"]})]}),r.jsx(u.z,{variant:"ghost",size:"sm",onClick:()=>_(!S),children:S?r.jsx(Q.Z,{className:"w-4 h-4"}):r.jsx(X.Z,{className:"w-4 h-4"})})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto bg-gray-100",ref:C,children:[r.jsx("div",{className:"sticky top-0 z-20 bg-gray-200 border-b border-gray-300",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"w-64 bg-gray-300 border-r border-gray-400 p-2",children:r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Timeline"})}),r.jsx("div",{className:"relative flex-1",children:Array.from({length:Math.ceil(a.duration)}).map((e,s)=>(0,r.jsxs)("div",{className:"absolute top-0 bottom-0 flex flex-col justify-between py-1",style:{left:`${50*s*a.zoom}px`},children:[(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[Math.floor(s/60),":",(s%60).toString().padStart(2,"0")]}),r.jsx("div",{className:"w-px h-2 bg-gray-400"})]},s))})]})}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(eu,{currentTime:a.currentTime,zoom:a.zoom,duration:a.duration,onSeek:el}),k.map(e=>r.jsx(em,{track:e,zoom:a.zoom,duration:a.duration,selectedItems:a.selectedItems,onSelectItem:eh,onToggleVisibility:ec,onToggleLock:ex},e.id))]})]})]}),r.jsx("div",{className:"w-80 bg-gray-800 border-l border-gray-700 p-4",children:(0,r.jsxs)(h.mQ,{defaultValue:"properties",className:"w-full",children:[(0,r.jsxs)(h.dr,{className:"grid w-full grid-cols-3",children:[r.jsx(h.SP,{value:"properties",children:"Propriedades"}),r.jsx(h.SP,{value:"keyframes",children:"Keyframes"}),r.jsx(h.SP,{value:"render",children:"Renderiza\xe7\xe3o"})]}),r.jsx(h.nU,{value:"properties",className:"space-y-4",children:a.selectedItems.length>0?(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Item Selecionado"}),r.jsx("div",{className:"space-y-3 mt-2",children:(()=>{let t=a.selectedItems[0],i=e.find(e=>e.id===t);return i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-xs",children:"Posi\xe7\xe3o"}),r.jsx(f.I,{type:"number",defaultValue:10*i.order_index,placeholder:"0",className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-xs",children:"Dura\xe7\xe3o"}),r.jsx(f.I,{type:"number",defaultValue:i.duration,placeholder:"10",className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-xs",children:"Opacidade"}),r.jsx(g.i,{defaultValue:[100],max:100,step:1,className:"mt-1"})]}),(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-xs",children:"Volume"}),r.jsx(g.i,{defaultValue:[80],max:100,step:1,className:"mt-1"})]}),r.jsx(j.Z,{}),(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Narra\xe7\xe3o (TTS)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsxs)(u.z,{size:"sm",variant:"outline",onClick:()=>s(i.id,i.content),disabled:"generating"===i.ttsState,children:["generating"===i.ttsState?r.jsx(H.Z,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(V.Z,{className:"w-4 h-4 mr-2"}),"Gerar \xc1udio"]}),"success"===i.ttsState&&i.audioUrl&&r.jsx(u.z,{size:"sm",variant:"ghost",onClick:()=>new Audio(i.audioUrl).play(),children:r.jsx(O.Z,{className:"w-4 h-4"})}),"error"===i.ttsState&&r.jsx(m.pn,{children:(0,r.jsxs)(m.u,{children:[r.jsx(m.aJ,{children:r.jsx(K.Z,{className:"w-4 h-4 text-red-500"})}),r.jsx(m._v,{children:r.jsx("p",{children:"Erro ao gerar \xe1udio."})})]})})]})]})]}):null})()})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(W.Z,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Selecione um item para editar propriedades"})]})}),r.jsx(h.nU,{value:"keyframes",className:"space-y-4",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(Y.Z,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Sistema de keyframes em desenvolvimento"})]})}),r.jsx(h.nU,{value:"render",className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx(p._,{className:"text-sm font-medium",children:"Status da Renderiza\xe7\xe3o"}),(0,r.jsxs)("div",{className:"space-y-3 mt-2",children:[P&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{children:"Progresso"}),(0,r.jsxs)("span",{children:[Math.round(B),"%"]})]}),r.jsx(y.E,{value:B,className:"h-2"})]}),ee&&(0,r.jsxs)("div",{className:"p-3 bg-green-900/20 border border-green-700 rounded",children:[r.jsx("p",{className:"text-sm text-green-400 mb-2",children:"✅ Renderiza\xe7\xe3o conclu\xedda!"}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(ee.outputPath,"_blank"),children:[r.jsx(E.Z,{className:"w-4 h-4 mr-2"}),"Baixar V\xeddeo"]})]}),es&&(0,r.jsxs)("div",{className:"p-3 bg-red-900/20 border border-red-700 rounded",children:[r.jsx("p",{className:"text-sm text-red-400 mb-2",children:"❌ Erro na renderiza\xe7\xe3o"}),r.jsx("p",{className:"text-xs text-red-300",children:es}),r.jsx(u.z,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:et,children:"Tentar Novamente"})]}),!P&&!ee&&!es&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(R.Z,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Clique em "Renderizar" para gerar o v\xeddeo'}),(0,r.jsxs)(u.z,{onClick:ea,className:"w-full",children:[r.jsx(R.Z,{className:"w-4 h-4 mr-2"}),"Iniciar Renderiza\xe7\xe3o"]})]})]})]})})]})})]})]})})}},853473:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]])},48998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},486755:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]])},355993:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]])},187444:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(862881).Z)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]])},690434:(e,s,t)=>{"use strict";t.d(s,{default:()=>r.a});var a=t(979404),r=t.n(a)},458948:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(768570).createProxy)(String.raw`C:\xampp\htdocs\_MVP_Video_TecnicoCursos_v7\estudio_ia_videos\app\editor\timeline\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,605,9648,4843,7131,489,6999,9404,7394,2608,3428,6430],()=>t(936492));module.exports=a})();