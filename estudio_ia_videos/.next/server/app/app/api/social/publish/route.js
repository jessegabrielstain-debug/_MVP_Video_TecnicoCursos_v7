"use strict";(()=>{var e={};e.id=867,e.ids=[867],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27705:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>v,patchFetch:()=>w,requestAsyncStorage:()=>b,routeModule:()=>h,serverHooks:()=>T,staticGenerationAsyncStorage:()=>g});var i={};a.r(i),a.d(i,{POST:()=>m});var o=a(49303),r=a(88716),s=a(60670),n=a(87070);class u{async publishToYouTube(e){try{let t=await this.getYouTubeAccessToken(),a=await this.uploadToYouTube(e.videoUrl,t);return await this.setYouTubeMetadata(a,{title:e.title,description:e.description,tags:e.tags,categoryId:e.categoryId||"22",privacyStatus:e.visibility||"public"},t),e.thumbnail&&await this.setYouTubeThumbnail(a,e.thumbnail,t),{success:!0,platformVideoId:a,platformUrl:`https://youtube.com/watch?v=${a}`,message:"V\xeddeo publicado com sucesso no YouTube!"}}catch(e){return console.error("Erro ao publicar no YouTube:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async publishToInstagram(e){try{let t=await this.getInstagramAccessToken(),a=await fetch("https://graph.instagram.com/v16.0/me/media",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({media_type:"VIDEO",video_url:e.videoUrl,caption:`${e.title}

${e.description}`,share_to_feed:!0})}),i=await a.json();if(!a.ok)throw Error(i.error?.message||"Erro ao publicar no Instagram");let o=await fetch("https://graph.instagram.com/v16.0/me/media_publish",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({creation_id:i.id})}),r=await o.json();return{success:!0,platformVideoId:r.id,platformUrl:`https://instagram.com/p/${r.id}`,message:"V\xeddeo publicado com sucesso no Instagram!"}}catch(e){return console.error("Erro ao publicar no Instagram:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async publishToTikTok(e){try{let t=await this.getTikTokAccessToken(),a=await fetch("https://open-api.tiktok.com/share/video/upload/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({video:{video_url:e.videoUrl,title:e.title,description:e.description,privacy_level:"public"===e.visibility?"PUBLIC_TO_EVERYONE":"SELF_ONLY",disable_comment:!1,disable_duet:!1,disable_stitch:!1}})}),i=await a.json();if(i.error)throw Error(i.error.message);return{success:!0,platformVideoId:i.data.share_id,platformUrl:`https://tiktok.com/@user/video/${i.data.share_id}`,message:"V\xeddeo publicado com sucesso no TikTok!"}}catch(e){return console.error("Erro ao publicar no TikTok:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async publishToMultiplePlatforms(e,t){let a={},i=e.map(async e=>{let i;let o={...t,platform:e};switch(e){case"youtube":i=await this.publishToYouTube(o);break;case"instagram":i=await this.publishToInstagram(o);break;case"tiktok":i=await this.publishToTikTok(o);break;default:i={success:!1,error:`Plataforma ${e} ainda n\xe3o implementada`}}a[e]=i});return await Promise.all(i),a}async schedulePublish(e,t,a){let i=`schedule-${Date.now()}`;return console.log("Publica\xe7\xe3o agendada:",{scheduleId:i,platform:e,publishAt:a}),{scheduleId:i}}getPlatforms(){return this.platforms}validateVideo(e,t,a,i){let o=this.platforms.find(t=>t.id===e);if(!o)return{valid:!1,errors:["Plataforma n\xe3o encontrada"]};let r=[];return o.maxDuration&&t>o.maxDuration&&r.push(`V\xeddeo muito longo. M\xe1ximo: ${o.maxDuration}s, atual: ${t}s`),o.maxFileSize&&a>o.maxFileSize&&r.push(`Arquivo muito grande. M\xe1ximo: ${o.maxFileSize}MB, atual: ${a}MB`),o.aspectRatios.some(e=>e.width===i.width&&e.height===i.height)||r.push(`Aspect ratio n\xe3o suportado. Aceitos: ${o.aspectRatios.map(e=>e.name).join(", ")}`),{valid:0===r.length,errors:r}}async getYouTubeAccessToken(){return process.env.YOUTUBE_ACCESS_TOKEN||""}async uploadToYouTube(e,t){return"mock-video-id"}async setYouTubeMetadata(e,t,a){}async setYouTubeThumbnail(e,t,a){}async getInstagramAccessToken(){return process.env.INSTAGRAM_ACCESS_TOKEN||""}async getTikTokAccessToken(){return process.env.TIKTOK_ACCESS_TOKEN||""}constructor(){this.platforms=[{id:"youtube",name:"YouTube",icon:"▶️",requiresAuth:!0,maxDuration:43200,maxFileSize:262144,supportedFormats:["mp4","mov","avi","wmv"],aspectRatios:[{width:16,height:9,name:"Landscape (padr\xe3o)"},{width:9,height:16,name:"Shorts (vertical)"},{width:1,height:1,name:"Square"}]},{id:"instagram",name:"Instagram",icon:"\uD83D\uDCF7",requiresAuth:!0,maxDuration:60,maxFileSize:100,supportedFormats:["mp4","mov"],aspectRatios:[{width:1,height:1,name:"Square (Feed)"},{width:9,height:16,name:"Reels (vertical)"},{width:4,height:5,name:"Portrait"}]},{id:"tiktok",name:"TikTok",icon:"\uD83C\uDFB5",requiresAuth:!0,maxDuration:600,maxFileSize:287,supportedFormats:["mp4","mov"],aspectRatios:[{width:9,height:16,name:"Vertical (padr\xe3o)"}]},{id:"facebook",name:"Facebook",icon:"\uD83D\uDC65",requiresAuth:!0,maxDuration:14400,maxFileSize:10240,supportedFormats:["mp4","mov","avi"],aspectRatios:[{width:16,height:9,name:"Landscape"},{width:1,height:1,name:"Square"},{width:9,height:16,name:"Stories (vertical)"}]},{id:"linkedin",name:"LinkedIn",icon:"\uD83D\uDCBC",requiresAuth:!0,maxDuration:600,maxFileSize:5120,supportedFormats:["mp4","mov"],aspectRatios:[{width:16,height:9,name:"Landscape (padr\xe3o)"},{width:1,height:1,name:"Square"}]},{id:"twitter",name:"X (Twitter)",icon:"\uD83D\uDC26",requiresAuth:!0,maxDuration:140,maxFileSize:512,supportedFormats:["mp4","mov"],aspectRatios:[{width:16,height:9,name:"Landscape"},{width:1,height:1,name:"Square"}]}]}}let c=null;var p=a(91585),l=a(26033);let d=p.Ry({platforms:p.IX(p.Km(["youtube","instagram","tiktok","facebook","linkedin","twitter"])),videoId:p.Z_(),videoUrl:p.Z_().url(),title:p.Z_().min(1).max(100),description:p.Z_().max(5e3).optional(),tags:p.IX(p.Z_()).optional(),visibility:p.Km(["public","private","unlisted"]).optional(),publishAt:p.Z_().datetime().optional()});async function m(e){try{let t=await e.json(),a=d.parse(t),i=(c||(c=new u),c),o=await i.publishToMultiplePlatforms(a.platforms,{platform:a.platforms[0],videoUrl:a.videoUrl,title:a.title,description:a.description||"",tags:a.tags,visibility:a.visibility||"public"});return n.NextResponse.json({success:!0,results:o})}catch(e){if(console.error("Erro ao publicar:",e),e instanceof l.jm)return n.NextResponse.json({success:!1,error:"Dados inv\xe1lidos",details:e.errors},{status:400});return n.NextResponse.json({success:!1,error:"Erro ao publicar v\xeddeo"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/app/api/social/publish/route",pathname:"/app/api/social/publish",filename:"route",bundlePath:"app/app/api/social/publish/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\app\\api\\social\\publish\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:b,staticGenerationAsyncStorage:g,serverHooks:T}=h,v="/app/api/social/publish/route";function w(){return(0,s.patchFetch)({serverHooks:T,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[1216],()=>a(27705));module.exports=i})();