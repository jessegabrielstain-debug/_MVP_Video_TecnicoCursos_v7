"use strict";(()=>{var e={};e.id=163,e.ids=[163],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},721290:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>_,staticGenerationAsyncStorage:()=>x});var r={};a.r(r),a.d(r,{GET:()=>c,POST:()=>l});var s=a(349303),n=a(88716),i=a(60670),o=a(387070),p=a(691585);let u=p.Ry({eventType:p.Z_().min(1).max(100),eventData:p.IM(p.Yj()).optional(),sessionId:p.Z_().optional()}),d=new Map;async function l(e){let t=await e.json().catch(()=>null),a=u.safeParse(t);if(!a.success)return o.NextResponse.json({error:"Invalid payload",details:a.error.flatten().fieldErrors},{status:400});let{eventType:r,eventData:s,sessionId:n}=a.data,i=e.headers.get("x-user-id")||null,p=`event-${Date.now()}-${Math.random().toString(36).substring(7)}`,l={id:p,user_id:i,event_type:r,event_data:s||{},session_id:n||null,ip_address:e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown",user_agent:e.headers.get("user-agent")||"unknown",created_at:new Date().toISOString()};return d.set(p,l),o.NextResponse.json({event:l},{status:201})}async function c(e){let t=e.nextUrl.searchParams.get("userId"),a=parseInt(e.nextUrl.searchParams.get("limit")||"50"),r=Array.from(d.values()).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return t&&(r=r.filter(e=>e.user_id===t)),r=r.slice(0,a),o.NextResponse.json({events:r,total:r.length})}let g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/app/api/analytics/route",pathname:"/app/api/analytics",filename:"route",bundlePath:"app/app/api/analytics/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\app\\api\\analytics\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:_}=g,h="/app/api/analytics/route";function v(){return(0,i.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:x})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972,1585],()=>a(721290));module.exports=r})();