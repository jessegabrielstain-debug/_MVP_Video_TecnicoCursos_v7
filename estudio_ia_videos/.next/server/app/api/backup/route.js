"use strict";(()=>{var e={};e.id=5005,e.ids=[5005],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78086:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>h,routeModule:()=>k,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{DELETE:()=>d,GET:()=>i,POST:()=>l});var a=r(49303),o=r(88716),n=r(60670),u=r(87070);class c{async createBackup(e){let{type:t,target:r,compression:s=!0}=e;console.log(`[Backup] Creating ${t} backup of ${r} (compression: ${s})`);let a={id:crypto.randomUUID(),timestamp:new Date,size:10485760,location:`/backups/${Date.now()}.tar.gz`,status:"completed",type:t};return this.backups.push(a),a}async createFullBackup(){return this.createBackup({type:"full",target:"all",compression:!0})}async restore(e){let{backupId:t,target:r,overwrite:s=!1}=e;return console.log(`[Restore] Restoring backup ${t} to ${r} (overwrite: ${s})`),!0}async restoreBackup(e){return this.restore(e)}listBackups(){return this.backups}getBackupInfo(e){return this.backups.find(t=>t.id===e)}async deleteBackup(e){let t=this.backups.findIndex(t=>t.id===e);return -1!==t&&(this.backups.splice(t,1),!0)}async cleanupOldBackups(){let e=this.backups.length;return this.backups.length>5&&(this.backups=this.backups.slice(-5)),e-this.backups.length}constructor(){this.backups=[]}}let p=new c;async function i(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(r){let e=p.getBackupInfo(r);if(!e)return u.NextResponse.json({error:"Backup n\xe3o encontrado"},{status:404});return u.NextResponse.json({backup:e})}let s=p.listBackups();return u.NextResponse.json({backups:s,total:s.length,summary:{completed:s.filter(e=>"completed"===e.status).length,failed:s.filter(e=>"failed"===e.status).length,pending:s.filter(e=>"pending"===e.status).length}})}catch(e){return console.error("Erro ao listar backups:",e),u.NextResponse.json({error:"Erro ao listar backups"},{status:500})}}async function l(e){try{let{action:t,backupId:r,overwrite:s,dryRun:a}=await e.json().catch(()=>({}));if("restore"===t&&r)return await p.restoreBackup({backupId:r,overwrite:s||!1,dryRun:a||!1}),u.NextResponse.json({message:a?"Dry run conclu\xeddo":"Backup restaurado com sucesso",backupId:r});let o=await p.createFullBackup();return u.NextResponse.json({message:"Backup criado com sucesso",backup:o})}catch(e){return console.error("Erro ao processar backup:",e),u.NextResponse.json({error:e instanceof Error?e.message:"Erro ao processar backup"},{status:500})}}async function d(){try{let e=await p.cleanupOldBackups();return u.NextResponse.json({message:`${e} backup(s) antigo(s) removido(s)`,deleted:e})}catch(e){return console.error("Erro ao limpar backups:",e),u.NextResponse.json({error:"Erro ao limpar backups"},{status:500})}}let k=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/backup/route",pathname:"/api/backup",filename:"route",bundlePath:"app/api/backup/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\backup\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:m}=k,b="/api/backup/route";function f(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(78086));module.exports=s})();