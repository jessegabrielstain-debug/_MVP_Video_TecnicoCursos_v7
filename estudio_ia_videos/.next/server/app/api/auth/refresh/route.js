"use strict";(()=>{var e={};e.id=9575,e.ids=[9575],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},86624:e=>{e.exports=require("querystring")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},40075:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>x,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>c});var o=t(49303),i=t(88716),a=t(60670),n=t(87070),u=t(86912),p=t(70401);async function c(e){try{let r=e.cookies.get("refresh-token")?.value;if(!r)return n.NextResponse.json({error:"Refresh token n\xe3o encontrado"},{status:401});let t=await u.O.refreshTokens(r),s=n.NextResponse.json({success:!0,user:{id:t.user.id,email:t.user.email,name:t.user.name,avatar:t.user.avatar,role:t.user.role,permissions:t.user.permissions,preferences:t.user.preferences},expiresAt:t.expiresAt});return p.C.setAuthCookies(s,t.accessToken,t.refreshToken),s}catch(t){console.error("Refresh token error:",t);let e=t instanceof Error?t.message:"Token de refresh inv\xe1lido",r=n.NextResponse.json({error:e},{status:401});return p.C.clearAuthCookies(r),r}}let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/refresh/route",pathname:"/api/auth/refresh",filename:"route",bundlePath:"app/api/auth/refresh/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\auth\\refresh\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:h,serverHooks:d}=l,m="/api/auth/refresh/route";function f(){return(0,a.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:h})}},70401:(e,r,t)=>{t.d(r,{C:()=>s}),t(87070),t(75571),t(95306);class s{static setAuthCookies(e,r,t){e.cookies.set("auth-token",r,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:3600}),e.cookies.set("refresh-token",t,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:604800})}static clearAuthCookies(e){e.cookies.delete("auth-token"),e.cookies.delete("refresh-token")}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,5972,1657,5571,8447],()=>t(40075));module.exports=s})();