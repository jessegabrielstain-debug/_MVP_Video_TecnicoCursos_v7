"use strict";(()=>{var e={};e.id=3382,e.ids=[3382,3936],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},83731:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>I,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{GET:()=>d,dynamic:()=>p});var a=s(49303),i=s(88716),o=s(60670),n=s(87070),u=s(13936),c=s(23778);let p="force-dynamic";async function d(e){try{let t=(0,u.getSupabaseForRequest)(e),{data:{user:s}}=await t.auth.getUser();if(!s?.id)return n.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{searchParams:r}=new URL(e.url),a=r.get("organizationId"),i=r.get("startDate"),o=r.get("endDate"),p=await c.S.getReviewStats({userId:s.id,organizationId:a||void 0,startDate:i?new Date(i):void 0,endDate:o?new Date(o):void 0});return n.NextResponse.json({stats:p})}catch(e){return console.error("âŒ Erro ao buscar estat\xedsticas de revis\xe3o:",e),n.NextResponse.json({error:e instanceof Error?e.message:"Erro ao buscar estat\xedsticas"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/review/stats/route",pathname:"/api/review/stats",filename:"route",bundlePath:"app/api/review/stats/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\review\\stats\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:v}=l,g="/api/review/stats/route";function I(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}},23778:(e,t,s)=>{s.d(t,{S:()=>a});class r{async createReviewRequest(e,t,s){let r=crypto.randomUUID(),a={id:r,projectId:e,requesterId:t,reviewers:s,status:"pending",createdAt:new Date,comments:[]};return this.requests.set(r,a),r}async updateStatus(e,t){let s=this.requests.get(e);return!!s&&(s.status=t,("approved"===t||"rejected"===t)&&(s.completedAt=new Date),!0)}async getRequest(e){return this.requests.get(e)||null}async listForReviewer(e){return Array.from(this.requests.values()).filter(t=>t.reviewers.includes(e))}async publishProject(e){return console.log(`Publishing project ${e.projectId} by user ${e.userId}`),{success:!0}}async reopenForEditing(e){let t=Array.from(this.requests.values()).find(t=>t.projectId===e.projectId);return t?(t.status="pending",t.completedAt=void 0,{success:!0}):{success:!1,error:"Review not found"}}async submitReview(e){let t=this.requests.get(e.reviewId);return t?(t.status=e.decision,t.completedAt=new Date,e.comments&&(t.comments=t.comments||[],t.comments.push(e.comments)),{success:!0}):{success:!1,error:"Review not found"}}async getReviewStats(e){let t=Array.from(this.requests.values()).filter(t=>t.reviewers.includes(e.userId));return{pending:t.filter(e=>"pending"===e.status).length,approved:t.filter(e=>"approved"===e.status).length,rejected:t.filter(e=>"rejected"===e.status).length}}async getReviewStatus(e){return this.requests.get(e)||null}constructor(){this.requests=new Map}}let a=new r},13936:(e,t,s)=>{s.d(t,{e:()=>o,getSupabaseForRequest:()=>u,p:()=>n});var r=s(67721),a=s(61657),i=s(71615);let o=()=>{let e=(0,i.cookies)();return(0,r.createServerClient)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{cookies:{get:t=>e.get(t)?.value,set(t,s,r){try{e.set({name:t,value:s,...r})}catch(e){}},remove(t,s){try{e.set({name:t,value:"",...s})}catch(e){}}}})},n=(0,a.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});function u(e){let t=e.headers.get("authorization")||e.headers.get("Authorization");return t?(0,a.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{global:{headers:{Authorization:t}},auth:{persistSession:!1,autoRefreshToken:!1}}):o()}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,5972,1657,9702],()=>s(83731));module.exports=r})();