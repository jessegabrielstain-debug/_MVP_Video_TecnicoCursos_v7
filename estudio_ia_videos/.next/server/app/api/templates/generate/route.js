"use strict";(()=>{var e={};e.id=2421,e.ids=[2421],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},66717:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var n={};a.r(n),a.d(n,{GET:()=>p,POST:()=>c});var i=a(49303),o=a(88716),r=a(60670),s=a(87070);class u{static getInstance(){return u.instance||(u.instance=new u),u.instance}async generateTemplate(e){let t=Date.now(),a=await this.analyzeBrandKit(e.brandKitId),n=this.generateContentStructure(e),i=await this.generateTimeline(e,a,n),o=this.generateMetadata(e,i),r=this.calculateConfidence(e,a,n),s=Date.now()-t;return{id:`ai_template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:this.generateTemplateName(e),description:this.generateDescription(e),thumbnail:await this.generateThumbnail(i),brandKit:e.brandKitId,timeline:i,metadata:{...o,estimatedProductionTime:Math.ceil(s/6e4)},createdAt:new Date,confidence:r}}async analyzeBrandKit(e){return{colorPalette:["primary","secondary","accent"],typography:{headingFont:"Inter",bodyFont:"Inter",accentFont:"Poppins"},style:"modern",industry:"technology"}}generateContentStructure(e){let t=this.contentPatterns[e.contentType]||this.contentPatterns.presentation;return{scenes:t.scenes.map(a=>({...a,adaptedDuration:Math.floor(a.duration*(e.duration/this.getTotalDuration(t.scenes)))})),transitions:t.transitions,animations:t.animations,platformOptimizations:this.getPlatformOptimizations(e.platform)}}async generateTimeline(e,t,a){let n=[],i=[],o=[],r=0;for(let n=0;n<a.scenes.length;n++){let s=a.scenes[n],u=await this.generateScene(n,r,s.adaptedDuration,e,t);i.push(u),n>0&&o.push({fromScene:i[n-1].id,toScene:u.id,type:a.transitions[n%a.transitions.length],duration:.5}),r+=s.adaptedDuration}return n.push(await this.generateVideoTrack(i,e,t)),n.push(await this.generateTextTrack(i,e,t)),n.push(await this.generateAudioTrack(i,e)),{duration:e.duration,tracks:n,scenes:i,transitions:o,audio:await this.generateAudioConfig(e)}}async generateScene(e,t,a,n,i){return{id:`scene_${e}`,name:`Scene ${e+1}`,startTime:t,duration:a,purpose:this.getScenePurpose(e,n.contentType),keyMessage:n.keyMessages[e]||`Key message ${e+1}`,visualElements:await this.generateVisualElements(t,a,n,i)}}async generateVisualElements(e,t,a,n){let i=[];return i.push({type:"text",content:"Your Title Here",position:{x:.1,y:.2},size:{width:.8,height:.1},styling:{fontFamily:n.typography.headingFont,fontSize:48,fontWeight:700,color:n.colorPalette[0],alignment:"center"}}),i.push({type:"text",content:"Your subtitle with key message",position:{x:.1,y:.35},size:{width:.8,height:.1},styling:{fontFamily:n.typography.bodyFont,fontSize:24,fontWeight:400,color:"#666666",alignment:"center"}}),i.push({type:"shape",content:"rectangle",position:{x:0,y:0},size:{width:1,height:1},styling:{backgroundColor:n.colorPalette[1]+"10",borderRadius:0}}),i}async generateVideoTrack(e,t,a){let n=[];for(let i of e)n.push({id:`video_clip_${i.id}`,type:"video",startTime:i.startTime,duration:i.duration,content:{backgroundColor:a.colorPalette[2]+"20",platform:t.platform},animations:[],styling:{}});return{id:"video_track",type:"video",name:"Video Track",clips:n}}async generateTextTrack(e,t,a){let n=[];for(let t of e)t.visualElements.filter(e=>"text"===e.type).forEach((e,a)=>{n.push({id:`text_clip_${t.id}_${a}`,type:"text",startTime:t.startTime,duration:t.duration,content:{text:e.content,styling:e.styling},animations:[{type:"typewriter",duration:2,delay:.5,easing:"ease-in-out"}],styling:e.styling})});return{id:"text_track",type:"text",name:"Text Track",clips:n}}async generateAudioTrack(e,t){let a=[];for(let n of e)a.push({id:`voice_clip_${n.id}`,type:"text",startTime:n.startTime,duration:n.duration,content:{text:n.keyMessage,language:t.targetAudience.includes("Brazil")?"pt-BR":"en-US"},animations:[],styling:{}});return{id:"audio_track",type:"audio",name:"Audio Track",clips:a}}async generateAudioConfig(e){return{backgroundMusic:{url:"https://example.com/corporate-music.mp3",volume:.3,fadeIn:2,fadeOut:3},voiceover:{language:e.targetAudience.includes("Brazil")?"pt-BR":"en-US",voice:"professional-female",speed:1,volume:1},soundEffects:[{url:"https://example.com/transition-sound.mp3",time:10,volume:.5}]}}generateMetadata(e,t){return{difficulty:this.calculateDifficulty(e,t),tags:this.generateTags(e),recommendedUsage:this.getRecommendedUsage(e),aiInsights:this.generateAIInsights(e,t)}}getTotalDuration(e){return e.reduce((e,t)=>e+t.duration,0)}getScenePurpose(e,t){return({presentation:["Introduce topic","Present problem","Show solution","Highlight benefits","Call to action"],tutorial:["Hook attention","Set expectations","Teach concepts","Provide tips","Summarize learning"],marketing:["Grab attention","Create desire","Present offer","Build trust","Create urgency"]})[t]?.[e]||"Content presentation"}getPlatformOptimizations(e){let t={youtube:{aspectRatio:"16:9",maxDuration:600,textSize:"large"},instagram:{aspectRatio:"9:16",maxDuration:60,textSize:"medium"},tiktok:{aspectRatio:"9:16",maxDuration:180,textSize:"small"},linkedin:{aspectRatio:"16:9",maxDuration:300,textSize:"medium"},web:{aspectRatio:"16:9",maxDuration:900,textSize:"large"}};return t[e]||t.web}generateTemplateName(e){let t={presentation:"Corporate Presentation",tutorial:"Tutorial Guide",marketing:"Marketing Campaign",social:"Social Media",corporate:"Business Presentation"}[e.contentType]||"Custom Template",a=e.style.charAt(0).toUpperCase()+e.style.slice(1);return`${t} - ${a} Style`}generateDescription(e){return`AI-generated ${e.contentType} template optimized for ${e.platform} with ${e.style} style. Perfect for ${e.targetAudience} audience.`}async generateThumbnail(e){return"https://via.placeholder.com/400x225/6366f1/ffffff?text=AI+Generated+Template"}calculateConfidence(e,t,a){let n=85;return e.keyMessages.length>0&&(n+=5),e.targetAudience&&(n+=5),t.industry&&(n+=5),e.duration>300&&(n-=5),"marketing"===e.contentType&&(n-=3),Math.min(100,Math.max(60,n))}calculateDifficulty(e,t){let a=t.scenes.length,n=t.tracks.reduce((e,t)=>e+t.clips.reduce((e,t)=>e+t.animations.length,0),0);return a<=3&&n<=5?"easy":a<=6&&n<=15?"medium":"hard"}generateTags(e){let t=[e.contentType,e.style,e.platform];return e.targetAudience.includes("business")&&t.push("corporate"),e.targetAudience.includes("education")&&t.push("educational"),e.duration<60&&t.push("short-form"),e.duration>300&&t.push("long-form"),[...new Set(t)]}getRecommendedUsage(e){let t=[`Perfect for ${e.contentType} content`];return"instagram"===e.platform?t.push("Great for social media marketing"):"youtube"===e.platform&&t.push("Ideal for educational content"),t.push(`${e.style} design aesthetic`),t}generateAIInsights(e,t){let a=[];return t.scenes.length>5&&a.push("Consider breaking into shorter videos for better engagement"),e.duration<30&&a.push("Short duration - focus on high-impact messaging"),0===e.keyMessages.length&&a.push("Add key messages to improve content structure"),a.push(`Optimized for ${e.platform} with ${t.transitions.length} smooth transitions`),a.push("AI confidence: High match between content type and visual style"),a}constructor(){this.contentPatterns={presentation:{scenes:[{name:"Introduction",duration:15,purpose:"Hook audience"},{name:"Problem Statement",duration:20,purpose:"Define challenge"},{name:"Solution Overview",duration:25,purpose:"Present solution"},{name:"Benefits",duration:20,purpose:"Show value"},{name:"Call to Action",duration:10,purpose:"Drive action"}],transitions:["fade","slide","zoom"],animations:["typewriter","fade","slide"]},tutorial:{scenes:[{name:"Hook",duration:10,purpose:"Grab attention"},{name:"Overview",duration:15,purpose:"What they will learn"},{name:"Step-by-Step",duration:45,purpose:"Main content"},{name:"Tips & Tricks",duration:15,purpose:"Extra value"},{name:"Summary",duration:10,purpose:"Key takeaways"}],transitions:["wipe","slide","fade"],animations:["bounce","slide","scale"]},marketing:{scenes:[{name:"Attention Grabber",duration:8,purpose:"Hook instantly"},{name:"Problem",duration:12,purpose:"Pain point"},{name:"Solution",duration:15,purpose:"Your offer"},{name:"Social Proof",duration:10,purpose:"Build trust"},{name:"Urgency",duration:8,purpose:"Call to action"}],transitions:["zoom","bounce","slide"],animations:["bounce","scale","typewriter"]}}}}let l=u.getInstance();async function c(e){try{let t=await e.json();if(!t.brandKitId)return s.NextResponse.json({error:"Brand Kit ID is required"},{status:400});if(!t.contentType)return s.NextResponse.json({error:"Content type is required"},{status:400});if(!t.targetAudience||0===t.targetAudience.trim().length)return s.NextResponse.json({error:"Target audience is required"},{status:400});if(!t.keyMessages||0===t.keyMessages.filter(e=>e.trim().length>0).length)return s.NextResponse.json({error:"At least one key message is required"},{status:400});if(t.duration<15||t.duration>600)return s.NextResponse.json({error:"Duration must be between 15 and 600 seconds"},{status:400});if(!["presentation","tutorial","marketing","social","corporate"].includes(t.contentType))return s.NextResponse.json({error:"Invalid content type"},{status:400});if(!["youtube","instagram","tiktok","linkedin","web"].includes(t.platform))return s.NextResponse.json({error:"Invalid platform"},{status:400});if(!["professional","casual","energetic","minimal"].includes(t.style))return s.NextResponse.json({error:"Invalid style"},{status:400});let a=await l.generateTemplate(t);return s.NextResponse.json({success:!0,data:a})}catch(e){if(console.error("AI template generation error:",e),e.message?.includes("Brand Kit"))return s.NextResponse.json({error:"Invalid or missing Brand Kit"},{status:400});if(e.message?.includes("API key"))return s.NextResponse.json({error:"AI service temporarily unavailable"},{status:503});return s.NextResponse.json({error:"Failed to generate template",details:e.message},{status:500})}}async function p(e){try{let{searchParams:t}=new URL(e.url),a=t.get("contentType"),n=t.get("platform"),i={contentTypes:[{value:"presentation",label:"Apresenta\xe7\xe3o Corporativa",description:"Para reuni\xf5es e relat\xf3rios formais"},{value:"tutorial",label:"Tutorial Educacional",description:"Para ensinar conceitos passo-a-passo"},{value:"marketing",label:"Campanha de Marketing",description:"Para promover produtos ou servi\xe7os"},{value:"social",label:"Conte\xfado para Redes Sociais",description:"Otimizado para Instagram, TikTok, etc."},{value:"corporate",label:"Comunica\xe7\xe3o Empresarial",description:"Para an\xfancios corporativos internos"}],platforms:[{value:"youtube",label:"YouTube",aspectRatio:"16:9",maxDuration:600},{value:"instagram",label:"Instagram",aspectRatio:"9:16",maxDuration:60},{value:"tiktok",label:"TikTok",aspectRatio:"9:16",maxDuration:180},{value:"linkedin",label:"LinkedIn",aspectRatio:"16:9",maxDuration:300},{value:"web",label:"Web",aspectRatio:"16:9",maxDuration:900}],styles:[{value:"professional",label:"Profissional",description:"Limpo, s\xe9rio, confi\xe1vel"},{value:"casual",label:"Casual",description:"Amig\xe1vel, acess\xedvel, pr\xf3ximo"},{value:"energetic",label:"Energ\xe9tico",description:"Din\xe2mico, empolgante, motivacional"},{value:"minimal",label:"Minimalista",description:"Simples, elegante, focado"}],durationRanges:{min:15,max:600,recommended:{short:30,medium:120,long:300}}};if(a){let e={...i};return e.recommendations=function(e){let t={presentation:{platforms:["youtube","web"],styles:["professional"],duration:"medium",tips:["Use transi\xe7\xf5es suaves entre se\xe7\xf5es","Inclua dados e estat\xedsticas visuais","Adicione chamadas para a\xe7\xe3o claras"]},tutorial:{platforms:["youtube","linkedin"],styles:["casual","professional"],duration:"long",tips:["Quebre o conte\xfado em passos claros","Use elementos visuais para demonstrar a\xe7\xf5es","Inclua resumo no final"]},marketing:{platforms:["instagram","tiktok"],styles:["energetic","minimal"],duration:"short",tips:["Comece com hook forte nos primeiros 3 segundos","Use cores vibrantes e chamativas","Termine com chamada clara para a\xe7\xe3o"]},social:{platforms:["instagram","tiktok"],styles:["energetic","casual"],duration:"short",tips:["Otimize para visualiza\xe7\xe3o vertical","Use m\xfasica popular e tend\xeancias","Mantenha ritmo din\xe2mico"]},corporate:{platforms:["linkedin","youtube"],styles:["professional","minimal"],duration:"medium",tips:["Use cores da marca corporativa","Mantenha tom s\xe9rio e confi\xe1vel","Inclua dados e m\xe9tricas quando poss\xedvel"]}};return t[e]||t.presentation}(a),s.NextResponse.json({success:!0,data:e})}if(n){let e=i.platforms.find(e=>e.value===n);if(e)return s.NextResponse.json({success:!0,data:{platform:e,recommendations:function(e){let t={youtube:{aspectRatio:"16:9",optimalDuration:180,tips:["YouTube favorece v\xeddeos entre 8-12 minutos","Use thumbnails atraentes com texto claro","Otimize t\xedtulos e descri\xe7\xf5es para SEO"],contentTypes:["tutorial","presentation","corporate"]},instagram:{aspectRatio:"9:16",optimalDuration:30,tips:["Stories t\xeam limite de 15 segundos vis\xedveis","Reels podem ter at\xe9 60 segundos","Use legendas pois muitos assistem sem som"],contentTypes:["marketing","social"]},tiktok:{aspectRatio:"9:16",optimalDuration:60,tips:["Primeiros 3 segundos s\xe3o cr\xedticos","Use m\xfasica popular do TikTok","Mantenha ritmo r\xe1pido e engajante"],contentTypes:["social","marketing"]},linkedin:{aspectRatio:"16:9",optimalDuration:180,tips:["Conte\xfado profissional e educativo funciona melhor","Use para networking e thought leadership","V\xeddeos nativos t\xeam maior alcance"],contentTypes:["corporate","presentation","tutorial"]},web:{aspectRatio:"16:9",optimalDuration:"variable",tips:["Adapte conforme o contexto de uso","Considere diferentes dispositivos","Pense em SEO e compartilhamento"],contentTypes:["presentation","tutorial","marketing"]}};return t[e]||t.youtube}(n)}})}return s.NextResponse.json({success:!0,data:i})}catch(e){return console.error("Template options fetch error:",e),s.NextResponse.json({error:"Failed to fetch generation options"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/templates/generate/route",pathname:"/api/templates/generate",filename:"route",bundlePath:"app/api/templates/generate/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\templates\\generate\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h}=d,y="/api/templates/generate/route";function f(){return(0,r.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[1216],()=>a(66717));module.exports=n})();