"use strict";(()=>{var e={};e.id=4458,e.ids=[4458],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},312552:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>R,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{DELETE:()=>d,GET:()=>p,POST:()=>c,PUT:()=>l});var i=r(349303),n=r(88716),s=r(60670),o=r(387070);let u=[];async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("category"),a=t.get("difficulty"),i=t.get("tags")?.split(","),n=t.get("search"),s=t.get("isFavorite"),p=t.get("isCustom"),c=parseInt(t.get("limit")||"50"),l=parseInt(t.get("offset")||"0"),d=[...u];if(r&&(d=d.filter(e=>e.category===r)),a&&(d=d.filter(e=>e.metadata.difficulty===a)),i&&i.length>0&&(d=d.filter(e=>i.some(t=>e.tags.includes(t)))),n){let e=n.toLowerCase();d=d.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.tags.some(t=>t.toLowerCase().includes(e)))}null!==s&&(d=d.filter(e=>e.isFavorite===("true"===s))),null!==p&&(d=d.filter(e=>e.isCustom===("true"===p)));let g=d.slice(l,l+c);return o.NextResponse.json({templates:g,total:d.length,offset:l,limit:c})}catch(e){return console.error("Error fetching templates:",e),o.NextResponse.json({error:"Failed to fetch templates"},{status:500})}}async function c(e){try{var t,r;let a=await e.json();if(!a.name||!a.category||!a.content)return o.NextResponse.json({error:"Missing required fields: name, category, content"},{status:400});let i={id:`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:a.name,description:a.description||"",category:a.category,thumbnail:a.thumbnail||(t=a.category,`https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent({"NR-12":"safety training machines equipment industrial workplace","NR-35":"height work safety training construction harness","NR-33":"confined spaces safety training industrial tank","NR-10":"electrical safety training power lines equipment","NR-06":"personal protective equipment safety training","NR-18":"construction safety training building site","NR-20":"flammable combustible safety training industrial","NR-23":"fire protection safety training emergency"}[t]||"safety training workplace industrial")}&image_size=square`),preview:a.preview||(r=a.category,`https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent({"NR-12":"safety training preview machines industrial","NR-35":"height safety training preview construction","NR-33":"confined spaces safety preview industrial","NR-10":"electrical safety training preview power","NR-06":"ppe safety training preview equipment","NR-18":"construction safety preview building","NR-20":"flammable safety training preview industrial","NR-23":"fire protection preview emergency training"}[r]||"safety training preview workplace")}&image_size=landscape_16_9`),tags:a.tags||[],isFavorite:!1,isCustom:!0,createdAt:new Date,updatedAt:new Date,author:a.author||"User",version:a.version||"1.0",downloads:0,rating:0,content:a.content,metadata:{difficulty:a.metadata?.difficulty||"beginner",estimatedDuration:a.metadata?.estimatedDuration||30,targetAudience:a.metadata?.targetAudience||[],learningObjectives:a.metadata?.learningObjectives||[],prerequisites:a.metadata?.prerequisites||[],language:a.metadata?.language||"pt-BR",accessibility:a.metadata?.accessibility||{screenReader:!1,highContrast:!1,keyboardNavigation:!1,closedCaptions:!1,audioDescription:!1,signLanguage:!1},compliance:a.metadata?.compliance||{nrCategories:[a.category],lastAudit:new Date,auditScore:0,certifications:[]}}};return u.push(i),o.NextResponse.json(i,{status:201})}catch(e){return console.error("Error creating template:",e),o.NextResponse.json({error:"Failed to create template"},{status:500})}}async function l(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return o.NextResponse.json({error:"Template ID is required"},{status:400});let a=await e.json(),i=u.findIndex(e=>e.id===r);if(-1===i)return o.NextResponse.json({error:"Template not found"},{status:404});return u[i]={...u[i],...a,updatedAt:new Date},o.NextResponse.json(u[i])}catch(e){return console.error("Error updating template:",e),o.NextResponse.json({error:"Failed to update template"},{status:500})}}async function d(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return o.NextResponse.json({error:"Template ID is required"},{status:400});let a=u.findIndex(e=>e.id===r);if(-1===a)return o.NextResponse.json({error:"Template not found"},{status:404});return u.splice(a,1),o.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting template:",e),o.NextResponse.json({error:"Failed to delete template"},{status:500})}}let g=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/templates/route",pathname:"/api/templates",filename:"route",bundlePath:"app/api/templates/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\templates\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:y}=g,R="/api/templates/route";function h(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(312552));module.exports=a})();