"use strict";(()=>{var e={};e.id=6813,e.ids=[6813],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},67708:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>f,patchFetch:()=>b,requestAsyncStorage:()=>g,routeModule:()=>v,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var r={};o.r(r),o.d(r,{POST:()=>m});var s=o(49303),a=o(88716),i=o(60670),n=o(87070),u=o(91585),d=o(26033),p=o(14923);!function(){var e=Error("Cannot find module '@/lib/redis'");throw e.code="MODULE_NOT_FOUND",e}();let l=p.k.createContext("EditorAutosave"),c=u.Ry({projectId:u.Z_().min(1,"projectId \xe9 obrigat\xf3rio"),snapshot:u.IM(u.Yj()),reason:u.Km(["manual","interval","visibility","beacon"]).optional(),attempt:u.Rx().int().positive().optional()});async function m(e){let t=`autosave-${Date.now()}`;try{let o=await e.text(),r=o?JSON.parse(o):{},{projectId:s,snapshot:a,reason:i="interval",attempt:u=1}=c.parse(r),d=new Date().toISOString(),p=`editor:autosave:${s}`;return await Object(function(){var e=Error("Cannot find module '@/lib/redis'");throw e.code="MODULE_NOT_FOUND",e}())(p,{projectId:s,savedAt:d,reason:i,attempt:u,snapshot:a}),l.info("Autosave conclu\xeddo",{projectId:s,reason:i,attempt:u,requestId:t}),n.NextResponse.json({success:!0,savedAt:d})}catch(e){if(e instanceof d.jm)return l.warn("Payload inv\xe1lido recebido",{issues:e.issues,requestId:t}),n.NextResponse.json({error:"Dados inv\xe1lidos",details:e.issues},{status:400});return l.error("Erro interno ao processar autosave",{error:e instanceof Error?e.message:"Erro desconhecido",requestId:t}),n.NextResponse.json({error:"Erro interno ao salvar altera\xe7\xf5es"},{status:500})}}let v=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/editor/autosave/route",pathname:"/api/editor/autosave",filename:"route",bundlePath:"app/api/editor/autosave/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\editor\\autosave\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:x}=v,f="/api/editor/autosave/route";function b(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},14923:(e,t,o)=>{o.d(t,{k:()=>s});class r{formatMessage(e,t,o){return{level:e,message:t,timestamp:new Date().toISOString(),data:o}}log(e,t,o){let r=this.formatMessage(e,t,o);this.isDevelopment?console.log(`${{info:"\x1b[36m",warn:"\x1b[33m",error:"\x1b[31m",debug:"\x1b[35m"}[e]}[${e.toUpperCase()}]\x1b[0m ${r.timestamp} - ${t}`,o||""):console.log(JSON.stringify(r))}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}debug(e,t){this.isDevelopment&&this.log("debug",e,t)}constructor(){this.isDevelopment=!1}}let s=new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[1216],()=>o(67708));module.exports=r})();