"use strict";(()=>{var e={};e.id=8341,e.ids=[8341],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},592048:e=>{e.exports=require("fs")},555315:e=>{e.exports=require("path")},769090:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>g,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>w});var s={};r.r(s),r.d(s,{POST:()=>m});var o=r(349303),a=r(88716),n=r(60670),i=r(387070),u=r(592048),p=r(555315),d=r.n(p);let l=d().join(process.cwd(),"uploads","temp"),c=d().join(process.cwd(),"uploads","metadata");async function h(){try{await u.promises.mkdir(l,{recursive:!0}),await u.promises.mkdir(c,{recursive:!0})}catch(e){console.error("Error creating directories:",e)}}async function m(e){await h();try{let{uploadId:t,filename:r,totalSize:s,chunks:o}=await e.json();if(!t||!r||!s||!o)return i.NextResponse.json({error:"Missing required fields"},{status:400});let a=d().join(c,`${t}.json`),n=[];try{let e=await u.promises.readFile(a,"utf-8");n=JSON.parse(e).uploadedChunks||[];let r=[];for(let e of n){let s=d().join(l,`${t}_chunk_${e}`);try{await u.promises.access(s),r.push(e)}catch{console.warn(`Chunk ${e} for upload ${t} not found`)}}n=r}catch{let e={uploadId:t,filename:r,totalSize:s,totalChunks:o.length,uploadedChunks:[],createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};await u.promises.writeFile(a,JSON.stringify(e,null,2))}return i.NextResponse.json({uploadId:t,uploadedChunks:n,totalChunks:o.length,resumable:n.length>0})}catch(e){return console.error("Upload status error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let f=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/upload/status/route",pathname:"/api/upload/status",filename:"route",bundlePath:"app/api/upload/status/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\upload\\status\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:w,serverHooks:x}=f,v="/api/upload/status/route";function j(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:w})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(769090));module.exports=s})();