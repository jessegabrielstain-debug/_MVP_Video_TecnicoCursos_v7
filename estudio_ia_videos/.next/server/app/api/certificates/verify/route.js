"use strict";(()=>{var e={};e.id=1488,e.ids=[1488],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},64320:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>u});var i=r(49303),o=r(88716),a=r(60670),n=r(87070),c=r(8261);async function u(e){let{searchParams:t}=new URL(e.url),r=t.get("code");if(!r)return n.NextResponse.json({error:"Missing certificate code"},{status:400});try{let e=await c._.certificate.findUnique({where:{code:r}});if(!e){if(global.mockCertificates.has(r)){let e=global.mockCertificates.get(r);return n.NextResponse.json({valid:!0,project_id:e.projectId,student_name:e.studentName,course_name:e.courseName,issued_at:e.issuedAt})}return n.NextResponse.json({valid:!1,error:"Certificate not found"},{status:404})}return n.NextResponse.json({valid:!0,project_id:e.projectId,student_name:e.studentName,course_name:e.courseName,issued_at:e.issuedAt})}catch(e){if(console.error("Error verifying certificate:",e),"P2010"===e.code||"P2021"===e.code||e.message?.includes("does not exist")||e.message?.includes("Tenant or user not found")){if(global.mockCertificates.has(r)){let e=global.mockCertificates.get(r);return n.NextResponse.json({valid:!0,project_id:e.projectId,student_name:e.studentName,course_name:e.courseName,issued_at:e.issuedAt})}return n.NextResponse.json({valid:!1,error:"Certificate not found (mock)"},{status:404})}return n.NextResponse.json({error:"Internal server error",details:e.message},{status:500})}}global.mockCertificates||(global.mockCertificates=new Map);let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/certificates/verify/route",pathname:"/api/certificates/verify",filename:"route",bundlePath:"app/api/certificates/verify/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\certificates\\verify\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:f}=d,m="/api/certificates/verify/route";function v(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}},8261:(e,t,r)=>{r.d(t,{_:()=>i});var s=r(53524);let i=global.prisma||new s.PrismaClient({log:["error"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(64320));module.exports=s})();