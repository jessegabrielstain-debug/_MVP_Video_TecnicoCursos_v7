"use strict";(()=>{var e={};e.id=1567,e.ids=[1567],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},345464:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>D,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var a={};s.r(a),s.d(a,{GET:()=>l,POST:()=>u});var r=s(349303),n=s(88716),o=s(60670),i=s(387070);!function(){var e=Error("Cannot find module '@/lib/analytics-metrics-system'");throw e.code="MODULE_NOT_FOUND",e}();let c=Object(function(){var e=Error("Cannot find module '@/lib/analytics-metrics-system'");throw e.code="MODULE_NOT_FOUND",e}()).getInstance();async function u(e){try{let t=new URL(e.url).pathname;if("/api/analytics/track"===t){let{type:t,properties:s,metadata:a}=await e.json();if(!t)return i.NextResponse.json({success:!1,error:"Tipo de evento \xe9 obrigat\xf3rio"},{status:400});let r=await c.trackEvent(t,s,a);return i.NextResponse.json({success:!0,event:{id:r.id,type:r.type,userId:r.userId,timestamp:r.timestamp}})}if("/api/analytics/track/batch"===t){let{events:t}=await e.json();if(!t||!Array.isArray(t))return i.NextResponse.json({success:!1,error:"Lista de eventos \xe9 obrigat\xf3ria"},{status:400});let s=await c.trackEventsBatch(t);return i.NextResponse.json({success:!0,count:s.length,events:s.map(e=>({id:e.id,type:e.type,userId:e.userId}))})}if("/api/analytics/funnel"===t){let{name:t,steps:s,startDate:a,endDate:r}=await e.json();if(!t||!s||!a||!r)return i.NextResponse.json({success:!1,error:"Par\xe2metros obrigat\xf3rios: name, steps, startDate, endDate"},{status:400});let n=await c.createConversionFunnel(t,s,new Date(a),new Date(r));return i.NextResponse.json({success:!0,funnel:n})}if("/api/analytics/cohort"===t){let{cohortPeriod:t,metric:s,startDate:a,endDate:r,periods:n}=await e.json();if(!t||!s||!a||!r)return i.NextResponse.json({success:!1,error:"Par\xe2metros obrigat\xf3rios: cohortPeriod, metric, startDate, endDate"},{status:400});let o=await c.performCohortAnalysis(t,s,new Date(a),new Date(r),n);return i.NextResponse.json({success:!0,analysis:o})}if("/api/analytics/abtest"===t){let t=await e.json();if(!t.name||!t.variants)return i.NextResponse.json({success:!1,error:"Par\xe2metros obrigat\xf3rios: name, variants"},{status:400});let s=await c.createABTest(t);return i.NextResponse.json({success:!0,test:s})}return i.NextResponse.json({success:!1,error:"Endpoint n\xe3o encontrado"},{status:404})}catch(e){return console.error("[Analytics API] Erro:",e),i.NextResponse.json({success:!1,error:e.message},{status:500})}}async function l(e){try{let t=new URL(e.url),s=t.pathname,a=t.searchParams;if("/api/analytics/events"===s){let e={},t=a.get("types");t&&(e.types=t.split(","));let s=a.get("startDate");s&&(e.startDate=new Date(s));let r=a.get("endDate");r&&(e.endDate=new Date(r));let n=a.get("userId");n&&(e.userId=n);let o=a.get("limit");o&&(e.limit=parseInt(o));let u=await c.getEvents(e);return i.NextResponse.json({success:!0,count:u.length,events:u})}if("/api/analytics/metrics"===s){let e={},t=a.get("names");t&&(e.names=t.split(","));let s=a.get("categories");s&&(e.categories=s.split(","));let r=a.get("period");r&&(e.period=r);let n=a.get("startDate");n&&(e.startDate=new Date(n));let o=a.get("endDate");o&&(e.endDate=new Date(o));let u=await c.getMetrics(e);return i.NextResponse.json({success:!0,count:u.length,metrics:u})}if("/api/analytics/usage"===s){let e=a.get("period")||Object(function(){var e=Error("Cannot find module '@/lib/analytics-metrics-system'");throw e.code="MODULE_NOT_FOUND",e}()).DAY,t=new Date(a.get("startDate")||Date.now()-2592e6),s=new Date(a.get("endDate")||Date.now()),r=await c.calculateUsageStats(e,t,s);return i.NextResponse.json({success:!0,stats:r})}if("/api/analytics/performance"===s){let e=a.get("period")||Object(function(){var e=Error("Cannot find module '@/lib/analytics-metrics-system'");throw e.code="MODULE_NOT_FOUND",e}()).DAY,t=new Date(a.get("startDate")||Date.now()-2592e6),s=new Date(a.get("endDate")||Date.now()),r=await c.calculatePerformanceStats(e,t,s);return i.NextResponse.json({success:!0,stats:r})}if(s.startsWith("/api/analytics/abtest/")){let e=s.split("/").pop();if(!e)return i.NextResponse.json({success:!1,error:"Nome do teste \xe9 obrigat\xf3rio"},{status:400});let t=await c.getABTestResults(e);return i.NextResponse.json({success:!0,result:t})}return i.NextResponse.json({success:!1,error:"Endpoint n\xe3o encontrado"},{status:404})}catch(e){return console.error("[Analytics API] Erro:",e),i.NextResponse.json({success:!1,error:e.message},{status:500})}}let p=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/analytics/route",pathname:"/api/analytics",filename:"route",bundlePath:"app/api/analytics/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\analytics\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=p,D="/api/analytics/route";function y(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>s(345464));module.exports=a})();