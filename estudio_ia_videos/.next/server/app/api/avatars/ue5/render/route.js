"use strict";(()=>{var e={};e.id=2429,e.ids=[2429],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},89223:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>_,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var n={};t.r(n),t.d(n,{POST:()=>d});var r=t(49303),o=t(88716),i=t(60670),s=t(87070),l=t(37470);async function d(e){try{let a=await e.json();if(!a.metahuman_id)return s.NextResponse.json({error:"metahuman_id \xe9 obrigat\xf3rio"},{status:400});if(!a.audio_file_url)return s.NextResponse.json({error:"audio_file_url \xe9 obrigat\xf3rio"},{status:400});let t=l.Gc.getMetaHuman(a.metahuman_id);if(!t)return s.NextResponse.json({error:"MetaHuman n\xe3o encontrado",available_metahumans:l.Gc.getAvailableMetaHumans().map(e=>({id:e.id,name:e.display_name,gender:e.gender,ethnicity:e.ethnicity}))},{status:404});let n=await l.Gc.startRender(a);return s.NextResponse.json({success:!0,job_id:n,message:"Renderiza\xe7\xe3o UE5 iniciada com sucesso",estimated_time_minutes:2,metahuman:{id:t.id,name:t.display_name,quality:"Hiper-realista",technology:"UE5 + Audio2Face"}})}catch(e){return console.error("âŒ Erro ao iniciar render UE5:",e),s.NextResponse.json({error:"Erro ao iniciar renderiza\xe7\xe3o",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/avatars/ue5/render/route",pathname:"/api/avatars/ue5/render",filename:"route",bundlePath:"app/api/avatars/ue5/render/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\avatars\\ue5\\render\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:m}=u,_="/api/avatars/ue5/render/route";function g(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},36527:(e,a,t)=>{t.d(a,{e4:()=>o});let n=[{id:"heygen_anna_news",name:"Anna (News Anchor)",type:"video",engine:"heygen",gender:"female",description:"Apresentadora profissional ideal para comunicados oficiais e treinamentos corporativos.",style:"professional",tags:["news","formal","enterprise"],previewUrl:"https://files.heygen.ai/avatar/v3/3f2583200c854a0397f129e60b811467/full/preview_target.webp",metadata:{style:"professional",quality:"high",tags:["news","formal"]},heyGenConfig:{avatarId:"Anna_public_3_20240108"}},{id:"heygen_josh_casual",name:"Josh (Casual)",type:"video",engine:"heygen",gender:"male",description:"Especialista descontra\xeddo, \xf3timo para v\xeddeos educacionais e comunicados internos.",style:"casual",tags:["explainer","friendly"],previewUrl:"https://files.heygen.ai/avatar/v3/4a90e2/full/preview_target.webp",metadata:{style:"casual",quality:"high",tags:["explainer","friendly"]},heyGenConfig:{avatarId:"Josh_public_2_20240108"}},{id:"mh_male_01",name:"Professional Male (UE5)",type:"3d",engine:"ue5",gender:"male",description:"MetaHuman masculino para renders imersivos em ambientes industriais.",style:"professional",tags:["ue5","metahuman"],metadata:{style:"professional",age_range:"30-40",clothing_options:["suit","casual"],expression_presets:["neutral","smile","speak"]}},{id:"mh_female_01",name:"Professional Female (UE5)",type:"3d",engine:"ue5",gender:"female",description:"MetaHuman feminino indicado para aulas t\xe9cnicas e conte\xfados executivos.",style:"professional",tags:["ue5","metahuman"],metadata:{style:"professional",age_range:"25-35",clothing_options:["suit","casual"],expression_presets:["neutral","smile","speak"]}},{id:"local_male_01",name:"Simple Male (2D)",type:"2d",engine:"local",gender:"male",description:"Avatar 2D leve para pr\xe9-visualiza\xe7\xf5es r\xe1pidas e anima\xe7\xf5es simples.",style:"cartoon",tags:["2d","fast-render"],metadata:{style:"cartoon",color:"#4a90e2"}},{id:"local_female_01",name:"Simple Female (2D)",type:"2d",engine:"local",gender:"female",description:"Avatar 2D feminino otimizado para storyboards e prot\xf3tipos.",style:"cartoon",tags:["2d","fast-render"],metadata:{style:"cartoon",color:"#e24a90"}}];class r{getAll(){return n}getById(e){return n.find(a=>a.id===e)}getByEngine(e){return n.filter(a=>a.engine===e)}}let o=new r},37470:(e,a,t)=>{t.d(a,{Gc:()=>o,us:()=>r});var n=t(36527);class r{getAvailableMetaHumans(){return n.e4.getByEngine("ue5").map(e=>{let a=e.metadata||{};return{id:e.id,name:e.name,display_name:e.name,gender:e.gender,ethnicity:a.ethnicity,age_range:a.age_range,style:a.style,blendshape_count:a.blendshape_count,expression_presets:a.expression_presets,clothing_options:a.clothing_options,hair_options:a.hair_options,polygon_count:a.polygon_count,texture_resolution:a.texture_resolution,optimization_level:a.optimization_level}})}getMetaHuman(e){let a=n.e4.getById(e);if(!a||"ue5"!==a.engine)return;let t=a.metadata||{};return{id:a.id,name:a.name,display_name:a.name,gender:a.gender,ethnicity:t.ethnicity,age_range:t.age_range,style:t.style,blendshape_count:t.blendshape_count,expression_presets:t.expression_presets,clothing_options:t.clothing_options,hair_options:t.hair_options,polygon_count:t.polygon_count,texture_resolution:t.texture_resolution,optimization_level:t.optimization_level}}async startRender(e){return console.log("[UE5] Starting render job for:",e.metahuman_id),`job_ue5_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async render(e,a){let{quality:t,resolution:n}=e;console.log(`[UE5] Rendering avatar at ${t} quality (${n.width}x${n.height})`);let r=process.env.UE5_RENDER_API_URL;if(r)try{console.log(`[UE5] Connecting to Render Service at ${r}`);let t=await fetch(`${r}/render`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:e,duration:a})});t.ok?(await t.json(),console.log("[UE5] Render successful via API")):console.error(`[UE5] Render API failed: ${t.statusText}`)}catch(e){console.error("[UE5] Error connecting to Render Service:",e)}else console.warn("[UE5] UE5_RENDER_API_URL not set. Using mock rendering.");return{frames:Array(Math.floor(30*a)).fill(Buffer.from("")),fps:30,totalDuration:a}}async isAvailable(){let e=process.env.UE5_RENDER_API_URL;if(e)try{return(await fetch(`${e}/health`)).ok}catch{}return!1}getJobStatus(e){return{job_id:e,status:"completed",progress:100,checkpoints:[],timings:{queued_at:new Date(Date.now()-1e4),audio2face_start:new Date(Date.now()-9e3),audio2face_end:new Date(Date.now()-8e3),ue5_render_start:new Date(Date.now()-7e3),ue5_render_end:new Date(Date.now()-2e3),encoding_start:new Date(Date.now()-1500),completed_at:new Date},output:{video_url:"https://example.com/video.mp4"},error:null,config:{metahuman_id:"default",resolution:{width:1920,height:1080},fps:30,environment:"studio"}}}}let o=new r}};var a=require("../../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),n=a.X(0,[8948,5972],()=>t(89223));module.exports=n})();