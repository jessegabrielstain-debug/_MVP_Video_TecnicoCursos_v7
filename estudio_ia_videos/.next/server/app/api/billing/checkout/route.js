"use strict";(()=>{var e={};e.id=5868,e.ids=[5868],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},41842:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>p});var i=r(49303),o=r(88716),n=r(60670),a=r(87070);async function p(e){try{let t=await e.json(),r=process.env.STRIPE_PRICE_ID||t.priceId,s=process.env.STRIPE_SECRET_KEY||"",i=t.successUrl||process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000",o=t.cancelUrl||i;if(!s||!r)return a.NextResponse.json({error:"Stripe not configured"},{status:400});let n=new URLSearchParams;n.append("mode","subscription"),n.append("success_url",`${i}/billing/success`),n.append("cancel_url",`${o}/billing/cancel`),n.append("line_items[0][price]",r),n.append("line_items[0][quantity]","1");let p=await fetch("https://api.stripe.com/v1/checkout/sessions",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()}),c=await p.json();if(!p.ok)return a.NextResponse.json({error:"Stripe error",details:c},{status:500});return a.NextResponse.json({success:!0,sessionId:c.id,url:c.url})}catch(e){return a.NextResponse.json({error:"Failed to create session",details:String(e)},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/billing/checkout/route",pathname:"/api/billing/checkout",filename:"route",bundlePath:"app/api/billing/checkout/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\billing\\checkout\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:d}=c,h="/api/billing/checkout/route";function m(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(41842));module.exports=s})();