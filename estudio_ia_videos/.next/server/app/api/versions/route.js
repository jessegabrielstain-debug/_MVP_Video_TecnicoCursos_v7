(()=>{var e={};e.id=7031,e.ids=[7031],e.modules={220399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},350039:(e,n,r)=>{"use strict";r.r(n),r.d(n,{originalPathname:()=>u,patchFetch:()=>p,requestAsyncStorage:()=>o,routeModule:()=>b,serverHooks:()=>a,staticGenerationAsyncStorage:()=>i});var m=r(349303),x=r(88716),s=r(60670),t=r(205515);let b=new m.AppRouteRouteModule({definition:{kind:x.x.APP_ROUTE,page:"/api/versions/route",pathname:"/api/versions",filename:"route",bundlePath:"app/api/versions/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\versions\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:o,staticGenerationAsyncStorage:i,serverHooks:a}=b,u="/api/versions/route";function p(){return(0,s.patchFetch)({serverHooks:a,staticGenerationAsyncStorage:i})}},205515:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[31mx\x1b[0m the name `getUserId` is defined multiple times\n    ,-[\x1b[36;1;4mC:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\versions\\route.ts\x1b[0m:13:1]\n \x1b[2m13\x1b[0m | import { prisma } from '@/lib/db'\n \x1b[2m14\x1b[0m | \n \x1b[2m15\x1b[0m | \n \x1b[2m16\x1b[0m | const getUserId = (user: unknown): string => ((user as { id?: string }).id || '');\n    : \x1b[31;1m      ^^^^|^^^^\x1b[0m\n    :           \x1b[31;1m`-- \x1b[31;1mprevious definition of `getUserId` here\x1b[0m\x1b[0m\n \x1b[2m17\x1b[0m | export async function POST(req: NextRequest) {\n \x1b[2m18\x1b[0m |   try {\n \x1b[2m19\x1b[0m |     const session = await getServerSession(authConfig)\n \x1b[2m20\x1b[0m |     if (!session?.user) {\n \x1b[2m21\x1b[0m |       return NextResponse.json({ error: 'N\xe3o autorizado' }, { status: 401 })\n \x1b[2m22\x1b[0m |     }\n \x1b[2m23\x1b[0m | \n \x1b[2m24\x1b[0m |     const { projectId, name, description, projectData } = await req.json()\n \x1b[2m25\x1b[0m | \n \x1b[2m26\x1b[0m |     if (!projectId || !name) {\n \x1b[2m27\x1b[0m |       return NextResponse.json(\n \x1b[2m28\x1b[0m |         { error: 'projectId e name s\xe3o obrigat\xf3rios' },\n \x1b[2m29\x1b[0m |         { status: 400 }\n \x1b[2m30\x1b[0m |       )\n \x1b[2m31\x1b[0m |     }\n \x1b[2m32\x1b[0m | \n \x1b[2m33\x1b[0m |     // Busca projeto\n \x1b[2m34\x1b[0m |     const project = await prisma.project.findUnique({\n \x1b[2m35\x1b[0m |       where: { id: projectId }\n \x1b[2m36\x1b[0m |     })\n \x1b[2m37\x1b[0m | \n \x1b[2m38\x1b[0m |     if (!project) {\n \x1b[2m39\x1b[0m |       return NextResponse.json({ error: 'Projeto n\xe3o encontrado' }, { status: 404 })\n \x1b[2m40\x1b[0m |     }\n \x1b[2m41\x1b[0m | \n \x1b[2m42\x1b[0m |     // Verifica permiss\xe3o\n \x1b[2m43\x1b[0m |     if (project.userId !== getUserId(session.user)) {\n \x1b[2m44\x1b[0m |       return NextResponse.json({ error: 'Sem permiss\xe3o' }, { status: 403 })\n \x1b[2m45\x1b[0m |     }\n \x1b[2m46\x1b[0m | \n \x1b[2m47\x1b[0m |     // Conta vers\xf5es existentes para incrementar\n \x1b[2m48\x1b[0m |     const versionCount = await prisma.projectVersion.count({\n \x1b[2m49\x1b[0m |       where: { projectId }\n \x1b[2m50\x1b[0m |     })\n \x1b[2m51\x1b[0m | \n \x1b[2m52\x1b[0m |     // Cria nova vers\xe3o\n \x1b[2m53\x1b[0m |     const version = await prisma.projectVersion.create({\n \x1b[2m54\x1b[0m |       data: {\n \x1b[2m55\x1b[0m |         projectId,\n \x1b[2m56\x1b[0m |         userId: getUserId(session.user),\n \x1b[2m57\x1b[0m |         name,\n \x1b[2m58\x1b[0m |         description,\n \x1b[2m59\x1b[0m |         versionNumber: versionCount + 1,\n \x1b[2m60\x1b[0m |         projectData: projectData || {}\n \x1b[2m61\x1b[0m |       }\n \x1b[2m62\x1b[0m |     })\n \x1b[2m63\x1b[0m | \n \x1b[2m64\x1b[0m |     return NextResponse.json({ version })\n \x1b[2m65\x1b[0m | \n \x1b[2m66\x1b[0m |   } catch (error) {\n \x1b[2m67\x1b[0m |     console.error('[VERSIONS_POST_ERROR]', error)\n \x1b[2m68\x1b[0m |     return NextResponse.json(\n \x1b[2m69\x1b[0m |       { error: 'Erro ao criar vers\xe3o' },\n \x1b[2m70\x1b[0m |       { status: 500 }\n \x1b[2m71\x1b[0m |     )\n \x1b[2m72\x1b[0m |   }\n \x1b[2m73\x1b[0m | }\n \x1b[2m74\x1b[0m | \n \x1b[2m75\x1b[0m | \n \x1b[2m76\x1b[0m | const getUserId = (user: unknown): string => ((user as { id?: string }).id || '');\n    : \x1b[33;1m      ^^^^|^^^^\x1b[0m\n    :           \x1b[33;1m`-- \x1b[33;1m`getUserId` redefined here\x1b[0m\x1b[0m\n \x1b[2m77\x1b[0m | export async function GET(req: NextRequest) {\n \x1b[2m78\x1b[0m |   try {\n \x1b[2m78\x1b[0m |     const session = await getServerSession(authConfig)\r\n    `----\n")},349303:(e,n,r)=>{"use strict";e.exports=r(430517)}};var n=require("../../../webpack-runtime.js");n.C(e);var r=e=>n(n.s=e),m=n.X(0,[8948],()=>r(350039));module.exports=m})();