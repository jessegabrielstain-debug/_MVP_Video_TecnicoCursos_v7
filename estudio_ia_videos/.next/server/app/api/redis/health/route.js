"use strict";(()=>{var e={};e.id=3339,e.ids=[3339],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},71616:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>y,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p});var r={};a.r(r),a.d(r,{GET:()=>h});var s=a(49303),n=a(88716),o=a(60670),i=a(87070),c=a(26815);async function h(e){try{let e=await c.w.healthCheck(),t=await c.w.getStats(),a={timestamp:new Date().toISOString(),redis:{health:e,metrics:t,status:e.healthy?"healthy":"unhealthy"}};return i.NextResponse.json(a,{status:e.healthy?200:503,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Content-Type":"application/json"}})}catch(t){let e=t instanceof Error?t.message:String(t);return console.error("Redis health check error:",e),i.NextResponse.json({timestamp:new Date().toISOString(),redis:{health:{healthy:!1,error:e},status:"error"}},{status:500,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Content-Type":"application/json"}})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/redis/health/route",pathname:"/api/redis/health",filename:"route",bundlePath:"app/api/redis/health/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\redis\\health\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:p,serverHooks:d}=l,y="/api/redis/health/route";function m(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:p})}},26815:(e,t,a)=>{a.d(t,{w:()=>s});class r{async connect(){return console.log("[Cache] Using in-memory fallback (Redis not configured)"),this.connected=!0,!0}async set(e,t,a){let r=a?Date.now()+1e3*a:void 0;this.cache.set(e,{value:t,expiresAt:r})}async get(e){let t=this.cache.get(e);return t?t.expiresAt&&Date.now()>t.expiresAt?(this.cache.delete(e),null):t.value:null}async del(e){return this.cache.delete(e)}async clear(){this.cache.clear()}async keys(e){let t=Array.from(this.cache.keys());if(!e)return t;let a=new RegExp(e.replace(/\*/g,".*"));return t.filter(e=>a.test(e))}async getStats(){let e=Date.now(),t=0;for(let[a,r]of this.cache.entries())r.expiresAt&&r.expiresAt<e&&(t+=1);return{connected:this.connected,keys:this.cache.size,expired:t}}async healthCheck(){let e=Date.now();return this.connected||await this.connect(),{healthy:this.connected,latency:Date.now()-e,timestamp:new Date().toISOString()}}constructor(){this.cache=new Map,this.connected=!1}}let s=new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>a(71616));module.exports=r})();