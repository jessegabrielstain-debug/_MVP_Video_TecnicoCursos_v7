"use strict";(()=>{var e={};e.id=8299,e.ids=[8299],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},93465:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>x,staticGenerationAsyncStorage:()=>D});var r={};t.r(r),t.d(r,{GET:()=>v,POST:()=>u});var n=t(49303),o=t(88716),s=t(60670),i=t(87070);async function u(e){console.log("\uD83E\uDDD1‍\uD83D\uDCBC Iniciando gera\xe7\xe3o de avatar...");try{let a;let{type:t,text:r,audioUrl:n,avatar:o,settings:s}=await e.json();if(!r&&!n)return i.NextResponse.json({error:"Texto ou URL de \xe1udio s\xe3o obrigat\xf3rios"},{status:400});switch(console.log("\uD83D\uDC64 Gerando avatar:",{type:t,hasText:!!r,hasAudio:!!n,avatar:o?.id}),t){case"talking-photo":a=await d(r,n,o,s);break;case"3d-avatar":a=await l(r,n,o,s);break;case"animated-character":a=await c(r,n,o,s);break;default:throw Error("Tipo de avatar n\xe3o suportado")}return i.NextResponse.json({success:!0,videoUrl:a.videoUrl,thumbnail:a.thumbnail,duration:a.duration,type:t,settings:{...s,avatar:o},metadata:{generatedAt:new Date().toISOString(),textLength:r?.length||0}})}catch(e){return console.error("❌ Erro na gera\xe7\xe3o de avatar:",e),i.NextResponse.json({error:"Erro ao gerar avatar",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function d(e,a,t,r){console.log("\uD83D\uDCF8 Gerando Talking Photo...");let n=m(e,a);return await new Promise(e=>setTimeout(e,2e3)),{videoUrl:p("talking-photo",t?.id||"default"),thumbnail:g("talking-photo",t?.id||"default"),duration:n}}async function l(e,a,t,r){console.log("\uD83E\uDDD1‍\uD83D\uDCBB Gerando Avatar 3D...");let n=m(e,a);return await new Promise(e=>setTimeout(e,3e3)),{videoUrl:p("3d-avatar",t?.id||"instructor"),thumbnail:g("3d-avatar",t?.id||"instructor"),duration:n}}async function c(e,a,t,r){console.log("\uD83C\uDFAD Gerando Personagem Animado...");let n=m(e,a);return await new Promise(e=>setTimeout(e,1500)),{videoUrl:p("animated-character",t?.id||"cartoon"),thumbnail:g("animated-character",t?.id||"cartoon"),duration:n}}function m(e,a){return a?30:e?Math.max(3,e.split(" ").length/150*60):10}function p(e,a){let t=process.env.AWS_S3_BUCKET?`https://${process.env.AWS_S3_BUCKET}.s3.${process.env.AWS_REGION}.amazonaws.com`:"/api/files/avatars";return`${t}/avatars/${e}/${a}_${Date.now()}.mp4`}function g(e,a){let t=process.env.AWS_S3_BUCKET?`https://${process.env.AWS_S3_BUCKET}.s3.${process.env.AWS_REGION}.amazonaws.com`:"/api/files/avatars";return`${t}/avatars/thumbnails/${e}_${a}_thumb.jpg`}async function v(){return i.NextResponse.json({types:["talking-photo","3d-avatar","animated-character"],avatars:{"talking-photo":[{id:"professional-male",name:"Executivo Masculino",style:"professional",gender:"male"},{id:"professional-female",name:"Executiva Feminina",style:"professional",gender:"female"},{id:"instructor-male",name:"Instrutor Masculino",style:"instructor",gender:"male"},{id:"instructor-female",name:"Instrutora Feminina",style:"instructor",gender:"female"}],"3d-avatar":[{id:"instructor-3d",name:"Instrutor 3D",style:"instructor",gender:"male"},{id:"engineer-3d",name:"Engenheira 3D",style:"professional",gender:"female"},{id:"technician-3d",name:"T\xe9cnico 3D",style:"casual",gender:"male"}],"animated-character":[{id:"safety-mascot",name:"Mascote Seguran\xe7a",style:"casual",gender:"neutral"},{id:"cartoon-instructor",name:"Instrutor Cartoon",style:"instructor",gender:"male"},{id:"animated-engineer",name:"Engenheira Animada",style:"professional",gender:"female"}]},settings:{backgrounds:["office","factory","training-room","green-screen","custom"],animations:["subtle","normal","expressive"],formats:["mp4","webm","gif"],qualities:["low","medium","high","ultra"]}})}let h=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/v1/avatar/generate/route",pathname:"/api/v1/avatar/generate",filename:"route",bundlePath:"app/api/v1/avatar/generate/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\avatar\\generate\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:f,staticGenerationAsyncStorage:D,serverHooks:x}=h,y="/api/v1/avatar/generate/route";function w(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:D})}}};var a=require("../../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[8948,5972],()=>t(93465));module.exports=r})();