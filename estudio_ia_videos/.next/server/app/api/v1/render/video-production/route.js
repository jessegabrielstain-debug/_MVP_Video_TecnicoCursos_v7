"use strict";(()=>{var e={};e.id=5899,e.ids=[5899],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},182198:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var t={};o.r(t),o.d(t,{DELETE:()=>l,GET:()=>c,POST:()=>u});var s=o(349303),n=o(88716),i=o(60670),a=o(387070);(function(){var e=Error("Cannot find module '@/lib/video-render-engine'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/pptx-real-parser'");throw e.code="MODULE_NOT_FOUND",e}();let d=Object(function(){var e=Error("Cannot find module '@/lib/video-render-engine'");throw e.code="MODULE_NOT_FOUND",e}())();async function u(e){console.log("\uD83C\uDFAC Iniciando renderiza\xe7\xe3o de v\xeddeo...");try{let{s3Key:r,slides:o,timeline:t,settings:s={width:1920,height:1080,fps:30,bitrate:"5000k",format:"mp4",quality:"high",audioQuality:192,enableAudio:!0}}=await e.json();if(!o&&!r)return a.NextResponse.json({error:"Slides ou s3Key s\xe3o obrigat\xf3rios"},{status:400});let n=o;if(r&&!o){console.log("\uD83D\uDCE5 Processando slides do S3 para renderiza\xe7\xe3o:",r);let e=Object(function(){var e=Error("Cannot find module '@/lib/pptx-real-parser'");throw e.code="MODULE_NOT_FOUND",e}())();n=(await e.parseFromS3(r)).slides}let i=t;if(!t&&n&&(i=d.createTimelineFromSlides(n)),!n||!i)return a.NextResponse.json({error:"Dados de slides e timeline s\xe3o obrigat\xf3rios"},{status:400});console.log("⚙️ Configura\xe7\xf5es de renderiza\xe7\xe3o:",{slides:n.length,duration:i.totalDuration,quality:s.quality,format:s.format});let u=await d.startRender(n,i,s);return console.log("✅ Job de renderiza\xe7\xe3o iniciado:",u),a.NextResponse.json({success:!0,jobId:u,status:"processing",message:"Renderiza\xe7\xe3o iniciada com sucesso",estimatedTime:Math.ceil(i.totalDuration/10),settings:{resolution:`${s.width}x${s.height}`,fps:s.fps,quality:s.quality,duration:i.totalDuration}})}catch(e){return console.error("❌ Erro na renderiza\xe7\xe3o:",e),a.NextResponse.json({success:!1,error:"Erro ao iniciar renderiza\xe7\xe3o",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function c(e){let{searchParams:r}=new URL(e.url),o=r.get("jobId");if(!o){let e=d.getAllJobs();return a.NextResponse.json({success:!0,jobs:e.map(e=>({id:e.id,status:e.status,progress:e.progress,startTime:e.startTime,endTime:e.endTime,outputPath:e.outputPath,errorMessage:e.errorMessage}))})}let t=d.getJobStatus(o);return t?a.NextResponse.json({success:!0,job:{id:t.id,status:t.status,progress:t.progress,startTime:t.startTime,endTime:t.endTime,outputPath:t.outputPath,errorMessage:t.errorMessage,settings:t.settings}}):a.NextResponse.json({error:"Job n\xe3o encontrado"},{status:404})}async function l(e){let{searchParams:r}=new URL(e.url),o=r.get("jobId");if(!o)return a.NextResponse.json({error:"Job ID \xe9 obrigat\xf3rio"},{status:400});try{let e=await d.cancelJob(o),r=await d.cleanupJob(o);return a.NextResponse.json({success:!0,cancelled:e,cleanedUp:r,message:"Job cancelado e limpo com sucesso"})}catch(e){return a.NextResponse.json({error:"Erro ao cancelar job",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/v1/render/video-production/route",pathname:"/api/v1/render/video-production",filename:"route",bundlePath:"app/api/v1/render/video-production/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\render\\video-production\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h}=p,f="/api/v1/render/video-production/route";function v(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>o(182198));module.exports=t})();