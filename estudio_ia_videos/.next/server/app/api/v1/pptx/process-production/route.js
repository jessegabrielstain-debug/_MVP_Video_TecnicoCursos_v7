"use strict";(()=>{var e={};e.id=6074,e.ids=[6074],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78303:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};o.r(s),o.d(s,{GET:()=>d,POST:()=>u});var r=o(349303),n=o(88716),a=o(60670),i=o(387070),c=o(224507);async function u(e){try{let{s3Key:t,jobId:o}=await e.json();if(!t||!o)return i.NextResponse.json({error:"S3 key e job ID s\xe3o obrigat\xf3rios"},{status:400});console.log("\uD83D\uDD04 Starting PPTX processing:",{s3Key:t,jobId:o}),console.log("\uD83D\uDCE5 Downloading file from S3...");let s=await c.f.downloadFile(t);if(!s.success||!s.buffer)throw Error(`Failed to download file: ${s.error}`);console.log(`ðŸ“¦ File downloaded: ${s.buffer.length} bytes`),console.log("\uD83D\uDD0D Processing PPTX content...");let{pptxProcessor:r}=await Promise.resolve().then(function(){var e=Error("Cannot find module '@/lib/pptx/pptx-real-processor'");throw e.code="MODULE_NOT_FOUND",e}),n=await r.processBuffer(s.buffer,t);if(!n.success||!n.slides)throw Error(`Processing failed: ${n.error}`);console.log(`âœ… Processing successful: ${n.slides.length} slides`);let a=n.slides.reduce((e,t)=>e+(t.duration||5),0),u=n.slides.reduce((e,t)=>e+t.images.length,0),d=n.slides.some(e=>e.animations&&e.animations.length>0),l={slides:n.slides.map(e=>({id:e.id,title:e.title,content:e.textContent||e.content,images:e.images.length,duration:e.duration||5,animations:e.animations||[]})),totalDuration:a,slideCount:n.slides.length,imageCount:u,hasAnimations:d,metadata:{title:n.metadata?.title||"Untitled",author:n.metadata?.author||"Unknown",subject:n.metadata?.subject||"",createdAt:n.metadata?.createdAt||new Date().toISOString(),modifiedAt:n.metadata?.modifiedAt||new Date().toISOString()}};return i.NextResponse.json({success:!0,data:l,message:"Processamento conclu\xeddo com sucesso",processingTime:Date.now()-Date.now()})}catch(e){return console.error("Processing API Error:",e),i.NextResponse.json({error:"Erro durante o processamento",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function d(e){let{searchParams:t}=new URL(e.url);if(!t.get("jobId"))return i.NextResponse.json({error:"Job ID \xe9 obrigat\xf3rio"},{status:400});try{return i.NextResponse.json({success:!0,status:"completed",progress:100,message:"Processamento conclu\xeddo"})}catch(e){return console.error("Status check error:",e),i.NextResponse.json({error:"Erro ao verificar status"},{status:500})}}let l=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/v1/pptx/process-production/route",pathname:"/api/v1/pptx/process-production",filename:"route",bundlePath:"app/api/v1/pptx/process-production/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\pptx\\process-production\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g}=l,f="/api/v1/pptx/process-production/route";function h(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},224507:(e,t,o)=>{o.d(t,{f:()=>s});class s{}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>o(78303));module.exports=s})();