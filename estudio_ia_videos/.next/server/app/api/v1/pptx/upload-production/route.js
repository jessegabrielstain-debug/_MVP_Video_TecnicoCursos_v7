"use strict";(()=>{var e={};e.id=6147,e.ids=[6147],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},86976:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var r={};t.r(r),t.d(r,{GET:()=>d,POST:()=>u});var a=t(349303),s=t(88716),n=t(60670),i=t(387070);async function u(e){try{let o=(await e.formData()).get("file");if(!o)return i.NextResponse.json({error:"Nenhum arquivo enviado"},{status:400});let t=Object(function(){var e=Error("Cannot find module '@/lib/aws-s3-config'");throw e.code="MODULE_NOT_FOUND",e}())(o);if(!t.valid)return i.NextResponse.json({error:t.error},{status:400});console.log("\uD83D\uDCE4 Starting PPTX upload:",o.name);let r=await Object(function(){var e=Error("Cannot find module '@/lib/aws-s3-config'");throw e.code="MODULE_NOT_FOUND",e}())(o,o.name);console.log("✅ S3 upload successful:",r);let a=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).project.create({data:{name:o.name.replace(/\.[^/.]+$/,""),originalFileName:o.name,pptxUrl:r,status:"PROCESSING",type:"pptx",userId:"anonymous",processingLog:{uploadedAt:new Date().toISOString(),s3Key:r,fileSize:o.size,status:"uploaded"}}});console.log("✅ Project created in database:",a.id);let s={id:crypto.randomUUID(),projectId:a.id,s3Key:r,fileName:o.name,fileSize:o.size,status:"uploaded",createdAt:new Date().toISOString()};return i.NextResponse.json({success:!0,project:{id:a.id,name:a.name,status:a.status},job:s,message:"Upload realizado com sucesso - iniciando processamento..."})}catch(e){return console.error("Upload API Error:",e),i.NextResponse.json({error:"Erro interno do servidor",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function d(e){let{searchParams:o}=new URL(e.url),t=o.get("projectId");if(!t)return i.NextResponse.json({error:"Project ID obrigat\xf3rio"},{status:400});try{let e=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).project.findUnique({where:{id:t},select:{id:!0,name:!0,status:!0,processingLog:!0,slidesData:!0,totalSlides:!0}});if(!e)return i.NextResponse.json({error:"Projeto n\xe3o encontrado"},{status:404});return i.NextResponse.json({success:!0,project:{id:e.id,name:e.name,status:e.status,totalSlides:e.totalSlides,hasData:!!e.slidesData,processingLog:e.processingLog}})}catch(e){return console.error("Status check error:",e),i.NextResponse.json({error:"Erro ao verificar status"},{status:500})}}(function(){var e=Error("Cannot find module '@/lib/aws-s3-config'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}();let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/v1/pptx/upload-production/route",pathname:"/api/v1/pptx/upload-production",filename:"route",bundlePath:"app/api/v1/pptx/upload-production/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\pptx\\upload-production\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:m}=c,f="/api/v1/pptx/upload-production/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}}};var o=require("../../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[8948,5972],()=>t(86976));module.exports=r})();