"use strict";(()=>{var e={};e.id=2805,e.ids=[2805],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},85237:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{GET:()=>u,POST:()=>d});var s=r(49303),o=r(88716),i=r(60670),n=r(87070),p=r(78536);function l(e){let t=String(e.title||""),r=String(e.nr_number||""),a=String(e.description||""),s=Number(e.duration_seconds||0),o=Number(e.slide_count||0),i=String(e.updated_at||new Date().toISOString());return{id:String(e.id),name:t,norma:r,description:a,category:"seguranca",industry:["Geral"],duration:`${Math.floor(s/60)} min`,slides:o,compliance:100,thumbnail:`/nr-thumbnails/${r.toLowerCase()}.jpg`,features:["Conte\xfado atualizado","Conforme legisla\xe7\xe3o vigente","Exemplos pr\xe1ticos","Quiz de avalia\xe7\xe3o"],lastUpdated:new Date(i).toISOString().split("T")[0],downloads:0,rating:4.8,isNew:!1,isPremium:!1,aiOptimized:!0}}async function u(e){try{let t=e.nextUrl.searchParams,r=t.get("category"),a=t.get("norma"),s="true"===t.get("ai"),o=t.get("search"),i=(await (0,p.$4)()).map(l);return r&&"all"!==r&&(i=i.filter(e=>e.category===r)),a&&"all"!==a&&(i=i.filter(e=>e.norma===a)),s&&(i=i.filter(e=>e.aiOptimized)),o&&(i=i.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase())||e.norma.toLowerCase().includes(o.toLowerCase()))),n.NextResponse.json({success:!0,templates:i,total:i.length,filters:{category:r,norma:a,aiOnly:s,search:o}})}catch(e){return console.error("Templates API Error:",e),n.NextResponse.json({success:!1,error:"Failed to fetch templates"},{status:500})}}async function d(e){try{let t=await e.json();if("generate"===t.action){await new Promise(e=>setTimeout(e,3e3));let e={id:"custom-"+Date.now(),name:`Template Personalizado - ${t.norma||"NR-23"} (IA Generated)`,norma:t.norma||"NR-23",description:"Template gerado automaticamente pela IA baseado nas suas necessidades espec\xedficas",category:t.category||"seguranca",industry:t.industry||["Geral"],duration:`${30+Math.floor(30*Math.random())} min`,slides:20+Math.floor(20*Math.random()),compliance:95+Math.floor(5*Math.random()),thumbnail:"/nr12-thumb.jpg",features:["Conte\xfado adaptado IA","Slides otimizados","Compliance autom\xe1tico","Casos espec\xedficos da empresa","Linguagem personalizada"],lastUpdated:new Date().toISOString().split("T")[0],downloads:0,rating:0,isNew:!0,aiOptimized:!0};return n.NextResponse.json({success:!0,template:e,message:"Template personalizado gerado com sucesso!"})}if("download"===t.action){let e=(await (0,p.$4)()).find(e=>e.id===t.templateId);if(e){let r=l(e);return n.NextResponse.json({success:!0,template:r,downloadUrl:`/api/v1/templates/nr-smart/${t.templateId}/download`,message:"Template baixado com sucesso!"})}}return n.NextResponse.json({success:!1,error:"Invalid action"},{status:400})}catch(e){return console.error("Templates POST Error:",e),n.NextResponse.json({success:!1,error:"Failed to process request"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/v1/templates/nr-smart/route",pathname:"/api/v1/templates/nr-smart",filename:"route",bundlePath:"app/api/v1/templates/nr-smart/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\templates\\nr-smart\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:g,serverHooks:h}=m,f="/api/v1/templates/nr-smart/route";function x(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972,1657,8536],()=>r(85237));module.exports=a})();