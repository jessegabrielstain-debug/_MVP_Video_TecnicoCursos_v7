"use strict";(()=>{var e={};e.id=7543,e.ids=[7543],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},23154:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>z,patchFetch:()=>P,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>w,staticGenerationAsyncStorage:()=>f});var o={};r.r(o),r.d(o,{GET:()=>u,POST:()=>l,dynamic:()=>m});var a=r(49303),t=r(88716),i=r(60670),n=r(87070);class c{async process(e,s){return console.log("[ImageProcessor] Processing image with options:",s),{buffer:e,width:1920,height:1080,format:s?.format||"jpeg",size:e.length}}async resize(e,s,r){return console.log("[ImageProcessor] Resizing to:",s,r),e}async crop(e,s,r,o,a){return console.log("[ImageProcessor] Cropping:",{x:s,y:r,width:o,height:a}),e}async applyFilter(e,s){return console.log("[ImageProcessor] Applying filter:",s),e}async processBatchImages(e,s){console.log("[ImageProcessor] Processing batch of",e.length,"images");let r=[];for(let o of e){let e=Buffer.from(await o.arrayBuffer()),a=await this.process(e,s);r.push(a)}return r}async optimizeForWeb(e,s){return console.log("[ImageProcessor] Optimizing for web:",s),{buffer:e,width:s?.maxWidth||1200,height:Math.round(.75*(s?.maxWidth||1200)),format:"webp",sizes:{original:e.length,webp:Math.round(.6*e.length),jpeg:Math.round(.8*e.length)}}}}let g=new c,p=async(e,s,r)=>{console.log("[ImageProcessor] Processing images for project:",e);try{let e=await g.processBatchImages(s,r);return{success:!0,processedImages:e}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}},m="force-dynamic";async function l(e){try{let s;let r=await e.formData(),o=r.getAll("files"),a=r.get("projectId"),t=r.get("options");if(!o||0===o.length)return n.NextResponse.json({error:"Nenhuma imagem foi enviada"},{status:400});console.log(`ðŸ–¼ï¸ Processando ${o.length} imagens`);let i=t?JSON.parse(t):{};if(a){let e=await p(a,o,i);if(!e.success)throw Error(e.error);s=e.processedImages||[]}else s=await g.processBatchImages(o,i);return n.NextResponse.json({success:!0,processedImages:s,count:s.length,message:`${s.length} imagens processadas com sucesso!`})}catch(e){return console.error("âŒ Erro no processamento de imagens:",e),n.NextResponse.json({error:"Erro no processamento de imagens",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function u(e){try{let{searchParams:s}=new URL(e.url),r=s.get("action");if("optimize"===r){let e=s.get("imageUrl");if(!e)return n.NextResponse.json({error:"URL da imagem \xe9 obrigat\xf3ria"},{status:400});let r=await fetch(e),o=Buffer.from(await r.arrayBuffer()),a=await g.optimizeForWeb(o);return n.NextResponse.json({success:!0,optimized:{sizes:a.sizes,savings:{webp:Math.round((a.sizes.original-a.sizes.webp)/a.sizes.original*100),jpeg:Math.round((a.sizes.original-a.sizes.jpeg)/a.sizes.original*100)}},message:"Imagem otimizada com sucesso!"})}return n.NextResponse.json({success:!0,message:"API de processamento de imagens ativa",endpoints:{POST:"/api/v1/images/process-real - Processar imagens",GET:"/api/v1/images/process-real?action=optimize&imageUrl=... - Otimizar imagem"}})}catch(e){return console.error("âŒ Erro na otimiza\xe7\xe3o de imagem:",e),n.NextResponse.json({error:"Erro na otimiza\xe7\xe3o",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/v1/images/process-real/route",pathname:"/api/v1/images/process-real",filename:"route",bundlePath:"app/api/v1/images/process-real/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\images\\process-real\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:w}=d,z="/api/v1/images/process-real/route";function P(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:f})}}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),o=s.X(0,[8948,5972],()=>r(23154));module.exports=o})();