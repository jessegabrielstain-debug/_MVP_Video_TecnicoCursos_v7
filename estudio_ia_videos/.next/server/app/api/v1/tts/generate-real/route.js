"use strict";(()=>{var e={};e.id=8746,e.ids=[8746],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},803660:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>T,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>v,staticGenerationAsyncStorage:()=>g});var o={};t.r(o),t.d(o,{GET:()=>l,POST:()=>u,dynamic:()=>d});var s=t(349303),a=t(88716),n=t(60670),i=t(387070);(function(){var e=Error("Cannot find module '@/lib/tts-real-integration'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}();let d="force-dynamic";async function u(e){try{let r=await e.json(),{projectId:t,voice:o,action:s="generate"}=r;if("generate"===s){if(!t||!o)return i.NextResponse.json({error:"Project ID e configura\xe7\xf5es de voz s\xe3o obrigat\xf3rios"},{status:400});console.log("\uD83D\uDD0A Iniciando gera\xe7\xe3o TTS real para projeto:",t);let e=await Object(function(){var e=Error("Cannot find module '@/lib/tts-real-integration'");throw e.code="MODULE_NOT_FOUND",e}())(t,o);if(!e.success)return i.NextResponse.json({error:e.error||"Erro na gera\xe7\xe3o TTS"},{status:500});return i.NextResponse.json({success:!0,audioTimeline:e.audioTimeline,projectAudioUrl:e.projectAudioUrl,totalDuration:e.totalDuration,slidesCount:e.audioTimeline?.length||0,message:"TTS gerado com sucesso para todos os slides!"})}if("single"!==s)return i.NextResponse.json({error:"A\xe7\xe3o n\xe3o reconhecida"},{status:400});{let e;let{text:t,voice:o}=r;if(!t||!o)return i.NextResponse.json({error:"Texto e configura\xe7\xf5es de voz s\xe3o obrigat\xf3rios"},{status:400});if("elevenlabs"===o.provider)e=await Object(function(){var e=Error("Cannot find module '@/lib/tts-real-integration'");throw e.code="MODULE_NOT_FOUND",e}()).generateElevenLabsAudio({text:t,voice:o,outputFormat:"mp3"});else if("azure"===o.provider)e=await Object(function(){var e=Error("Cannot find module '@/lib/tts-real-integration'");throw e.code="MODULE_NOT_FOUND",e}()).generateAzureAudio({text:t,voice:o,outputFormat:"mp3"});else throw Error(`Provider n\xe3o suportado: ${o.provider}`);return i.NextResponse.json({success:!0,audioUrl:e.audioUrl,metadata:e.metadata,message:"\xc1udio gerado com sucesso!"})}}catch(e){return console.error("❌ Erro na API TTS:",e),i.NextResponse.json({error:"Erro na gera\xe7\xe3o de \xe1udio",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function l(e){try{let{searchParams:r}=new URL(e.url),t=r.get("action"),o=r.get("provider");if("voices"===t){if(!o)return i.NextResponse.json({error:"Provider \xe9 obrigat\xf3rio"},{status:400});let e=await Object(function(){var e=Error("Cannot find module '@/lib/tts-real-integration'");throw e.code="MODULE_NOT_FOUND",e}()).getAvailableVoices(o);return i.NextResponse.json({success:!0,provider:o,voices:e,count:e.length,message:`${e.length} vozes dispon\xedveis para ${o}`})}if("status"===t){let e=r.get("projectId");if(!e)return i.NextResponse.json({error:"Project ID \xe9 obrigat\xf3rio"},{status:400});let t=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).project.findUnique({where:{id:e},include:{slides:{select:{id:!0,title:!0,audioUrl:!0,ttsGenerated:!0},orderBy:{slideNumber:"asc"}}}});if(!t)return i.NextResponse.json({error:"Projeto n\xe3o encontrado"},{status:404});let o=t.slides.filter(e=>e.ttsGenerated),s=t.processingLog;return i.NextResponse.json({success:!0,project:{id:t.id,name:t.name,hasProjectAudio:!!t.audioUrl,projectAudioUrl:t.audioUrl,ttsProvider:t.ttsProvider,voiceId:t.voiceId,totalDuration:t.duration},slides:{total:t.slides.length,withTTS:o.length,percentage:Math.round(o.length/t.slides.length*100),details:t.slides.map(e=>({id:e.id,title:e.title,hasTTS:e.ttsGenerated,audioUrl:e.audioUrl}))},timeline:s?.audioTimeline||[],generatedAt:s?.generatedAt})}return i.NextResponse.json({success:!0,message:"API TTS Real ativa",providers:["elevenlabs","azure"],endpoints:{"POST /generate":"Gerar TTS para projeto ou texto individual","GET /voices?provider=":"Listar vozes dispon\xedveis","GET /status?projectId=":"Status TTS do projeto"}})}catch(e){return console.error("❌ Erro na API TTS GET:",e),i.NextResponse.json({error:"Erro na consulta TTS",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/v1/tts/generate-real/route",pathname:"/api/v1/tts/generate-real",filename:"route",bundlePath:"app/api/v1/tts/generate-real/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\tts\\generate-real\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:v}=c,m="/api/v1/tts/generate-real/route";function T(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:g})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972],()=>t(803660));module.exports=o})();