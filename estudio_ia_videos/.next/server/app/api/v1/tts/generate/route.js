"use strict";(()=>{var e={};e.id=8201,e.ids=[8201],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},19716:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>f,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>E,staticGenerationAsyncStorage:()=>m});var o={};r.r(o),r.d(o,{GET:()=>d,POST:()=>u});var a=r(49303),n=r(88716),s=r(60670),i=r(87070);async function u(e){console.log("\uD83C\uDF99ï¸ Iniciando gera\xe7\xe3o TTS...");try{let t;let{text:r,provider:o="azure",voice:a,speed:n=1,pitch:s=0,format:u="mp3",language:d="pt-BR"}=await e.json();if(!r||0===r.trim().length)return i.NextResponse.json({error:"Texto \xe9 obrigat\xf3rio"},{status:400});if(r.length>5e3)return i.NextResponse.json({error:"Texto muito longo. M\xe1ximo: 5000 caracteres"},{status:400});switch(console.log(`ðŸ”Š Gerando TTS com ${o}:`,{textLength:r.length,voice:a,language:d}),o){case"elevenlabs":t=await l(r,a,n,u);break;case"azure":t=await p(r,a,n,s,u,d);break;case"google":t=await c(r,a,n,s,u,d);break;default:throw Error("Provider TTS n\xe3o suportado")}return i.NextResponse.json({success:!0,audioUrl:t.audioUrl,duration:t.duration,provider:o,settings:{voice:a,speed:n,pitch:s,format:u,language:d},metadata:{textLength:r.length,generatedAt:new Date().toISOString()}})}catch(e){return console.error("âŒ Erro na gera\xe7\xe3o TTS:",e),i.NextResponse.json({error:"Erro ao gerar \xe1udio",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}async function l(e,t,r,o){let a=process.env.ELEVENLABS_API_KEY;if(!a)throw Error("ElevenLabs API key n\xe3o configurada");try{let o=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${t||"pNInz6obpgDQGcFmaJgB"}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":a},body:JSON.stringify({text:e,model_id:"eleven_multilingual_v2",voice_settings:{stability:.5,similarity_boost:.5,style:r||1,use_speaker_boost:!0}})});if(!o.ok){let e=await o.text();throw Error(`ElevenLabs API error: ${o.status} - ${e}`)}let n=await o.arrayBuffer(),s=Buffer.from(n).toString("base64"),i=`data:audio/mpeg;base64,${s}`,u=e.split(" ").length;return{audioUrl:i,duration:u/150*60}}catch(e){throw console.error("ElevenLabs TTS Error:",e),e}}async function p(e,t,r,o,a,n){let s=process.env.AZURE_SPEECH_KEY,i=process.env.AZURE_SPEECH_REGION;if(!s||!i)throw Error("Azure Speech credentials n\xe3o configuradas");let u=r?`${r}x`:"1.0x",l=o?`${o>0?"+":""}${o}Hz`:"+0Hz",p=`
    <speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="${n||"pt-BR"}">
      <voice name="${t||"pt-BR-FranciscaNeural"}">
        <prosody rate="${u}" pitch="${l}">
          ${e}
        </prosody>
      </voice>
    </speak>
  `;try{let t=await fetch(`https://${i}.tts.speech.microsoft.com/cognitiveservices/v1`,{method:"POST",headers:{"Ocp-Apim-Subscription-Key":s,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"audio-24khz-160kbitrate-mono-mp3"},body:p});if(!t.ok){let e=await t.text();throw Error(`Azure TTS API error: ${t.status} - ${e}`)}let r=await t.arrayBuffer(),o=Buffer.from(r).toString("base64"),a=`data:audio/mpeg;base64,${o}`,n=e.split(" ").length;return{audioUrl:a,duration:n/150*60}}catch(e){throw console.error("Azure TTS Error:",e),e}}async function c(e,t,r,o,a,n){let s=process.env.GOOGLE_TTS_API_KEY;if(!s)throw Error("Google TTS API key n\xe3o configurada");try{let i=await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:e},voice:{languageCode:n||"pt-BR",name:t||"pt-BR-Standard-A",ssmlGender:"FEMALE"},audioConfig:{audioEncoding:"wav"===a?"LINEAR16":"MP3",speakingRate:r||1,pitch:o||0}})});if(!i.ok){let e=await i.text();throw Error(`Google TTS API error: ${i.status} - ${e}`)}let u=await i.json(),l=`data:audio/mpeg;base64,${u.audioContent}`,p=e.split(" ").length;return{audioUrl:l,duration:p/150*60}}catch(e){throw console.error("Google TTS Error:",e),e}}async function d(){return i.NextResponse.json({providers:["elevenlabs","azure","google"],voices:{elevenlabs:[{id:"pNInz6obpgDQGcFmaJgB",name:"Adam (English)"},{id:"EXAVITQu4vr4xnSDxMaL",name:"Bella (English)"},{id:"VR6AewLTigWG4xSOukaG",name:"Arnold (English)"}],azure:[{id:"pt-BR-FranciscaNeural",name:"Francisca (Portugu\xeas)"},{id:"pt-BR-AntonioNeural",name:"Antonio (Portugu\xeas)"},{id:"en-US-JennyNeural",name:"Jenny (English)"},{id:"en-US-GuyNeural",name:"Guy (English)"}],google:[{id:"pt-BR-Standard-A",name:"Portugu\xeas Feminina"},{id:"pt-BR-Standard-B",name:"Portugu\xeas Masculina"},{id:"en-US-Standard-C",name:"English Female"},{id:"en-US-Standard-D",name:"English Male"}]},formats:["mp3","wav","ogg"],languages:["pt-BR","en-US","es-ES","fr-FR","de-DE"]})}let g=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/v1/tts/generate/route",pathname:"/api/v1/tts/generate",filename:"route",bundlePath:"app/api/v1/tts/generate/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\tts\\generate\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:E}=g,v="/api/v1/tts/generate/route";function f(){return(0,s.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972],()=>r(19716));module.exports=o})();