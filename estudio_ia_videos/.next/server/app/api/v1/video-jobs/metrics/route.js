(()=>{var e={};e.id=3648,e.ids=[3648],e.modules={788751:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=788751,e.exports=r},318993:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=318993,e.exports=r},745773:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=745773,e.exports=r},991254:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=991254,e.exports=r},220399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},532615:e=>{"use strict";e.exports=require("http")},735240:e=>{"use strict";e.exports=require("https")},768621:e=>{"use strict";e.exports=require("punycode")},276162:e=>{"use strict";e.exports=require("stream")},917360:e=>{"use strict";e.exports=require("url")},671568:e=>{"use strict";e.exports=require("zlib")},689958:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>_});var s={};t.r(s),t.d(s,{GET:()=>d});var o=t(349303),i=t(88716),a=t(60670),n=t(387070),u=t(895412),c=t(831006);async function d(e){try{let r=(0,u.s)(e),{data:t,error:s}=await r.auth.getUser();if(s||!t?.user)return n.NextResponse.json({code:"UNAUTHORIZED",message:"Usu\xe1rio n\xe3o autenticado"},{status:401});let{data:o,error:i}=await r.rpc("is_admin");if(i||!o)return n.NextResponse.json({code:"FORBIDDEN",message:"Acesso negado. Recurso dispon\xedvel apenas para administradores."},{status:403});let a=(0,c.WT)();return n.NextResponse.json(a,{status:200,headers:{"Content-Type":"application/json","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate",Pragma:"no-cache",Expires:"0"}})}catch(e){return n.NextResponse.json({code:"UNEXPECTED",message:"Erro ao obter m\xe9tricas",details:e.message},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/v1/video-jobs/metrics/route",pathname:"/api/v1/video-jobs/metrics",filename:"route",bundlePath:"app/api/v1/video-jobs/metrics/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\v1\\video-jobs\\metrics\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:_,serverHooks:m}=p,v="/api/v1/video-jobs/metrics/route";function h(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:_})}},895412:(e,r,t)=>{"use strict";t.d(r,{s:()=>o});var s=t(868355);function o(e){let r=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL||"",t=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||process.env.SUPABASE_ANON_KEY||"",o=(e.headers.get("authorization")||e.headers.get("Authorization"))??"",i={};return o&&(i.Authorization=o),(0,s.createClient)(r,t,{global:{headers:i},auth:{persistSession:!1,autoRefreshToken:!0}})}},831006:(e,r,t)=>{"use strict";t.d(r,{WT:()=>a,g7:()=>o,vJ:()=>i});let s=()=>{let e=globalThis;return e.__metrics||(e.__metrics={rate_limit_hits:0,errors:{},startTime:Date.now()}),e.__metrics};function o(){let e=s();e.rate_limit_hits+=1}function i(e){let r=s();r.errors[e]=(r.errors[e]||0)+1}function a(){let e=s();return{rate_limit_hits:e.rate_limit_hits,errors_total:Object.values(e.errors).reduce((e,r)=>e+r,0),errors_by_code:{...e.errors},uptime_ms:Date.now()-e.startTime}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,5972,8355],()=>t(689958));module.exports=s})();