"use strict";(()=>{var e={};e.id=8208,e.ids=[8208],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},2118:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>v,patchFetch:()=>g,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var a={};s.r(a),s.d(a,{GET:()=>p});var r=s(49303),i=s(88716),o=s(60670),n=s(87070),c=s(91630);async function p(){try{let e=c.ZP.getInstance(),t=await e.listVoices();return n.NextResponse.json({success:!0,voices:t,count:t.length})}catch(e){return console.error("Erro ao buscar vozes ElevenLabs:",e),n.NextResponse.json({success:!1,error:"Erro ao buscar vozes ElevenLabs",details:e instanceof Error?e.message:"Erro desconhecido"},{status:500})}}let l=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/tts/elevenlabs/voices/route",pathname:"/api/tts/elevenlabs/voices",filename:"route",bundlePath:"app/api/tts/elevenlabs/voices/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\tts\\elevenlabs\\voices\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:h}=l,v="/api/tts/elevenlabs/voices/route";function g(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},91630:(e,t,s)=>{s.d(t,{O_:()=>n,ZP:()=>c});var a=s(61657),r=s(84770),i=s.n(r);class o{constructor(e={}){this.apiKey=e.apiKey||process.env.ELEVENLABS_API_KEY||"";let t=process.env.SUPABASE_SERVICE_ROLE_KEY;this.supabase=(0,a.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co",t)}static getInstance(){return o.instance||(o.instance=new o),o.instance}async generateSpeech(e){if(!this.apiKey)throw Error("ElevenLabs API Key not configured");let t=e.voiceId||e.voice_id||"21m00Tcm4TlvDq8ikWAM",s=e.modelId||e.model_id||"eleven_multilingual_v2",a=e.voice_settings||{stability:.5,similarity_boost:.75},r=i().createHash("md5").update(`${t}-${e.text}-${JSON.stringify(a)}`).digest("hex"),o=`tts/${r}.mp3`,{data:n}=await this.supabase.storage.from("assets").download(o);if(n)return console.log(`ðŸŽ¤ TTS Cache Hit: ${o}`),await n.arrayBuffer();console.log(`ðŸŽ¤ Generating TTS for: "${e.text.substring(0,20)}..."`);let c=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${t}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.apiKey},body:JSON.stringify({text:e.text,model_id:s,voice_settings:a})});if(!c.ok){let e=await c.text();throw Error(`ElevenLabs API Error: ${c.status} - ${e}`)}let p=await c.arrayBuffer(),{error:l}=await this.supabase.storage.from("assets").upload(o,p,{contentType:"audio/mpeg",upsert:!0});return l&&console.warn("âš ï¸ Failed to cache TTS audio:",l.message),p}async listVoices(){if(!this.apiKey)return[];let e=await fetch("https://api.elevenlabs.io/v1/voices",{headers:{"xi-api-key":this.apiKey}});return e.ok?(await e.json()).voices:[]}async getVoices(){return(await this.listVoices()).map(e=>({id:e.voice_id,name:e.name,category:e.category,description:e.description,labels:e.labels,preview_url:e.preview_url,settings:e.settings,language:e.labels?.language||"unknown",gender:e.labels?.gender||"unknown",accent:e.labels?.accent||"unknown"}))}async getUserInfo(){if(!this.apiKey)return null;let e=await fetch("https://api.elevenlabs.io/v1/user",{headers:{"xi-api-key":this.apiKey}});if(!e.ok)throw Error(`Failed to fetch user info: ${e.statusText}`);return await e.json()}async cloneVoice(e,t,s){if(!this.apiKey)throw Error("ElevenLabs API Key not configured");let a=new FormData;a.append("name",e),t&&a.append("description",t),s.forEach(e=>{a.append("files",e)});let r=await fetch("https://api.elevenlabs.io/v1/voices/add",{method:"POST",headers:{"xi-api-key":this.apiKey},body:a});if(!r.ok){let e=await r.text();throw Error(`ElevenLabs API Error: ${r.status} - ${e}`)}return await r.json()}}let n=new o,c=o}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,5972,1657],()=>s(2118));module.exports=a})();