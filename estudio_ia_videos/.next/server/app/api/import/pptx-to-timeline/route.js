"use strict";(()=>{var e={};e.id=5280,e.ids=[5280],e.modules={572934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},554580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},345869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},627790:e=>{e.exports=require("assert")},978893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},532615:e=>{e.exports=require("http")},735240:e=>{e.exports=require("https")},986624:e=>{e.exports=require("querystring")},917360:e=>{e.exports=require("url")},521764:e=>{e.exports=require("util")},671568:e=>{e.exports=require("zlib")},326193:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var o={};r.r(o),r.d(o,{POST:()=>p});var i=r(349303),n=r(88716),a=r(60670),s=r(387070),d=r(95715);async function p(e){try{let t=await (0,d.getServerSession)(Object(function(){var e=Error("Cannot find module '@/lib/auth/auth-config'");throw e.code="MODULE_NOT_FOUND",e}()));if(!t?.user?.id)return s.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{pptxId:r,projectName:o,slides:i,config:n}=await e.json();if(!r||!o||!i)return s.NextResponse.json({error:"Dados incompletos"},{status:400});let a=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).project.create({data:{name:o,description:`Importado de PPTX (${i.length} slides)`,type:"pptx-import",userId:t.user.id,status:"DRAFT",totalSlides:i.length,slidesData:{pptxId:r,importConfig:n,slides:i.length}}}),p=0,u=[];for(let e of i)e.selected&&(u.push({type:"image",trackIndex:0,startTime:p,duration:e.duration,source:e.thumbnailUrl,metadata:{slideNumber:e.slideNumber,title:e.title,notes:e.notes}}),e.title&&u.push({type:"text",trackIndex:1,startTime:p,duration:e.duration,content:e.title,style:{fontSize:48,fontWeight:"bold",color:"#ffffff",position:"top"}}),n.addAudio&&"tts"===n.audioType&&e.notes&&u.push({type:"audio",trackIndex:2,startTime:p,duration:e.duration,content:e.notes,metadata:{voiceId:n.voiceId,provider:"elevenlabs"}}),"none"!==n.transition&&u.push({type:"transition",trackIndex:0,startTime:p+e.duration-n.transitionDuration,duration:n.transitionDuration,effect:n.transition}),p+=e.duration);let c={tracks:[{index:0,type:"video",name:"Slides",clips:[]},{index:1,type:"text",name:"T\xedtulos",clips:[]},{index:2,type:"audio",name:"Narra\xe7\xe3o",clips:[]}],duration:p,clips:u},l=await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).timeline.create({data:{projectId:a.id,tracks:c,totalDuration:Math.round(1e3*p),settings:{resolution:"1080p",fps:30,duration:p}}});return await Object(function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}()).analyticsEvent.create({data:{userId:t.user.id,category:"pptx",action:"import",metadata:{projectId:a.id,timelineId:l.id,slidesCount:i.length,clipsCreated:u.length,duration:p}}}),s.NextResponse.json({success:!0,projectId:a.id,timelineId:l.id,clipsCreated:u.length,duration:p})}catch(e){return console.error("Erro ao converter PPTX para timeline:",e),s.NextResponse.json({error:"Erro ao converter PPTX"},{status:500})}}(function(){var e=Error("Cannot find module '@/lib/auth/auth-config'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/lib/prisma'");throw e.code="MODULE_NOT_FOUND",e}();let u=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/import/pptx-to-timeline/route",pathname:"/api/import/pptx-to-timeline",filename:"route",bundlePath:"app/api/import/pptx-to-timeline/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\import\\pptx-to-timeline\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m}=u,x="/api/import/pptx-to-timeline/route";function f(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972,5715],()=>r(326193));module.exports=o})();