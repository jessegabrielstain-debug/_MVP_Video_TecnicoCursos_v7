"use strict";(()=>{var e={};e.id=564,e.ids=[564],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},77047:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>b,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{GET:()=>u,POST:()=>p});var o=s(49303),a=s(88716),i=s(60670),n=s(87070),c=s(36472);async function p(e){try{let{name:t,type:s,userId:r,tasks:o,config:a}=await e.json();if(!t||!s||!r||!o||0===o.length)return n.NextResponse.json({error:"Missing required fields: name, type, userId, tasks"},{status:400});let i=await c.y.createBatchJob(t,s,r,o,a);return n.NextResponse.json({success:!0,job:{id:i.id,name:i.name,type:i.type,status:i.status,totalTasks:i.totalTasks,progress:i.progress,createdAt:i.createdAt}})}catch(e){return console.error("Batch job creation error:",e),n.NextResponse.json({error:e instanceof Error?e.message:"Batch job creation failed"},{status:500})}}async function u(e){try{let t=e.nextUrl.searchParams.get("jobId");if(!t)return n.NextResponse.json({error:"Missing jobId parameter"},{status:400});let s=c.y.getJob(t);if(!s)return n.NextResponse.json({error:"Job not found"},{status:404});return n.NextResponse.json({success:!0,job:{id:s.id,name:s.name,type:s.type,status:s.status,priority:s.priority,totalTasks:s.totalTasks,completedTasks:s.completedTasks,failedTasks:s.failedTasks,progress:s.progress,estimatedTime:s.estimatedTime,remainingTime:s.remainingTime,statistics:s.statistics,createdAt:s.createdAt,startedAt:s.startedAt,completedAt:s.completedAt,error:s.error}})}catch(e){return console.error("Batch job status error:",e),n.NextResponse.json({error:e instanceof Error?e.message:"Failed to get job status"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/batch/create/route",pathname:"/api/batch/create",filename:"route",bundlePath:"app/api/batch/create/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\batch\\create\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:h}=d,g="/api/batch/create/route";function b(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},36472:(e,t,s)=>{s.d(t,{y:()=>o});class r{registerProcessor(e,t){this.processors.set(e,t)}async createBatchJob(e,t,s,r,o){let a=crypto.randomUUID(),i={id:a,name:e,type:t,userId:s,items:r,status:"pending",priority:"normal",progress:0,totalTasks:r.length,completedTasks:0,failedTasks:0,createdAt:new Date,config:o};return this.jobs.set(a,i),this.processJob(a).catch(console.error),i}async processJob(e){let t=this.jobs.get(e);if(!t)return;let s=this.processors.get(t.type);if(!s){t.status="failed",t.error=`No processor registered for type: ${t.type}`;return}t.status="processing",t.startedAt=new Date;try{for(let e=0;e<t.items.length;e++)await s.process(t.items[e]),t.completedTasks++,t.progress=t.completedTasks/t.totalTasks*100;t.status="completed",t.completedAt=new Date}catch(e){t.status="failed",t.error=e instanceof Error?e.message:"Unknown error"}}getJob(e){return this.jobs.get(e)}listJobs(){return Array.from(this.jobs.values())}async cancelJob(e){let t=this.jobs.get(e);return!!t&&"completed"!==t.status&&"failed"!==t.status&&(t.status="failed",t.error="Cancelled by user",!0)}pauseJob(e){let t=this.jobs.get(e);return!!t&&"processing"===t.status}resumeJob(e){return!!this.jobs.get(e)}setPriority(e,t){let s=this.jobs.get(e);return!!s&&(s.priority=t,!0)}constructor(){this.jobs=new Map,this.processors=new Map}}let o=new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>s(77047));module.exports=r})();