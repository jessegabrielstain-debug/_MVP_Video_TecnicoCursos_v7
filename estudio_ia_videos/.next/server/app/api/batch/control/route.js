"use strict";(()=>{var e={};e.id=3620,e.ids=[3620],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},62980:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>b,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{POST:()=>u});var o=s(49303),a=s(88716),i=s(60670),n=s(87070),c=s(36472);async function u(e){try{let{jobId:t,action:s,priority:r}=await e.json();if(!t||!s)return n.NextResponse.json({error:"Missing required fields: jobId, action"},{status:400});let o=!1;switch(s){case"pause":o=await c.y.pauseJob(t);break;case"resume":o=await c.y.resumeJob(t);break;case"cancel":o=await c.y.cancelJob(t);break;case"setPriority":if(!r)return n.NextResponse.json({error:"Priority is required for setPriority action"},{status:400});o=await c.y.setPriority(t,r);break;default:return n.NextResponse.json({error:`Invalid action: ${s}`},{status:400})}if(!o)return n.NextResponse.json({error:"Action failed. Check job status and action compatibility."},{status:400});return n.NextResponse.json({success:!0,message:`Job ${s} successful`})}catch(e){return console.error("Batch control error:",e),n.NextResponse.json({error:e instanceof Error?e.message:"Batch control failed"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/batch/control/route",pathname:"/api/batch/control",filename:"route",bundlePath:"app/api/batch/control/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\batch\\control\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:h}=p,b="/api/batch/control/route";function m(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},36472:(e,t,s)=>{s.d(t,{y:()=>o});class r{registerProcessor(e,t){this.processors.set(e,t)}async createBatchJob(e,t,s,r,o){let a=crypto.randomUUID(),i={id:a,name:e,type:t,userId:s,items:r,status:"pending",priority:"normal",progress:0,totalTasks:r.length,completedTasks:0,failedTasks:0,createdAt:new Date,config:o};return this.jobs.set(a,i),this.processJob(a).catch(console.error),i}async processJob(e){let t=this.jobs.get(e);if(!t)return;let s=this.processors.get(t.type);if(!s){t.status="failed",t.error=`No processor registered for type: ${t.type}`;return}t.status="processing",t.startedAt=new Date;try{for(let e=0;e<t.items.length;e++)await s.process(t.items[e]),t.completedTasks++,t.progress=t.completedTasks/t.totalTasks*100;t.status="completed",t.completedAt=new Date}catch(e){t.status="failed",t.error=e instanceof Error?e.message:"Unknown error"}}getJob(e){return this.jobs.get(e)}listJobs(){return Array.from(this.jobs.values())}async cancelJob(e){let t=this.jobs.get(e);return!!t&&"completed"!==t.status&&"failed"!==t.status&&(t.status="failed",t.error="Cancelled by user",!0)}pauseJob(e){let t=this.jobs.get(e);return!!t&&"processing"===t.status}resumeJob(e){return!!this.jobs.get(e)}setPriority(e,t){let s=this.jobs.get(e);return!!s&&(s.priority=t,!0)}constructor(){this.jobs=new Map,this.processors=new Map}}let o=new r}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>s(62980));module.exports=r})();