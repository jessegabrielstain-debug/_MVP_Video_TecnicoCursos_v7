"use strict";(()=>{var o={};o.id=3897,o.ids=[3897],o.modules={220399:o=>{o.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:o=>{o.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},116118:(o,e,t)=>{t.r(e),t.d(e,{originalPathname:()=>l,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>u,staticGenerationAsyncStorage:()=>p});var i={};t.r(i),t.d(i,{POST:()=>s});var n=t(349303),r=t(88716),a=t(60670);async function s(o){try{let{uploadId:e,userId:t,roomId:i,filename:n,progress:r,total:a,speed:s,eta:c,phase:d,error:p}=await o.json(),u=a>0?r/a*100:0,l=Object(function(){var o=Error("Cannot find module '@/lib/notifications/websocket-server'");throw o.code="MODULE_NOT_FOUND",o}())();switch(d){case"preparing":{let o={id:`upload_${e}_preparing`,type:"upload_progress",title:"Preparando Upload",message:`Preparando upload do arquivo ${n}`,priority:"medium",timestamp:Date.now(),userId:t,roomId:i,data:{uploadId:e,filename:n,progress:0,total:a,percentage:0,phase:"preparing"}};i?(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).broadcastToRoom(i,o),l?.sendNotificationToRoom(i,o)):(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).sendToUser(t,o),l?.sendNotificationToUser(t,o))}break;case"uploading":{let o={id:`upload_${e}_progress`,type:"upload_progress",title:"Upload em Andamento",message:`Enviando ${n} - ${u.toFixed(1)}%`,priority:"medium",timestamp:Date.now(),userId:t,roomId:i,data:{uploadId:e,filename:n,progress:r,total:a,percentage:u,speed:s,eta:c,phase:"uploading"}};i?(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).broadcastToRoom(i,o),l?.sendNotificationToRoom(i,o)):(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).sendToUser(t,o),l?.sendNotificationToUser(t,o))}break;case"processing":{let o={id:`upload_${e}_processing`,type:"video_processing",title:"Processando Arquivo",message:`Processando ${n}...`,priority:"medium",timestamp:Date.now(),userId:t,roomId:i,data:{uploadId:e,filename:n,progress:r,total:a,percentage:u,phase:"processing"}};i?(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).broadcastToRoom(i,o),l?.sendNotificationToRoom(i,o)):(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).sendToUser(t,o),l?.sendNotificationToUser(t,o))}break;case"complete":{let o={id:`upload_${e}_complete`,type:"upload_complete",title:"Upload Conclu\xeddo",message:`${n} foi enviado com sucesso!`,priority:"low",timestamp:Date.now(),userId:t,roomId:i,persistent:!0,data:{uploadId:e,filename:n,progress:a,total:a,percentage:100,phase:"complete"}};i?(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).broadcastToRoom(i,o),l?.sendNotificationToRoom(i,o)):(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).sendToUser(t,o),l?.sendNotificationToUser(t,o))}break;case"error":{let o={id:`upload_${e}_error`,type:"upload_error",title:"Erro no Upload",message:`Falha ao enviar ${n}: ${p||"Erro desconhecido"}`,priority:"high",timestamp:Date.now(),userId:t,roomId:i,persistent:!0,data:{uploadId:e,filename:n,error:p||"Erro desconhecido",phase:"error"}};i?(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).broadcastToRoom(i,o),l?.sendNotificationToRoom(i,o)):(Object(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o}()).sendToUser(t,o),l?.sendNotificationToUser(t,o))}break;default:return Response.json({success:!1,error:"Invalid phase"},{status:400})}return Response.json({success:!0,message:"Notification sent",phase:d,percentage:u.toFixed(1)})}catch(o){return console.error("Error sending upload notification:",o),Response.json({success:!1,error:o instanceof Error?o.message:"Unknown error"},{status:500})}}(function(){var o=Error("Cannot find module '@/lib/notifications/notification-manager'");throw o.code="MODULE_NOT_FOUND",o})(),function(){var o=Error("Cannot find module '@/lib/notifications/websocket-server'");throw o.code="MODULE_NOT_FOUND",o}();let c=new n.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/notifications/upload/route",pathname:"/api/notifications/upload",filename:"route",bundlePath:"app/api/notifications/upload/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\notifications\\upload\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:u}=c,l="/api/notifications/upload/route";function f(){return(0,a.patchFetch)({serverHooks:u,staticGenerationAsyncStorage:p})}},349303:(o,e,t)=>{o.exports=t(430517)}};var e=require("../../../../webpack-runtime.js");e.C(o);var t=o=>e(e.s=o),i=e.X(0,[8948],()=>t(116118));module.exports=i})();