"use strict";(()=>{var e={};e.id=8061,e.ids=[8061],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},79702:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>z,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var i={};r.r(i),r.d(i,{GET:()=>u});var s=r(49303),a=r(88716),n=r(60670),c=r(87070),h=r(73055);class o{set(e,t,r,i){for(;this.currentSize+t.length>this.maxSize&&this.cache.size>0;){let e=this.cache.keys().next().value;e&&this.delete(e)}let s={id:crypto.randomUUID(),key:e,buffer:t,format:r,duration:i,size:t.length,cachedAt:new Date};this.cache.set(e,s),this.currentSize+=t.length}get(e){return this.cache.get(e)||null}has(e){return this.cache.has(e)}delete(e){let t=this.cache.get(e);return!!t&&(this.currentSize-=t.size,this.cache.delete(e))}clear(){this.cache.clear(),this.currentSize=0}getStats(){let e=Array.from(this.cache.values()).reduce((e,t)=>e+t.duration,0);return{items:this.cache.size,size:this.currentSize,maxSize:this.maxSize,totalDuration:e}}constructor(){this.cache=new Map,this.maxSize=536870912,this.currentSize=0}}let l=new o;async function u(e,{params:t}){try{let e=t.filename;if(!e)return new c.NextResponse("Filename required",{status:400});console.log(`ðŸ“ Servindo arquivo do cache: ${e}`);let r=h.G.get(e),i=r?null:l.get(e),s=r||i;if(!s)return console.log(`âŒ Arquivo n\xe3o encontrado em nenhum cache: ${e}`),new c.NextResponse("File not found",{status:404});let a="application/octet-stream";"mp4"===s.format?a="video/mp4":"mp3"===s.format?a="audio/mpeg":s.format.includes("/")&&(a=s.format);let n=new Headers;return n.set("Content-Type",a),n.set("Content-Length",s.buffer.length.toString()),n.set("Cache-Control","public, max-age=300"),n.set("Access-Control-Allow-Origin","*"),(a.startsWith("video/")||a.startsWith("audio/"))&&n.set("Accept-Ranges","bytes"),console.log(`âœ… Servindo ${e} do cache (${s.buffer.length} bytes)`),new c.NextResponse(new Uint8Array(s.buffer),{status:200,headers:n})}catch(e){return console.error("âŒ Erro ao servir arquivo do cache:",e),new c.NextResponse("Internal Server Error",{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/files/cache/[filename]/route",pathname:"/api/files/cache/[filename]",filename:"route",bundlePath:"app/api/files/cache/[filename]/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\files\\cache\\[filename]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g}=d,f="/api/files/cache/[filename]/route";function z(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},73055:(e,t,r)=>{r.d(t,{G:()=>n});var i=r(84770),s=r.n(i);class a{set(e,t,r){for(;this.currentSize+t.length>this.maxSize&&this.cache.size>0;){let e=this.cache.keys().next().value;e&&this.delete(e)}let i={id:s().randomUUID(),key:e,buffer:t,format:r,size:t.length,cachedAt:new Date};this.cache.set(e,i),this.currentSize+=t.length}get(e){return this.cache.get(e)||null}has(e){return this.cache.has(e)}delete(e){let t=this.cache.get(e);return!!t&&(this.currentSize-=t.size,this.cache.delete(e))}clear(){this.cache.clear(),this.currentSize=0}getStats(){return{items:this.cache.size,size:this.currentSize,maxSize:this.maxSize}}constructor(){this.cache=new Map,this.maxSize=1073741824,this.currentSize=0}}let n=new a}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,5972],()=>r(79702));module.exports=i})();