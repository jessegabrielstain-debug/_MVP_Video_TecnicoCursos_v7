"use strict";(()=>{var e={};e.id=4194,e.ids=[4194],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},988955:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>p,staticGenerationAsyncStorage:()=>h});var r={};t.r(r),t.d(r,{GET:()=>d,POST:()=>l});var o=t(349303),n=t(88716),i=t(60670),c=t(387070);!function(){var e=Error("Cannot find module '@/lib/cache/cache-middleware'");throw e.code="MODULE_NOT_FOUND",e}();let s=async(e=1e3)=>(await new Promise(a=>setTimeout(a,Math.max(500,e))),{id:Math.random().toString(36).substring(7),timestamp:new Date().toISOString(),complexity:e,data:Array.from({length:e},(e,a)=>({index:a,value:1e3*Math.random(),category:["A","B","C","D"][Math.floor(4*Math.random())],nested:{subValue:100*Math.random(),flag:Math.random()>.5}})),metadata:{processedAt:new Date().toISOString(),processingTime:Math.max(500,e),fromCache:!1}});async function d(e){try{let{searchParams:a}=new URL(e.url),t=parseInt(a.get("complexity")||"1000"),r="true"===a.get("refresh"),o=a.get("category")||"default",n=`demo-data:${o}:complexity-${t}`;r&&await Object(function(){var e=Error("Cannot find module '@/lib/cache/cache-middleware'");throw e.code="MODULE_NOT_FOUND",e}()).invalidateResource("demo",n);let i=Date.now(),d=await Object(function(){var e=Error("Cannot find module '@/lib/cache/cache-middleware'");throw e.code="MODULE_NOT_FOUND",e}()).withCache(n,async()=>await s(t),{ttl:6e5,tags:["demo",`category:${o}`,"heavy-data"]}),l=Date.now()-i,u=l<100;return c.NextResponse.json({...d,metadata:{...d.metadata,fromCache:u,requestProcessingTime:l,cacheKey:n}},{headers:{"Cache-Control":"public, max-age=600, stale-while-revalidate=300","X-Cache-Key":n,"X-Processing-Time":l.toString(),"X-From-Cache":u.toString(),"X-Complexity":t.toString()}})}catch(e){return console.error("Erro na API de demonstra\xe7\xe3o:",e),c.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function l(e){try{let{action:a,target:t,pattern:r}=await e.json();switch(a){case"invalidate-by-tag":if(!t)return c.NextResponse.json({error:"Tag \xe9 obrigat\xf3ria"},{status:400});let o=await Object(function(){var e=Error("Cannot find module '@/lib/cache/cache-middleware'");throw e.code="MODULE_NOT_FOUND",e}()).invalidateResource("demo",t);return c.NextResponse.json({message:`Cache invalidado por tag: ${t}`,action:"invalidate-by-tag",target:t,count:o});case"invalidate-by-pattern":if(!r)return c.NextResponse.json({error:"Padr\xe3o \xe9 obrigat\xf3rio"},{status:400});let{cacheMiddleware:n}=await Promise.resolve().then(function(){var e=Error("Cannot find module '@/lib/cache/cache-middleware'");throw e.code="MODULE_NOT_FOUND",e}),i=await n.invalidate([r]);return c.NextResponse.json({message:`Cache invalidado por padr\xe3o: ${r}`,action:"invalidate-by-pattern",pattern:r,count:i});case"clear-all-demo":let{cacheManager:s}=await Promise.resolve().then(function(){var e=Error("Cannot find module '@/lib/cache/cache-manager'");throw e.code="MODULE_NOT_FOUND",e});return await s.clear("api"),c.NextResponse.json({message:"Todo cache de demonstra\xe7\xe3o foi limpo",action:"clear-all-demo"});default:return c.NextResponse.json({error:"A\xe7\xe3o n\xe3o reconhecida"},{status:400})}}catch(e){return console.error("Erro na opera\xe7\xe3o de cache:",e),c.NextResponse.json({error:"Erro na opera\xe7\xe3o de cache"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cache-demo/route",pathname:"/api/cache-demo",filename:"route",bundlePath:"app/api/cache-demo/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\cache-demo\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:p}=u,g="/api/cache-demo/route";function v(){return(0,i.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:h})}}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[8948,5972],()=>t(988955));module.exports=r})();