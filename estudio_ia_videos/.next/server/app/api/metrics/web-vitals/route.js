"use strict";(()=>{var e={};e.id=7725,e.ids=[7725],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},969247:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>p});var a=r(349303),o=r(88716),n=r(60670),i=r(387070);let l=[];async function p(e){try{let t=await e.json();return l.push({...t,receivedAt:new Date().toISOString(),userAgent:e.headers.get("user-agent")}),l.length>1e3&&(l=l.slice(-1e3)),await fetch("/api/metrics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metric:t.name.toLowerCase()+"_"+("FID"===t.name?"milliseconds":"CLS"===t.name?"score":"seconds"),value:t.value,operation:"add"})}),i.NextResponse.json({success:!0,message:"Web Vital reportado"})}catch(e){return console.error("Erro ao processar Web Vital:",e),i.NextResponse.json({error:"Erro ao processar Web Vital"},{status:500})}}async function c(e){try{let t=parseInt(e.nextUrl.searchParams.get("limit")||"100"),r=e.nextUrl.searchParams.get("metric"),s=l;r&&(s=s.filter(e=>e.name===r));let a={total:(s=s.slice(-t)).length,averages:{},p95:{},ratings:{}};for(let e of["LCP","FID","FCP","CLS","TTFB"]){let t=s.filter(t=>t.name===e);if(t.length>0){let r=t.map(e=>e.value).sort((e,t)=>e-t);a.averages[e]=r.reduce((e,t)=>e+t,0)/r.length,a.p95[e]=r[Math.floor(.95*r.length)],a.ratings[e]={good:t.filter(e=>"good"===e.rating).length,needsImprovement:t.filter(e=>"needs-improvement"===e.rating).length,poor:t.filter(e=>"poor"===e.rating).length}}}return i.NextResponse.json({success:!0,reports:s,stats:a,timestamp:new Date().toISOString()})}catch(e){return console.error("Erro ao buscar Web Vitals:",e),i.NextResponse.json({error:"Erro ao buscar Web Vitals"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/metrics/web-vitals/route",pathname:"/api/metrics/web-vitals",filename:"route",bundlePath:"app/api/metrics/web-vitals/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\metrics\\web-vitals\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=u,h="/api/metrics/web-vitals/route";function v(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(969247));module.exports=s})();