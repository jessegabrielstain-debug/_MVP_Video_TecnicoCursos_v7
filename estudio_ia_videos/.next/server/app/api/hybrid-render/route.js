(()=>{var t={};t.id=4530,t.ids=[4530,7153,3936,4665],t.modules={14464:t=>{function e(t){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=14464,t.exports=e},8541:t=>{function e(t){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=8541,t.exports=e},4665:t=>{function e(t){return Promise.resolve().then(()=>{var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=4665,t.exports=e},42916:t=>{function e(t){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=42916,t.exports=e},12308:t=>{function e(t){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=12308,t.exports=e},72934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:t=>{"use strict";t.exports=require("assert")},61212:t=>{"use strict";t.exports=require("async_hooks")},78893:t=>{"use strict";t.exports=require("buffer")},61282:t=>{"use strict";t.exports=require("child_process")},84770:t=>{"use strict";t.exports=require("crypto")},27920:t=>{"use strict";t.exports=require("diagnostics_channel")},80665:t=>{"use strict";t.exports=require("dns")},17702:t=>{"use strict";t.exports=require("events")},92048:t=>{"use strict";t.exports=require("fs")},20629:t=>{"use strict";t.exports=require("fs/promises")},32615:t=>{"use strict";t.exports=require("http")},35240:t=>{"use strict";t.exports=require("https")},85807:t=>{"use strict";t.exports=require("module")},98216:t=>{"use strict";t.exports=require("net")},19801:t=>{"use strict";t.exports=require("os")},55315:t=>{"use strict";t.exports=require("path")},96119:t=>{"use strict";t.exports=require("perf_hooks")},35816:t=>{"use strict";t.exports=require("process")},68621:t=>{"use strict";t.exports=require("punycode")},76162:t=>{"use strict";t.exports=require("stream")},74026:t=>{"use strict";t.exports=require("string_decoder")},82452:t=>{"use strict";t.exports=require("tls")},74175:t=>{"use strict";t.exports=require("tty")},17360:t=>{"use strict";t.exports=require("url")},21764:t=>{"use strict";t.exports=require("util")},6162:t=>{"use strict";t.exports=require("worker_threads")},71568:t=>{"use strict";t.exports=require("zlib")},17718:t=>{"use strict";t.exports=require("node:child_process")},65714:t=>{"use strict";t.exports=require("node:diagnostics_channel")},15673:t=>{"use strict";t.exports=require("node:events")},87561:t=>{"use strict";t.exports=require("node:fs")},88849:t=>{"use strict";t.exports=require("node:http")},22286:t=>{"use strict";t.exports=require("node:https")},85690:t=>{"use strict";t.exports=require("node:inspector")},82033:t=>{"use strict";t.exports=require("node:module")},87503:t=>{"use strict";t.exports=require("node:net")},70612:t=>{"use strict";t.exports=require("node:os")},49411:t=>{"use strict";t.exports=require("node:path")},51747:t=>{"use strict";t.exports=require("node:readline")},84492:t=>{"use strict";t.exports=require("node:stream")},31764:t=>{"use strict";t.exports=require("node:tls")},47261:t=>{"use strict";t.exports=require("node:util")},24086:t=>{"use strict";t.exports=require("node:worker_threads")},65628:t=>{"use strict";t.exports=require("node:zlib")},46676:(t,e,r)=>{"use strict";r.r(e),r.d(e,{originalPathname:()=>P,patchFetch:()=>C,requestAsyncStorage:()=>A,routeModule:()=>O,serverHooks:()=>I,staticGenerationAsyncStorage:()=>S});var n={};r.r(n),r.d(n,{GET:()=>F,POST:()=>E});var i=r(49303),o=r(88716),s=r(60670),u=r(87070),a=r(60211),c=r.n(a),l=r(92048),p=r(55315),f=r.n(p),h=r(84770),d=r.n(h);class m{async generateProxy(t,e,r=this.defaultConfigs["720p"]){let n=await this.generateFileHash(t),i=`proxy_${n}_${r.resolution}.${r.format}`,o=f().join(e,i);if(this.proxyCache.has(n)){let t=this.proxyCache.get(n);try{return await l.promises.access(t.proxyPath),t}catch{this.proxyCache.delete(n)}}let s=await this.createProxy(t,o,r);return this.proxyCache.set(n,s),s}async createProxy(t,e,r){return new Promise((n,i)=>{c()(t).videoCodec(r.codec).size({"360p":"640x360","480p":"854x480","720p":"1280x720"}[r.resolution]).videoBitrate(r.bitrate).audioCodec("aac").audioBitrate("128k").outputFormat(r.format).on("start",t=>{console.log("[ProxyGenerator] FFmpeg command:",t)}).on("progress",t=>{console.log(`[ProxyGenerator] Progress: ${t.percent}%`)}).on("end",async()=>{try{let i=await l.promises.stat(e),o=await this.getVideoInfo(e),s={originalPath:t,proxyPath:e,resolution:r.resolution,bitrate:r.bitrate,fileSize:i.size,duration:o.duration,createdAt:new Date,hash:await this.generateFileHash(t)};n(s)}catch(t){i(t)}}).on("error",t=>{console.error("[ProxyGenerator] FFmpeg error:",t),i(t)}).save(e)})}async getVideoInfo(t){return new Promise((e,r)=>{c().ffprobe(t,(t,n)=>{if(t){r(t);return}e({duration:n.format.duration||0})})})}async generateFileHash(t){let e=await l.promises.readFile(t);return d().createHash("md5").update(e).digest("hex").substring(0,16)}async getOrCreateProxy(t,e,r){let n=await this.generateFileHash(t);if(this.proxyCache.has(n)){let t=this.proxyCache.get(n);try{return await l.promises.access(t.proxyPath),t}catch{this.proxyCache.delete(n)}}return this.generateProxy(t,e,r)}async cleanup(t=864e5){let e=new Date,r=[];for(let[n,i]of this.proxyCache.entries())e.getTime()-i.createdAt.getTime()>t&&r.push(n);for(let t of r){let e=this.proxyCache.get(t);if(e)try{await l.promises.unlink(e.proxyPath),this.proxyCache.delete(t)}catch(t){console.error(`[ProxyGenerator] Failed to delete proxy: ${t}`)}}}getCacheStats(){let t=0;for(let e of this.proxyCache.values())t+=e.fileSize;return{total:this.proxyCache.size,totalSize:t}}constructor(){this.proxyCache=new Map,this.defaultConfigs={"360p":{resolution:"360p",bitrate:"500k",codec:"h264",format:"mp4"},"480p":{resolution:"480p",bitrate:"800k",codec:"h264",format:"mp4"},"720p":{resolution:"720p",bitrate:"1500k",codec:"h264",format:"mp4"}}}}var g=r(26608),v=r(61657),y=r(20629),w=r.n(y),x=r(54211);class b{constructor(t,e,r){this.supabaseUrl=t,this.supabaseKey=e,this.redisUrl=r,this.worker=null,this.proxyGenerator=new m,this.supabase=(0,v.eI)(t,e,{auth:{autoRefreshToken:!1,persistSession:!1}})}async startHybridRender(t){x.kg.info(`[CloudOrchestrator] Starting hybrid render for job ${t.id}`);try{x.kg.info(`[CloudOrchestrator] Generating proxies for ${t.assets.original.length} assets`);let e=await this.generateProxies(t);return t.assets.proxies=e,t.status="proxy_ready",t.proxyReadyAt=new Date,t.progress=25,await this.updateJobStatus(t),x.kg.info("[CloudOrchestrator] Queueing server render"),await this.queueServerRender(t),t.id}catch(e){throw x.kg.error(`[CloudOrchestrator] Hybrid render failed: ${e}`),t.status="failed",t.error=e instanceof Error?e.message:"Unknown error",await this.updateJobStatus(t),e}}async generateProxies(t){let e=f().join(process.cwd(),"public","proxies");await w().mkdir(e,{recursive:!0});let r=[];for(let n of t.assets.original)try{let i=await this.proxyGenerator.getOrCreateProxy(n,e,{resolution:t.settings.proxyResolution,bitrate:this.getBitrateForResolution(t.settings.proxyResolution),codec:"h264",format:"mp4"});r.push(i)}catch(t){throw x.kg.error(`[CloudOrchestrator] Failed to generate proxy for ${n}: ${t}`),t}return r}async queueServerRender(t){let e={jobId:t.id,projectId:t.projectId,userId:t.userId,timeline:t.timeline,settings:t.settings,proxyMetadata:t.assets.proxies},{Queue:n}=await Promise.resolve().then(r.bind(r,26608)),i=new n("cloud-render-jobs",{connection:{url:this.redisUrl}});await i.add("render",e,{jobId:t.id,priority:this.getPriority(t.settings.quality),attempts:3,backoff:{type:"exponential",delay:2e3}}),t.status="rendering",t.renderStartedAt=new Date,t.progress=50,await this.updateJobStatus(t)}async processServerRender(t){let{jobId:e,projectId:r,userId:n,timeline:i,settings:o,proxyMetadata:s}=t.data;x.kg.info(`[CloudOrchestrator] Processing server render for job ${e}`);try{await t.updateProgress(60);let r=i;o.enableSmartFlow&&(r=await this.applySmartFlow(i,s)),await t.updateProgress(75);let n=await this.renderHighQualityVideo(r,o.finalResolution,o.quality);await t.updateProgress(90);let u=await this.uploadToStorage(n,e);return await t.updateProgress(100),await this.supabase.from("render_jobs").update({status:"completed",progress:100,completed_at:new Date().toISOString(),output_url:u}).eq("id",e),x.kg.info(`[CloudOrchestrator] Server render completed for job ${e}`),{jobId:e,outputUrl:u,duration:i.duration||0}}catch(t){throw x.kg.error(`[CloudOrchestrator] Server render failed: ${t}`),await this.supabase.from("render_jobs").update({status:"failed",error_message:t instanceof Error?t.message:"Unknown error",completed_at:new Date().toISOString()}).eq("id",e),t}}async applySmartFlow(t,e){return t}async renderHighQualityVideo(t,e,n){let i=f().join(process.cwd(),"temp","renders");await w().mkdir(i,{recursive:!0});let o=f().join(i,`final_${Date.now()}.mp4`),{exec:s}=await Promise.resolve().then(r.t.bind(r,61282,23)),{promisify:u}=await Promise.resolve().then(r.t.bind(r,21764,23)),a=u(s),c=`ffmpeg -f lavfi -i testsrc=duration=10:size=${{"1080p":"1920x1080","4k":"3840x2160","8k":"7680x4320"}[e]}:rate=30 -c:v libx264 -b:v ${{draft:"2000k",production:"8000k",ultra:"20000k"}[n]} -preset slow -crf 18 "${o}"`;return await a(c),o}async uploadToStorage(t,e){let r=await w().readFile(t),n=`final_${e}.mp4`,{error:i}=await this.supabase.storage.from("videos").upload(n,r,{contentType:"video/mp4",upsert:!0});if(i)throw i;let{data:{publicUrl:o}}=this.supabase.storage.from("videos").getPublicUrl(n);return o}async updateJobStatus(t){await this.supabase.from("render_jobs").update({status:t.status,progress:t.progress,updated_at:new Date().toISOString()}).eq("id",t.id)}getBitrateForResolution(t){return({"360p":"500k","480p":"800k","720p":"1500k"})[t]||"1000k"}getPriority(t){return({draft:10,production:5,ultra:1})[t]||5}async startWorker(){if(this.worker){x.kg.warn("[CloudOrchestrator] Worker already running");return}this.worker=new g.Cc("cloud-render-jobs",async t=>this.processServerRender(t),{connection:{url:this.redisUrl},concurrency:2}),this.worker.on("ready",()=>{x.kg.info("[CloudOrchestrator] Worker ready for cloud render jobs")}),this.worker.on("failed",(t,e)=>{x.kg.error(`[CloudOrchestrator] Job ${t?.id} failed: ${e.message}`)}),this.worker.on("error",t=>{x.kg.error(`[CloudOrchestrator] Worker error: ${t.message}`)})}async stopWorker(){this.worker&&(await this.worker.close(),this.worker=null,x.kg.info("[CloudOrchestrator] Worker stopped"))}}var _=r(13936);let k=new b("https://ofhzrdiadxigrvmrhaiz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,process.env.REDIS_URL||"redis://localhost:6379");async function E(t){try{let e=(0,_.e)(),{data:{user:r},error:n}=await e.auth.getUser();if(n||!r)return u.NextResponse.json({error:"Unauthorized"},{status:401});let{projectId:i,timeline:o,assets:s,settings:a={}}=await t.json();if(!i||!o||!s)return u.NextResponse.json({error:"Missing required fields: projectId, timeline, assets"},{status:400});let c=`hybrid_${Date.now()}_${r.id.substring(0,8)}`,l={id:c,projectId:i,userId:r.id,timeline:o,settings:{proxyResolution:a.proxyResolution||"720p",finalResolution:a.finalResolution||"1080p",enableSmartFlow:a.enableSmartFlow||!1,quality:a.quality||"production"},assets:{original:s.original||[]},status:"pending",progress:0,createdAt:new Date};x.kg.info(`[HybridRenderAPI] Starting hybrid render job ${c} for user ${r.id}`);let{error:p}=await e.from("render_jobs").insert({id:c,project_id:i,user_id:r.id,status:"pending",progress:0,settings:l.settings,created_at:l.createdAt.toISOString(),updated_at:l.createdAt.toISOString()});if(p)return x.kg.error(`[HybridRenderAPI] Database error: ${p}`),u.NextResponse.json({error:"Failed to create render job"},{status:500});return await k.startHybridRender(l),u.NextResponse.json({success:!0,jobId:c,message:"Hybrid render job started successfully",status:"proxy_generation_started",estimatedTime:{proxyGeneration:"2-5 minutes",serverRender:"5-15 minutes"}})}catch(t){return x.kg.error(`[HybridRenderAPI] Error: ${t}`),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function F(t){try{let e=(0,_.e)(),{data:{user:r},error:n}=await e.auth.getUser();if(n||!r)return u.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:i}=new URL(t.url),o=i.get("jobId");if(!o){let{data:t,error:n}=await e.from("render_jobs").select("*").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(50);if(n)return x.kg.error(`[HybridRenderAPI] Database error: ${n}`),u.NextResponse.json({error:"Failed to fetch jobs"},{status:500});return u.NextResponse.json({success:!0,jobs:t||[]})}let{data:s,error:a}=await e.from("render_jobs").select("*").eq("id",o).eq("user_id",r.id).single();if(a||!s)return u.NextResponse.json({error:"Job not found"},{status:404});return u.NextResponse.json({success:!0,job:s})}catch(t){return x.kg.error(`[HybridRenderAPI] Error: ${t}`),u.NextResponse.json({error:"Internal server error"},{status:500})}}k.startWorker().catch(t=>{x.kg.error(`[HybridRenderAPI] Failed to start worker: ${t}`)}),process.on("SIGTERM",async()=>{x.kg.info("[HybridRenderAPI] Shutting down worker..."),await k.stopWorker()}),process.on("SIGINT",async()=>{x.kg.info("[HybridRenderAPI] Shutting down worker..."),await k.stopWorker()});let O=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/hybrid-render/route",pathname:"/api/hybrid-render",filename:"route",bundlePath:"app/api/hybrid-render/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\hybrid-render\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:A,staticGenerationAsyncStorage:S,serverHooks:I}=O,P="/api/hybrid-render/route";function C(){return(0,s.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:S})}},54211:(t,e,r)=>{"use strict";r.d(e,{Yd:()=>i,kg:()=>o});var n=r(77686);class i{constructor(t){this.isDevelopment=!1,this.minLevel=process.env.LOG_LEVEL||"info",this.namespace=null,this.levels={debug:0,info:1,warn:2,error:3},t&&(this.namespace=t)}shouldLog(t){return this.levels[t]>=this.levels[this.minLevel]}formatMessage(t){if(!this.isDevelopment)return JSON.stringify({level:t.level,message:t.message,timestamp:t.timestamp,...this.namespace?{namespace:this.namespace}:{},...t.context,...t.error?{error:{message:t.error.message,stack:t.error.stack,name:t.error.name}}:{}});let e=[`${{debug:"\uD83D\uDD0D",info:"ℹ️",warn:"⚠️",error:"❌"}[t.level]} [${t.level.toUpperCase()}]`,t.timestamp];return this.namespace&&e.push(`[${this.namespace}]`),e.push(t.message),t.context&&e.push(JSON.stringify(t.context,null,2)),t.error&&(e.push(`
Error: ${t.error.message}`),this.isDevelopment&&t.error.stack&&e.push(`
Stack: ${t.error.stack}`)),e.join(" ")}log(t,e,r,i){if(!this.shouldLog(t))return;let o={level:t,message:e,timestamp:new Date().toISOString(),context:r,error:i},s=this.formatMessage(o);switch(this.isDevelopment||("error"===t&&i?n.captureException(i,{extra:{...r,message:e}}):("error"===t||"warn"===t)&&n.captureMessage(e,{level:"warn"===t?"warning":"error",extra:r})),t){case"debug":this.isDevelopment&&console.debug(s);break;case"info":console.info(s);break;case"warn":console.warn(s);break;case"error":console.error(s)}}debug(t,e){this.log("debug",t,e)}info(t,e){this.log("info",t,e)}warn(t,e){this.log("warn",t,e)}error(t,e,r){this.log("error",t,r,e)}withContext(t){let e=new i(this.namespace||void 0),r=e.log.bind(e);return e.log=(e,n,i,o)=>{r(e,n,{...t,...i},o)},e}}let o=new i},13936:(t,e,r)=>{"use strict";r.d(e,{e:()=>s,getSupabaseForRequest:()=>a,p:()=>u});var n=r(67721),i=r(61657),o=r(71615);let s=()=>{let t=(0,o.cookies)();return(0,n.createServerClient)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{cookies:{get:e=>t.get(e)?.value,set(e,r,n){try{t.set({name:e,value:r,...n})}catch(t){}},remove(e,r){try{t.set({name:e,value:"",...r})}catch(t){}}}})},u=(0,i.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});function a(t){let e=t.headers.get("authorization")||t.headers.get("Authorization");return e?(0,i.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{global:{headers:{Authorization:e}},auth:{persistSession:!1,autoRefreshToken:!1}}):s()}},60211:(t,e,r)=>{t.exports=r(31097)},12696:(t,e,r)=>{"use strict";var n=r(92048),i=r(55315),o=r(15369),s=r(59775),u=/^\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/,a=/^\s*([D\.])([E\.])([VAS])([I\.])([L\.])([S\.]) ([^ ]+) +(.*)$/,c=/\(encoders:([^\)]+)\)/,l=/\(decoders:([^\)]+)\)/,p=/^\s*([VAS\.])([F\.])([S\.])([X\.])([B\.])([D\.]) ([^ ]+) +(.*)$/,f=/^\s*([D ])([E ])\s+([^ ]+)\s+(.*)$/,h=/\r\n|\r|\n/,d=/^(?: [T\.][S\.][C\.] )?([^ ]+) +(AA?|VV?|\|)->(AA?|VV?|\|) +(.*)$/,m={};t.exports=function(t){t.setFfmpegPath=function(t){return m.ffmpegPath=t,this},t.setFfprobePath=function(t){return m.ffprobePath=t,this},t.setFlvtoolPath=function(t){return m.flvtoolPath=t,this},t._forgetPaths=function(){delete m.ffmpegPath,delete m.ffprobePath,delete m.flvtoolPath},t._getFfmpegPath=function(t){if("ffmpegPath"in m)return t(null,m.ffmpegPath);o.waterfall([function(t){process.env.FFMPEG_PATH?n.exists(process.env.FFMPEG_PATH,function(e){e?t(null,process.env.FFMPEG_PATH):t(null,"")}):t(null,"")},function(t,e){if(t.length)return e(null,t);s.which("ffmpeg",function(t,r){e(t,r)})}],function(e,r){e?t(e):t(null,m.ffmpegPath=r||"")})},t._getFfprobePath=function(t){var e=this;if("ffprobePath"in m)return t(null,m.ffprobePath);o.waterfall([function(t){process.env.FFPROBE_PATH?n.exists(process.env.FFPROBE_PATH,function(e){t(null,e?process.env.FFPROBE_PATH:"")}):t(null,"")},function(t,e){if(t.length)return e(null,t);s.which("ffprobe",function(t,r){e(t,r)})},function(t,r){if(t.length)return r(null,t);e._getFfmpegPath(function(t,e){if(t)r(t);else if(e.length){var o=s.isWindows?"ffprobe.exe":"ffprobe",u=i.join(i.dirname(e),o);n.exists(u,function(t){r(null,t?u:"")})}else r(null,"")})}],function(e,r){e?t(e):t(null,m.ffprobePath=r||"")})},t._getFlvtoolPath=function(t){if("flvtoolPath"in m)return t(null,m.flvtoolPath);o.waterfall([function(t){process.env.FLVMETA_PATH?n.exists(process.env.FLVMETA_PATH,function(e){t(null,e?process.env.FLVMETA_PATH:"")}):t(null,"")},function(t,e){if(t.length)return e(null,t);process.env.FLVTOOL2_PATH?n.exists(process.env.FLVTOOL2_PATH,function(t){e(null,t?process.env.FLVTOOL2_PATH:"")}):e(null,"")},function(t,e){if(t.length)return e(null,t);s.which("flvmeta",function(t,r){e(t,r)})},function(t,e){if(t.length)return e(null,t);s.which("flvtool2",function(t,r){e(t,r)})}],function(e,r){e?t(e):t(null,m.flvtoolPath=r||"")})},t.availableFilters=t.getAvailableFilters=function(t){if("filters"in m)return t(null,m.filters);this._spawnFfmpeg(["-filters"],{captureStdout:!0,stdoutLines:0},function(e,r){if(e)return t(e);var n=r.get().split("\n"),i={},o={A:"audio",V:"video","|":"none"};n.forEach(function(t){var e=t.match(d);e&&(i[e[1]]={description:e[4],input:o[e[2].charAt(0)],multipleInputs:e[2].length>1,output:o[e[3].charAt(0)],multipleOutputs:e[3].length>1})}),t(null,m.filters=i)})},t.availableCodecs=t.getAvailableCodecs=function(t){if("codecs"in m)return t(null,m.codecs);this._spawnFfmpeg(["-codecs"],{captureStdout:!0,stdoutLines:0},function(e,r){if(e)return t(e);var n=r.get().split(h),i={};n.forEach(function(t){var e=t.match(u);if(e&&"="!==e[7]&&(i[e[7]]={type:({V:"video",A:"audio",S:"subtitle"})[e[3]],description:e[8],canDecode:"D"===e[1],canEncode:"E"===e[2],drawHorizBand:"S"===e[4],directRendering:"D"===e[5],weirdFrameTruncation:"T"===e[6]}),(e=t.match(a))&&"="!==e[7]){var r=i[e[7]]={type:({V:"video",A:"audio",S:"subtitle"})[e[3]],description:e[8],canDecode:"D"===e[1],canEncode:"E"===e[2],intraFrameOnly:"I"===e[4],isLossy:"L"===e[5],isLossless:"S"===e[6]},n=r.description.match(c);n=n?n[1].trim().split(" "):[];var o=r.description.match(l);if(o=o?o[1].trim().split(" "):[],n.length||o.length){var p={};s.copy(r,p),delete p.canEncode,delete p.canDecode,n.forEach(function(t){i[t]={},s.copy(p,i[t]),i[t].canEncode=!0}),o.forEach(function(t){t in i||(i[t]={},s.copy(p,i[t])),i[t].canDecode=!0})}}}),t(null,m.codecs=i)})},t.availableEncoders=t.getAvailableEncoders=function(t){if("encoders"in m)return t(null,m.encoders);this._spawnFfmpeg(["-encoders"],{captureStdout:!0,stdoutLines:0},function(e,r){if(e)return t(e);var n=r.get().split(h),i={};n.forEach(function(t){var e=t.match(p);e&&"="!==e[7]&&(i[e[7]]={type:({V:"video",A:"audio",S:"subtitle"})[e[1]],description:e[8],frameMT:"F"===e[2],sliceMT:"S"===e[3],experimental:"X"===e[4],drawHorizBand:"B"===e[5],directRendering:"D"===e[6]})}),t(null,m.encoders=i)})},t.availableFormats=t.getAvailableFormats=function(t){if("formats"in m)return t(null,m.formats);this._spawnFfmpeg(["-formats"],{captureStdout:!0,stdoutLines:0},function(e,r){if(e)return t(e);var n=r.get().split(h),i={};n.forEach(function(t){var e=t.match(f);e&&e[3].split(",").forEach(function(t){t in i||(i[t]={description:e[4],canDemux:!1,canMux:!1}),"D"===e[1]&&(i[t].canDemux=!0),"E"===e[2]&&(i[t].canMux=!0)})}),t(null,m.formats=i)})},t._checkCapabilities=function(t){var e=this;o.waterfall([function(t){e.availableFormats(t)},function(t,r){var n;return 1===(n=e._outputs.reduce(function(e,r){var n=r.options.find("-f",1);return!n||n[0]in t&&t[n[0]].canMux||e.push(n),e},[])).length?r(Error("Output format "+n[0]+" is not available")):n.length>1?r(Error("Output formats "+n.join(", ")+" are not available")):1===(n=e._inputs.reduce(function(e,r){var n=r.options.find("-f",1);return!n||n[0]in t&&t[n[0]].canDemux||e.push(n[0]),e},[])).length?r(Error("Input format "+n[0]+" is not available")):n.length>1?r(Error("Input formats "+n.join(", ")+" are not available")):void r()},function(t){e.availableEncoders(t)},function(t,r){var n;return 1===(n=e._outputs.reduce(function(e,r){var n=r.audio.find("-acodec",1);return!n||"copy"===n[0]||n[0]in t&&"audio"===t[n[0]].type||e.push(n[0]),e},[])).length?r(Error("Audio codec "+n[0]+" is not available")):n.length>1?r(Error("Audio codecs "+n.join(", ")+" are not available")):1===(n=e._outputs.reduce(function(e,r){var n=r.video.find("-vcodec",1);return!n||"copy"===n[0]||n[0]in t&&"video"===t[n[0]].type||e.push(n[0]),e},[])).length?r(Error("Video codec "+n[0]+" is not available")):n.length>1?r(Error("Video codecs "+n.join(", ")+" are not available")):void r()}],t)}}},1946:(t,e,r)=>{"use strict";var n=r(61282).spawn;function i(t){return t.match(/^TAG:/)}function o(t){return t.match(/^DISPOSITION:/)}t.exports=function(t){t.ffprobe=function(){var t,e=null,r=[],s=arguments[arguments.length-1],u=!1;function a(t,e){u||(u=!0,s(t,e))}switch(arguments.length){case 3:e=arguments[0],r=arguments[1];break;case 2:"number"==typeof arguments[0]?e=arguments[0]:Array.isArray(arguments[0])&&(r=arguments[0])}if(null===e){if(!this._currentInput)return a(Error("No input specified"));t=this._currentInput}else if(!(t=this._inputs[e]))return a(Error("Invalid input index"));this._getFfprobePath(function(e,u){if(e)return a(e);if(!u)return a(Error("Cannot find ffprobe"));var c="",l=!1,p="",f=!1,h=t.isStream?"pipe:0":t.source,d=n(u,["-show_streams","-show_format"].concat(r,h),{windowsHide:!0});t.isStream&&(d.stdin.on("error",function(t){["ECONNRESET","EPIPE","EOF"].indexOf(t.code)>=0||a(t)}),d.stdin.on("close",function(){t.source.pause(),t.source.unpipe(d.stdin)}),t.source.pipe(d.stdin)),d.on("error",s);var m=null;function g(t){if(t&&(m=t),v&&l&&f){if(m)return p&&(m.message+="\n"+p),a(m);var e=function(t){var e=t.split(/\r\n|\r|\n/);e=e.filter(function(t){return t.length>0});var r={streams:[],format:{},chapters:[]};function n(t){for(var r={},n=e.shift();void 0!==n&&n.toLowerCase()!="[/"+t+"]";){if(n.match(/^\[/)){n=e.shift();continue}var i=n.match(/^([^=]+)=(.*)$/);i&&(!i[1].match(/^TAG:/)&&i[2].match(/^[0-9]+(\.[0-9]+)?$/)?r[i[1]]=Number(i[2]):r[i[1]]=i[2]),n=e.shift()}return r}for(var i=e.shift();void 0!==i;){if(i.match(/^\[stream/i)){var o=n("stream");r.streams.push(o)}else if(i.match(/^\[chapter/i)){var s=n("chapter");r.chapters.push(s)}else"[format]"===i.toLowerCase()&&(r.format=n("format"));i=e.shift()}return r}(c);[e.format].concat(e.streams).forEach(function(t){if(t){var e=Object.keys(t).filter(i);e.length&&(t.tags=t.tags||{},e.forEach(function(e){t.tags[e.substr(4)]=t[e],delete t[e]}));var r=Object.keys(t).filter(o);r.length&&(t.disposition=t.disposition||{},r.forEach(function(e){t.disposition[e.substr(12)]=t[e],delete t[e]}))}}),a(null,e)}}var v=!1;d.on("exit",function(t,e){v=!0,t?g(Error("ffprobe exited with code "+t)):e?g(Error("ffprobe was killed with signal "+e)):g()}),d.stdout.on("data",function(t){c+=t}),d.stdout.on("close",function(){l=!0,g()}),d.stderr.on("data",function(t){p+=t}),d.stderr.on("close",function(){f=!0,g()})})}}},31097:(t,e,r)=>{"use strict";var n=r(55315),i=r(21764),o=r(17702).EventEmitter,s=r(59775);function u(t,e){if(!(this instanceof u))return new u(t,e);o.call(this),"object"!=typeof t||"readable"in t?(e=e||{}).source=t:e=t,this._inputs=[],e.source&&this.input(e.source),this._outputs=[],this.output();var r=this;["_global","_complexFilters"].forEach(function(t){r[t]=s.args()}),e.stdoutLines="stdoutLines"in e?e.stdoutLines:100,e.presets=e.presets||e.preset||n.join(__dirname,"presets"),e.niceness=e.niceness||e.priority||0,this.options=e,this.logger=e.logger||{debug:function(){},info:function(){},warn:function(){},error:function(){}}}i.inherits(u,o),t.exports=u,u.prototype.clone=function(){var t=new u,e=this;return t.options=this.options,t.logger=this.logger,t._inputs=this._inputs.map(function(t){return{source:t.source,options:t.options.clone()}}),"target"in this._outputs[0]?(t._outputs=[],t.output()):(t._outputs=[t._currentOutput={flags:{}}],["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(r){t._currentOutput[r]=e._currentOutput[r].clone()}),this._currentOutput.sizeData&&(t._currentOutput.sizeData={},s.copy(this._currentOutput.sizeData,t._currentOutput.sizeData)),s.copy(this._currentOutput.flags,t._currentOutput.flags)),["_global","_complexFilters"].forEach(function(r){t[r]=e[r].clone()}),t},r(78151)(u.prototype),r(72364)(u.prototype),r(11924)(u.prototype),r(86068)(u.prototype),r(7769)(u.prototype),r(13899)(u.prototype),r(60903)(u.prototype),r(78356)(u.prototype),r(12696)(u.prototype),u.setFfmpegPath=function(t){new u().setFfmpegPath(t)},u.setFfprobePath=function(t){new u().setFfprobePath(t)},u.setFlvtoolPath=function(t){new u().setFlvtoolPath(t)},u.availableFilters=u.getAvailableFilters=function(t){new u().availableFilters(t)},u.availableCodecs=u.getAvailableCodecs=function(t){new u().availableCodecs(t)},u.availableFormats=u.getAvailableFormats=function(t){new u().availableFormats(t)},u.availableEncoders=u.getAvailableEncoders=function(t){new u().availableEncoders(t)},r(1946)(u.prototype),u.ffprobe=function(t){var e=new u(t);e.ffprobe.apply(e,Array.prototype.slice.call(arguments,1))},r(65782)(u.prototype)},72364:(t,e,r)=>{"use strict";var n=r(59775);t.exports=function(t){t.withNoAudio=t.noAudio=function(){return this._currentOutput.audio.clear(),this._currentOutput.audioFilters.clear(),this._currentOutput.audio("-an"),this},t.withAudioCodec=t.audioCodec=function(t){return this._currentOutput.audio("-acodec",t),this},t.withAudioBitrate=t.audioBitrate=function(t){return this._currentOutput.audio("-b:a",(""+t).replace(/k?$/,"k")),this},t.withAudioChannels=t.audioChannels=function(t){return this._currentOutput.audio("-ac",t),this},t.withAudioFrequency=t.audioFrequency=function(t){return this._currentOutput.audio("-ar",t),this},t.withAudioQuality=t.audioQuality=function(t){return this._currentOutput.audio("-aq",t),this},t.withAudioFilter=t.withAudioFilters=t.audioFilter=t.audioFilters=function(t){return arguments.length>1&&(t=[].slice.call(arguments)),Array.isArray(t)||(t=[t]),this._currentOutput.audioFilters(n.makeFilterStrings(t)),this}}},13899:(t,e,r)=>{"use strict";var n=r(59775);t.exports=function(t){t.addInputOption=t.addInputOptions=t.withInputOption=t.withInputOptions=t.inputOption=t.inputOptions=function(t){if(!this._currentInput)throw Error("No input specified");var e=!0;return arguments.length>1&&(t=[].slice.call(arguments),e=!1),Array.isArray(t)||(t=[t]),this._currentInput.options(t.reduce(function(t,r){var n=String(r).split(" ");return e&&2===n.length?t.push(n[0],n[1]):t.push(r),t},[])),this},t.addOutputOption=t.addOutputOptions=t.addOption=t.addOptions=t.withOutputOption=t.withOutputOptions=t.withOption=t.withOptions=t.outputOption=t.outputOptions=function(t){var e=!0;return arguments.length>1&&(t=[].slice.call(arguments),e=!1),Array.isArray(t)||(t=[t]),this._currentOutput.options(t.reduce(function(t,r){var n=String(r).split(" ");return e&&2===n.length?t.push(n[0],n[1]):t.push(r),t},[])),this},t.filterGraph=t.complexFilter=function(t,e){if(this._complexFilters.clear(),Array.isArray(t)||(t=[t]),this._complexFilters("-filter_complex",n.makeFilterStrings(t).join(";")),Array.isArray(e)){var r=this;e.forEach(function(t){r._complexFilters("-map",t.replace(n.streamRegexp,"[$1]"))})}else"string"==typeof e&&this._complexFilters("-map",e.replace(n.streamRegexp,"[$1]"));return this}}},78151:(t,e,r)=>{"use strict";var n=r(59775);t.exports=function(t){t.mergeAdd=t.addInput=t.input=function(t){var e=!1,r=!1;if("string"!=typeof t){if(!("readable"in t)||!t.readable)throw Error("Invalid input");if(this._inputs.some(function(t){return t.isStream}))throw Error("Only one input stream is supported");r=!0,t.pause()}else{var i=t.match(/^([a-z]{2,}):/i);e=!i||"file"===i[0]}return this._inputs.push(this._currentInput={source:t,isFile:e,isStream:r,options:n.args()}),this},t.withInputFormat=t.inputFormat=t.fromFormat=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-f",t),this},t.withInputFps=t.withInputFPS=t.withFpsInput=t.withFPSInput=t.inputFPS=t.inputFps=t.fpsInput=t.FPSInput=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-r",t),this},t.nativeFramerate=t.withNativeFramerate=t.native=function(){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-re"),this},t.setStartTime=t.seekInput=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-ss",t),this},t.loop=function(t){if(!this._currentInput)throw Error("No input specified");return this._currentInput.options("-loop","1"),void 0!==t&&this.duration(t),this}}},60903:(t,e,r)=>{"use strict";var n=r(55315);t.exports=function(t){t.usingPreset=t.preset=function(t){if("function"==typeof t)t(this);else try{var e=n.join(this.options.presets,t),i=r(42916)(e);if("function"==typeof i.load)i.load(this);else throw Error("preset "+e+" has no load() function")}catch(t){throw Error("preset "+e+" could not be loaded: "+t.message)}return this}}},7769:(t,e,r)=>{"use strict";var n=r(59775);t.exports=function(t){t.addOutput=t.output=function(t,e){var r=!1;if(!t&&this._currentOutput)throw Error("Invalid output");if(t&&"string"!=typeof t){if(!("writable"in t)||!t.writable)throw Error("Invalid output")}else if("string"==typeof t){var i=t.match(/^([a-z]{2,}):/i);r=!i||"file"===i[0]}if(!t||"target"in this._currentOutput){if(t&&"string"!=typeof t&&this._outputs.some(function(t){return"string"!=typeof t.target}))throw Error("Only one output stream is supported");this._outputs.push(this._currentOutput={target:t,isFile:r,flags:{},pipeopts:e||{}});var o=this;["audio","audioFilters","video","videoFilters","sizeFilters","options"].forEach(function(t){o._currentOutput[t]=n.args()}),t||delete this._currentOutput.target}else this._currentOutput.target=t,this._currentOutput.isFile=r,this._currentOutput.pipeopts=e||{};return this},t.seekOutput=t.seek=function(t){return this._currentOutput.options("-ss",t),this},t.withDuration=t.setDuration=t.duration=function(t){return this._currentOutput.options("-t",t),this},t.toFormat=t.withOutputFormat=t.outputFormat=t.format=function(t){return this._currentOutput.options("-f",t),this},t.map=function(t){return this._currentOutput.options("-map",t.replace(n.streamRegexp,"[$1]")),this},t.updateFlvMetadata=t.flvmeta=function(){return this._currentOutput.flags.flvmeta=!0,this}}},11924:(t,e,r)=>{"use strict";var n=r(59775);t.exports=function(t){t.withNoVideo=t.noVideo=function(){return this._currentOutput.video.clear(),this._currentOutput.videoFilters.clear(),this._currentOutput.video("-vn"),this},t.withVideoCodec=t.videoCodec=function(t){return this._currentOutput.video("-vcodec",t),this},t.withVideoBitrate=t.videoBitrate=function(t,e){return t=(""+t).replace(/k?$/,"k"),this._currentOutput.video("-b:v",t),e&&this._currentOutput.video("-maxrate",t,"-minrate",t,"-bufsize","3M"),this},t.withVideoFilter=t.withVideoFilters=t.videoFilter=t.videoFilters=function(t){return arguments.length>1&&(t=[].slice.call(arguments)),Array.isArray(t)||(t=[t]),this._currentOutput.videoFilters(n.makeFilterStrings(t)),this},t.withOutputFps=t.withOutputFPS=t.withFpsOutput=t.withFPSOutput=t.withFps=t.withFPS=t.outputFPS=t.outputFps=t.fpsOutput=t.FPSOutput=t.fps=t.FPS=function(t){return this._currentOutput.video("-r",t),this},t.takeFrames=t.withFrames=t.frames=function(t){return this._currentOutput.video("-vframes",t),this}}},86068:t=>{"use strict";function e(t,e,r,n){return[{filter:"scale",options:{w:"if(gt(a,"+r+"),"+t+",trunc("+e+"*a/2)*2)",h:"if(lt(a,"+r+"),"+e+",trunc("+t+"/a/2)*2)"}},{filter:"pad",options:{w:t,h:e,x:"if(gt(a,"+r+"),0,("+t+"-iw)/2)",y:"if(lt(a,"+r+"),0,("+e+"-ih)/2)",color:n}}]}function r(t,r,n){var i,o,s,u=t.sizeData=t.sizeData||{};if(u[r]=n,!("size"in u))return[];var a=u.size.match(/([0-9]+)x([0-9]+)/),c=u.size.match(/([0-9]+)x\?/),l=u.size.match(/\?x([0-9]+)/),p=u.size.match(/\b([0-9]{1,3})%/);if(p){var f=Number(p[1])/100;return[{filter:"scale",options:{w:"trunc(iw*"+f+"/2)*2",h:"trunc(ih*"+f+"/2)*2"}}]}if(a)return(s=(i=2*Math.round(Number(a[1])/2))/(o=2*Math.round(Number(a[2])/2)),u.pad)?e(i,o,s,u.pad):[{filter:"scale",options:{w:i,h:o}}];if(c||l)return"aspect"in u?(i=c?c[1]:Math.round(Number(l[1])*u.aspect),o=l?l[1]:Math.round(Number(c[1])/u.aspect),i=2*Math.round(i/2),o=2*Math.round(o/2),u.pad)?e(i,o,u.aspect,u.pad):[{filter:"scale",options:{w:i,h:o}}]:c?[{filter:"scale",options:{w:2*Math.round(Number(c[1])/2),h:"trunc(ow/a/2)*2"}}]:[{filter:"scale",options:{w:"trunc(oh*a/2)*2",h:2*Math.round(Number(l[1])/2)}}];throw Error("Invalid size specified: "+u.size)}t.exports=function(t){t.keepPixelAspect=t.keepDisplayAspect=t.keepDisplayAspectRatio=t.keepDAR=function(){return this.videoFilters([{filter:"scale",options:{w:"if(gt(sar,1),iw*sar,iw)",h:"if(lt(sar,1),ih/sar,ih)"}},{filter:"setsar",options:"1"}])},t.withSize=t.setSize=t.size=function(t){var e=r(this._currentOutput,"size",t);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(e),this},t.withAspect=t.withAspectRatio=t.setAspect=t.setAspectRatio=t.aspect=t.aspectRatio=function(t){var e=Number(t);if(isNaN(e)){var n=t.match(/^(\d+):(\d+)$/);if(n)e=Number(n[1])/Number(n[2]);else throw Error("Invalid aspect ratio: "+t)}var i=r(this._currentOutput,"aspect",e);return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(i),this},t.applyAutopadding=t.applyAutoPadding=t.applyAutopad=t.applyAutoPad=t.withAutopadding=t.withAutoPadding=t.withAutopad=t.withAutoPad=t.autoPad=t.autopad=function(t,e){"string"==typeof t&&(e=t,t=!0),void 0===t&&(t=!0);var n=r(this._currentOutput,"pad",!!t&&(e||"black"));return this._currentOutput.sizeFilters.clear(),this._currentOutput.sizeFilters(n),this}}},78356:(t,e,r)=>{"use strict";var n=r(61282).spawn;r(55315),r(92048);var i=r(15369),o=r(59775);function s(t){t._inputs[0].isStream||t.ffprobe(0,function(e,r){t._ffprobeData=r})}t.exports=function(t){t._spawnFfmpeg=function(t,e,r,i){"function"==typeof e&&(i=r,r=e,e={}),void 0===i&&(i=r,r=function(){});var s="stdoutLines"in e?e.stdoutLines:this.options.stdoutLines;this._getFfmpegPath(function(u,a){if(u)return i(u);if(!a||0===a.length)return i(Error("Cannot find ffmpeg"));e.niceness&&0!==e.niceness&&!o.isWindows&&(t.unshift("-n",e.niceness,a),a="nice");var c=o.linesRing(s),l=!1,p=o.linesRing(s),f=!1,h=n(a,t,e);h.stderr&&h.stderr.setEncoding("utf8"),h.on("error",function(t){i(t)});var d=null;function m(t){t&&(d=t),g&&(l||!e.captureStdout)&&f&&i(d,c,p)}var g=!1;h.on("exit",function(t,e){g=!0,e?m(Error("ffmpeg was killed with signal "+e)):t?m(Error("ffmpeg exited with code "+t)):m()}),e.captureStdout&&(h.stdout.on("data",function(t){c.append(t)}),h.stdout.on("close",function(){c.close(),l=!0,m()})),h.stderr.on("data",function(t){p.append(t)}),h.stderr.on("close",function(){p.close(),f=!0,m()}),r(h,c,p)})},t._getArguments=function(){var t=this._complexFilters.get(),e=this._outputs.some(function(t){return t.isFile});return[].concat(this._inputs.reduce(function(t,e){var r="string"==typeof e.source?e.source:"pipe:0";return t.concat(e.options.get(),["-i",r])},[]),this._global.get(),e?["-y"]:[],t,this._outputs.reduce(function(t,e){var r,n=o.makeFilterStrings(e.sizeFilters.get()),i=e.audioFilters.get(),s=e.videoFilters.get().concat(n);return r=e.target?"string"==typeof e.target?[e.target]:["pipe:1"]:[],t.concat(e.audio.get(),i.length?["-filter:a",i.join(",")]:[],e.video.get(),s.length?["-filter:v",s.join(",")]:[],e.options.get(),r)},[]))},t._prepare=function(t,e){var r=this;i.waterfall([function(t){r._checkCapabilities(t)},function(t){if(!e)return t();r.ffprobe(0,function(e,n){e||(r._ffprobeData=n),t()})},function(t){r._outputs.some(function(t){return t.flags.flvmeta&&!t.isFile&&(r.logger.warn("Updating flv metadata is only supported for files"),t.flags.flvmeta=!1),t.flags.flvmeta})?r._getFlvtoolPath(function(e){t(e)}):t()},function(t){var e;try{e=r._getArguments()}catch(e){return t(e)}t(null,e)},function(t,e){r.availableEncoders(function(r,n){for(var i=0;i<t.length;i++)("-acodec"===t[i]||"-vcodec"===t[i])&&t[++i]in n&&n[t[i]].experimental&&(t.splice(i+1,0,"-strict","experimental"),i+=2);e(null,t)})}],t),e||(this.listeners("progress").length>0?s(this):this.once("newListener",function(t){"progress"===t&&s(this)}))},t.exec=t.execute=t.run=function(){var t=this;if(!this._outputs.some(function(t){return"target"in t}))throw Error("No output specified");var e=this._outputs.filter(function(t){return"string"!=typeof t.target})[0],r=this._inputs.filter(function(t){return"string"!=typeof t.source})[0],s=!1;function u(e,r,n){s||(s=!0,e?t.emit("error",e,r,n):t.emit("end",r,n))}return t._prepare(function(s,a){if(s)return u(s);t._spawnFfmpeg(a,{captureStdout:!e,niceness:t.options.niceness,cwd:t.options.cwd,windowsHide:!0},function(n,i,s){if(t.ffmpegProc=n,t.emit("start","ffmpeg "+a.join(" ")),r&&(r.source.on("error",function(t){var e=Error("Input stream error: "+t.message);e.inputStreamError=t,u(e),n.kill()}),r.source.resume(),r.source.pipe(n.stdin),n.stdin.on("error",function(){})),t.options.timeout&&(t.processTimer=setTimeout(function(){u(Error("process ran into a timeout ("+t.options.timeout+"s)"),i.get(),s.get()),n.kill()},1e3*t.options.timeout)),e&&(n.stdout.pipe(e.target,e.pipeopts),e.target.on("close",function(){t.logger.debug("Output stream closed, scheduling kill for ffmpeg process"),setTimeout(function(){u(Error("Output stream closed")),n.kill()},20)}),e.target.on("error",function(e){t.logger.debug("Output stream error, killing ffmpeg process");var r=Error("Output stream error: "+e.message);r.outputStreamError=e,u(r,i.get(),s.get()),n.kill("SIGKILL")})),s){if(t.listeners("stderr").length&&s.callback(function(e){t.emit("stderr",e)}),t.listeners("codecData").length){var c=!1,l={};s.callback(function(e){c||(c=o.extractCodecData(t,e,l))})}t.listeners("progress").length&&s.callback(function(e){o.extractProgress(t,e)})}},function(e,r,s){if(clearTimeout(t.processTimer),delete t.ffmpegProc,e)e.message.match(/ffmpeg exited with code/)&&(e.message+=": "+o.extractError(s.get())),u(e,r.get(),s.get());else{var a=t._outputs.filter(function(t){return t.flags.flvmeta});a.length?t._getFlvtoolPath(function(t,e){if(t)return u(t);i.each(a,function(t,r){n(e,["-U",t.target],{windowsHide:!0}).on("error",function(n){r(Error("Error running "+e+" on "+t.target+": "+n.message))}).on("exit",function(n,i){0!==n||i?r(Error(e+" "+(i?"received signal "+i:"exited with code "+n))+" when running on "+t.target):r()})},function(t){t?u(t):u(null,r.get(),s.get())})}):u(null,r.get(),s.get())}})}),this},t.renice=function(t){if(!o.isWindows&&(((t=t||0)<-20||t>20)&&this.logger.warn("Invalid niceness value: "+t+", must be between -20 and 20"),t=Math.min(20,Math.max(-20,t)),this.options.niceness=t,this.ffmpegProc)){var e=this.logger,r=this.ffmpegProc.pid,i=n("renice",[t,"-p",r],{windowsHide:!0});i.on("error",function(t){e.warn("could not renice process "+r+": "+t.message)}),i.on("exit",function(n,i){i?e.warn("could not renice process "+r+": renice was killed by signal "+i):n?e.warn("could not renice process "+r+": renice exited with "+n):e.info("successfully reniced process "+r+" to "+t+" niceness")})}return this},t.kill=function(t){return this.ffmpegProc?this.ffmpegProc.kill(t||"SIGKILL"):this.logger.warn("No running ffmpeg process, cannot send signal"),this}}},65782:(t,e,r)=>{"use strict";var n=r(92048),i=r(55315),o=r(76162).PassThrough,s=r(15369),u=r(59775);t.exports=function(t){t.saveToFile=t.save=function(t){return this.output(t).run(),this},t.writeToStream=t.pipe=t.stream=function(t,e){if(!t||"writable"in t||(e=t,t=void 0),!t){if(process.version.match(/v0\.8\./))throw Error("PassThrough stream is not supported on node v0.8");t=new o}return this.output(t,e).run(),t},t.takeScreenshots=t.thumbnail=t.thumbnails=t.screenshot=t.screenshots=function(t,e){var r,o=this,a=this._currentInput.source;if("number"==typeof(t=t||{count:1})&&(t={count:t}),"folder"in t||(t.folder=e||"."),"timestamps"in t&&(t.timemarks=t.timestamps),!("timemarks"in t)){if(!t.count)throw Error("Cannot take screenshots: neither a count nor a timemark list are specified");var c=100/(1+t.count);t.timemarks=[];for(var l=0;l<t.count;l++)t.timemarks.push(c*(l+1)+"%")}if("size"in t){var p=t.size.match(/^(\d+)x(\d+)$/),f=t.size.match(/^(\d+)x\?$/),h=t.size.match(/^\?x(\d+)$/),d=t.size.match(/^(\d+)%$/);if(!p&&!f&&!h&&!d)throw Error("Invalid size parameter: "+t.size)}function m(t){r?t(null,r):o.ffprobe(function(e,n){r=n,t(e,n)})}return s.waterfall([function(e){if(t.timemarks.some(function(t){return(""+t).match(/^[\d.]+%$/)})){if("string"!=typeof a)return e(Error("Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks"));m(function(r,n){if(r)e(r);else{var i=n.streams.reduce(function(t,e){return"video"===e.codec_type&&e.width*e.height>t.width*t.height?e:t},{width:0,height:0});if(0===i.width)return e(Error("No video stream in input, cannot take screenshots"));var o=Number(i.duration);if(isNaN(o)&&(o=Number(n.format.duration)),isNaN(o))return e(Error("Could not get input duration, please specify fixed timemarks"));t.timemarks=t.timemarks.map(function(t){return(""+t).match(/^([\d.]+)%$/)?o*parseFloat(t)/100:t}),e()}})}else e()},function(e){t.timemarks=t.timemarks.map(function(t){return u.timemarkToSeconds(t)}).sort(function(t,e){return t-e}),e()},function(e){var r=t.filename||"tn.png";if(-1===r.indexOf(".")&&(r+=".png"),t.timemarks.length>1&&!r.match(/%(s|0*i)/)){var n=i.extname(r);r=i.join(i.dirname(r),i.basename(r,n)+"_%i"+n)}e(null,r)},function(t,e){if(t.match(/%[bf]/)){if("string"!=typeof a)return e(Error("Cannot replace %f or %b when using an input stream"));t=t.replace(/%f/g,i.basename(a)).replace(/%b/g,i.basename(a,i.extname(a)))}e(null,t)},function(t,e){if(t.match(/%[whr]/)){if(p)return e(null,t,p[1],p[2]);m(function(r,n){if(r)return e(Error("Could not determine video resolution to replace %w, %h or %r"));var i=n.streams.reduce(function(t,e){return"video"===e.codec_type&&e.width*e.height>t.width*t.height?e:t},{width:0,height:0});if(0===i.width)return e(Error("No video stream in input, cannot replace %w, %h or %r"));var o=i.width,s=i.height;f?(s=s*Number(f[1])/o,o=Number(f[1])):h?(o=o*Number(h[1])/s,s=Number(h[1])):d&&(o=o*Number(d[1])/100,s=s*Number(d[1])/100),e(null,t,2*Math.round(o/2),2*Math.round(s/2))})}else e(null,t,-1,-1)},function(t,e,r,n){n(null,t=t.replace(/%r/g,"%wx%h").replace(/%w/g,e).replace(/%h/g,r))},function(e,r){var n=t.timemarks.map(function(t,r){return e.replace(/%s/g,u.timemarkToSeconds(t)).replace(/%(0*)i/g,function(t,e){var n=""+(r+1);return e.substr(0,Math.max(0,e.length+1-n.length))+n})});o.emit("filenames",n),r(null,n)},function(e,r){n.exists(t.folder,function(i){i?r(null,e):n.mkdir(t.folder,function(t){t?r(t):r(null,e)})})}],function(e,r){if(e)return o.emit("error",e);var n,s=t.timemarks.length,u=[n={filter:"split",options:s,outputs:[]}];if("size"in t){o.size(t.size);var a=o._currentOutput.sizeFilters.get().map(function(t,e){return e>0&&(t.inputs="size"+(e-1)),t.outputs="size"+e,t});n.inputs="size"+(a.length-1),u=a.concat(u),o._currentOutput.sizeFilters.clear()}for(var c=0,l=0;l<s;l++){var p="screen"+l;n.outputs.push(p),0===l&&(c=t.timemarks[l],o.seekInput(c)),o.output(i.join(t.folder,r[l])).frames(1).map(p),l>0&&o.seek(t.timemarks[l]-c)}o.complexFilter(u),o.run()}),this},t.mergeToFile=t.concatenate=t.concat=function(t,e){var r=this._inputs.filter(function(t){return!t.isStream})[0],n=this;return this.ffprobe(this._inputs.indexOf(r),function(r,i){if(r)return n.emit("error",r);var o=i.streams.some(function(t){return"audio"===t.codec_type}),s=i.streams.some(function(t){return"video"===t.codec_type});n.output(t,e).complexFilter({filter:"concat",options:{n:n._inputs.length,v:s?1:0,a:o?1:0}}).run()}),this}}},59775:(t,e,r)=>{"use strict";r(61282).exec;var n=r(19801).platform().match(/win(32|64)/),i=r(75897),o=/\r\n|\r|\n/g,s=/^\[?(.*?)\]?$/,u=/[,]/,a={},c=t.exports={isWindows:n,streamRegexp:s,copy:function(t,e){Object.keys(t).forEach(function(r){e[r]=t[r]})},args:function(){var t=[],e=function(){t=1==arguments.length&&Array.isArray(arguments[0])?t.concat(arguments[0]):t.concat([].slice.call(arguments))};return e.clear=function(){t=[]},e.get=function(){return t},e.find=function(e,r){var n=t.indexOf(e);if(-1!==n)return t.slice(n+1,n+1+(r||0))},e.remove=function(e,r){var n=t.indexOf(e);-1!==n&&t.splice(n,(r||0)+1)},e.clone=function(){var e=c.args();return e(t),e},e},makeFilterStrings:function(t){return t.map(function(t){if("string"==typeof t)return t;var e="";return Array.isArray(t.inputs)?e+=t.inputs.map(function(t){return t.replace(s,"[$1]")}).join(""):"string"==typeof t.inputs&&(e+=t.inputs.replace(s,"[$1]")),e+=t.filter,t.options&&("string"==typeof t.options||"number"==typeof t.options?e+="="+t.options:Array.isArray(t.options)?e+="="+t.options.map(function(t){return"string"==typeof t&&t.match(u)?"'"+t+"'":t}).join(":"):Object.keys(t.options).length&&(e+="="+Object.keys(t.options).map(function(e){var r=t.options[e];return"string"==typeof r&&r.match(u)&&(r="'"+r+"'"),e+"="+r}).join(":"))),Array.isArray(t.outputs)?e+=t.outputs.map(function(t){return t.replace(s,"[$1]")}).join(""):"string"==typeof t.outputs&&(e+=t.outputs.replace(s,"[$1]")),e})},which:function(t,e){if(t in a)return e(null,a[t]);i(t,function(r,n){if(r)return e(null,a[t]="");e(null,a[t]=n)})},timemarkToSeconds:function(t){if("number"==typeof t)return t;if(-1===t.indexOf(":")&&t.indexOf(".")>=0)return Number(t);var e=t.split(":"),r=Number(e.pop());return e.length&&(r+=60*Number(e.pop())),e.length&&(r+=3600*Number(e.pop())),r},extractCodecData:function(t,e,r){"inputStack"in r||(r.inputStack=[],r.inputIndex=-1,r.inInput=!1);var n,i,o,s,u=r.inputStack,a=r.inputIndex,c=r.inInput;if(n=e.match(/Input #[0-9]+, ([^ ]+),/))c=r.inInput=!0,u[a=r.inputIndex=r.inputIndex+1]={format:n[1],audio:"",video:"",duration:""};else if(c&&(i=e.match(/Duration\: ([^,]+)/)))u[a].duration=i[1];else if(c&&(o=e.match(/Audio\: (.*)/)))o=o[1].split(", "),u[a].audio=o[0],u[a].audio_details=o;else if(c&&(s=e.match(/Video\: (.*)/)))s=s[1].split(", "),u[a].video=s[0],u[a].video_details=s;else if(/Output #\d+/.test(e))c=r.inInput=!1;else if(/Stream mapping:|Press (\[q\]|ctrl-c) to stop/.test(e))return t.emit.apply(t,["codecData"].concat(u)),!0;return!1},extractProgress:function(t,e){var r=function(t){for(var e={},r=(t=t.replace(/=\s+/g,"=").trim()).split(" "),n=0;n<r.length;n++){var i=r[n].split("=",2),o=i[0],s=i[1];if(void 0===s)return null;e[o]=s}return e}(e);if(r){var n={frames:parseInt(r.frame,10),currentFps:parseInt(r.fps,10),currentKbps:r.bitrate?parseFloat(r.bitrate.replace("kbits/s","")):0,targetSize:parseInt(r.size||r.Lsize,10),timemark:r.time};if(t._ffprobeData&&t._ffprobeData.format&&t._ffprobeData.format.duration){var i=Number(t._ffprobeData.format.duration);isNaN(i)||(n.percent=c.timemarkToSeconds(n.timemark)/i*100)}t.emit("progress",n)}},extractError:function(t){return t.split(o).reduce(function(t,e){return" "===e.charAt(0)||"["===e.charAt(0)?[]:(t.push(e),t)},[]).join("\n")},linesRing:function(t){var e=[],r=[],n=null,i=!1,s=t-1;function u(t){e.forEach(function(e){e(t)})}return{callback:function(t){r.forEach(function(e){t(e)}),e.push(t)},append:function(t){if(!i&&(t instanceof Buffer&&(t=""+t),t&&0!==t.length)){var e=t.split(o);1===e.length?null!==n?n+=e.shift():n=e.shift():(null!==n&&(u(n+=e.shift()),r.push(n)),n=e.pop(),e.forEach(function(t){u(t),r.push(t)}),s>-1&&r.length>s&&r.splice(0,r.length-s))}},get:function(){return null!==n?r.concat([n]).join("\n"):r.join("\n")},close:function(){i||(null!==n&&(u(n),r.push(n),s>-1&&r.length>s&&r.shift(),n=null),i=!0)}}}}},15369:(t,e)=>{var r;!function(){var n,i,o={};function s(t){var e=!1;return function(){if(e)throw Error("Callback was already called.");e=!0,t.apply(n,arguments)}}n=this,null!=n&&(i=n.async),o.noConflict=function(){return n.async=i,o};var u=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},a=function(t,e){if(t.map)return t.map(e);var r=[];return u(t,function(t,n,i){r.push(e(t,n,i))}),r},c=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof process&&process.nextTick?(o.nextTick=process.nextTick,"undefined"!=typeof setImmediate?o.setImmediate=function(t){setImmediate(t)}:o.setImmediate=o.nextTick):("function"==typeof setImmediate?o.nextTick=function(t){setImmediate(t)}:o.nextTick=function(t){setTimeout(t,0)},o.setImmediate=o.nextTick),o.each=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0;u(t,function(i){e(i,s(function(e){e?(r(e),r=function(){}):(n+=1)>=t.length&&r(null)}))})},o.forEach=o.each,o.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var n=0,i=function(){e(t[n],function(e){e?(r(e),r=function(){}):(n+=1)>=t.length?r(null):i()})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(t,e,r,n){l(e).apply(null,[t,r,n])},o.forEachLimit=o.eachLimit;var l=function(t){return function(e,r,n){if(n=n||function(){},!e.length||t<=0)return n();var i=0,o=0,s=0;!function u(){if(i>=e.length)return n();for(;s<t&&o<e.length;)o+=1,s+=1,r(e[o-1],function(t){t?(n(t),n=function(){}):(i+=1,s-=1,i>=e.length?n():u())})}()}},p=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.each].concat(e))}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.eachSeries].concat(e))}},h=function(t,e,r,n){var i=[];t(e=a(e,function(t,e){return{index:e,value:t}}),function(t,e){r(t.value,function(r,n){i[t.index]=n,e(r)})},function(t){n(t,i)})};o.map=p(h),o.mapSeries=f(h),o.mapLimit=function(t,e,r,n){return d(e)(t,r,n)};var d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return h.apply(null,[l(t)].concat(e))}};o.reduce=function(t,e,r,n){o.eachSeries(t,function(t,n){r(e,t,function(t,r){e=r,n(t)})},function(t){n(t,e)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(t,e,r,n){var i=a(t,function(t){return t}).reverse();o.reduce(i,e,r,n)},o.foldr=o.reduceRight;var m=function(t,e,r,n){var i=[];t(e=a(e,function(t,e){return{index:e,value:t}}),function(t,e){r(t.value,function(r){r&&i.push(t),e()})},function(t){n(a(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};o.filter=p(m),o.filterSeries=f(m),o.select=o.filter,o.selectSeries=o.filterSeries;var g=function(t,e,r,n){var i=[];t(e=a(e,function(t,e){return{index:e,value:t}}),function(t,e){r(t.value,function(r){r||i.push(t),e()})},function(t){n(a(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};o.reject=p(g),o.rejectSeries=f(g);var v=function(t,e,r,n){t(e,function(t,e){r(t,function(r){r?(n(t),n=function(){}):e()})},function(t){n()})};o.detect=p(v),o.detectSeries=f(v),o.some=function(t,e,r){o.each(t,function(t,n){e(t,function(t){t&&(r(!0),r=function(){}),n()})},function(t){r(!1)})},o.any=o.some,o.every=function(t,e,r){o.each(t,function(t,n){e(t,function(t){t||(r(!1),r=function(){}),n()})},function(t){r(!0)})},o.all=o.every,o.sortBy=function(t,e,r){o.map(t,function(t,r){e(t,function(e,n){e?r(e):r(null,{value:t,criteria:n})})},function(t,e){if(t)return r(t);r(null,a(e.sort(function(t,e){var r=t.criteria,n=e.criteria;return r<n?-1:r>n?1:0}),function(t){return t.value}))})},o.auto=function(t,e){e=e||function(){};var r=c(t);if(!r.length)return e(null);var n={},i=[],s=function(t){i.unshift(t)},a=function(t){for(var e=0;e<i.length;e+=1)if(i[e]===t){i.splice(e,1);return}},l=function(){u(i.slice(0),function(t){t()})};s(function(){c(n).length===r.length&&(e(null,n),e=function(){})}),u(r,function(r){var i=t[r]instanceof Function?[t[r]]:t[r],p=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var s={};u(c(n),function(t){s[t]=n[t]}),s[r]=i,e(t,s),e=function(){}}else n[r]=i,o.setImmediate(l)},f=i.slice(0,Math.abs(i.length-1))||[],h=function(){var t,e;return t=function(t,e){return t&&n.hasOwnProperty(e)},e=!0,(f.reduce?f.reduce(t,e):(u(f,function(r,n,i){e=t(e,r,n,i)}),e))&&!n.hasOwnProperty(r)};if(h())i[i.length-1](p,n);else{var d=function(){h()&&(a(d),i[i.length-1](p,n))};s(d)}})},o.waterfall=function(t,e){if(e=e||function(){},t.constructor!==Array){var r=Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var n=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),s=t.next();s?i.push(n(s)):i.push(e),o.setImmediate(function(){t.apply(null,i)})}}};n(o.iterator(t))()};var y=function(t,e,r){if(r=r||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var n={};t.each(c(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(t){r(t,n)})}};o.parallel=function(t,e){y({map:o.map,each:o.each},t,e)},o.parallelLimit=function(t,e,r){y({map:d(e),each:l(e)},t,r)},o.series=function(t,e){if(e=e||function(){},t.constructor===Array)o.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};o.eachSeries(c(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){e(t,r)})}},o.iterator=function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)},o.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var w=function(t,e,r,n){var i=[];t(e,function(t,e){r(t,function(t,r){i=i.concat(r||[]),e(t)})},function(t){n(t,i)})};o.concat=p(w),o.concatSeries=f(w),o.whilst=function(t,e,r){t()?e(function(n){if(n)return r(n);o.whilst(t,e,r)}):r()},o.doWhilst=function(t,e,r){t(function(n){if(n)return r(n);e()?o.doWhilst(t,e,r):r()})},o.until=function(t,e,r){t()?r():e(function(n){if(n)return r(n);o.until(t,e,r)})},o.doUntil=function(t,e,r){t(function(n){if(n)return r(n);e()?r():o.doUntil(t,e,r)})},o.queue=function(t,e){function r(t,r,n,i){r.constructor!==Array&&(r=[r]),u(r,function(r){var s={data:r,callback:"function"==typeof i?i:null};n?t.tasks.unshift(s):t.tasks.push(s),t.saturated&&t.tasks.length===e&&t.saturated(),o.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,i={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,push:function(t,e){r(i,t,!1,e)},unshift:function(t,e){r(i,t,!0,e)},process:function(){if(n<i.concurrency&&i.tasks.length){var e=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),n+=1;var r=s(function(){n-=1,e.callback&&e.callback.apply(e,arguments),i.drain&&i.tasks.length+n===0&&i.drain(),i.process()});t(e.data,r)}},length:function(){return i.tasks.length},running:function(){return n}};return i},o.cargo=function(t,e){var r=!1,n=[],i={tasks:n,payload:e,saturated:null,empty:null,drain:null,push:function(t,r){t.constructor!==Array&&(t=[t]),u(t,function(t){n.push({data:t,callback:"function"==typeof r?r:null}),i.saturated&&n.length===e&&i.saturated()}),o.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length){i.drain&&i.drain();return}var s="number"==typeof e?n.splice(0,e):n.splice(0),c=a(s,function(t){return t.data});i.empty&&i.empty(),r=!0,t(c,function(){r=!1;var t=arguments;u(s,function(e){e.callback&&e.callback.apply(null,t)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var x=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&u(r,function(e){console[t](e)}))}]))}};o.log=x("log"),o.dir=x("dir"),o.memoize=function(t,e){var r={},n={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in r?o.apply(null,r[s]):s in n?n[s].push(o):(n[s]=[o],t.apply(null,i.concat([function(){r[s]=arguments;var t=n[s];delete n[s];for(var e=0,i=t.length;e<i;e++)t[e].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=t,i},o.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},o.times=function(t,e,r){for(var n=[],i=0;i<t;i++)n.push(i);return o.map(n,e,r)},o.timesSeries=function(t,e,r){for(var n=[],i=0;i<t;i++)n.push(i);return o.mapSeries(n,e,r)},o.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,r=Array.prototype.slice.call(arguments),n=r.pop();o.reduce(t,r,function(t,r,n){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))},function(t,r){n.apply(e,[t].concat(r))})}};var b=function(t,e){var r=function(){var r=this,n=Array.prototype.slice.call(arguments);return t(e,function(t,e){t.apply(r,n.concat([e]))},n.pop())};if(!(arguments.length>2))return r;var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)};o.applyEach=p(b),o.applyEachSeries=f(b),o.forever=function(t,e){!function r(n){if(n){if(e)return e(n);throw n}t(r)}()},void 0!==(r=(function(){return o}).apply(e,[]))&&(t.exports=r)}()},75897:(t,e,r)=>{t.exports=c,c.sync=function(t,e){for(var r=a(t,e=e||{}),n=r.env,o=r.ext,c=r.extExe,l=[],p=0,f=n.length;p<f;p++){var h=n[p];'"'===h.charAt(0)&&'"'===h.slice(-1)&&(h=h.slice(1,-1));var d=i.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(d=t.slice(0,2)+d);for(var m=0,g=o.length;m<g;m++){var v=d+o[m];try{if(s.sync(v,{pathExt:c})){if(!e.all)return v;l.push(v)}}catch(t){}}}if(e.all&&l.length)return l;if(e.nothrow)return null;throw u(t)};var n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,i=r(55315),o=n?";":":",s=r(97493);function u(t){var e=Error("not found: "+t);return e.code="ENOENT",e}function a(t,e){var r=e.colon||o,i=e.path||process.env.PATH||"",s=[""];i=i.split(r);var u="";return n&&(i.unshift(process.cwd()),s=(u=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(r),-1!==t.indexOf(".")&&""!==s[0]&&s.unshift("")),(t.match(/\//)||n&&t.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:u}}function c(t,e,r){"function"==typeof e&&(r=e,e={});var n=a(t,e),o=n.env,c=n.ext,l=n.extExe,p=[];!function n(a,f){if(a===f)return e.all&&p.length?r(null,p):r(u(t));var h=o[a];'"'===h.charAt(0)&&'"'===h.slice(-1)&&(h=h.slice(1,-1));var d=i.join(h,t);!h&&/^\.[\\\/]/.test(t)&&(d=t.slice(0,2)+d),function t(i,o){if(i===o)return n(a+1,f);var u=c[i];s(d+u,{pathExt:l},function(n,s){if(!n&&s){if(!e.all)return r(null,d+u);p.push(d+u)}return t(i+1,o)})}(0,c.length)}(0,o.length)}},97493:(t,e,r)=>{var n;function i(t,e,r){if("function"==typeof e&&(r=e,e={}),!r){if("function"!=typeof Promise)throw TypeError("callback not provided");return new Promise(function(r,n){i(t,e||{},function(t,e){t?n(t):r(e)})})}n(t,e||{},function(t,n){t&&("EACCES"===t.code||e&&e.ignoreErrors)&&(t=null,n=!1),r(t,n)})}r(92048),"win32"===process.platform||global.TESTING_WINDOWS?n=r(80492):n=r(34135),t.exports=i,i.sync=function(t,e){try{return n.sync(t,e||{})}catch(t){if(e&&e.ignoreErrors||"EACCES"===t.code)return!1;throw t}}},34135:(t,e,r)=>{t.exports=i,i.sync=function(t,e){return o(n.statSync(t),e)};var n=r(92048);function i(t,e,r){n.stat(t,function(t,n){r(t,!t&&o(n,e))})}function o(t,e){var r,n,i,o,s,u,a;return t.isFile()&&(r=t.mode,n=t.uid,i=t.gid,o=void 0!==e.uid?e.uid:process.getuid&&process.getuid(),s=void 0!==e.gid?e.gid:process.getgid&&process.getgid(),u=parseInt("100",8),a=parseInt("010",8),r&parseInt("001",8)||r&a&&i===s||r&u&&n===o||r&(u|a)&&0===o)}},80492:(t,e,r)=>{t.exports=o,o.sync=function(t,e){return i(n.statSync(t),t,e)};var n=r(92048);function i(t,e,r){return!!(t.isSymbolicLink()||t.isFile())&&function(t,e){var r=void 0!==e.pathExt?e.pathExt:process.env.PATHEXT;if(!r||-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}(e,r)}function o(t,e,r){n.stat(t,function(n,o){r(n,!n&&i(o,t,e))})}},83988:t=>{"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},10949:(t,e,r)=>{"use strict";function n(t){var e=this;if(e instanceof n||(e=new n),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e}function i(t,e,r,n){if(!(this instanceof i))return new i(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=n,n.Node=i,n.create=n,n.prototype.removeNode=function(t){if(t.list!==this)throw Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e},n.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},n.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},n.prototype.push=function(){for(var t,e=0,r=arguments.length;e<r;e++)t=arguments[e],this.tail=new i(t,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},n.prototype.unshift=function(){for(var t,e=0,r=arguments.length;e<r;e++)t=arguments[e],this.head=new i(t,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},n.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},n.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},n.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},n.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},n.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},n.prototype.map=function(t,e){e=e||this;for(var r=new n,i=this.head;null!==i;)r.push(t.call(e,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(t,e){e=e||this;for(var r=new n,i=this.tail;null!==i;)r.push(t.call(e,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=0;null!==n;i++)r=t(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;null!==n;i--)r=t(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var t=Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},n.prototype.toArrayReverse=function(){for(var t=Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},n.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,o=this.head;null!==o&&n<t;n++)o=o.next;for(var s=[],n=0;o&&n<e;n++)s.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=function(t,e,r){var n=e===t.head?new i(r,null,e,t):new i(r,e,e.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}(this,o,r[n]);return s},n.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};try{r(83988)(n)}catch(t){}}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),n=e.X(0,[8948,5972,1657,9702,9092,7686,6608],()=>r(46676));module.exports=n})();