"use strict";(()=>{var e={};e.id=738,e.ids=[738],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},16880:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>N,routeModule:()=>R,serverHooks:()=>j,staticGenerationAsyncStorage:()=>f});var o={};r.r(o),r.d(o,{DELETE:()=>h,GET:()=>c,PATCH:()=>x,POST:()=>m});var s=r(49303),a=r(88716),n=r(60670),i=r(87070),u=r(78536),p=r(61657);let l="https://ofhzrdiadxigrvmrhaiz.supabase.co",d=process.env.SUPABASE_SERVICE_ROLE_KEY;async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("q"),o=t.get("nr");if(o){let e=await (0,u.Hh)(o);if(!e)return i.NextResponse.json({error:"Template n\xe3o encontrado"},{status:404});return i.NextResponse.json(e)}if(r){let e=await (0,u.vc)(r);return i.NextResponse.json(e)}let s=await (0,u.$4)();return i.NextResponse.json(s)}catch(e){return console.error("Erro ao listar templates:",e),i.NextResponse.json({error:"Erro ao listar templates"},{status:500})}}async function m(e){try{let t=e.headers.get("authorization");if(!t)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let r=(0,p.eI)(l,d,{global:{headers:{Authorization:t}}}),{data:{user:o},error:s}=await r.auth.getUser();if(s||!o)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{data:a}=await r.from("users").select("role").eq("id",o.id).single();if(a?.role!=="admin")return i.NextResponse.json({error:"Apenas administradores podem criar templates"},{status:403});let n=await e.json(),c=await (0,u.tG)(n);return i.NextResponse.json(c,{status:201})}catch(e){return console.error("Erro ao criar template:",e),i.NextResponse.json({error:"Erro ao criar template"},{status:500})}}async function x(e){try{let t=e.headers.get("authorization");if(!t)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let r=(0,p.eI)(l,d,{global:{headers:{Authorization:t}}}),{data:{user:o},error:s}=await r.auth.getUser();if(s||!o)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{data:a}=await r.from("users").select("role").eq("id",o.id).single();if(a?.role!=="admin")return i.NextResponse.json({error:"Apenas administradores podem atualizar templates"},{status:403});let{id:n,...c}=await e.json();if(!n)return i.NextResponse.json({error:"ID do template \xe9 obrigat\xf3rio"},{status:400});let m=await (0,u.Ie)(n,c);return i.NextResponse.json(m)}catch(e){return console.error("Erro ao atualizar template:",e),i.NextResponse.json({error:"Erro ao atualizar template"},{status:500})}}async function h(e){try{let t=e.headers.get("authorization");if(!t)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let r=(0,p.eI)(l,d,{global:{headers:{Authorization:t}}}),{data:{user:o},error:s}=await r.auth.getUser();if(s||!o)return i.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{data:a}=await r.from("users").select("role").eq("id",o.id).single();if(a?.role!=="admin")return i.NextResponse.json({error:"Apenas administradores podem deletar templates"},{status:403});let{searchParams:n}=new URL(e.url),c=n.get("id");if(!c)return i.NextResponse.json({error:"ID do template \xe9 obrigat\xf3rio"},{status:400});return await (0,u.$e)(c),i.NextResponse.json({success:!0})}catch(e){return console.error("Erro ao deletar template:",e),i.NextResponse.json({error:"Erro ao deletar template"},{status:500})}}let R=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/nr-templates/route",pathname:"/api/nr-templates",filename:"route",bundlePath:"app/api/nr-templates/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\nr-templates\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:N,staticGenerationAsyncStorage:f,serverHooks:j}=R,g="/api/nr-templates/route";function w(){return(0,n.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972,1657,8536],()=>r(16880));module.exports=o})();