"use strict";(()=>{var e={};e.id=1324,e.ids=[1324],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},520629:e=>{e.exports=require("fs/promises")},555315:e=>{e.exports=require("path")},64581:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>b,requestAsyncStorage:()=>v,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{DELETE:()=>m,GET:()=>l});var n=t(349303),a=t(88716),s=t(60670),i=t(387070),u=t(520629),d=t.n(u),p=t(555315),c=t.n(p);async function l(e,{params:r}){try{let e=r.filename;if(!e)return i.NextResponse.json({error:"Nome do arquivo \xe9 obrigat\xf3rio"},{status:400});let t=e.split(".")[0],o=Object(function(){var e=Error("Cannot find module '../../../../lib/render/job-manager'");throw e.code="MODULE_NOT_FOUND",e}()).getJob(t);if(!o||"completed"!==o.status)return i.NextResponse.json({error:"Arquivo n\xe3o dispon\xedvel"},{status:404});let n=c().join(process.cwd(),"public","renders",e);try{await d().access(n);let r=await d().readFile(n),t=function(e){switch(c().extname(e).toLowerCase()){case".mp4":return"video/mp4";case".webm":return"video/webm";case".gif":return"image/gif";case".mp3":return"audio/mpeg";case".wav":return"audio/wav";default:return"application/octet-stream"}}(e);return new i.NextResponse(r,{status:200,headers:{"Content-Type":t,"Content-Disposition":`attachment; filename="${e}"`,"Content-Length":r.length.toString(),"Cache-Control":"public, max-age=31536000"}})}catch(e){return i.NextResponse.json({error:"Arquivo n\xe3o encontrado"},{status:404})}}catch(e){return console.error("Erro ao fazer download:",e),i.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function m(e,{params:r}){try{let e=r.filename;if(!e)return i.NextResponse.json({error:"Nome do arquivo \xe9 obrigat\xf3rio"},{status:400});let t=c().join(process.cwd(),"public","renders",e);try{await d().unlink(t);let r=e.split(".")[0];return Object(function(){var e=Error("Cannot find module '../../../../lib/render/job-manager'");throw e.code="MODULE_NOT_FOUND",e}()).removeJob(r),i.NextResponse.json({success:!0,message:"Arquivo deletado com sucesso"})}catch(e){return i.NextResponse.json({error:"Arquivo n\xe3o encontrado"},{status:404})}}catch(e){return console.error("Erro ao deletar arquivo:",e),i.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}!function(){var e=Error("Cannot find module '../../../../lib/render/job-manager'");throw e.code="MODULE_NOT_FOUND",e}();let f=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/render/output/[filename]/route",pathname:"/api/render/output/[filename]",filename:"route",bundlePath:"app/api/render/output/[filename]/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\render\\output\\[filename]\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:v,staticGenerationAsyncStorage:h,serverHooks:x}=f,g="/api/render/output/[filename]/route";function b(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972],()=>t(64581));module.exports=o})();