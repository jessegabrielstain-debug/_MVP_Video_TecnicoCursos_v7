"use strict";(()=>{var e={};e.id=6642,e.ids=[6642,3936],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},90312:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>h,serverHooks:()=>x,staticGenerationAsyncStorage:()=>I});var s={};r.r(s),r.d(s,{POST:()=>d});var a=r(49303),o=r(88716),i=r(60670),n=r(87070),u=r(13936),c=r(91585),p=r(26033);let l=c.Ry({statuses:c.IX(c.Km(["completed","failed","cancelled"])).default(["completed","failed","cancelled"])});async function d(e){try{let t=(0,u.getSupabaseForRequest)(e),{data:{user:r},error:s}=await t.auth.getUser();if(s||!r)return n.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let a={};try{a=await e.json()}catch{}let{statuses:o}=l.parse(a),i=t.from("render_jobs").delete().eq("user_id",r.id).in("status",o),{error:c}=await i;if(c)throw c;try{await t.from("analytics_events").insert({user_id:r.id,event_type:"render_queue_cleared",event_data:{category:"render",action:"queue_cleared",cleared_statuses:o,timestamp:new Date().toISOString()}})}catch(e){console.warn("Failed to log queue clear event:",e)}return n.NextResponse.json({success:!0,message:`Successfully cleared jobs with statuses: ${o.join(", ")}`})}catch(e){if(console.error("Clear queue API error:",e),e instanceof p.jm)return n.NextResponse.json({success:!1,error:"Invalid request body",details:e.errors},{status:400});return n.NextResponse.json({success:!1,error:"Failed to clear queue",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/render/queue/clear/route",pathname:"/api/render/queue/clear",filename:"route",bundlePath:"app/api/render/queue/clear/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\render\\queue\\clear\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:I,serverHooks:x}=h,q="/api/render/queue/clear/route";function g(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:I})}},13936:(e,t,r)=>{r.d(t,{e:()=>i,getSupabaseForRequest:()=>u,p:()=>n});var s=r(67721),a=r(61657),o=r(71615);let i=()=>{let e=(0,o.cookies)();return(0,s.createServerClient)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{cookies:{get:t=>e.get(t)?.value,set(t,r,s){try{e.set({name:t,value:r,...s})}catch(e){}},remove(t,r){try{e.set({name:t,value:"",...r})}catch(e){}}}})},n=(0,a.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});function u(e){let t=e.headers.get("authorization")||e.headers.get("Authorization");return t?(0,a.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{global:{headers:{Authorization:t}},auth:{persistSession:!1,autoRefreshToken:!1}}):i()}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,1657,9702,1585],()=>r(90312));module.exports=s})();