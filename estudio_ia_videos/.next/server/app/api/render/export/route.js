"use strict";(()=>{var e={};e.id=8733,e.ids=[8733],e.modules={220399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},430517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},375818:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>p});var o=r(349303),a=r(88716),n=r(60670),i=r(387070);let u=new Map;async function p(e){try{let{project:t}=await e.json();if(!t)return i.NextResponse.json({error:"Project data is required"},{status:400});if(!t.tracks||0===t.tracks.length)return i.NextResponse.json({error:"Project must have at least one track"},{status:400});let r=`render-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s={id:r,projectId:t.id,projectName:t.name,status:"queued",progress:0,totalFrames:Math.ceil(t.duration*t.fps),processedFrames:0,startTime:new Date().toISOString(),estimatedDuration:2*t.duration,outputFormat:"mp4",resolution:`${t.width}x${t.height}`,fps:t.fps,settings:{quality:"high",codec:"h264",bitrate:"5000k"}};return u.set(r,s),setTimeout(()=>{let e=u.get(r);if(e){e.status="processing",u.set(r,e);let t=setInterval(()=>{let e=u.get(r);e&&"processing"===e.status?(e.progress+=10*Math.random(),e.processedFrames=Math.floor(e.progress/100*e.totalFrames),e.progress>=100&&(e.progress=100,e.status="completed",e.endTime=new Date().toISOString(),e.outputUrl=`/api/render/download/${r}`,clearInterval(t)),u.set(r,e)):clearInterval(t)},1e3)}},2e3),i.NextResponse.json({success:!0,jobId:r,message:"Render job queued successfully",estimatedTime:s.estimatedDuration})}catch(e){return console.error("Error starting render:",e),i.NextResponse.json({error:"Failed to start render process"},{status:500})}}async function d(e){try{let t=new URL(e.url).searchParams.get("jobId");if(t){let e=u.get(t);if(!e)return i.NextResponse.json({error:"Render job not found"},{status:404});return i.NextResponse.json(e)}{let e=Array.from(u.values()).sort((e,t)=>new Date(t.startTime).getTime()-new Date(e.startTime).getTime());return i.NextResponse.json({jobs:e,total:e.length,active:e.filter(e=>"processing"===e.status||"queued"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,failed:e.filter(e=>"failed"===e.status).length})}}catch(e){return console.error("Error getting render status:",e),i.NextResponse.json({error:"Failed to get render status"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/render/export/route",pathname:"/api/render/export",filename:"route",bundlePath:"app/api/render/export/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\render\\export\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,h="/api/render/export/route";function x(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(375818));module.exports=s})();