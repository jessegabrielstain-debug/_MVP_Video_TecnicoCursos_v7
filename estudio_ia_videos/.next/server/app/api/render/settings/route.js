"use strict";(()=>{var e={};e.id=8233,e.ids=[8233,3936],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},40467:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>y,patchFetch:()=>R,requestAsyncStorage:()=>x,routeModule:()=>h,serverHooks:()=>I,staticGenerationAsyncStorage:()=>f});var r={};s.r(r),s.d(r,{DELETE:()=>_,GET:()=>g,PATCH:()=>m});var i=s(49303),n=s(88716),a=s(60670),o=s(87070),u=s(13936),d=s(91585),c=s(26033);let p=d.Ry({auto_retry:d.O7().optional(),max_retries:d.Rx().min(0).max(10).optional(),priority_boost:d.O7().optional(),quality_preset:d.Km(["draft","standard","high","ultra"]).optional(),notifications:d.Ry({on_completion:d.O7().optional(),on_failure:d.O7().optional(),on_queue_position:d.O7().optional()}).optional(),resource_limits:d.Ry({max_cpu_usage:d.Rx().min(10).max(100).optional(),max_memory_usage:d.Rx().min(10).max(100).optional(),max_duration:d.Rx().min(60).max(86400).optional()}).optional()}),l={auto_retry:!0,max_retries:3,priority_boost:!1,quality_preset:"standard",notifications:{on_completion:!0,on_failure:!0,on_queue_position:!1},resource_limits:{max_cpu_usage:80,max_memory_usage:70,max_duration:3600}};async function g(e){try{let t=(0,u.getSupabaseForRequest)(e),{data:{user:s},error:r}=await t.auth.getUser();if(r||!s)return o.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let{data:i,error:n}=await t.from("user_render_settings").select("*").eq("user_id",s.id).single();if(n&&"PGRST116"!==n.code)throw n;if(!i){let{data:e,error:r}=await t.from("user_render_settings").insert({user_id:s.id,settings:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r)throw r;return o.NextResponse.json({success:!0,data:e?.settings,message:"Default render settings created"})}return o.NextResponse.json({success:!0,data:i?.settings,message:"Render settings retrieved successfully"})}catch(e){return console.error("Get render settings API error:",e),o.NextResponse.json({success:!1,error:"Failed to retrieve render settings",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function m(e){try{let t;let s=(0,u.getSupabaseForRequest)(e),{data:{user:r},error:i}=await s.auth.getUser();if(i||!r)return o.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let n=await e.json(),a=p.parse(n),{data:d,error:c}=await s.from("user_render_settings").select("*").eq("user_id",r.id).single();if(c&&"PGRST116"!==c.code)throw c;if(d){t={...d?.settings,...a,notifications:{...d?.settings?.notifications,...a.notifications},resource_limits:{...d?.settings?.resource_limits,...a.resource_limits}};let{data:e,error:i}=await s.from("user_render_settings").update({settings:t,updated_at:new Date().toISOString()}).eq("user_id",r.id).select().single();if(i)throw i;t=e.settings}else{t={...l,...a};let{data:e,error:i}=await s.from("user_render_settings").insert({user_id:r.id,settings:t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(i)throw i;t=e?.settings}try{await s.from("analytics_events").insert({user_id:r.id,event_type:"settings_updated",event_data:{scope:"render",updated_fields:Object.keys(a),timestamp:new Date().toISOString()}})}catch(e){console.warn("Failed to log render settings update:",e)}return o.NextResponse.json({success:!0,data:t,message:"Render settings updated successfully"})}catch(e){if(console.error("Update render settings API error:",e),e instanceof c.jm)return o.NextResponse.json({success:!1,error:"Invalid settings data",details:e.errors},{status:400});return o.NextResponse.json({success:!1,error:"Failed to update render settings",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function _(e){try{let t=(0,u.getSupabaseForRequest)(e),{data:{user:s},error:r}=await t.auth.getUser();if(r||!s)return o.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let{data:i,error:n}=await t.from("user_render_settings").upsert({user_id:s.id,settings:l,updated_at:new Date().toISOString()}).select().single();if(n)throw n;try{await t.from("analytics_events").insert({user_id:s.id,event_type:"settings_reset",event_data:{scope:"render",timestamp:new Date().toISOString()}})}catch(e){console.warn("Failed to log render settings reset:",e)}return o.NextResponse.json({success:!0,data:i.settings,message:"Render settings reset to defaults"})}catch(e){return console.error("Reset render settings API error:",e),o.NextResponse.json({success:!1,error:"Failed to reset render settings",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let h=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/render/settings/route",pathname:"/api/render/settings",filename:"route",bundlePath:"app/api/render/settings/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\api\\render\\settings\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:x,staticGenerationAsyncStorage:f,serverHooks:I}=h,y="/api/render/settings/route";function R(){return(0,a.patchFetch)({serverHooks:I,staticGenerationAsyncStorage:f})}},13936:(e,t,s)=>{s.d(t,{e:()=>a,getSupabaseForRequest:()=>u,p:()=>o});var r=s(67721),i=s(61657),n=s(71615);let a=()=>{let e=(0,n.cookies)();return(0,r.createServerClient)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{cookies:{get:t=>e.get(t)?.value,set(t,s,r){try{e.set({name:t,value:s,...r})}catch(e){}},remove(t,s){try{e.set({name:t,value:"",...s})}catch(e){}}}})},o=(0,i.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});function u(e){let t=e.headers.get("authorization")||e.headers.get("Authorization");return t?(0,i.eI)("https://ofhzrdiadxigrvmrhaiz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maHpyZGlhZHhpZ3J2bXJoYWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTE3NjEsImV4cCI6MjA3NTI4Nzc2MX0.u-F5m9lvYc1lx9aA-MoTZqCAa83QHGVk8uTh-_KPfCQ",{global:{headers:{Authorization:t}},auth:{persistSession:!1,autoRefreshToken:!1}}):a()}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,5972,1657,9702,1585],()=>s(40467));module.exports=r})();