"use strict";exports.id=1674,exports.ids=[1674],exports.modules={31674:(e,t,n)=>{let r,i,s,o,a,l,c,u,p,d,h;n.r(t),n.d(t,{NODE_VERSION:()=>rx,NodeClient:()=>dl,OpenFeatureIntegrationHook:()=>cw,SDK_VERSION:()=>S,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>e1,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>e2,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>e0,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>eq,Scope:()=>eh,SentryContextManager:()=>d_,addBreadcrumb:()=>eB,addEventProcessor:()=>nl,addIntegration:()=>eT,amqplibIntegration:()=>a$,anrIntegration:()=>hT,anthropicAIIntegration:()=>ct,buildLaunchDarklyFlagUsedHandler:()=>cx,captureCheckIn:()=>nn,captureConsoleIntegration:()=>dk,captureEvent:()=>t5,captureException:()=>t2,captureFeedback:()=>dX,captureMessage:()=>t9,captureSession:()=>nd,childProcessIntegration:()=>u_,close:()=>ns,connectIntegration:()=>aX,consoleIntegration:()=>ub,consoleLoggingIntegration:()=>dG,contextLinesIntegration:()=>uj,continueTrace:()=>oJ,createConsolaReporter:()=>dT,createGetModuleFromFilename:()=>pT,createLangChainCallbackHandler:()=>cZ,createSentryWinstonTransport:()=>hK,createTransport:()=>pm,cron:()=>hM,dataloaderIntegration:()=>az,dedupeIntegration:()=>dV,defaultStackParser:()=>pL,disableAnrDetectionForCallback:()=>hL,endSession:()=>nu,eventFiltersIntegration:()=>c3,expressErrorHandler:()=>iv,expressIntegration:()=>i_,extraErrorDataIntegration:()=>dJ,fastifyIntegration:()=>sH,featureFlagsIntegration:()=>dK,firebaseIntegration:()=>c1,flush:()=>ni,fsIntegration:()=>it,functionToStringIntegration:()=>ue,generateInstrumentOnce:()=>eV,genericPoolIntegration:()=>aP,getActiveSpan:()=>tV,getAutoPerformanceIntegrations:()=>dm,getClient:()=>ek,getCurrentScope:()=>eI,getDefaultIntegrations:()=>dZ,getDefaultIntegrationsWithoutPerformance:()=>dI,getGlobalScope:()=>eR,getIsolationScope:()=>eZ,getRootSpan:()=>tL,getSentryRelease:()=>pH,getSpanDescendants:()=>tH,getSpanStatusFromHttpCode:()=>tu,getTraceData:()=>nh,getTraceMetaTags:()=>dj,googleGenAIIntegration:()=>cd,graphqlIntegration:()=>sK,growthbookIntegration:()=>cJ,hapiIntegration:()=>ad,honoIntegration:()=>av,httpHeadersToSpanAttributes:()=>rV,httpIntegration:()=>rD,httpServerIntegration:()=>rK,httpServerSpansIntegration:()=>rF,inboundFiltersIntegration:()=>c4,init:()=>dR,initOpenTelemetry:()=>dv,initWithoutDefaultIntegrations:()=>dW,instrumentSupabaseClient:()=>dU,isEnabled:()=>na,isInitialized:()=>no,kafkaIntegration:()=>sM,knexIntegration:()=>aH,koaIntegration:()=>aZ,langChainIntegration:()=>ck,lastEventId:()=>nt,launchDarklyIntegration:()=>cN,linkedErrorsIntegration:()=>us,localVariablesIntegration:()=>u9,logger:()=>b,lruMemoizerIntegration:()=>sU,makeNodeTransport:()=>pZ,metrics:()=>y,modulesIntegration:()=>u3,mongoIntegration:()=>s1,mongooseIntegration:()=>s3,mysql2Integration:()=>or,mysqlIntegration:()=>s8,nativeNodeFetchIntegration:()=>r6,nodeContextIntegration:()=>uk,onUncaughtExceptionIntegration:()=>pe,onUnhandledRejectionIntegration:()=>pn,openAIIntegration:()=>l1,openFeatureIntegration:()=>cG,parameterize:()=>dq,pinoIntegration:()=>h4,postgresIntegration:()=>oI,postgresJsIntegration:()=>o0,preloadOpenTelemetry:()=>dS,prismaIntegration:()=>al,profiler:()=>d2,redisIntegration:()=>oy,requestDataIntegration:()=>ul,rewriteFramesIntegration:()=>d9,setContext:()=>t3,setCurrentClient:()=>d5,setExtra:()=>t7,setExtras:()=>t4,setHttpStatus:()=>tp,setMeasurement:()=>nS,setNodeAsyncContextStrategy:()=>rf,setTag:()=>t8,setTags:()=>t6,setUser:()=>ne,setupConnectErrorHandler:()=>ax,setupExpressErrorHandler:()=>iS,setupFastifyErrorHandler:()=>sV,setupHapiErrorHandler:()=>am,setupHonoErrorHandler:()=>aS,setupKoaErrorHandler:()=>aR,spanToBaggageHeader:()=>tP,spanToJSON:()=>tX,spanToTraceHeader:()=>tR,spotlightIntegration:()=>pa,startInactiveSpan:()=>oY,startNewTrace:()=>oP,startSession:()=>nc,startSpan:()=>oE,startSpanManual:()=>oO,statsigIntegration:()=>cT,supabaseIntegration:()=>d$,suppressTracing:()=>oj,systemErrorIntegration:()=>pl,tediousIntegration:()=>aY,trpcMiddleware:()=>d4,unleashIntegration:()=>cH,updateSpanName:()=>tO,validateOpenTelemetrySetup:()=>dh,vercelAIIntegration:()=>lj,winterCGHeadersToDict:()=>rT,withActiveSpan:()=>oK,withIsolationScope:()=>eW,withMonitor:()=>nr,withScope:()=>eC,wrapMcpServerWithSentry:()=>hW,zodErrorsIntegration:()=>hX});var m,f,g,b={};n.r(b),n.d(b,{debug:()=>hB,error:()=>hD,fatal:()=>h$,fmt:()=>d0,info:()=>hQ,trace:()=>hz,warn:()=>hU});var y={};n.r(y),n.d(y,{count:()=>h0,distribution:()=>h2,gauge:()=>h1});var _=n(95648),v=n(94260);let S="10.25.0",I=globalThis;function Z(){return R(I),I}function R(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||S,t[S]=t[S]||{}}function C(e,t,n=I){let r=n.__SENTRY__=n.__SENTRY__||{},i=r[S]=r[S]||{};return i[e]||(i[e]=t())}let W="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,k=Object.prototype.toString;function X(e){switch(k.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return L(e,Error)}}function N(e,t){return k.call(e)===`[object ${t}]`}function x(e){return N(e,"String")}function G(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function w(e){return null===e||G(e)||"object"!=typeof e&&"function"!=typeof e}function T(e){return N(e,"Object")}function H(e){return!!(e?.then&&"function"==typeof e.then)}function L(e,t){try{return e instanceof t}catch{return!1}}function V(e){return!!("object"==typeof e&&null!==e&&(e.__isVue||e._isVue))}let E=["debug","info","warn","error","log","assert","trace"],O={};function Y(e){if(!("console"in I))return e();let t=I.console,n={},r=Object.keys(O);r.forEach(e=>{let r=O[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}function J(){return j().enabled}function K(e,...t){W&&J()&&Y(()=>{I.console[e](`Sentry Logger [${e}]:`,...t)})}function j(){return W?C("loggerSettings",()=>({enabled:!1})):{enabled:!1}}let P={enable:function(){j().enabled=!0},isEnabled:J,log:function(...e){K("log",...e)},warn:function(...e){K("warn",...e)},error:function(...e){K("error",...e)}};function A(e,t,n){if(!(t in e))return;let r=e[t];if("function"!=typeof r)return;let i=n(r);"function"==typeof i&&function(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,F(e,"__sentry_original__",t)}catch{}}(i,r);try{e[t]=i}catch{W&&P.log(`Failed to replace method "${t}" in object`,e)}}function F(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{W&&P.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function M(e){if(X(e))return{message:e.message,name:e.name,stack:e.stack,...B(e)};if(!("undefined"!=typeof Event&&L(e,Event)))return e;{let t={type:e.type,target:z(e.target),currentTarget:z(e.currentTarget),...B(e)};return"undefined"!=typeof CustomEvent&&L(e,CustomEvent)&&(t.detail=e.detail),t}}function z(e){try{return"undefined"!=typeof Element&&L(e,Element)?function(e,t={}){if(!e)return"<unknown>";try{let n,r=e,i=[],s=0,o=0,a=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&s++<5&&(n=function(e,t){let n=[];if(!e?.tagName)return"";if(I.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}n.push(e.tagName.toLowerCase());let r=t?.length?t.filter(t=>e.getAttribute(t)).map(t=>[t,e.getAttribute(t)]):null;if(r?.length)r.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{e.id&&n.push(`#${e.id}`);let t=e.className;if(t&&x(t))for(let e of t.split(/\s+/))n.push(`.${e}`)}for(let t of["aria-label","type","name","title","alt"]){let r=e.getAttribute(t);r&&n.push(`[${t}="${r}"]`)}return n.join("")}(r,a),"html"!==n&&(!(s>1)||!(o+3*i.length+n.length>=l)));)i.push(n),o+=n.length,r=r.parentNode;return i.reverse().join(" > ")}catch{return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function B(e){if("object"!=typeof e||null===e)return{};{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}function Q(e=I.crypto||I.msCrypto){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return r||(r="10000000100040008000100000000000"),r.replace(/[018]/g,e=>(e^(15&16*Math.random())>>e/4).toString(16))}function U(e){return e.exception?.values?.[0]}function D(e){let{message:t,event_id:n}=e;if(t)return t;let r=U(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function $(e,t){let n=U(e);if(!n)return;let r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){let e={...r?.data,...t.data};n.mechanism.data=e}}let q=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function ee(e){return parseInt(e||"",10)}function et(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{F(e,"__sentry_captured__",!0)}catch{}return!1}function en(){return Date.now()/1e3}function er(){return(i??(i=function(){let{performance:e}=I;if(!e?.now||!e.timeOrigin)return en;let t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function ei(e,t={}){if(!t.user||(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||er(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Q()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function es(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;let r={...e};for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=es(r[e],t[e],n-1));return r}function eo(){return Q().substring(16)}let ea="_sentrySpan";function el(e,t){t?F(e,ea,t):delete e[ea]}function ec(e,t=0){return"string"!=typeof e||0===t?e:e.length<=t?e:`${e.slice(0,t)}...`}function eu(e,t){if(!Array.isArray(e))return"";let n=[];for(let t=0;t<e.length;t++){let r=e[t];try{V(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function ep(e,t,n=!1){return!!x(e)&&(N(t,"RegExp")?t.test(e):!!x(t)&&(n?e===t:e.includes(t)))}function ed(e,t=[],n=!1){return t.some(t=>ep(e,t,n))}class eh{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Q(),sampleRand:Math.random()}}clone(){let e=new eh;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,el(e,this[ea]),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ei(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t="function"==typeof e?e(this):e,{tags:n,extra:r,user:i,contexts:s,level:o,fingerprint:a=[],propagationContext:l}=(t instanceof eh?t.getScopeData():T(t)?e:void 0)||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...r},this._contexts={...this._contexts,...s},i&&Object.keys(i).length&&(this._user=i),o&&(this._level=o),a.length&&(this._fingerprint=a),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,el(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Q(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let n="number"==typeof t?t:100;if(n<=0)return this;let r={timestamp:en(),...e,message:e.message?ec(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[ea]}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=es(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){let n=t?.event_id||Q();if(!this._client)return W&&P.warn("No client configured on scope - will not capture exception!"),n;let r=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){let r=n?.event_id||Q();if(!this._client)return W&&P.warn("No client configured on scope - will not capture message!"),r;let i=Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureEvent(e,t){let n=t?.event_id||Q();return this._client?this._client.captureEvent(e,{...t,event_id:n},this):W&&P.warn("No client configured on scope - will not capture event!"),n}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function em(){return C("defaultCurrentScope",()=>new eh)}function ef(){return C("defaultIsolationScope",()=>new eh)}class eg{constructor(e,t){let n,r;n=e||new eh,r=t||new eh,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){let t;let n=this._pushScope();try{t=e(n)}catch(e){throw this._popScope(),e}return H(t)?t.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function eb(){let e=R(Z());return e.stack=e.stack||new eg(em(),ef())}function ey(e){return eb().withScope(e)}function e_(e,t){let n=eb();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function ev(e){return eb().withScope(()=>e(eb().getIsolationScope()))}function eS(e){let t=R(e);return t.acs?t.acs:{withIsolationScope:ev,withScope:ey,withSetScope:e_,withSetIsolationScope:(e,t)=>ev(t),getCurrentScope:()=>eb().getScope(),getIsolationScope:()=>eb().getIsolationScope()}}function eI(){return eS(Z()).getCurrentScope()}function eZ(){return eS(Z()).getIsolationScope()}function eR(){return C("globalScope",()=>new eh)}function eC(...e){let t=eS(Z());if(2===e.length){let[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function eW(...e){let t=eS(Z());if(2===e.length){let[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])}function ek(){return eI().getClient()}function eX(e){let{traceId:t,parentSpanId:n,propagationSpanId:r}=e.getPropagationContext(),i={trace_id:t,span_id:r||eo()};return n&&(i.parent_span_id=n),i}function eN(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let t=e||ek()?.getOptions();return!!t&&(null!=t.tracesSampleRate||!!t.tracesSampler)}let ex=[];function eG(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function ew(e,t,n){if(n[t.name]){W&&P.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,-1===ex.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),ex.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){let n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"==typeof t.processEvent){let n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}W&&P.log(`Integration installed: ${t.name}`)}function eT(e){let t=ek();if(!t){W&&P.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}var eH=n(55037);let eL={};function eV(e,t,n){return n?Object.assign(r=>{let i=n(r),s=eL[e];if(s)return s.setConfig(i),s;let o=new t(i);return eL[e]=o,(0,eH.X)({instrumentations:[o]}),o},{id:e}):Object.assign(n=>{let r=eL[e];if(r)return n&&r.setConfig(n),r;let i=t(n);return eL[e]=i,(0,eH.X)({instrumentations:[i]}),i},{id:e})}function eE(e){let t=!1,n=[];if("function"==typeof e._wrap){let r=e._wrap;e._wrap=(...e)=>(t=!0,n.forEach(e=>e()),n=[],r(...e))}else t=!0;return e=>{t?e():n.push(e)}}var eO=n(65714),eY=n(83931),eJ=n(76988),eK=n(47121),ej=n(43823);class eP{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){let t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){if(this._cache.size>=this._maxSize){let e=this._cache.keys().next().value;this._cache.delete(e)}this._cache.set(e,t)}remove(e){let t=this._cache.get(e);return t&&this._cache.delete(e),t}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){let e=[];return this._cache.forEach(t=>e.push(t)),e}}let eA="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function eF(e){let t=e.protocol||"",n=e.hostname||e.host||"",r=!e.port||80===e.port||443===e.port||/^(.*):(\d+)$/.test(n)?"":`:${e.port}`,i=e.path?e.path:"/";return`${t}//${n}${r}${i}`}let eM="@sentry/instrumentation-http";function ez(e){if(void 0!==e)return e>=400&&e<500?"warning":e>=500?"error":void 0}function eB(e,t){let n=ek(),r=eZ();if(!n)return;let{beforeBreadcrumb:i=null,maxBreadcrumbs:s=100}=n.getOptions();if(s<=0)return;let o={timestamp:en(),...e},a=i?Y(()=>i(o,t)):o;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,s))}let eQ="production";function eU(e){return new e$(t=>{t(e)})}function eD(e){return new e$((t,n)=>{n(e)})}class e${constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new e$((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new e$((t,n)=>{let r,i;return this.then(t=>{i=!1,r=t,e&&e()},t=>{i=!0,r=t,e&&e()}).then(()=>{if(i){n(r);return}t(r)})})}_executeHandlers(){if(0===this._state)return;let e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){let t=(e,t)=>{if(0===this._state){if(H(t)){t.then(n,r);return}this._state=e,this._value=t,this._executeHandlers()}},n=e=>{t(1,e)},r=e=>{t(2,e)};try{e(n,r)}catch(e){r(e)}}}let eq="sentry.source",e0="sentry.sample_rate",e1="sentry.op",e2="sentry.origin",e9="sentry.measurement_unit",e5="sentry.measurement_value",e3="sentry.custom_span_name",e4="sentry.profile_id",e7="sentry.exclusive_time",e6="sentry-",e8=/^sentry-/;function te(e){let t=tn(e);if(!t)return;let n=Object.entries(t).reduce((e,[t,n])=>(t.match(e8)&&(e[t.slice(e6.length)]=n),e),{});return Object.keys(n).length>0?n:void 0}function tt(e){if(e)return ti(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${e6}${t}`]=n),e),{}))}function tn(e){return e&&(x(e)||Array.isArray(e))?Array.isArray(e)?e.reduce((e,t)=>(Object.entries(tr(t)).forEach(([t,n])=>{e[t]=n}),e),{}):tr(e):void 0}function tr(e){return e.split(",").map(e=>{let t=e.indexOf("=");return -1===t?[]:[e.slice(0,t),e.slice(t+1)].map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})}).reduce((e,[t,n])=>(t&&n&&(e[t]=n),e),{})}function ti(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce((e,[t,n],r)=>{let i=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?i:`${e},${i}`;return s.length>8192?(W&&P.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s},"")}let ts=/^o(\d+)\./,to=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ta(e,t=!1){let{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${o}`}function tl(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function tc(e){let t;let n=e.getOptions(),{host:r}=e.getDsn()||{};return n.orgId?t=String(n.orgId):r&&(t=function(e){let t=e.match(ts);return t?.[1]}(r)),t}function tu(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"}}return{code:2,message:"internal_error"}}function tp(e,t){e.setAttribute("http.response.status_code",t);let n=tu(t);"unknown_error"!==n.message&&e.setStatus(n)}let td="_sentryScope",th="_sentryIsolationScope";function tm(e,t,n){e&&(F(e,th,function(e){try{let t=I.WeakRef;if("function"==typeof t)return new t(e)}catch{}return e}(n)),F(e,td,t))}function tf(e){return{scope:e[td],isolationScope:function(e){if(e){if("object"==typeof e&&"deref"in e&&"function"==typeof e.deref)try{return e.deref()}catch{return}return e}}(e[th])}}function tg(e){if("boolean"==typeof e)return Number(e);let t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t))&&!(t<0)&&!(t>1))return t}let tb=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ty(e,t){let n=function(e){let t;if(!e)return;let n=e.match(tb);if(n)return"1"===n[3]?t=!0:"0"===n[3]&&(t=!1),{traceId:n[1],parentSampled:t,parentSpanId:n[2]}}(e),r=te(t);if(!n?.traceId)return{traceId:Q(),sampleRand:Math.random()};let i=function(e,t){let n=tg(t?.sample_rand);if(void 0!==n)return n;let r=tg(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}(n,r);r&&(r.sample_rand=i.toString());let{traceId:s,parentSpanId:o,parentSampled:a}=n;return{traceId:s,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:i}}function t_(e=Q(),t=eo(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function tv(e=Q(),t=eo(),n){return`00-${e}-${t}-${n?"01":"00"}`}function tS(e,t){let n=tc(e);return t&&n&&t!==n?(P.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):!e.getOptions().strictTraceContinuation||(!t||!!n)&&(!!t||!n)||(P.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1)}let tI=!1;function tZ(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:tX(e).parent_span_id,s=tf(e).scope;return{parent_span_id:i,span_id:r?s?.getPropagationContext().propagationSpanId||eo():t,trace_id:n}}function tR(e){let{traceId:t,spanId:n}=e.spanContext();return t_(t,n,tN(e))}function tC(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:i})=>({span_id:e,trace_id:t,sampled:1===n,attributes:i,...r})):void 0}function tW(e){return"number"==typeof e?tk(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?tk(e.getTime()):er()}function tk(e){return e>9999999999?e/1e3:e}function tX(e){if("function"==typeof e.getSpanJSON)return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status){let{attributes:r,startTime:i,name:s,endTime:o,status:a,links:l}=e;return{span_id:t,trace_id:n,data:r,description:s,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:tW(i),timestamp:tW(o)||void 0,status:tx(a),op:r[e1],origin:r[e2],links:tC(l)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function tN(e){let{traceFlags:t}=e.spanContext();return 1===t}function tx(e){return e&&0!==e.code?1===e.code?"ok":e.message||"internal_error":void 0}let tG="_sentryChildSpans",tw="_sentryRootSpan";function tT(e,t){let n=e[tw]||e;F(t,tw,n),e[tG]?e[tG].add(t):F(e,tG,new Set([t]))}function tH(e){let t=new Set;return function e(n){if(!t.has(n)&&tN(n))for(let r of(t.add(n),n[tG]?Array.from(n[tG]):[]))e(r)}(e),Array.from(t)}function tL(e){return e[tw]||e}function tV(){let e=eS(Z());return e.getActiveSpan?e.getActiveSpan():eI()[ea]}function tE(){tI||(Y(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),tI=!0)}function tO(e,t){e.updateName(t),e.setAttributes({[eq]:"custom",[e3]:t})}let tY="_frozenDsc";function tJ(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i={environment:n.environment||eQ,release:n.release,public_key:r,trace_id:e,org_id:tc(t)};return t.emit("createDsc",i),i}function tK(e,t){let n=t.getPropagationContext();return n.dsc||tJ(n.traceId,e)}function tj(e){let t=ek();if(!t)return{};let n=tL(e),r=tX(n),i=r.data,s=n.spanContext().traceState,o=s?.get("sentry.sample_rate")??i[e0]??i["sentry.previous_trace_sample_rate"];function a(e){return("number"==typeof o||"string"==typeof o)&&(e.sample_rate=`${o}`),e}let l=n[tY];if(l)return a(l);let c=s?.get("sentry.dsc"),u=c&&te(c);if(u)return a(u);let p=tJ(e.spanContext().traceId,t),d=i[eq],h=r.description;return"url"!==d&&h&&(p.transaction=h),eN()&&(p.sampled=String(tN(n)),p.sample_rand=s?.get("sentry.sample_rand")??tf(n).scope?.getPropagationContext().sampleRand.toString()),a(p),t.emit("createDsc",p,n),p}function tP(e){return tt(tj(e))}function tA(e,t){let{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:p,propagationContext:d,transactionName:h,span:m}=t;tF(e,"extra",n),tF(e,"tags",r),tF(e,"user",i),tF(e,"contexts",s),e.sdkProcessingMetadata=es(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),p.length&&(e.attachments=[...e.attachments,...p]),e.propagationContext={...e.propagationContext,...d}}function tF(e,t,n){e[t]=es(e[t],n,1)}function tM(e){let t=I._sentryDebugIds,n=I._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],i=n?Object.keys(n):[];if(l&&r.length===o&&i.length===a)return l;o=r.length,a=i.length,l={},s||(s={});let c=(t,n)=>{for(let r of t){let t=n[r],i=s?.[r];if(i&&l&&t)l[i[0]]=t,s&&(s[r]=[i[0],t]);else if(t){let n=e(r);for(let e=n.length-1;e>=0;e--){let i=n[e],o=i?.filename;if(o&&l&&s){l[o]=t,s[r]=[o,t];break}}}}};return t&&c(r,t),n&&c(i,n),l}let tz=/\(error: (.*)\)/,tB=/captureMessage|captureException/;function tQ(...e){let t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0,r=0)=>{let i=[],s=e.split("\n");for(let e=n;e<s.length;e++){let n=s[e];n.length>1024&&(n=n.slice(0,1024));let o=tz.test(n)?n.replace(tz,"$1"):n;if(!o.match(/\S*Error: /)){for(let e of t){let t=e(o);if(t){i.push(t);break}}if(i.length>=50+r)break}}return function(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(tU(t).function||"")&&t.pop(),t.reverse(),tB.test(tU(t).function||"")&&(t.pop(),tB.test(tU(t).function||"")&&t.pop()),t.slice(0,50).map(e=>({...e,filename:e.filename||tU(t).filename,function:e.function||"?"}))}(i.slice(r))}}function tU(e){return e[e.length-1]||{}}let tD="<anonymous>";function t$(e){try{if(!e||"function"!=typeof e)return tD;return e.name||tD}catch{return tD}}function tq(e){let t=e.exception;if(t){let e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch{}}}function t0(e,t=100,n=Infinity){try{return function e(t,n,r=Infinity,i=Infinity,s=function(){let e=new WeakSet;return[function(t){return!!e.has(t)||(e.add(t),!1)},function(t){e.delete(t)}]}()){let[o,a]=s;if(null==n||["boolean","string"].includes(typeof n)||"number"==typeof n&&Number.isFinite(n))return n;let l=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(V(t))return"[VueViewModel]";if(T(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${t$(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;let n=function(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);if(/^HTML(\w*)Element$/.test(n))return`[HTMLElement: ${n}]`;return`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(t,n);if(!l.startsWith("[object "))return l;if(n.__sentry_skip_normalization__)return n;let c="number"==typeof n.__sentry_override_normalization_depth__?n.__sentry_override_normalization_depth__:r;if(0===c)return l.replace("object ","");if(o(n))return"[Circular ~]";if(n&&"function"==typeof n.toJSON)try{let t=n.toJSON();return e("",t,c-1,i,s)}catch{}let u=Array.isArray(n)?[]:{},p=0,d=M(n);for(let t in d){if(!Object.prototype.hasOwnProperty.call(d,t))continue;if(p>=i){u[t]="[MaxProperties ~]";break}let n=d[t];u[t]=e(t,n,c-1,i,s),p++}return a(n),u}("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}let t1=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function t2(e,t){return eI().captureException(e,t?t instanceof eh||"function"==typeof t||Object.keys(t).some(e=>t1.includes(e))?{captureContext:t}:t:void 0)}function t9(e,t){let n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return eI().captureMessage(e,n,r)}function t5(e,t){return eI().captureEvent(e,t)}function t3(e,t){eZ().setContext(e,t)}function t4(e){eZ().setExtras(e)}function t7(e,t){eZ().setExtra(e,t)}function t6(e){eZ().setTags(e)}function t8(e,t){eZ().setTag(e,t)}function ne(e){eZ().setUser(e)}function nt(){return eZ().lastEventId()}function nn(e,t){let n=eI(),r=ek();if(r){if(r.captureCheckIn)return r.captureCheckIn(e,t,n);W&&P.warn("Cannot capture check-in. Client does not support sending check-ins.")}else W&&P.warn("Cannot capture check-in. No client defined.");return Q()}function nr(e,t,n){let r=nn({monitorSlug:e,status:"in_progress"},n),i=er();function s(t){nn({monitorSlug:e,status:t,checkInId:r,duration:er()-i})}return eW(()=>{let e;try{e=t()}catch(e){throw s("error"),e}return H(e)?e.then(e=>(s("ok"),e),e=>{throw s("error"),e}):(s("ok"),e)})}async function ni(e){let t=ek();return t?t.flush(e):(W&&P.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function ns(e){let t=ek();return t?t.close(e):(W&&P.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function no(){return!!ek()}function na(){let e=ek();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function nl(e){eZ().addEventProcessor(e)}function nc(e){let t=eZ(),n=eI(),{userAgent:r}=I.navigator||{},i=function(e){let t=er(),n={sid:Q(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>({sid:`${n.sid}`,init:n.init,started:new Date(1e3*n.started).toISOString(),timestamp:new Date(1e3*n.timestamp).toISOString(),status:n.status,errors:n.errors,did:"number"==typeof n.did||"string"==typeof n.did?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})};return e&&ei(n,e),n}({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),s=t.getSession();return s?.status==="ok"&&ei(s,{status:"exited"}),nu(),t.setSession(i),i}function nu(){let e=eZ(),t=eI().getSession()||e.getSession();if(t){let e;e={},"ok"===t.status&&(e={status:"exited"}),ei(t,e)}np(),e.setSession()}function np(){let e=eZ(),t=ek(),n=e.getSession();n&&t&&t.captureSession(n)}function nd(e=!1){if(e){nu();return}np()}function nh(e={}){let t=e.client||ek();if(!na()||!t)return{};let n=eS(Z());if(n.getTraceData)return n.getTraceData(e);let r=e.scope||eI(),i=e.span||tV(),s=i?tR(i):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return t_(t,r,n)}(r),o=tt(i?tj(i):tK(t,r));if(!tb.test(s))return P.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let a={"sentry-trace":s,baggage:o};if(e.propagateTraceparent){let e=i?function(e){let{traceId:t,spanId:n}=e.spanContext();return tv(t,n,tN(e))}(i):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return tv(t,r,n)}(r);e&&(a.traceparent=e)}return a}function nm(e,t){let n=0>=e.indexOf("://")&&0!==e.indexOf("//"),r=t??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let t=new URL(e,r);if(n)return{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash};return t}catch{}}function nf(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function ng(e){return e.split(/[?#]/,1)[0]}function nb(e){let{protocol:t,host:n,path:r}=e,i=n?.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||"";return`${t?`${t}://`:""}${i}${r}`}var ny=n(90284),n_=n(89152);function nv(e,t,n=()=>{},r=()=>{}){var i;let s;try{s=e()}catch(e){throw t(e),n(),e}return H(i=s)?i.then(e=>(n(),r(e),e),e=>{throw t(e),n(),e}):(n(),r(i),i)}function nS(e,t,n,r=tV()){let i=r&&tL(r);i&&(W&&P.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),i.addEvent(e,{[e5]:t,[e9]:n}))}function nI(e){if(!e||0===e.length)return;let t={};return e.forEach(e=>{let n=e.attributes||{},r=n[e9],i=n[e5];"string"==typeof r&&"number"==typeof i&&(t[e.name]={value:i,unit:r})}),t}function nZ(e){if(!W)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=tX(e),{spanId:i}=e.spanContext(),s=tN(e),o=tL(e),a=o===e,l=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,c=[`op: ${n}`,`name: ${t}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!a){let{op:e,description:t}=tX(o);c.push(`root ID: ${o.spanContext().spanId}`),e&&c.push(`root op: ${e}`),t&&c.push(`root description: ${t}`)}P.log(`${l}
  ${c.join("\n  ")}`)}function nR(e){if(!W)return;let{description:t="< unknown name >",op:n="< unknown op >"}=tX(e),{spanId:r}=e.spanContext(),i=tL(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;P.log(s)}function nC(e,t,n){let r,i;if(!eN(e))return[!1];"function"==typeof e.tracesSampler?(r=e.tracesSampler({...t,inheritOrSampleWith:e=>"number"==typeof t.parentSampleRate?t.parentSampleRate:"boolean"==typeof t.parentSampled?Number(t.parentSampled):e}),i=!0):void 0!==t.parentSampled?r=t.parentSampled:void 0!==e.tracesSampleRate&&(r=e.tracesSampleRate,i=!0);let s=tg(r);if(void 0===s)return W&&P.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(r)} of type ${JSON.stringify(typeof r)}.`),[!1];if(!s)return W&&P.log(`[Tracing] Discarding transaction because ${"function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s,i];let o=n<s;return!o&&W&&P.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),[o,s,i]}var nW=n(75658),nk=n(63563),nX=n(96516),nN=n(45330),nx=n(4359),nG=n(19516),nw=n(73048),nT=n(59463),nH=n(80945),nL=n(49770),nV=n(24247);let nE="sentry.parentIsRemote",nO="sentry.graphql.operation";function nY(e){return"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0}function nJ(e){return!!e.attributes&&"object"==typeof e.attributes}let nK="sentry-trace",nj="baggage",nP="sentry.dsc",nA="sentry.sampled_not_recording",nF="sentry.url",nM=(0,nX.Y)("sentry_scopes"),nz=(0,nX.Y)("sentry_fork_isolation_scope"),nB=(0,nX.Y)("sentry_fork_set_scope"),nQ=(0,nX.Y)("sentry_fork_set_isolation_scope"),nU="_scopeContext";function nD(e){return e.getValue(nM)}function n$(e,t){return e.setValue(nM,t)}function nq(e){let{traceFlags:t,traceState:n}=e,r=!!n&&"1"===n.get(nA);if(t===nN.r.SAMPLED)return!0;if(r)return!1;let i=n?n.get(nP):void 0,s=i?te(i):void 0;return s?.sampled==="true"||s?.sampled!=="false"&&void 0}function n0(e,t,n){let r=t[ny.Oh]||t[n_.ACM];if(r)return function({name:e,kind:t,attributes:n},r){let i=["http"];switch(t){case nk.M.CLIENT:i.push("client");break;case nk.M.SERVER:i.push("server")}n["sentry.http.prefetch"]&&i.push("prefetch");let{urlPath:s,url:o,query:a,fragment:l,hasRoute:c}=function(e,t){let n=e[n_.YOJ],r=e[n_.aVl]||e[ny.R$],i=e[ny.vO],s="string"==typeof r?nf(r):void 0,o=s?nb(s):void 0,a=s?.search||void 0,l=s?.hash||void 0;return"string"==typeof i?{urlPath:i,url:o,query:a,fragment:l,hasRoute:!0}:t===nk.M.SERVER&&"string"==typeof n?{urlPath:ng(n),url:o,query:a,fragment:l,hasRoute:!1}:s?{urlPath:o,url:o,query:a,fragment:l,hasRoute:!1}:"string"==typeof n?{urlPath:ng(n),url:o,query:a,fragment:l,hasRoute:!1}:{urlPath:void 0,url:o,query:a,fragment:l,hasRoute:!1}}(n,t);if(!s)return{...n2(e,n),op:i.join(".")};let u=n[nO],p=`${r} ${s}`,d=u?`${p} (${function(e){if(Array.isArray(e)){let t=e.slice().sort();return t.length<=5?t.join(", "):`${t.slice(0,5).join(", ")}, +${t.length-5}`}return`${e}`}(u)})`:p,h={};o&&(h.url=o),a&&(h["http.query"]=a),l&&(h["http.fragment"]=l);let m=t===nk.M.CLIENT||t===nk.M.SERVER,f=n[e2]||"manual",g=!`${f}`.startsWith("auto"),b="custom"===n[eq],y=n[e3],{description:_,source:v}=b||null!=y||!m&&g?n2(e,n):{description:d,source:c||"/"===s?"route":"url"};return{op:i.join("."),description:_,source:v,data:h}}({attributes:t,name:e,kind:n},r);let i=t[n_.UBq],s="string"==typeof t[e1]&&t[e1].startsWith("cache.");if(i&&!s)return function({attributes:e,name:t}){let n=e[e3];if("string"==typeof n)return{op:"db",description:n,source:e[eq]||"custom"};if("custom"===e[eq])return{op:"db",description:t,source:"custom"};let r=e[n_.PAL];return{op:"db",description:r?r.toString():t,source:"task"}}({attributes:t,name:e});let o="custom"===t[eq]?"custom":"route";if(t[n_.Pl4])return{...n2(e,t,"route"),op:"rpc"};if(t[n_.aY_])return{...n2(e,t,o),op:"message"};let a=t[n_.tNv];return a?{...n2(e,t,o),op:a.toString()}:{op:void 0,description:e,source:"custom"}}function n1(e){let t=nJ(e)?e.attributes:{};return n0(e.name?e.name:"<unknown>",t,"number"==typeof e.kind?e.kind:nk.M.INTERNAL)}function n2(e,t,n="custom"){let r=t[eq]||n,i=t[e3];return i&&"string"==typeof i?{description:i,source:r}:{description:e,source:r}}function n9(){return nW.g.getActiveSpan()}let n5="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function n3({dsc:e,sampled:t}){let n=e?tt(e):void 0,r=new nH.n,i=n?r.set(nP,n):r;return!1===t?i.set(nA,"1"):i}let n4=new Set;function n7(e){n4.add(e)}class n6 extends nL.a{constructor(){super(),n7("SentryPropagator"),this._urlMatchesTargetsMap=new eP(100)}inject(e,t,n){if((0,eJ.Ll)(e)){n5&&P.log("[Tracing] Not injecting trace data for url because tracing is suppressed.");return}let r=nW.g.getSpan(e),i=r&&function(e){let t=tX(e).data,n=t[n_.aVl]||t[ny.R$];if("string"==typeof n)return n;let r=e.spanContext().traceState?.get(nF);if(r)return r}(r);if(!re(i,ek()?.getOptions()?.tracePropagationTargets,this._urlMatchesTargetsMap)){n5&&P.log("[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:",i);return}let s=function(e){try{let t=e[nj];return Array.isArray(t)?t.join(","):t}catch{return}}(t),o=nx.u.getBaggage(e)||nx.u.createBaggage({}),{dynamicSamplingContext:a,traceId:l,spanId:c,sampled:u}=rt(e);if(s){let e=tn(s);e&&Object.entries(e).forEach(([e,t])=>{o=o.setEntry(e,{value:t})})}a&&(o=Object.entries(a).reduce((e,[t,n])=>n?e.setEntry(`${e6}${t}`,{value:n}):e,o)),l&&l!==nG.AE&&n.set(t,nK,t_(l,c,u)),super.inject(nx.u.setBaggage(e,o),t,n)}extract(e,t,n){let r=n.get(t,nK),i=n.get(t,nj);return rr(rn(e,{sentryTrace:r?Array.isArray(r)?r[0]:r:void 0,baggage:i}))}fields(){return[nK,nj]}}let n8="[Tracing] Not injecting trace data for url because it does not match tracePropagationTargets:";function re(e,t,n){if("string"!=typeof e||!t)return!0;let r=n?.get(e);if(void 0!==r)return n5&&!r&&P.log(n8,e),r;let i=ed(e,t);return n?.set(e,i),n5&&!i&&P.log(n8,e),i}function rt(e,t={}){let n=nW.g.getSpan(e);if(n?.spanContext().isRemote){let e=n.spanContext();return{dynamicSamplingContext:tj(n),traceId:e.traceId,spanId:void 0,sampled:nq(e)}}if(n){let e=n.spanContext();return{dynamicSamplingContext:tj(n),traceId:e.traceId,spanId:e.spanId,sampled:nq(e)}}let r=t.scope||nD(e)?.scope||eI(),i=t.client||ek(),s=r.getPropagationContext();return{dynamicSamplingContext:i?tK(i,r):void 0,traceId:s.traceId,spanId:s.propagationSpanId,sampled:s.sampled}}function rn(e,{sentryTrace:t,baggage:n}){let{traceId:r,parentSpanId:i,sampled:s,dsc:o}=ty(t,n),a=ek(),l=te(n);if(!i||a&&!tS(a,l?.org_id))return e;let c=function({spanId:e,traceId:t,sampled:n,dsc:r}){let i=n3({dsc:r,sampled:n});return{traceId:t,spanId:e,isRemote:!0,traceFlags:n?nN.r.SAMPLED:nN.r.NONE,traceState:i}}({traceId:r,spanId:i,sampled:s,dsc:o});return nW.g.setSpanContext(e,c)}function rr(e){let t=nD(e);return n$(e,{scope:t?t.scope:eI().clone(),isolationScope:t?t.isolationScope:eZ()})}function ri(e,t){let n=rl(),{name:r,parentSpan:i}=e;return rd(i)(()=>{let i=ru(e.scope,e.forceTransaction),s=e.onlyIfParent&&!nW.g.getSpan(i)?(0,eJ.hE)(i):i,o=rc(e);return n.startActiveSpan(r,o,s,e=>nv(()=>t(e),()=>{void 0===tX(e).status&&e.setStatus({code:nw.Q.ERROR})},()=>e.end()))})}function rs(e,t){let n=rl(),{name:r,parentSpan:i}=e;return rd(i)(()=>{let i=ru(e.scope,e.forceTransaction),s=e.onlyIfParent&&!nW.g.getSpan(i)?(0,eJ.hE)(i):i,o=rc(e);return n.startActiveSpan(r,o,s,e=>nv(()=>t(e,()=>e.end()),()=>{void 0===tX(e).status&&e.setStatus({code:nw.Q.ERROR})}))})}function ro(e){let t=rl(),{name:n,parentSpan:r}=e;return rd(r)(()=>{let r=ru(e.scope,e.forceTransaction),i=e.onlyIfParent&&!nW.g.getSpan(r)?(0,eJ.hE)(r):r,s=rc(e);return t.startSpan(n,s,i)})}function ra(e,t){let n=e?nW.g.setSpan(eY.D.active(),e):nW.g.deleteSpan(eY.D.active());return eY.D.with(n,()=>t(eI()))}function rl(){let e=ek();return e?.tracer||nW.g.getTracer("@sentry/opentelemetry",S)}function rc(e){let{startTime:t,attributes:n,kind:r,op:i,links:s}=e;return{attributes:i?{[e1]:i,...n}:n,kind:r,links:s,startTime:"number"==typeof t&&t<9999999999?1e3*t:t}}function ru(e,t){let n=function(e){if(e){let t=e[nU];if(t)return t}return eY.D.active()}(e),r=nW.g.getSpan(n);if(!r||!t)return n;let i=nW.g.deleteSpan(n),{spanId:s,traceId:o}=r.spanContext(),a=nq(r.spanContext()),l=n3({dsc:tj(tL(r)),sampled:a}),c={traceId:o,spanId:s,isRemote:!0,traceFlags:a?nN.r.SAMPLED:nN.r.NONE,traceState:l};return nW.g.setSpanContext(i,c)}function rp(e,t){return function(e,t,n){let r=rr(rn(e,t));return eY.D.with(r,n)}(eY.D.active(),e,t)}function rd(e){return void 0!==e?t=>ra(e,t):e=>e()}function rh(e){let t=(0,eJ.hE)(eY.D.active());return eY.D.with(t,e)}function rm({span:e,scope:t,client:n}={}){let r=(t&&t[nU])??eY.D.active();if(e){let{scope:t}=tf(e);r=t&&t[nU]||nW.g.setSpan(eY.D.active(),e)}let{traceId:i,spanId:s,sampled:o,dynamicSamplingContext:a}=rt(r,{scope:t,client:n});return{"sentry-trace":t_(i,s,o),baggage:tt(a)}}function rf(){var e;function t(){return nD(eY.D.active())||{scope:em(),isolationScope:ef()}}function n(){return t().scope}function r(){return t().isolationScope}e={withScope:function(e){let t=eY.D.active();return eY.D.with(t,()=>e(n()))},withSetScope:function(e,t){let n=e[nU]||eY.D.active();return eY.D.with(n.setValue(nB,e),()=>t(e))},withSetIsolationScope:function(e,t){let n=eY.D.active();return eY.D.with(n.setValue(nQ,e),()=>t(r()))},withIsolationScope:function(e){let t=eY.D.active();return eY.D.with(t.setValue(nz,!0),()=>e(r()))},getCurrentScope:n,getIsolationScope:r,startSpan:ri,startSpanManual:rs,startInactiveSpan:ro,getActiveSpan:n9,suppressTracing:rh,getTraceData:rm,continueTrace:rp,withActiveSpan:ra},R(Z()).acs=e}function rg(e){return!0===e.attributes[nE]?void 0:nY(e)}function rb(e,t){let n=e.get(t.id);return n?.span?n:n&&!n.span?(n.span=t.span,n.parentNode=t.parentNode,n):(e.set(t.id,t),t)}let ry={1:"cancelled",2:"unknown_error",3:"invalid_argument",4:"deadline_exceeded",5:"not_found",6:"already_exists",7:"permission_denied",8:"resource_exhausted",9:"failed_precondition",10:"aborted",11:"out_of_range",12:"unimplemented",13:"internal_error",14:"unavailable",15:"data_loss",16:"unauthenticated"},r_=e=>Object.values(ry).includes(e);function rv(e){let t=nJ(e)?e.attributes:{},n=e.status?e.status:void 0;if(n){if(n.code===nw.Q.OK)return{code:1};if(n.code===nw.Q.ERROR){if(void 0===n.message){let e=rS(t);if(e)return e}return n.message&&r_(n.message)?{code:2,message:n.message}:{code:2,message:"internal_error"}}}return rS(t)||(n?.code===nw.Q.UNSET?{code:1}:{code:2,message:"unknown_error"})}function rS(e){let t=e[ny.pA]||e[n_.LZ1],n=e[n_.Dp0],r="number"==typeof t?t:"string"==typeof t?parseInt(t):void 0;return"number"==typeof r?tu(r):"string"==typeof n?{code:2,message:ry[n]||"unknown_error"}:void 0}class rI{constructor(e){this._finishedSpanBucketSize=e?.timeout||300,this._finishedSpanBuckets=Array(this._finishedSpanBucketSize).fill(void 0),this._lastCleanupTimestampInS=Math.floor(Date.now()/1e3),this._spansToBucketEntry=new WeakMap,this._sentSpans=new Map,this._debouncedFlush=function(e,t,n){let r,i,s;let o=n?.maxWait?Math.max(n.maxWait,1):0,a=n?.setTimeoutImpl||setTimeout;function l(){return c(),r=e()}function c(){void 0!==i&&clearTimeout(i),void 0!==s&&clearTimeout(s),i=s=void 0}function u(){return i&&clearTimeout(i),i=a(l,1),o&&void 0===s&&(s=a(l,o)),r}return u.cancel=c,u.flush=function(){return void 0!==i||void 0!==s?l():r},u}(this.flush.bind(this),0,{maxWait:100})}export(e){let t=Math.floor(Date.now()/1e3);if(this._lastCleanupTimestampInS!==t){let e=0;this._finishedSpanBuckets.forEach((n,r)=>{n&&n.timestampInS<=t-this._finishedSpanBucketSize&&(e+=n.spans.size,this._finishedSpanBuckets[r]=void 0)}),e>0&&n5&&P.log(`SpanExporter dropped ${e} spans because they were pending for more than ${this._finishedSpanBucketSize} seconds.`),this._lastCleanupTimestampInS=t}let n=t%this._finishedSpanBucketSize,r=this._finishedSpanBuckets[n]||{timestampInS:t,spans:new Set};this._finishedSpanBuckets[n]=r,r.spans.add(e),this._spansToBucketEntry.set(e,r);let i=rg(e);(!i||this._sentSpans.has(i))&&this._debouncedFlush()}flush(){let e=this._finishedSpanBuckets.flatMap(e=>e?Array.from(e.spans):[]);this._flushSentSpanCache();let t=this._maybeSend(e),n=t.size,r=e.length-n;n5&&P.log(`SpanExporter exported ${n} spans, ${r} spans are waiting for their parent spans to finish`);let i=Date.now()+3e5;for(let e of t){this._sentSpans.set(e.spanContext().spanId,i);let t=this._spansToBucketEntry.get(e);t&&t.spans.delete(e)}this._debouncedFlush.cancel()}clear(){this._finishedSpanBuckets=this._finishedSpanBuckets.fill(void 0),this._sentSpans.clear(),this._debouncedFlush.cancel()}_maybeSend(e){let t=function(e){let t=new Map;for(let n of e)(function(e,t){var n,r;let i=t.spanContext().spanId,s=rg(t);if(!s){rb(e,{id:i,span:t,children:[]});return}let o=(n=e,r=s,n.get(r)||rb(n,{id:r,children:[]})),a=rb(e,{id:i,span:t,parentNode:o,children:[]});o.children.push(a)})(t,n);return Array.from(t,function([e,t]){return t})}(e),n=new Set;for(let e of this._getCompletedRootNodes(t)){let t=e.span;n.add(t);let r=function(e){let{op:t,description:n,data:r,origin:i="manual",source:s}=rZ(e),o=tf(e),a=e.attributes[e0],l={[eq]:s,[e0]:a,[e1]:t,[e2]:i,...r,...rR(e.attributes)},{links:c}=e,{traceId:u,spanId:p}=e.spanContext(),d={parent_span_id:nY(e),span_id:p,trace_id:u,data:l,origin:i,op:t,status:tx(rv(e)),links:tC(c)},h=l[ny.pA];return{contexts:{trace:d,otel:{resource:e.resource.attributes},..."number"==typeof h?{response:{status_code:h}}:void 0},spans:[],start_timestamp:tW(e.startTime),timestamp:tW(e.endTime),transaction:n,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:o.scope,capturedSpanIsolationScope:o.isolationScope,sampleRate:a,dynamicSamplingContext:tj(e)},...s&&{transaction_info:{source:s}}}}(t);if(e.parentNode&&this._sentSpans.has(e.parentNode.id)){let e=r.contexts?.trace?.data;e&&(e["sentry.parent_span_already_sent"]=!0)}let i=r.spans||[];for(let t of e.children)(function e(t,n,r){let i=t.span;if(i&&r.add(i),!i){t.children.forEach(t=>{e(t,n,r)});return}let s=i.spanContext().spanId,o=i.spanContext().traceId,a=nY(i),{attributes:l,startTime:c,endTime:u,links:p}=i,{op:d,description:h,data:m,origin:f="manual"}=rZ(i),g={[e2]:f,[e1]:d,...rR(l),...m},b=rv(i),y={span_id:s,trace_id:o,data:g,description:h,parent_span_id:a,start_timestamp:tW(c),timestamp:tW(u)||void 0,status:tx(b),op:d,origin:f,measurements:nI(i.events),links:tC(p)};n.push(y),t.children.forEach(t=>{e(t,n,r)})})(t,i,n);r.spans=i.length>1e3?i.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):i;let s=nI(t.events);s&&(r.measurements=s),t5(r)}return n}_flushSentSpanCache(){let e=Date.now();for(let[t,n]of this._sentSpans.entries())n<=e&&this._sentSpans.delete(t)}_nodeIsCompletedRootNodeOrHasSentParent(e){return!!e.span&&(!e.parentNode||this._sentSpans.has(e.parentNode.id))}_getCompletedRootNodes(e){return e.filter(e=>this._nodeIsCompletedRootNodeOrHasSentParent(e))}}function rZ(e){let{op:t,source:n,origin:r}=function(e){let t=e.attributes;return{origin:t[e2],op:t[e1],source:t[eq]}}(e),{op:i,description:s,source:o,data:a}=n1(e);return{op:t||i,description:s,source:n||o,origin:r,data:{...a,...function(e){let t=e.attributes,n={};e.kind!==nk.M.INTERNAL&&(n["otel.kind"]=nk.M[e.kind]);let r=t[n_.LZ1];r&&(n[ny.pA]=r);let i=function(e){if(!nJ(e))return{};let t=e.attributes[ny.R$]||e.attributes[n_.aVl],n={url:t,"http.method":e.attributes[ny.Oh]||e.attributes[n_.ACM]};!n["http.method"]&&n.url&&(n["http.method"]="GET");try{if("string"==typeof t){let e=nf(t);n.url=nb(e),e.search&&(n["http.query"]=e.search),e.hash&&(n["http.fragment"]=e.hash)}}catch{}return n}(e);return i.url&&(n.url=i.url),i["http.query"]&&(n["http.query"]=i["http.query"].slice(1)),i["http.fragment"]&&(n["http.fragment"]=i["http.fragment"].slice(1)),n}(e)}}}function rR(e){let t={...e};return delete t[e0],delete t[nE],delete t[e3],t}class rC{constructor(e){n7("SentrySpanProcessor"),this._exporter=new rI(e)}async forceFlush(){this._exporter.flush()}async shutdown(){this._exporter.clear()}onStart(e,t){!function(e,t){let n=nW.g.getSpan(t),r=nD(t);n&&!n.spanContext().isRemote&&tT(n,e),n?.spanContext().isRemote&&e.setAttribute(nE,!0),t===nX.I&&(r={scope:em(),isolationScope:ef()}),r&&tm(e,r.scope,r.isolationScope),nZ(e);let i=ek();i?.emit("spanStart",e)}(e,t)}onEnd(e){(function(e){nR(e);let t=ek();t?.emit("spanEnd",e)})(e),this._exporter.export(e)}}class rW{constructor(e){this._client=e,n7("SentrySampler")}shouldSample(e,t,n,r,i,s){let o=this._client.getOptions(),a=function(e){let t=nW.g.getSpan(e);return t&&(0,nT.BM)(t.spanContext())?t:void 0}(e),l=a?.spanContext();if(!eN(o))return rk({decision:void 0,context:e,spanAttributes:i});let c=i[n_.ACM]||i[ny.Oh];if(r===nk.M.CLIENT&&c&&(!a||l?.isRemote))return rk({decision:void 0,context:e,spanAttributes:i});let u=a?function(e,t,n){let r=e.spanContext();if((0,nT.BM)(r)&&r.traceId===t){if(r.isRemote){let t=nq(e.spanContext());return n5&&P.log(`[Tracing] Inheriting remote parent's sampled decision for ${n}: ${t}`),t}let t=nq(r);return n5&&P.log(`[Tracing] Inheriting parent's sampled decision for ${n}: ${t}`),t}}(a,t,n):void 0;if(!(!a||l?.isRemote))return rk({decision:u?nV.U.RECORD_AND_SAMPLED:nV.U.NOT_RECORD,context:e,spanAttributes:i});let{description:p,data:d,op:h}=n0(n,i,r),m={...d,...i};h&&(m[e1]=h);let f={decision:!0};if(this._client.emit("beforeSampling",{spanAttributes:m,spanName:p,parentSampled:u,parentContext:l},f),!f.decision)return rk({decision:void 0,context:e,spanAttributes:i});let{isolationScope:g}=nD(e)??{},b=l?.traceState?l.traceState.get(nP):void 0,y=b?te(b):void 0,_=tg(y?.sample_rand)??Math.random(),[v,S,I]=nC(o,{name:p,attributes:m,normalizedRequest:g?.getScopeData().sdkProcessingMetadata.normalizedRequest,parentSampled:u,parentSampleRate:tg(y?.sample_rate)},_),Z=`${c}`.toUpperCase();return"OPTIONS"===Z||"HEAD"===Z?(n5&&P.log(`[Tracing] Not sampling span because HTTP method is '${Z}' for ${n}`),rk({decision:nV.U.NOT_RECORD,context:e,spanAttributes:i,sampleRand:_,downstreamTraceSampleRate:0})):(v||void 0!==u||(n5&&P.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),this._client.recordDroppedEvent("sample_rate","transaction")),{...rk({decision:v?nV.U.RECORD_AND_SAMPLED:nV.U.NOT_RECORD,context:e,spanAttributes:i,sampleRand:_,downstreamTraceSampleRate:I?S:void 0}),attributes:{[e0]:I?S:void 0}})}toString(){return"SentrySampler"}}function rk({decision:e,context:t,spanAttributes:n,sampleRand:r,downstreamTraceSampleRate:i}){let s=function(e,t){let n=nW.g.getSpan(e),r=n?.spanContext(),i=r?.traceState||new nH.n,s=t[n_.aVl]||t[ny.R$];return s&&"string"==typeof s&&(i=i.set(nF,s)),i}(t,n);return(void 0!==i&&(s=s.set("sentry.sample_rate",`${i}`)),void 0!==r&&(s=s.set("sentry.sample_rand",`${r}`)),void 0==e)?{decision:nV.U.NOT_RECORD,traceState:s}:e===nV.U.NOT_RECORD?{decision:e,traceState:s.set(nA,"1")}:{decision:e,traceState:s}}function rX(e,t){if(!e)return t;let n=tn(e),r=tn(t);if(!r)return e;let i={...n};return Object.entries(r).forEach(([e,t])=>{i[e]||(i[e]=t)}),ti(i)}class rN extends eK.w{constructor(e={}){super(eM,S,e),this._propagationDecisionMap=new eP(100),this._ignoreOutgoingRequestsMap=new WeakMap}init(){let e=!1,t=e=>{this._onOutgoingRequestFinish(e.request,e.response)},n=e=>{this._onOutgoingRequestFinish(e.request,void 0)},r=e=>{this._onOutgoingRequestCreated(e.request)},i=i=>(e||(e=!0,(0,eO.subscribe)("http.client.response.finish",t),(0,eO.subscribe)("http.client.request.error",n),this.getConfig().propagateTraceInOutgoingRequests&&(0,eO.subscribe)("http.client.request.created",r)),i),s=()=>{(0,eO.unsubscribe)("http.client.response.finish",t),(0,eO.unsubscribe)("http.client.request.error",n),(0,eO.unsubscribe)("http.client.request.created",r)};return[new ej.o("http",["*"],i,s),new ej.o("https",["*"],i,s)]}_onOutgoingRequestFinish(e,t){eA&&P.log(eM,"Handling finished outgoing request");let n=this.getConfig().breadcrumbs,r=this._ignoreOutgoingRequestsMap.get(e)??this._shouldIgnoreOutgoingRequest(e);this._ignoreOutgoingRequestsMap.set(e,r),(void 0===n||n)&&!r&&function(e,t){let n=function(e){try{let t=e.getHeader("host")||e.host,n=new URL(e.path,`${e.protocol}//${t}`),r=nf(n.toString()),i={url:nb(r),"http.method":e.method||"GET"};return r.search&&(i["http.query"]=r.search),r.hash&&(i["http.fragment"]=r.hash),i}catch{return{}}}(e),r=t?.statusCode,i=ez(r);eB({category:"http",data:{status_code:r,...n},type:"http",level:i},{event:"response",request:e,response:t})}(e,t)}_onOutgoingRequestCreated(e){let t=this._ignoreOutgoingRequestsMap.get(e)??this._shouldIgnoreOutgoingRequest(e);this._ignoreOutgoingRequestsMap.set(e,t),t||function(e,t){let n=re(function(e){let t=e.getHeader("host")||e.host,n=e.protocol,r=e.path;return`${n}//${t}${r}`}(e),ek()?.getOptions().tracePropagationTargets,t)?nh():void 0;if(!n)return;let{"sentry-trace":r,baggage:i}=n;if(r&&!e.getHeader("sentry-trace"))try{e.setHeader("sentry-trace",r),eA&&P.log(eM,"Added sentry-trace header to outgoing request")}catch(e){eA&&P.error(eM,"Failed to add sentry-trace header to outgoing request:",X(e)?e.message:"Unknown error")}if(i){let t=rX(e.getHeader("baggage"),i);if(t)try{e.setHeader("baggage",t),eA&&P.log(eM,"Added baggage header to outgoing request")}catch(e){eA&&P.error(eM,"Failed to add baggage header to outgoing request:",X(e)?e.message:"Unknown error")}}}(e,this._propagationDecisionMap)}_shouldIgnoreOutgoingRequest(e){if((0,eJ.Ll)(eY.D.active()))return!0;let t=this.getConfig().ignoreOutgoingRequests;if(!t)return!1;let n={method:e.method,protocol:e.protocol,host:e.host,hostname:e.host,path:e.path,headers:e.getHeaders()};return t(eF(e),n)}}let rx=function(e){let t=e.match(q)||[],n=ee(t[1]),r=ee(t[2]),i=ee(t[3]);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}}(process.versions.node),rG=rx.major,rw=rx.minor;function rT(e){let t={};try{e.forEach((e,n)=>{"string"==typeof e&&(t[n]=e)})}catch{}return t}function rH(e){let t=e.headers||{},n=("string"==typeof t["x-forwarded-host"]?t["x-forwarded-host"]:void 0)||("string"==typeof t.host?t.host:void 0),r=("string"==typeof t["x-forwarded-proto"]?t["x-forwarded-proto"]:void 0)||e.protocol||(e.socket?.encrypted?"https":"http"),i=e.url||"",s=function({url:e,protocol:t,host:n}){return e?.startsWith("http")?e:e&&n?`${t}://${n}${e}`:void 0}({url:i,host:n,protocol:r}),o=e.body||void 0,a=e.cookies;return{url:s,method:e.method,query_string:function(e){if(e)try{let t=new URL(e,"http://s.io").search.slice(1);return t.length?t:void 0}catch{return}}(i),headers:function(e){let t=Object.create(null);try{Object.entries(e).forEach(([e,n])=>{"string"==typeof n&&(t[e]=n)})}catch{}return t}(t),cookies:a,data:o}}let rL=["auth","token","secret","cookie","-user","password","key"];function rV(e,t=!1){let n={};try{Object.entries(e).forEach(([e,r])=>{if(void 0!==r){let i=e.toLowerCase();if(!t&&rL.some(e=>i.includes(e)))return;let s=`http.request.header.${i.replace(/-/g,"_")}`;Array.isArray(r)?n[s]=r.map(e=>null!=e?String(e):e).join(";"):"string"==typeof r&&(n[s]=r)}})}catch{}return n}let rE=(0,nX.Y)("sentry_http_server_instrumented"),rO="Http.Server",rY=new Map,rJ=new WeakSet,rK=(e={})=>{let t={sessions:e.sessions??!0,sessionFlushingDelayMS:e.sessionFlushingDelayMS??6e4,maxRequestBodySize:e.maxRequestBodySize??"medium",ignoreRequestBody:e.ignoreRequestBody};return{name:rO,setupOnce(){(0,eO.subscribe)("http.server.request.start",e=>{(function(e,{ignoreRequestBody:t,maxRequestBodySize:n,sessions:r,sessionFlushingDelayMS:i}){let s=e.emit;if(rJ.has(s))return;let o=new Proxy(s,{apply(e,s,o){if("request"!==o[0])return e.apply(s,o);let a=ek();if(eY.D.active().getValue(rE)||!a)return e.apply(s,o);eA&&P.log(rO,"Handling incoming request");let l=eZ().clone(),c=o[1],u=o[2],p=rH(c),d=c.ip||c.socket?.remoteAddress,h=c.url||"/";"none"===n||t?.(h,c)||function(e,t,n){let r=0,i=[];eA&&P.log(rO,"Patching request.on");let s=new WeakMap,o="small"===n?1e3:"medium"===n?1e4:1048576;try{e.on=new Proxy(e.on,{apply:(e,t,n)=>{let[a,l,...c]=n;if("data"===a){eA&&P.log(rO,`Handling request.on("data") with maximum body size of ${o}b`);let n=new Proxy(l,{apply:(e,t,n)=>{try{let e=n[0],t=Buffer.from(e);r<o?(i.push(t),r+=t.byteLength):eA&&P.log(rO,`Dropping request body chunk because maximum body length of ${o}b is exceeded.`)}catch(e){eA&&P.error(rO,"Encountered error while storing body chunk.")}return Reflect.apply(e,t,n)}});return s.set(l,n),Reflect.apply(e,t,[a,n,...c])}return Reflect.apply(e,t,n)}}),e.off=new Proxy(e.off,{apply:(e,t,n)=>{let[,r]=n,i=s.get(r);if(i){s.delete(r);let o=n.slice();return o[1]=i,Reflect.apply(e,t,o)}return Reflect.apply(e,t,n)}}),e.on("end",()=>{try{let e=Buffer.concat(i).toString("utf-8");if(e){let n=Buffer.byteLength(e,"utf-8")>o?`${Buffer.from(e).subarray(0,o-3).toString("utf-8")}...`:e;t.setSDKProcessingMetadata({normalizedRequest:{data:n}})}}catch(e){eA&&P.error(rO,"Error building captured request body",e)}})}catch(e){eA&&P.error(rO,"Error patching request to capture body",e)}}(c,l,n),l.setSDKProcessingMetadata({normalizedRequest:p,ipAddress:d});let m=(c.method||"GET").toUpperCase(),f=ng(h),g=`${m} ${f}`;return l.setTransactionName(g),r&&a&&function(e,{requestIsolationScope:t,response:n,sessionFlushingDelayMS:r}){t.setSDKProcessingMetadata({requestSession:{status:"ok"}}),n.once("close",()=>{let n=t.getScopeData().sdkProcessingMetadata.requestSession;if(e&&n){eA&&P.log(`Recorded request session with status: ${n.status}`);let t=new Date;t.setSeconds(0,0);let i=t.toISOString(),s=rY.get(e),o=s?.[i]||{exited:0,crashed:0,errored:0};if(o[({ok:"exited",crashed:"crashed",errored:"errored"})[n.status]]++,s)s[i]=o;else{eA&&P.log("Opened new request session aggregate.");let t={[i]:o};rY.set(e,t);let n=()=>{clearTimeout(a),s(),rY.delete(e);let n=Object.entries(t).map(([e,t])=>({started:e,exited:t.exited,errored:t.errored,crashed:t.crashed}));e.sendSession({aggregates:n})},s=e.on("flush",()=>{eA&&P.log("Sending request session aggregate due to client flush"),n()}),a=setTimeout(()=>{eA&&P.log("Sending request session aggregate due to flushing schedule"),n()},r).unref()}}})}(a,{requestIsolationScope:l,response:u,sessionFlushingDelayMS:i??6e4}),eW(l,()=>{eI().getPropagationContext().propagationSpanId=eo();let t=nx.u.extract(eY.D.active(),p.headers).setValue(rE,!0);return eY.D.with(t,()=>{a.emit("httpServerRequest",c,u,p);let t=c._startSpanCallback?.deref();return t?t(()=>e.apply(s,o)):e.apply(s,o)})})}});rJ.add(o),e.emit=o})(e.server,t)})},afterAllSetup(e){eA&&e.getIntegrationByName("Http")&&P.warn("It seems that you have manually added `httpServerIntegration` while `httpIntegration` is also present. Make sure to remove `httpServerIntegration` when adding `httpIntegration`.")}}};var rj=n(15673),rP=n(3609);let rA="Http.ServerSpans",rF=(e={})=>{let t=e.ignoreStaticAssets??!0,n=e.ignoreIncomingRequests,r=e.ignoreStatusCodes??[[401,404],[301,303],[305,399]],{onSpanCreated:i}=e,{requestHook:s,responseHook:o,applyCustomAttributesOnSpan:a}=e.instrumentation??{};return{name:rA,setup(e){("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&e.on("httpServerRequest",(r,l,c)=>{F(r,"_startSpanCallback",new WeakRef(u=>{if(function(e,{ignoreStaticAssets:t,ignoreIncomingRequests:n}){if((0,eJ.Ll)(eY.D.active()))return!0;let r=e.url,i=e.method?.toUpperCase();return!!("OPTIONS"===i||"HEAD"===i||!r||t&&"GET"===i&&function(e){let t=ng(e);return!!(t.match(/\.(ico|png|jpg|jpeg|gif|svg|css|js|woff|woff2|ttf|eot|webp|avif)$/)||t.match(/^\/(robots\.txt|sitemap\.xml|manifest\.json|browserconfig\.xml)$/))}(r)||n?.(r,e))}(r,{ignoreStaticAssets:t,ignoreIncomingRequests:n}))return eA&&P.log(rA,"Skipping span creation for incoming request",r.url),u();let p=c.url||r.url||"/",d=nm(p),h=r.headers,m=h["user-agent"],f=h["x-forwarded-for"],g=r.httpVersion,b=h.host,y=b?.replace(/^(.*)(:[0-9]{1,5})/,"$1")||"localhost",_=e.tracer,v=p.startsWith("https")?"https":"http",S=c.method||r.method?.toUpperCase()||"GET",I=d?d.pathname:ng(p),Z=`${S} ${I}`,R=e.getOptions().sendDefaultPii??!1,C=_.startSpan(Z,{kind:nk.M.SERVER,attributes:{[e1]:"http.server",[e2]:"auto.http.otel.http","sentry.http.prefetch":"1"===r.headers["next-router-prefetch"]||void 0,"http.url":p,"http.method":c.method,"http.target":d?`${d.pathname}${d.search}`:I,"http.host":b,"net.host.name":y,"http.client_ip":"string"==typeof f?f.split(",")[0]:void 0,"http.user_agent":m,"http.scheme":v,"http.flavor":g,"net.transport":g?.toUpperCase()==="QUIC"?"ip_udp":"ip_tcp",...function(e){let t=function(e){let t=e["content-length"];if(void 0===t)return null;let n=parseInt(t,10);return isNaN(n)?null:n}(e.headers);return null==t?{}:!function(e){let t=e["content-encoding"];return!!t&&"identity"!==t}(e.headers)?{"http.request_content_length_uncompressed":t}:{"http.request_content_length":t}}(r),...rV(c.headers||{},R)}});s?.(C,r),o?.(C,l),a?.(C,r,l),i?.(C,r,l);let W={type:rP.GI.HTTP,span:C};return eY.D.with((0,rP.dd)(nW.g.setSpan(eY.D.active(),C),W),()=>{eY.D.bind(eY.D.active(),r),eY.D.bind(eY.D.active(),l);let e=!1;function t(t){if(e)return;e=!0;let n=function(e,t){let{socket:n}=e,{statusCode:r,statusMessage:i}=t,s={[ny.pA]:r,[n_.LZ1]:r,"http.status_text":i?.toUpperCase()},o=(0,rP.Vt)(eY.D.active());if(n){let{localAddress:e,localPort:t,remoteAddress:r,remotePort:i}=n;s[n_.l08]=e,s[n_.uyu]=t,s[n_.r4G]=r,s["net.peer.port"]=i}if(s[n_.LZ1]=r,s["http.status_text"]=(i||"").toUpperCase(),o?.type===rP.GI.HTTP&&void 0!==o.route){let e=o.route;s[ny.vO]=e}return s}(r,l);C.setAttributes(n),C.setStatus(t),C.end();let i=n["http.route"];i&&eZ().setTransactionName(`${r.method?.toUpperCase()||"GET"} ${i}`)}return l.on("close",()=>{t(tu(l.statusCode))}),l.on(rj.errorMonitor,()=>{let e=tu(l.statusCode);t(2===e.code?e:{code:2})}),u()})}))})},processEvent(e){if("transaction"===e.type){let t=e.contexts?.trace?.data?.["http.response.status_code"];if("number"==typeof t&&r.some(e=>{if("number"==typeof e)return e===t;let[n,r]=e;return t>=n&&t<=r}))return eA&&P.log("Dropping transaction due to status code",t),null}return e},afterAllSetup(e){eA&&(e.getIntegrationByName("Http")&&P.warn("It seems that you have manually added `httpServerSpansIntergation` while `httpIntegration` is also present. Make sure to remove `httpIntegration` when adding `httpServerSpansIntegration`."),e.getIntegrationByName("Http.Server")||P.error("It seems that you have manually added `httpServerSpansIntergation` without adding `httpServerIntegration`. This is a requiement for spans to be created - please add the `httpServerIntegration` integration."))}}};function rM(e,t){e.setAttribute(e2,t)}let rz="Http",rB="@opentelemetry_sentry-patched/instrumentation-http",rQ=eV(`${rz}.sentry`,e=>new rN(e)),rU=eV(rz,e=>{let t=new v.HttpInstrumentation({...e,disableIncomingRequestInstrumentation:!0});try{t._diag=_.K.createComponentLogger({namespace:rB}),t.instrumentationName=rB}catch{}return t}),rD=(e={})=>{let t=e.spans??!0,n=e.disableIncomingRequestSpans,r={sessions:e.trackIncomingRequestsAsSessions,sessionFlushingDelayMS:e.sessionFlushingDelayMS,ignoreRequestBody:e.ignoreIncomingRequestBody,maxRequestBodySize:e.maxIncomingRequestBodySize},i={ignoreIncomingRequests:e.ignoreIncomingRequests,ignoreStaticAssets:e.ignoreStaticAssets,ignoreStatusCodes:e.dropSpansForIncomingRequestStatusCodes,instrumentation:e.instrumentation,onSpanCreated:e.incomingRequestSpanHook},s=rK(r),o=rF(i),a=t&&!n;return{name:rz,setup(e){let t=e.getOptions();a&&eN(t)&&o.setup(e)},setupOnce(){let t=function(e,t={}){return"boolean"==typeof e.spans?e.spans:!t.skipOpenTelemetrySetup&&(!!eN(t)||!(rx.major>=22))}(e,ek()?.getOptions()||{});s.setupOnce(),rQ({breadcrumbs:e.breadcrumbs,propagateTraceInOutgoingRequests:!t,ignoreOutgoingRequests:e.ignoreOutgoingRequests}),t&&rU(function(e={}){return{ignoreOutgoingRequestHook:t=>{let n=eF(t);if(!n)return!1;let r=e.ignoreOutgoingRequests;return!!r?.(n,t)},requireParentforOutgoingSpans:!1,requestHook:(t,n)=>{rM(t,"auto.http.otel.http"),e.instrumentation?.requestHook?.(t,n)},responseHook:(t,n)=>{e.instrumentation?.responseHook?.(t,n)},applyCustomAttributesOnSpan:(t,n,r)=>{e.instrumentation?.applyCustomAttributesOnSpan?.(t,n,r)}}}(e))},processEvent:e=>o.processEvent(e)}};var r$=n(46014),rq=n(27920);let r0="sentry-trace",r1="baggage",r2=/baggage: (.*)\r\n/;class r9 extends eK.w{constructor(e={}){super("@sentry/instrumentation-node-fetch",S,e),this._channelSubs=[],this._propagationDecisionMap=new eP(100),this._ignoreOutgoingRequestsMap=new WeakMap}init(){}disable(){super.disable(),this._channelSubs.forEach(e=>e.unsubscribe()),this._channelSubs=[]}enable(){super.enable(),this._channelSubs=this._channelSubs||[],this._channelSubs.length>0||(this._subscribeToChannel("undici:request:create",this._onRequestCreated.bind(this)),this._subscribeToChannel("undici:request:headers",this._onResponseHeaders.bind(this)))}_onRequestCreated({request:e}){if(!(!1!==this.getConfig().enabled))return;let t=this._shouldIgnoreOutgoingRequest(e);if(this._ignoreOutgoingRequestsMap.set(e,t),t)return;let n=re(r5(e.origin,e.path),ek()?.getOptions().tracePropagationTargets,this._propagationDecisionMap)?nh():void 0;if(!n)return;let{"sentry-trace":r,baggage:i}=n;if(Array.isArray(e.headers)){let t=e.headers;r&&!t.includes(r0)&&t.push(r0,r);let n=t.findIndex(e=>e===r1);if(i&&-1===n)t.push(r1,i);else if(i){let e=rX(t[n+1],i);e&&(t[n+1]=e)}}else{let t=e.headers;r&&!t.includes(`${r0}:`)&&(e.headers+=`${r0}: ${r}\r
`);let n=e.headers.match(r2)?.[1];if(i&&!n)e.headers+=`${r1}: ${i}\r
`;else if(i){let t=rX(n,i);t&&(e.headers=e.headers.replace(r2,`baggage: ${t}\r
`))}}}_onResponseHeaders({request:e,response:t}){let n=this.getConfig();if(!(!1!==n.enabled))return;let r=n.breadcrumbs,i=this._ignoreOutgoingRequestsMap.get(e);(void 0===r||r)&&!i&&function(e,t){let n=function(e){try{let t=r5(e.origin,e.path),n=nf(t),r={url:nb(n),"http.method":e.method||"GET"};return n.search&&(r["http.query"]=n.search),n.hash&&(r["http.fragment"]=n.hash),r}catch{return{}}}(e),r=t.statusCode,i=ez(r);eB({category:"http",data:{status_code:r,...n},type:"http",level:i},{event:"response",request:e,response:t})}(e,t)}_subscribeToChannel(e,t){let n;if(rG>18||18===rG&&rw>=19)rq.subscribe?.(e,t),n=()=>rq.unsubscribe?.(e,t);else{let r=rq.channel(e);r.subscribe(t),n=()=>r.unsubscribe(t)}this._channelSubs.push({name:e,unsubscribe:n})}_shouldIgnoreOutgoingRequest(e){if((0,eJ.Ll)(eY.D.active()))return!0;let t=r5(e.origin,e.path),n=this.getConfig().ignoreOutgoingRequests;return"function"==typeof n&&!!t&&n(t)}}function r5(e,t="/"){try{return new URL(t,e).toString()}catch{let n=`${e}`;if(n.endsWith("/")&&t.startsWith("/"))return`${n}${t.slice(1)}`;if(!n.endsWith("/")&&!t.startsWith("/"))return`${n}/${t.slice(1)}`;return`${n}${t}`}}let r3="NodeFetch",r4=eV(r3,r$.UndiciInstrumentation,e=>(function(e={}){return{requireParentforSpans:!1,ignoreRequestHook:t=>{let n=function(e,t="/"){let n=`${e}`;return n.endsWith("/")&&t.startsWith("/")?`${n}${t.slice(1)}`:n.endsWith("/")||t.startsWith("/")?`${n}${t}`:`${n}/${t.slice(1)}`}(t.origin,t.path),r=e.ignoreOutgoingRequests;return!!(r&&n&&r(n))},startSpanHook:()=>({[e2]:"auto.http.otel.node_fetch"}),requestHook:e.requestHook,responseHook:e.responseHook}})(e)),r7=eV(`${r3}.sentry`,r9,e=>e),r6=(e={})=>({name:"NodeFetch",setupOnce(){(function(e,t={}){return"boolean"==typeof e.spans?e.spans:!t.skipOpenTelemetrySetup&&eN(t)})(e,ek()?.getOptions())&&r4(e),r7(e)}});var r8=n(55971);let ie="FileSystem",it=(e={})=>({name:ie,setupOnce(){eV(ie,()=>new r8.FsInstrumentation({requireParentSpan:!0,endHook(t,{args:n,span:r,error:i}){r.updateName(`fs.${t}`),r.setAttributes({[e1]:"file",[e2]:"auto.file.fs"}),e.recordErrorMessagesAsSpanAttributes&&("string"==typeof n[0]&&il.includes(t)?r.setAttribute("path_argument",n[0]):"string"==typeof n[0]&&"string"==typeof n[1]&&ia.includes(t)?(r.setAttribute("target_argument",n[0]),r.setAttribute("path_argument",n[1])):"string"==typeof n[0]&&io.includes(t)?r.setAttribute("prefix_argument",n[0]):"string"==typeof n[0]&&"string"==typeof n[1]&&is.includes(t)?(r.setAttribute("existing_path_argument",n[0]),r.setAttribute("new_path_argument",n[1])):"string"==typeof n[0]&&"string"==typeof n[1]&&ii.includes(t)?(r.setAttribute("src_argument",n[0]),r.setAttribute("dest_argument",n[1])):"string"==typeof n[0]&&"string"==typeof n[1]&&ir.includes(t)&&(r.setAttribute("old_path_argument",n[0]),r.setAttribute("new_path_argument",n[1]))),i&&e.recordErrorMessagesAsSpanAttributes&&r.setAttribute("fs_error",i.message)}}))()}}),ir=["rename","renameSync"],ii=["copyFile","cp","copyFileSync","cpSync"],is=["link","linkSync"],io=["mkdtemp","mkdtempSync"],ia=["symlink","symlinkSync"],il=["access","appendFile","chmod","chown","exists","mkdir","lchown","lstat","lutimes","open","opendir","readdir","readFile","readlink","realpath","realpath.native","rm","rmdir","stat","truncate","unlink","utimes","writeFile","accessSync","appendFileSync","chmodSync","chownSync","existsSync","lchownSync","lstatSync","lutimesSync","opendirSync","mkdirSync","openSync","readdirSync","readFileSync","readlinkSync","realpathSync","realpathSync.native","rmdirSync","rmSync","statSync","truncateSync","unlinkSync","utimesSync","writeFileSync"];var ic=n(15472),iu=n(90091);function ip(){try{return"undefined"!=typeof module&&void 0!==module.exports}catch{return!1}}function id(){return!ip()&&(rG>=21||20===rG&&rw>=6||18===rG&&rw>=19||(c||(c=!0,Y(()=>{console.warn(`[Sentry] You are using Node.js v${process.versions.node} in ESM mode ("import syntax"). The Sentry Node.js SDK is not compatible with ESM in Node.js versions before 18.19.0 or before 20.6.0. Please either build your application with CommonJS ("require() syntax"), or upgrade your Node.js version.`)})),!1))}let ih=e=>({package:e,"javascript.is_cjs":ip()});function im(e,t){let n=ek()?.getOptions();!n?.disableInstrumentationWarnings&&!(0,iu.UW)(e)&&na()&&eN(n)&&(Y(()=>{ip()?console.warn(`[Sentry] ${t} is not instrumented. This is likely because you required/imported ${t} before calling \`Sentry.init()\`.`):console.warn(`[Sentry] ${t} is not instrumented. Please make sure to initialize Sentry in a separate file that you \`--import\` when running node, see: https://docs.sentry.io/platforms/javascript/guides/${t}/install/esm/.`)}),eR().setContext("missing_instrumentation",ih(t)))}let ig="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ib="Express",iy=eV(ib,()=>new ic.ExpressInstrumentation({requestHook:e=>(function(e){rM(e,"auto.http.otel.express");let t=tX(e).data,n=t["express.type"];n&&e.setAttribute(e1,`${n}.express`);let r=t["express.name"];"string"==typeof r&&e.updateName(r)})(e),spanNameHook:(e,t)=>(function(e,t){if(eZ()===ef())return ig&&P.warn("Isolation scope is still default isolation scope - skipping setting transactionName"),t;if("request_handler"===e.layerType){let t=e.request,n=t.method?t.method.toUpperCase():"GET";eZ().setTransactionName(`${n} ${e.route}`)}return t})(e,t)})),i_=()=>({name:ib,setupOnce(){iy()}});function iv(e){return function(t,n,r,i){let s=rH(n);if(eZ().setSDKProcessingMetadata({normalizedRequest:s}),(e?.shouldHandleError||function(e){return function(e){let t=e.status||e.statusCode||e.status_code||e.output?.statusCode;return t?parseInt(t,10):500}(e)>=500})(t)){let e=t2(t,{mechanism:{type:"auto.middleware.express",handled:!1}});r.sentry=e}i(t)}}function iS(e,t){e.use(function(e,t,n){let r=rH(e);eZ().setSDKProcessingMetadata({normalizedRequest:r}),n()}),e.use(iv(t)),im(e.use,"express")}var iI=n(6846),iZ=n(79657);let iR=e=>{if("string"!=typeof e)throw TypeError("invalid pattern");if(e.length>65536)throw TypeError("pattern is too long")},iC={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},iW=e=>e.replace(/[[\]\\-]/g,"\\$&"),ik=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),iX=e=>e.join(""),iN=(e,t)=>{if("["!==e.charAt(t))throw Error("not in a brace expression");let n=[],r=[],i=t+1,s=!1,o=!1,a=!1,l=!1,c=t,u="";e:for(;i<e.length;){let p=e.charAt(i);if(("!"===p||"^"===p)&&i===t+1){l=!0,i++;continue}if("]"===p&&s&&!a){c=i+1;break}if(s=!0,"\\"===p&&!a){a=!0,i++;continue}if("["===p&&!a){for(let[s,[a,l,c]]of Object.entries(iC))if(e.startsWith(s,i)){if(u)return["$.",!1,e.length-t,!0];i+=s.length,c?r.push(a):n.push(a),o=o||l;continue e}}if(a=!1,u){p>u?n.push(iW(u)+"-"+iW(p)):p===u&&n.push(iW(p)),u="",i++;continue}if(e.startsWith("-]",i+1)){n.push(iW(p+"-")),i+=2;continue}if(e.startsWith("-",i+1)){u=p,i+=2;continue}n.push(iW(p)),i++}if(c<i)return["",!1,0,!1];if(!n.length&&!r.length)return["$.",!1,e.length-t,!0];if(0===r.length&&1===n.length&&/^\\?.$/.test(n[0])&&!l)return[ik(2===n[0].length?n[0].slice(-1):n[0]),!1,c-t,!1];let p="["+(l?"^":"")+iX(n)+"]",d="["+(l?"":"^")+iX(r)+"]";return[n.length&&r.length?"("+p+"|"+d+")":n.length?p:d,o,c-t,!0]},ix=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),iG=new Set(["!","?","+","*","@"]),iw=e=>iG.has(e),iT="(?!\\.)",iH=new Set(["[","."]),iL=new Set(["..","."]),iV=new Set("().*{}+?[]^$\\!"),iE=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),iO="[^/]",iY=iO+"*?",iJ=iO+"+?";class iK{type;#e;#t;#n=!1;#r=[];#i;#s;#o;#a=!1;#l;#c;#u=!1;constructor(e,t,n={}){this.type=e,e&&(this.#t=!0),this.#i=t,this.#e=this.#i?this.#i.#e:this,this.#l=this.#e===this?n:this.#e.#l,this.#o=this.#e===this?[]:this.#e.#o,"!"!==e||this.#e.#a||this.#o.push(this),this.#s=this.#i?this.#i.#r.length:0}get hasMagic(){if(void 0!==this.#t)return this.#t;for(let e of this.#r)if("string"!=typeof e&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return void 0!==this.#c?this.#c:this.type?this.#c=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#c=this.#r.map(e=>String(e)).join("")}#p(){let e;if(this!==this.#e)throw Error("should only call on root");if(this.#a)return this;for(this.toString(),this.#a=!0;e=this.#o.pop();){if("!"!==e.type)continue;let t=e,n=t.#i;for(;n;){for(let r=t.#s+1;!n.type&&r<n.#r.length;r++)for(let t of e.#r){if("string"==typeof t)throw Error("string part in extglob AST??");t.copyIn(n.#r[r])}n=(t=n).#i}}return this}push(...e){for(let t of e)if(""!==t){if("string"!=typeof t&&!(t instanceof iK&&t.#i===this))throw Error("invalid part: "+t);this.#r.push(t)}}toJSON(){let e=null===this.type?this.#r.slice().map(e=>"string"==typeof e?e:e.toJSON()):[this.type,...this.#r.map(e=>e.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#i?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#i?.isStart())return!1;if(0===this.#s)return!0;let e=this.#i;for(let t=0;t<this.#s;t++){let n=e.#r[t];if(!(n instanceof iK&&"!"===n.type))return!1}return!0}isEnd(){if(this.#e===this||this.#i?.type==="!")return!0;if(!this.#i?.isEnd())return!1;if(!this.type)return this.#i?.isEnd();let e=this.#i?this.#i.#r.length:0;return this.#s===e-1}copyIn(e){"string"==typeof e?this.push(e):this.push(e.clone(this))}clone(e){let t=new iK(this.type,e);for(let e of this.#r)t.copyIn(e);return t}static #d(e,t,n,r){let i=!1,s=!1,o=-1,a=!1;if(null===t.type){let l=n,c="";for(;l<e.length;){let n=e.charAt(l++);if(i||"\\"===n){i=!i,c+=n;continue}if(s){l===o+1?("^"===n||"!"===n)&&(a=!0):"]"!==n||l===o+2&&a||(s=!1),c+=n;continue}if("["===n){s=!0,o=l,a=!1,c+=n;continue}if(!r.noext&&iw(n)&&"("===e.charAt(l)){t.push(c),c="";let i=new iK(n,t);l=iK.#d(e,i,l,r),t.push(i);continue}c+=n}return t.push(c),l}let l=n+1,c=new iK(null,t),u=[],p="";for(;l<e.length;){let n=e.charAt(l++);if(i||"\\"===n){i=!i,p+=n;continue}if(s){l===o+1?("^"===n||"!"===n)&&(a=!0):"]"!==n||l===o+2&&a||(s=!1),p+=n;continue}if("["===n){s=!0,o=l,a=!1,p+=n;continue}if(iw(n)&&"("===e.charAt(l)){c.push(p),p="";let t=new iK(n,c);c.push(t),l=iK.#d(e,t,l,r);continue}if("|"===n){c.push(p),p="",u.push(c),c=new iK(null,t);continue}if(")"===n)return""===p&&0===t.#r.length&&(t.#u=!0),c.push(p),p="",t.push(...u,c),l;p+=n}return t.type=null,t.#t=void 0,t.#r=[e.substring(n-1)],l}static fromGlob(e,t={}){let n=new iK(null,void 0,t);return iK.#d(e,n,0,t),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,n,r,i]=this.toRegExpSource();return r||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()?Object.assign(RegExp(`^${t}$`,(this.#l.nocase?"i":"")+(i?"u":"")),{_src:t,_glob:e}):n}get options(){return this.#l}toRegExpSource(e){let t=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let n=this.isStart()&&this.isEnd(),r=this.#r.map(t=>{let[r,i,s,o]="string"==typeof t?iK.#h(t,this.#t,n):t.toRegExpSource(e);return this.#t=this.#t||s,this.#n=this.#n||o,r}).join(""),i="";if(this.isStart()&&"string"==typeof this.#r[0]&&!(1===this.#r.length&&iL.has(this.#r[0]))){let n=t&&iH.has(r.charAt(0))||r.startsWith("\\.")&&iH.has(r.charAt(2))||r.startsWith("\\.\\.")&&iH.has(r.charAt(4)),s=!t&&!e&&iH.has(r.charAt(0));i=n?"(?!(?:^|/)\\.\\.?(?:$|/))":s?iT:""}let s="";return this.isEnd()&&this.#e.#a&&this.#i?.type==="!"&&(s="(?:$|\\/)"),[i+r+s,ix(r),this.#t=!!this.#t,this.#n]}let n="*"===this.type||"+"===this.type,r="!"===this.type?"(?:(?!(?:":"(?:",i=this.#m(t);if(this.isStart()&&this.isEnd()&&!i&&"!"!==this.type){let e=this.toString();return this.#r=[e],this.type=null,this.#t=void 0,[e,ix(this.toString()),!1,!1]}let s=!n||e||t||!iT?"":this.#m(!0);return s===i&&(s=""),s&&(i=`(?:${i})(?:${s})*?`),["!"===this.type&&this.#u?(this.isStart()&&!t?iT:"")+iJ:r+i+("!"===this.type?"))"+(!this.isStart()||t||e?"":iT)+iY+")":"@"===this.type?")":"?"===this.type?")?":"+"===this.type&&s?")":"*"===this.type&&s?")?":`)${this.type}`),ix(i),this.#t=!!this.#t,this.#n]}#m(e){return this.#r.map(t=>{if("string"==typeof t)throw Error("string type in extglob ast??");let[n,r,i,s]=t.toRegExpSource(e);return this.#n=this.#n||s,n}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static #h(e,t,n=!1){let r=!1,i="",s=!1;for(let o=0;o<e.length;o++){let a=e.charAt(o);if(r){r=!1,i+=(iV.has(a)?"\\":"")+a;continue}if("\\"===a){o===e.length-1?i+="\\\\":r=!0;continue}if("["===a){let[n,r,a,l]=iN(e,o);if(a){i+=n,s=s||r,o+=a-1,t=t||l;continue}}if("*"===a){n&&"*"===e?i+=iJ:i+=iY,t=!0;continue}if("?"===a){i+=iO,t=!0;continue}i+=iE(a)}return[i,ix(e),!!t,s]}}let ij=(e,t,n={})=>(iR(t),(!!n.nocomment||"#"!==t.charAt(0))&&new sa(t,n).match(e)),iP=/^\*+([^+@!?\*\[\(]*)$/,iA=e=>t=>!t.startsWith(".")&&t.endsWith(e),iF=e=>t=>t.endsWith(e),iM=e=>(e=e.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)),iz=e=>(e=e.toLowerCase(),t=>t.toLowerCase().endsWith(e)),iB=/^\*+\.\*+$/,iQ=e=>!e.startsWith(".")&&e.includes("."),iU=e=>"."!==e&&".."!==e&&e.includes("."),iD=/^\.\*+$/,i$=e=>"."!==e&&".."!==e&&e.startsWith("."),iq=/^\*+$/,i0=e=>0!==e.length&&!e.startsWith("."),i1=e=>0!==e.length&&"."!==e&&".."!==e,i2=/^\?+([^+@!?\*\[\(]*)?$/,i9=([e,t=""])=>{let n=i7([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},i5=([e,t=""])=>{let n=i6([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},i3=([e,t=""])=>{let n=i6([e]);return t?e=>n(e)&&e.endsWith(t):n},i4=([e,t=""])=>{let n=i7([e]);return t?e=>n(e)&&e.endsWith(t):n},i7=([e])=>{let t=e.length;return e=>e.length===t&&!e.startsWith(".")},i6=([e])=>{let t=e.length;return e=>e.length===t&&"."!==e&&".."!==e},i8="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",se={win32:{sep:"\\"},posix:{sep:"/"}},st="win32"===i8?se.win32.sep:se.posix.sep;ij.sep=st;let sn=Symbol("globstar **");ij.GLOBSTAR=sn,ij.filter=(e,t={})=>n=>ij(n,e,t);let sr=(e,t={})=>Object.assign({},e,t);ij.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return ij;let t=ij;return Object.assign((n,r,i={})=>t(n,r,sr(e,i)),{Minimatch:class extends t.Minimatch{constructor(t,n={}){super(t,sr(e,n))}static defaults(n){return t.defaults(sr(e,n)).Minimatch}},AST:class extends t.AST{constructor(t,n,r={}){super(t,n,sr(e,r))}static fromGlob(n,r={}){return t.AST.fromGlob(n,sr(e,r))}},unescape:(n,r={})=>t.unescape(n,sr(e,r)),escape:(n,r={})=>t.escape(n,sr(e,r)),filter:(n,r={})=>t.filter(n,sr(e,r)),defaults:n=>t.defaults(sr(e,n)),makeRe:(n,r={})=>t.makeRe(n,sr(e,r)),braceExpand:(n,r={})=>t.braceExpand(n,sr(e,r)),match:(n,r,i={})=>t.match(n,r,sr(e,i)),sep:t.sep,GLOBSTAR:sn})};let si=(e,t={})=>(iR(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e))?[e]:iZ(e);ij.braceExpand=si,ij.makeRe=(e,t={})=>new sa(e,t).makeRe(),ij.match=(e,t,n={})=>{let r=new sa(t,n);return e=e.filter(e=>r.match(e)),r.options.nonull&&!e.length&&e.push(t),e};let ss=/[?*]|[+@!]\(.*?\)|\[|\]/,so=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class sa{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){iR(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||i8,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==t.windowsNoMagicRoot?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if("string"!=typeof t)return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0)){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(e=>this.slashSplit(e));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let r=this.globParts.map((e,t,n)=>{if(this.isWindows&&this.windowsNoMagicRoot){let t=""===e[0]&&""===e[1]&&("?"===e[2]||!ss.test(e[2]))&&!ss.test(e[3]),n=/^[a-z]:/i.test(e[0]);if(t)return[...e.slice(0,4),...e.slice(4).map(e=>this.parse(e))];if(n)return[e[0],...e.slice(1).map(e=>this.parse(e))]}return e.map(e=>this.parse(e))});if(this.debug(this.pattern,r),this.set=r.filter(e=>-1===e.indexOf(!1)),this.isWindows)for(let e=0;e<this.set.length;e++){let t=this.set[e];""===t[0]&&""===t[1]&&"?"===this.globParts[e][2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3])&&(t[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)"**"===e[t][n]&&(e[t][n]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(e=>{let t=-1;for(;-1!==(t=e.indexOf("**",t+1));){let n=t;for(;"**"===e[n+1];)n++;n!==t&&e.splice(t,n-t)}return e})}levelOneOptimize(e){return e.map(e=>0===(e=e.reduce((e,t)=>{let n=e[e.length-1];return"**"===t&&"**"===n||(".."===t&&n&&".."!==n&&"."!==n&&"**"!==n?e.pop():e.push(t)),e},[])).length?[""]:e)}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){let r=e[n];(1!==n||""!==r||""!==e[0])&&("."===r||""===r)&&(t=!0,e.splice(n,1),n--)}"."===e[0]&&2===e.length&&("."===e[1]||""===e[1])&&(t=!0,e.pop())}let n=0;for(;-1!==(n=e.indexOf("..",n+1));){let r=e[n-1];r&&"."!==r&&".."!==r&&"**"!==r&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return 0===e.length?[""]:e}firstPhasePreProcess(e){let t=!1;do for(let n of(t=!1,e)){let r=-1;for(;-1!==(r=n.indexOf("**",r+1));){let i=r;for(;"**"===n[i+1];)i++;i>r&&n.splice(r+1,i-r);let s=n[r+1],o=n[r+2],a=n[r+3];if(".."!==s||!o||"."===o||".."===o||!a||"."===a||".."===a)continue;t=!0,n.splice(r,1);let l=n.slice(0);l[r]="**",e.push(l),r--}if(!this.preserveMultipleSlashes){for(let e=1;e<n.length-1;e++){let r=n[e];(1!==e||""!==r||""!==n[0])&&("."===r||""===r)&&(t=!0,n.splice(e,1),e--)}"."===n[0]&&2===n.length&&("."===n[1]||""===n[1])&&(t=!0,n.pop())}let i=0;for(;-1!==(i=n.indexOf("..",i+1));){let e=n[i-1];if(e&&"."!==e&&".."!==e&&"**"!==e){t=!0;let e=1===i&&"**"===n[i+1]?["."]:[];n.splice(i-1,2,...e),0===n.length&&n.push(""),i-=2}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){let r=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);if(r){e[t]=[],e[n]=r;break}}return e.filter(e=>e.length)}partsMatch(e,t,n=!1){let r=0,i=0,s=[],o="";for(;r<e.length&&i<t.length;)if(e[r]===t[i])s.push("b"===o?t[i]:e[r]),r++,i++;else if(n&&"**"===e[r]&&t[i]===e[r+1])s.push(e[r]),r++;else if(n&&"**"===t[i]&&e[r]===t[i+1])s.push(t[i]),i++;else if("*"===e[r]&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&"**"!==t[i]){if("b"===o)return!1;o="a",s.push(e[r]),r++,i++}else{if("*"!==t[i]||!e[r]||!this.options.dot&&e[r].startsWith(".")||"**"===e[r]||"a"===o)return!1;o="b",s.push(t[i]),r++,i++}return e.length===t.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,n=0;for(let r=0;r<e.length&&"!"===e.charAt(r);r++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n=!1){let r=this.options;if(this.isWindows){let n="string"==typeof e[0]&&/^[a-z]:$/i.test(e[0]),r=!n&&""===e[0]&&""===e[1]&&"?"===e[2]&&/^[a-z]:$/i.test(e[3]),i="string"==typeof t[0]&&/^[a-z]:$/i.test(t[0]),s=!i&&""===t[0]&&""===t[1]&&"?"===t[2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3]),o=r?3:n?0:void 0,a=s?3:i?0:void 0;if("number"==typeof o&&"number"==typeof a){let[n,r]=[e[o],t[a]];n.toLowerCase()===r.toLowerCase()&&(t[a]=n,a>o?t=t.slice(a):o>a&&(e=e.slice(o)))}}let{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,l=t.length;s<a&&o<l;s++,o++){let i;this.debug("matchOne loop");var c=t[o],u=e[s];if(this.debug(t,c,u),!1===c)return!1;if(c===sn){this.debug("GLOBSTAR",[t,c,u]);var p=s,d=o+1;if(d===l){for(this.debug("** at the end");s<a;s++)if("."===e[s]||".."===e[s]||!r.dot&&"."===e[s].charAt(0))return!1;return!0}for(;p<a;){var h=e[p];if(this.debug("\nglobstar while",e,p,t,d,h),this.matchOne(e.slice(p),t.slice(d),n))return this.debug("globstar found match!",p,a,h),!0;if("."===h||".."===h||!r.dot&&"."===h.charAt(0)){this.debug("dot detected!",e,p,t,d);break}this.debug("globstar swallow a segment, and continue"),p++}if(n&&(this.debug("\n>>> no match, partial?",e,p,t,d),p===a))return!0;return!1}if("string"==typeof c?(i=u===c,this.debug("string match",c,u,i)):(i=c.test(u),this.debug("pattern match",c,u,i)),!i)return!1}if(s===a&&o===l)return!0;if(s===a)return n;if(o===l)return s===a-1&&""===e[s];throw Error("wtf?")}braceExpand(){return si(this.pattern,this.options)}parse(e){let t;iR(e);let n=this.options;if("**"===e)return sn;if(""===e)return"";let r=null;(t=e.match(iq))?r=n.dot?i1:i0:(t=e.match(iP))?r=(n.nocase?n.dot?iz:iM:n.dot?iF:iA)(t[1]):(t=e.match(i2))?r=(n.nocase?n.dot?i5:i9:n.dot?i3:i4)(t):(t=e.match(iB))?r=n.dot?iU:iQ:(t=e.match(iD))&&(r=i$);let i=iK.fromGlob(e,this.options).toMMPattern();return r&&"object"==typeof i&&Reflect.defineProperty(i,"test",{value:r}),i}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",r=new Set(t.nocase?["i"]:[]),i=e.map(e=>{let t=e.map(e=>{if(e instanceof RegExp)for(let t of e.flags.split(""))r.add(t);return"string"==typeof e?so(e):e===sn?sn:e._src});return t.forEach((e,r)=>{let i=t[r+1],s=t[r-1];e===sn&&s!==sn&&(void 0===s?void 0!==i&&i!==sn?t[r+1]="(?:\\/|"+n+"\\/)?"+i:t[r]=n:void 0===i?t[r-1]=s+"(?:\\/|"+n+")?":i!==sn&&(t[r-1]=s+"(?:\\/|\\/"+n+"\\/)"+i,t[r+1]=sn))}),t.filter(e=>e!==sn).join("/")}).join("|"),[s,o]=e.length>1?["(?:",")"]:["",""];i="^"+s+i+o+"$",this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...r].join(""))}catch(e){this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let r=this.slashSplit(e);this.debug(this.pattern,"split",r);let i=this.set;this.debug(this.pattern,"set",i);let s=r[r.length-1];if(!s)for(let e=r.length-2;!s&&e>=0;e--)s=r[e];for(let e=0;e<i.length;e++){let o=i[e],a=r;if(n.matchBase&&1===o.length&&(a=[s]),this.matchOne(a,o,t)){if(n.flipNegate)return!0;return!this.negate}}return!n.flipNegate&&this.negate}static defaults(e){return ij.defaults(e).Minimatch}}ij.AST=iK,ij.Minimatch=sa,ij.escape=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&"),ij.unescape=ix;let sl="@fastify/otel",sc=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend","onResponse","onError"],su={HOOK_NAME:"hook.name",FASTIFY_TYPE:"fastify.type",HOOK_CALLBACK_NAME:"hook.callback.name",ROOT:"fastify.root"},sp={ROUTE:"route-hook",INSTANCE:"hook",HANDLER:"request-handler"},sd="anonymous",sh=Symbol("fastify otel instance"),sm=Symbol("fastify otel request spans"),sf=Symbol("fastify otel request context"),sg=Symbol("fastify otel addhook original"),sb=Symbol("fastify otel setnotfound original"),sy=Symbol("fastify otel ignore path");class s_ extends eK.w{constructor(e){if(super(sl,"0.8.0",e),this.servername=e?.servername??process.env.OTEL_SERVICE_NAME??"fastify",this[sy]=null,this._logger=_.K.createComponentLogger({namespace:sl}),e?.ignorePaths!=null||null!=process.env.OTEL_FASTIFY_IGNORE_PATHS){let t=e?.ignorePaths??process.env.OTEL_FASTIFY_IGNORE_PATHS;if(("string"!=typeof t||0===t.length)&&"function"!=typeof t)throw TypeError("ignorePaths must be a string or a function");this[sy]=e=>"function"==typeof t?t(e):ij(e.url,t)}}enable(){if(void 0===this._handleInitialization&&this.getConfig().registerOnInitialization){let e=this.plugin();this._handleInitialization=t=>{t.fastify.register(e)},eO.subscribe("fastify.initialization",this._handleInitialization)}return super.enable()}disable(){return this._handleInitialization&&(eO.unsubscribe("fastify.initialization",this._handleInitialization),this._handleInitialization=void 0),super.disable()}init(){return[]}plugin(){let e=this;return t[Symbol.for("skip-override")]=!0,t[Symbol.for("fastify.display-name")]="@fastify/otel",t[Symbol.for("plugin-meta")]={fastify:">=4.0.0 <6",name:"@fastify/otel"},t;function t(t,n,r){function i(e,t,n,r){let i=e[sm];null!=i&&(t.statusCode<500&&i.setStatus({code:nw.Q.OK,message:"OK"}),i.setAttributes({[ny.pA]:t.statusCode}),i.end()),e[sm]=null,r(null,n)}function s(e,t,n,r){let i=e[sm];null!=i&&(i.setStatus({code:nw.Q.ERROR,message:n.message}),i.recordException(n)),r()}function o(e,t={}){return function(...n){let r=this[sh],[i]=n;if(!1===r.isEnabled())return e.call(this,...n);let s=i[sf]??eY.D.active(),o=r.tracer.startSpan(`handler - ${e.name?.length>0?e.name:this.pluginName??sd}`,{attributes:t},s);return eY.D.with(nW.g.setSpan(s,o),function(){try{let t=e.call(this,...n);if("function"==typeof t?.then)return t.then(e=>(o.end(),e),e=>(o.setStatus({code:nw.Q.ERROR,message:e.message}),o.recordException(e),o.end(),Promise.reject(e)));return o.end(),t}catch(e){throw o.setStatus({code:nw.Q.ERROR,message:e.message}),o.recordException(e),o.end(),e}},this)}}t.decorate(sh,e),t.decorate(sg,t.addHook),t.decorate(sb,t.setNotFoundHandler),t.decorateRequest("opentelemetry",function(){let t=this[sf];return{span:this[sm],tracer:e.tracer,context:t,inject:(e,n)=>nx.u.inject(t,e,n),extract:(e,n)=>nx.u.extract(t,e,n)}}),t.decorateRequest(sm,null),t.decorateRequest(sf,null),t.addHook("onRoute",function(n){if(e[sy]?.(n)===!0){e._logger.debug(`Ignoring route instrumentation ${n.method} ${n.url} because it matches the ignore path`);return}for(let e of sc)if(null!=n[e]){let r=n[e];if("function"==typeof r)n[e]=o(r,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - route -> ${e}`,[su.FASTIFY_TYPE]:sp.ROUTE,[ny.vO]:n.url,[su.HOOK_CALLBACK_NAME]:r.name?.length>0?r.name:sd});else if(Array.isArray(r)){let i=[];for(let s of r)i.push(o(s,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - route -> ${e}`,[su.FASTIFY_TYPE]:sp.ROUTE,[ny.vO]:n.url,[su.HOOK_CALLBACK_NAME]:s.name?.length>0?s.name:sd}));n[e]=i}}null!=n.onSend?n.onSend=Array.isArray(n.onSend)?[...n.onSend,i]:[n.onSend,i]:n.onSend=i,null!=n.onError?n.onError=Array.isArray(n.onError)?[...n.onError,s]:[n.onError,s]:n.onError=s,n.handler=o(n.handler,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - route-handler`,[su.FASTIFY_TYPE]:sp.HANDLER,[ny.vO]:n.url,[su.HOOK_CALLBACK_NAME]:n.handler.name.length>0?n.handler.name:sd})}),t.addHook("onRequest",function(e,n,r){if(!1===this[sh].isEnabled())return r();if(this[sh][sy]?.({url:e.url,method:e.method})===!0)return this[sh]._logger.debug(`Ignoring request ${e.method} ${e.url} because it matches the ignore path`),r();let i=eY.D.active();null==nW.g.getSpan(i)&&(i=nx.u.extract(i,e.headers));let s=(0,iI.Vt)(i);null!=e.routeOptions.url&&s?.type===iI.GI.HTTP&&(s.route=e.routeOptions.url);let o=this[sh].tracer.startSpan("request",{attributes:{[ny.Mn]:t[sh].servername,[su.ROOT]:"@fastify/otel",[ny.vO]:e.url,[ny.Oh]:e.method}},i);e[sf]=nW.g.setSpan(i,o),e[sm]=o,eY.D.with(e[sf],()=>{r()})}),t.addHook("onResponse",function(e,t,n){let r=e[sm];null!=r&&(r.setStatus({code:nw.Q.OK,message:"OK"}),r.setAttributes({[ny.pA]:404}),r.end()),e[sm]=null,n()}),t.addHook=function(e,n){let r=this[sg];return sc.includes(e)?r.call(this,e,o(n,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - ${e}`,[su.FASTIFY_TYPE]:sp.INSTANCE,[su.HOOK_CALLBACK_NAME]:n.name?.length>0?n.name:sd})):r.call(this,e,n)},t.setNotFoundHandler=function(e,n){let r=this[sb];"function"==typeof e?(n=o(e,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - not-found-handler`,[su.FASTIFY_TYPE]:sp.INSTANCE,[su.HOOK_CALLBACK_NAME]:e.name?.length>0?e.name:sd}),r.call(this,n)):(null!=e.preValidation&&(e.preValidation=o(e.preValidation,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - not-found-handler - preValidation`,[su.FASTIFY_TYPE]:sp.INSTANCE,[su.HOOK_CALLBACK_NAME]:e.preValidation.name?.length>0?e.preValidation.name:sd})),null!=e.preHandler&&(e.preHandler=o(e.preHandler,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - not-found-handler - preHandler`,[su.FASTIFY_TYPE]:sp.INSTANCE,[su.HOOK_CALLBACK_NAME]:e.preHandler.name?.length>0?e.preHandler.name:sd})),n=o(n,{[ny.Mn]:t[sh].servername,[su.HOOK_NAME]:`${this.pluginName} - not-found-handler`,[su.FASTIFY_TYPE]:sp.INSTANCE,[su.HOOK_CALLBACK_NAME]:n.name?.length>0?n.name:sd}),r.call(this,e,n))},r()}}}(function(e){e.FASTIFY_NAME="fastify.name",e.FASTIFY_TYPE="fastify.type",e.HOOK_NAME="hook.name",e.PLUGIN_NAME="plugin.name"})(m||(m={})),function(e){e.MIDDLEWARE="middleware",e.REQUEST_HANDLER="request_handler"}(f||(f={})),function(e){e.MIDDLEWARE="middleware",e.REQUEST_HANDLER="request handler"}(g||(g={}));let sv=Symbol("opentelemetry.instrumentation.fastify.request_active_span");function sS(e,t,n,r={}){let i=t.startSpan(n,{attributes:r}),s=e[sv]||[];return s.push(i),Object.defineProperty(e,sv,{enumerable:!1,configurable:!0,value:s}),i}function sI(e,t){let n=e[sv]||[];n.length&&(n.forEach(e=>{t&&(e.setStatus({code:nw.Q.ERROR,message:t.message}),e.recordException(t)),e.end()}),delete e[sv])}function sZ(e){return"object"==typeof e&&e&&"function"==typeof Object.getOwnPropertyDescriptor(e,"then")?.value||!1}let sR="anonymous",sC=new Set(["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError"]);class sW extends eK.w{constructor(e={}){super("@sentry/instrumentation-fastify-v3","0.1.0",e)}init(){return[new ej.o("fastify",[">=3.0.0 <4"],e=>this._patchConstructor(e))]}_hookOnRequest(){let e=this;return function(t,n,r){if(!e.isEnabled())return r();e._wrap(n,"send",e._patchSend());let i=(0,iI.Vt)(eY.D.active()),s=t.routeOptions?t.routeOptions.url:t.routerPath;s&&i?.type===iI.GI.HTTP&&(i.route=s);let o=t.method||"GET";eZ().setTransactionName(`${o} ${s}`),r()}}_wrapHandler(e,t,n,r){let i=this;return this._diag.debug("Patching fastify route.handler function"),function(...s){if(!i.isEnabled())return n.apply(this,s);let o=n.name||e||sR,a=`${g.MIDDLEWARE} - ${o}`,l=s[1],c=sS(l,i.tracer,a,{[m.FASTIFY_TYPE]:f.MIDDLEWARE,[m.PLUGIN_NAME]:e,[m.HOOK_NAME]:t}),u=r&&s[s.length-1];return u&&(s[s.length-1]=function(...e){sI(l),u.apply(this,e)}),eY.D.with(nW.g.setSpan(eY.D.active(),c),()=>(function(e,t,n){let r,i;try{i=e(),sZ(i)&&i.then(e=>t(void 0,e),e=>t(e))}catch(e){r=e}finally{if(!sZ(i)&&(t(r,i),r))throw r;return i}})(()=>n.apply(this,s),e=>{e instanceof Error&&(c.setStatus({code:nw.Q.ERROR,message:e.message}),c.recordException(e)),r||sI(l)}))}}_wrapAddHook(){let e=this;return this._diag.debug("Patching fastify server.addHook function"),function(t){return function(...n){let r=n[0],i=n[1],s=this.pluginName;if(!sC.has(r))return t.apply(this,n);let o="function"==typeof n[n.length-1]&&"AsyncFunction"!==i.constructor.name;return t.apply(this,[r,e._wrapHandler(s,r,i,o)])}}}_patchConstructor(e){let t=this;function n(...r){let i=e.fastify.apply(this,r);return i.addHook("onRequest",t._hookOnRequest()),i.addHook("preHandler",t._hookPreHandler()),function(){let e=ek();e&&e.on("spanStart",e=>{sk(e)})}(),t._wrap(i,"addHook",t._wrapAddHook()),i}return void 0!==e.errorCodes&&(n.errorCodes=e.errorCodes),n.fastify=n,n.default=n,n}_patchSend(){let e=this;return this._diag.debug("Patching fastify reply.send function"),function(t){return function(...n){let r=n[0];return e.isEnabled()?(0,iu._W)(()=>t.apply(this,n),e=>{!e&&r instanceof Error&&(e=r),sI(this,e)}):t.apply(this,n)}}}_hookPreHandler(){let e=this;return this._diag.debug("Patching fastify preHandler function"),function(t,n,r){if(!e.isEnabled())return r();let i=t.routeOptions?.handler||t.context?.handler,s=i?.name.startsWith("bound ")?i.name.substring(6):i?.name,o=`${g.REQUEST_HANDLER} - ${s||this.pluginName||sR}`,a={[m.PLUGIN_NAME]:this.pluginName,[m.FASTIFY_TYPE]:f.REQUEST_HANDLER,[n_.XOM]:t.routeOptions?t.routeOptions.url:t.routerPath};s&&(a[m.FASTIFY_NAME]=s);let l=sS(n,e.tracer,o,a);sk(l);let{requestHook:c}=e.getConfig();return c&&(0,iu._W)(()=>c(l,{request:t}),t=>{t&&e._diag.error("request hook failed",t)},!0),eY.D.with(nW.g.setSpan(eY.D.active(),l),()=>{r()})}}}function sk(e){let t=tX(e).data,n=t["fastify.type"];if(t[e1]||!n)return;e.setAttributes({[e2]:"auto.http.otel.fastify",[e1]:`${n}.fastify`});let r=t["fastify.name"]||t["plugin.name"]||t["hook.name"];if("string"==typeof r){let t=r.replace(/^fastify -> /,"").replace(/^@fastify\/otel -> /,"");e.updateName(t)}}let sX="Fastify",sN=eV(`${sX}.v3`,()=>new sW);function sx(){let e=ek();if(e)return e.getIntegrationByName(sX)}function sG(e,t,n,r){let i=sx()?.getShouldHandleError()||sL;if("diagnostics-channel"===r&&(this.diagnosticsChannelExists=!0),this.diagnosticsChannelExists&&"onError-hook"===r){ig&&P.warn("Fastify error handler was already registered via diagnostics channel.","You can safely remove `setupFastifyErrorHandler` call and set `shouldHandleError` on the integration options.");return}i(e,t,n)&&t2(e,{mechanism:{handled:!1,type:"auto.function.fastify"}})}let sw=eV(`${sX}.v5`,()=>{let e=new s_,t=e.plugin();return eO.subscribe("fastify.initialization",e=>{let n=e.fastify;n?.register(t).after(e=>{e?ig&&P.error("Failed to setup Fastify instrumentation",e):(function(){let e=ek();e&&e.on("spanStart",e=>{sE(e)})}(),n&&function(e){e.addHook("onRequest",async(e,t)=>{if(e.opentelemetry){let{span:t}=e.opentelemetry();t&&sE(t)}let n=e.routeOptions?.url,r=e.method||"GET";eZ().setTransactionName(`${r} ${n}`)})}(n))})}),eO.subscribe("tracing:fastify.request.handler:error",e=>{let{error:t,request:n,reply:r}=e;sG.call(sG,t,n,r,"diagnostics-channel")}),e}),sT=({shouldHandleError:e})=>{let t;return{name:sX,setupOnce(){t=e||sL,sN(),sw()},getShouldHandleError:()=>t,setShouldHandleError(e){t=e}}},sH=(e={})=>sT(e);function sL(e,t,n){let r=n.statusCode;return r>=500||r<=299}function sV(e,t){t?.shouldHandleError&&sx()?.setShouldHandleError(t.shouldHandleError);let n=Object.assign(function(e,t,n){e.addHook("onError",async(e,t,n)=>{sG.call(sG,n,e,t,"onError-hook")}),n()},{[Symbol.for("skip-override")]:!0,[Symbol.for("fastify.display-name")]:"sentry-fastify-error-handler"});e.register(n)}function sE(e){let t=tX(e),n=t.description,r=t.data,i=r["fastify.type"],s="hook"===i,o=i===n?.startsWith("handler -"),a="request"===n||"request-handler"===i;if(r[e1]||!o&&!a&&!s)return;e.setAttributes({[e2]:"auto.http.otel.fastify",[e1]:`${s?"hook":o?"middleware":a?"request-handler":"<unknown>"}.fastify`});let l=r["fastify.name"]||r["plugin.name"]||r["hook.name"];if("string"==typeof l){let t=l.replace(/^fastify -> /,"").replace(/^@fastify\/otel -> /,"");e.updateName(t)}}var sO=n(96686);let sY="Graphql",sJ=eV(sY,sO.GraphQLInstrumentation,e=>{let t=sj(e);return{...t,responseHook(e,n){rM(e,"auto.graphql.otel.graphql"),n.errors?.length&&!tX(e).status&&e.setStatus({code:nw.Q.ERROR});let r=tX(e).data,i=r["graphql.operation.type"],s=r["graphql.operation.name"];if(t.useOperationNameForRootSpan&&i){let t=tL(e),n=tX(t).data[nO]||[],r=s?`${i} ${s}`:`${i}`;Array.isArray(n)?(n.push(r),t.setAttribute(nO,n)):"string"==typeof n?t.setAttribute(nO,[n,r]):t.setAttribute(nO,r),tX(t).data["original-description"]||t.setAttribute("original-description",tX(t).description),t.updateName(`${tX(t).data["original-description"]} (${function(e){if(Array.isArray(e)){let t=e.slice().sort();return t.length<=5?t.join(", "):`${t.slice(0,5).join(", ")}, +${t.length-5}`}return`${e}`}(n)})`)}}}}),sK=(e={})=>({name:sY,setupOnce(){sJ(sj(e))}});function sj(e){return{ignoreResolveSpans:!0,ignoreTrivialResolveSpans:!0,useOperationNameForRootSpan:!0,...e}}var sP=n(55594);let sA="Kafka",sF=eV(sA,()=>new sP.KafkaJsInstrumentation({consumerHook(e){rM(e,"auto.kafkajs.otel.consumer")},producerHook(e){rM(e,"auto.kafkajs.otel.producer")}})),sM=()=>({name:sA,setupOnce(){sF()}});var sz=n(47823);let sB="LruMemoizer",sQ=eV(sB,()=>new sz.LruMemoizerInstrumentation),sU=()=>({name:sB,setupOnce(){sQ()}});var sD=n(83711);let s$="Mongo",sq=eV(s$,()=>new sD.MongoDBInstrumentation({dbStatementSerializer:s0,responseHook(e){rM(e,"auto.db.otel.mongo")}}));function s0(e){return JSON.stringify(function e(t){let n;return Array.isArray(t)?t.map(t=>e(t)):"object"!=typeof t||null===t||(n=!1,"undefined"!=typeof Buffer&&(n=Buffer.isBuffer(t)),n)?"?":Object.entries(t).map(([t,n])=>[t,e(n)]).reduce((e,t)=>(Array.isArray(t)&&(e[t[0]]=t[1]),e),{})}(e))}let s1=()=>({name:s$,setupOnce(){sq()}});var s2=n(43846);let s9="Mongoose",s5=eV(s9,()=>new s2.MongooseInstrumentation({responseHook(e){rM(e,"auto.db.otel.mongoose")}})),s3=()=>({name:s9,setupOnce(){s5()}});var s4=n(9303);let s7="Mysql",s6=eV(s7,()=>new s4.MySQLInstrumentation({})),s8=()=>({name:s7,setupOnce(){s6()}});var oe=n(45916);let ot="Mysql2",on=eV(ot,()=>new oe.MySQL2Instrumentation({responseHook(e){rM(e,"auto.db.otel.mysql2")}})),or=()=>({name:ot,setupOnce(){on()}});var oi=n(65387),os=n(15113);let oo=["get","set","setex"],oa=["get","mget"],ol=["set","setex"];function oc(e,t){return e.includes(t.toLowerCase())}function ou(e){return oc(oa,e)?"cache.get":oc(ol,e)?"cache.put":void 0}function op(e){let t=[],n=e=>{e.forEach(e=>{Array.isArray(e)?n(e):t.push(e)})};return n(e),t}let od="Redis",oh={},om=(e,t,n,r)=>{e.setAttribute(e2,"auto.db.otel.redis");let i=function(e,t){try{if(0===t.length)return;let n=e=>"string"==typeof e||"number"==typeof e||Buffer.isBuffer(e)?[e.toString()]:Array.isArray(e)?op(e.map(e=>n(e))):["<unknown>"],r=t[0];if(oc(oo,e)&&null!=r)return n(r);return op(t.map(e=>n(e)))}catch{return}}(t,n),s=ou(t);if(!i||!s||!oh.cachePrefixes||!function(e,t,n){if(!ou(e))return!1;for(let e of t)if(function(e,t){return t.some(t=>e.startsWith(t))}(e,n))return!0;return!1}(t,i,oh.cachePrefixes))return;let o=tX(e).data["net.peer.name"],a=tX(e).data["net.peer.port"];a&&o&&e.setAttributes({"network.peer.address":o,"network.peer.port":a});let l=function(e){let t=e=>{try{if(Buffer.isBuffer(e))return e.byteLength;if("string"==typeof e)return e.length;if("number"==typeof e)return e.toString().length;if(null==e)return 0;return JSON.stringify(e).length}catch{return}};return Array.isArray(e)?e.reduce((e,n)=>{let r=t(n);return"number"==typeof r?void 0!==e?e+r:r:e},0):t(e)}(r);l&&e.setAttribute("cache.item_size",l),oc(oa,t)&&void 0!==l&&e.setAttribute("cache.hit",l>0),e.setAttributes({[e1]:s,"cache.key":i});let c=i.join(", ");e.updateName(oh.maxCacheKeyLength?ec(c,oh.maxCacheKeyLength):c)},of=eV(`${od}.IORedis`,()=>new oi.IORedisInstrumentation({responseHook:om})),og=eV(`${od}.Redis`,()=>new os.RedisInstrumentation({responseHook:om})),ob=Object.assign(()=>{of(),og()},{id:od}),oy=(e={})=>({name:od,setupOnce(){oh=e,ob()}});var o_=n(7407);let ov="Postgres",oS=eV(ov,()=>new o_.PgInstrumentation({requireParentSpan:!0,requestHook(e){rM(e,"auto.db.otel.postgres")}})),oI=()=>({name:ov,setupOnce(){oS()}});var oZ=n(1709);class oR{constructor(e={}){this._traceId=e.traceId||Q(),this._spanId=e.spanId||eo()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function oC(e,t=[]){return[e,t]}function oW(e,t){for(let n of e[1]){let e=n[0].type;if(t(n,e))return!0}return!1}function ok(e){let t=R(I);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function oX(e){let[t,n]=e,r=JSON.stringify(t);function i(e){"string"==typeof r?r="string"==typeof e?r+e:[ok(r),e]:r.push("string"==typeof e?ok(e):e)}for(let e of n){let[t,n]=e;if(i(`
${JSON.stringify(t)}
`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch{e=JSON.stringify(t0(n))}i(e)}}return"string"==typeof r?r:function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),n=0;for(let r of e)t.set(r,n),n+=r.length;return t}(r)}let oN={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function ox(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function oG(e){P.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function ow(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if("string"==typeof n||n instanceof RegExp){if(ep(e.description,n))return W&&oG(e),!0;continue}if(!n.name&&!n.op)continue;let t=!n.name||ep(e.description,n.name),r=!n.op||e.op&&ep(e.op,n.op);if(t&&r)return W&&oG(e),!0}return!1}class oT{constructor(e={}){this._traceId=e.traceId||Q(),this._spanId=e.spanId||eo(),this._startTime=e.startTimestamp||er(),this._links=e.links,this._attributes={},this.setAttributes({[e2]:"manual",[e1]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){let{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=tW(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(eq,"custom"),this}end(e){this._endTime||(this._endTime=tW(e),nR(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[e1],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:tx(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[e2],profile_id:this._attributes[e4],exclusive_time:this._attributes[e7],measurements:nI(this._events),is_segment:this._isStandaloneSpan&&tL(this)===this||void 0,segment_id:this._isStandaloneSpan?tL(this).spanContext().spanId:void 0,links:tC(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){W&&P.log("[Tracing] Adding an event to span:",e);let r=oH(t)?t:n||er(),i=oH(t)?{}:t||{},s={name:e,time:tW(r),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let e=ek();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===tL(this)))return;if(this._isStandaloneSpan){this._sampled?function(e){let t=ek();if(!t)return;let n=e[1];if(!n||0===n.length){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}(function(e,t){let n=tj(e[0]),r=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...!!n.trace_id&&!!n.public_key&&{trace:n},...!!i&&r&&{dsn:ta(r)}},{beforeSendSpan:o,ignoreSpans:a}=t?.getOptions()||{},l=a?.length?e.filter(e=>!ow(tX(e),a)):e,c=e.length-l.length;c&&t?.recordDroppedEvent("before_send","span",c);let u=o?e=>{let t=tX(e);return o(t)||(tE(),t)}:tX,p=[];for(let e of l){let t=u(e);t&&p.push([{type:"span"},t])}return oC(s,p)}([this],e)):(W&&P.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}let t=this._convertSpanToTransaction();t&&(tf(this).scope||eI()).captureEvent(t)}_convertSpanToTransaction(){if(!oL(tX(this)))return;this._name||(W&&P.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:e,isolationScope:t}=tf(this),n=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;let r=tH(this).filter(e=>e!==this&&!(e instanceof oT&&e.isStandaloneSpan())).map(e=>tX(e)).filter(oL),i=this._attributes[eq];delete this._attributes[e3],r.forEach(e=>{delete e.data[e3]});let s={contexts:{trace:function(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:s,status:o,origin:a,links:l}=tX(e);return{parent_span_id:s,span_id:t,trace_id:n,data:r,op:i,status:o,origin:a,links:l}}(this)},spans:r.length>1e3?r.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,dynamicSamplingContext:tj(this)},request:n,...i&&{transaction_info:{source:i}}},o=nI(this._events);return o&&Object.keys(o).length&&(W&&P.log("[Measurements] Adding measurements to transaction event",JSON.stringify(o,void 0,2)),s.measurements=o),s}}function oH(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function oL(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}let oV="__SENTRY_SUPPRESS_TRACING__";function oE(e,t){let n=oM();if(n.startSpan)return n.startSpan(e,t);let r=oF(e),{forceTransaction:i,parentSpan:s,scope:o}=e;return eC(o?.clone(),()=>oQ(s)(()=>{let n=eI(),o=oB(n,s),a=e.onlyIfParent&&!o?new oR:oA({parentSpan:o,spanArguments:r,forceTransaction:i,scope:n});return el(n,a),nv(()=>t(a),()=>{let{status:e}=tX(a);a.isRecording()&&(!e||"ok"===e)&&a.setStatus({code:2,message:"internal_error"})},()=>{a.end()})}))}function oO(e,t){let n=oM();if(n.startSpanManual)return n.startSpanManual(e,t);let r=oF(e),{forceTransaction:i,parentSpan:s,scope:o}=e;return eC(o?.clone(),()=>oQ(s)(()=>{let n=eI(),o=oB(n,s),a=e.onlyIfParent&&!o?new oR:oA({parentSpan:o,spanArguments:r,forceTransaction:i,scope:n});return el(n,a),nv(()=>t(a,()=>a.end()),()=>{let{status:e}=tX(a);a.isRecording()&&(!e||"ok"===e)&&a.setStatus({code:2,message:"internal_error"})})}))}function oY(e){let t=oM();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=oF(e),{forceTransaction:r,parentSpan:i}=e;return(e.scope?t=>eC(e.scope,t):void 0!==i?e=>oK(i,e):e=>e())(()=>{let t=eI(),s=oB(t,i);return e.onlyIfParent&&!s?new oR:oA({parentSpan:s,spanArguments:n,forceTransaction:r,scope:t})})}let oJ=(e,t)=>{let n=eS(Z());if(n.continueTrace)return n.continueTrace(e,t);let{sentryTrace:r,baggage:i}=e,s=ek(),o=te(i);return s&&!tS(s,o?.org_id)?oP(t):eC(e=>{let n=ty(r,i);return e.setPropagationContext(n),t()})};function oK(e,t){let n=oM();return n.withActiveSpan?n.withActiveSpan(e,t):eC(n=>(el(n,e||void 0),t(n)))}function oj(e){let t=oM();return t.suppressTracing?t.suppressTracing(e):eC(t=>{t.setSDKProcessingMetadata({[oV]:!0});let n=e();return t.setSDKProcessingMetadata({[oV]:void 0}),n})}function oP(e){return eC(t=>(t.setPropagationContext({traceId:Q(),sampleRand:Math.random()}),W&&P.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),oK(null,e)))}function oA({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){let i;if(!eN()){let r=new oR;if(n||!e){let e={sampled:"false",sample_rate:"0",transaction:t.name,...tj(r)};F(r,tY,e)}return r}let s=eZ();if(e&&!n)i=function(e,t,n){let{spanId:r,traceId:i}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[oV]&&tN(e),o=s?new oT({...n,parentSpanId:r,traceId:i,sampled:s}):new oR({traceId:i});tT(e,o);let a=ek();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}(e,r,t),tT(e,i);else if(e){let n=tj(e),{traceId:s,spanId:o}=e.spanContext(),a=tN(e);F(i=oz({traceId:s,parentSpanId:o,...t},r,a),tY,n)}else{let{traceId:e,dsc:n,parentSpanId:o,sampled:a}={...s.getPropagationContext(),...r.getPropagationContext()};i=oz({traceId:e,parentSpanId:o,...t},r,a),n&&F(i,tY,n)}return nZ(i),tm(i,r,s),i}function oF(e){let t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let n={...t};return n.startTimestamp=tW(e.startTime),delete n.startTime,n}return t}function oM(){return eS(Z())}function oz(e,t,n){let r=ek(),i=r?.getOptions()||{},{name:s=""}=e,o={spanAttributes:{...e.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});let a=o.parentSampled??n,l=o.spanAttributes,c=t.getPropagationContext(),[u,p,d]=t.getScopeData().sdkProcessingMetadata[oV]?[!1]:nC(i,{name:s,parentSampled:a,attributes:l,parentSampleRate:tg(c.dsc?.sample_rate)},c.sampleRand),h=new oT({...e,attributes:{[eq]:"custom",[e0]:void 0!==p&&d?p:void 0,...l},sampled:u});return!u&&r&&(W&&P.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",h),h}function oB(e,t){if(t)return t;if(null===t)return;let n=e[ea];if(!n)return;let r=ek();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?tL(n):n}function oQ(e){return void 0!==e?t=>oK(e,t):e=>e()}let oU="PostgresJs",oD=[">=3.0.0 <4"],o$=eV(oU,e=>new oq({requireParentSpan:e?.requireParentSpan??!0,requestHook:e?.requestHook}));class oq extends eK.w{constructor(e){super("sentry-postgres-js",S,e)}init(){let e=new ej.o("postgres",oD);return["src","cf/src","cjs/src"].forEach(t=>{e.files.push(new oZ.X(`postgres/${t}/connection.js`,["*"],this._patchConnection.bind(this),this._unwrap.bind(this))),e.files.push(new oZ.X(`postgres/${t}/query.js`,oD,this._patchQuery.bind(this),this._unwrap.bind(this)))}),[e]}_shouldCreateSpans(){let e=this.getConfig();return void 0!==nW.g.getSpan(eY.D.active())||!e.requireParentSpan}_patchReject(e,t){return new Proxy(e,{apply:(e,n,r)=>{t.setStatus({code:2,message:r?.[0]?.message||"internal_error"});let i=Reflect.apply(e,n,r);return t.setAttribute(ny.sG,r?.[0]?.code||"Unknown error"),t.setAttribute(ny.V_,r?.[0]?.name||"Unknown error"),t.end(),i}})}_patchResolve(e,t){return new Proxy(e,{apply:(e,n,r)=>{let i=Reflect.apply(e,n,r),s=r?.[0]?.command;return s&&t.setAttribute(ny.J3,s),t.end(),i}})}_patchQuery(e){return e.Query.prototype.handle=new Proxy(e.Query.prototype.handle,{apply:async(e,t,n)=>{if(!this._shouldCreateSpans())return Reflect.apply(e,t,n);let r=this._sanitizeSqlQuery(t.strings?.[0]);return oO({name:r||"postgresjs.query",op:"db"},i=>{let s=eI().getScopeData().contexts.postgresjsConnection;rM(i,"auto.db.otel.postgres");let{requestHook:o}=this.getConfig();o&&(0,iu._W)(()=>o(i,r,s),e=>{e&&P.error(`Error in requestHook for ${oU} integration:`,e)});let a=s?.ATTR_DB_NAMESPACE||"<unknown database>",l=s?.ATTR_SERVER_ADDRESS||"<unknown host>",c=s?.ATTR_SERVER_PORT||"<unknown port>";i.setAttribute(ny.Hy,"postgres"),i.setAttribute(ny.c0,a),i.setAttribute(ny.dO,l),i.setAttribute(ny.QD,c),i.setAttribute(ny.EU,r),t.resolve=this._patchResolve(t.resolve,i),t.reject=this._patchReject(t.reject,i);try{return Reflect.apply(e,t,n)}catch(e){throw i.setStatus({code:2}),i.end(),e}})}}),e}_patchConnection(e){return new Proxy(e,{apply:(e,t,n)=>{let r=n[0]?.database||"<unknown database>",i=n[0]?.host?.[0]||"<unknown host>",s=n[0]?.port?.[0]||"<unknown port>";return eI().setContext("postgresjsConnection",{ATTR_DB_NAMESPACE:r,ATTR_SERVER_ADDRESS:i,ATTR_SERVER_PORT:s}),Reflect.apply(e,t,n)}})}_sanitizeSqlQuery(e){return e?e.replace(/\s+/g," ").trim().substring(0,1024).replace(/--.*?(\r?\n|$)/g,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/;\s*$/,"").replace(/\b\d+\b/g,"?").replace(/\s+/g," ").replace(/\bIN\b\s*\(\s*\?(?:\s*,\s*\?)*\s*\)/g,"IN (?)"):"Unknown SQL Query"}}let o0=()=>({name:oU,setupOnce(){o$()}});var o1=n(70672),o2=n(43630),o9="true"===process.env.PRISMA_SHOW_ALL_TRACES,o5=class{tracerProvider;ignoreSpanTypes;constructor({tracerProvider:e,ignoreSpanTypes:t}){this.tracerProvider=e,this.ignoreSpanTypes=t}isEnabled(){return!0}getTraceParent(e){let t=nW.g.getSpanContext(e??eY.D.active());return t?`00-${t.traceId}-${t.spanId}-0${t.traceFlags}`:"00-10-10-00"}dispatchEngineSpans(e){let t=this.tracerProvider.getTracer("prisma"),n=new Map;for(let r of e.filter(e=>null===e.parentId))(function e(t,n,r,i,s){if(o4(n.name,s))return;let o={attributes:n.attributes,kind:"client"===n.kind?nk.M.CLIENT:nk.M.INTERNAL,startTime:n.startTime};t.startActiveSpan(n.name,o,o=>{for(let a of(i.set(n.id,o.spanContext().spanId),n.links&&o.addLinks(n.links.flatMap(e=>{let t=i.get(e);return t?{context:{spanId:t,traceId:o.spanContext().traceId,traceFlags:o.spanContext().traceFlags}}:[]})),r.filter(e=>e.parentId===n.id)))e(t,a,r,i,s);o.end(n.endTime)})})(t,r,e,n,this.ignoreSpanTypes)}getActiveContext(){return eY.D.active()}runInChildSpan(e,t){if("string"==typeof e&&(e={name:e}),e.internal&&!o9)return t();let n=this.tracerProvider.getTracer("prisma"),r=e.context??this.getActiveContext(),i=`prisma:client:${e.name}`;if(o4(i,this.ignoreSpanTypes))return t();if(!1===e.active){let s=n.startSpan(i,e,r);return o3(s,t(s,r))}return n.startActiveSpan(i,e,e=>o3(e,t(e,r)))}};function o3(e,t){return null!=t&&"function"==typeof t.then?t.then(t=>(e.end(),t),t=>{throw e.end(),t}):(e.end(),t)}function o4(e,t){return t.some(t=>"string"==typeof t?t===e:t.test(e))}var o7={name:"@prisma/instrumentation",version:"6.15.0"},o6=o7.version,o8=o6.split(".")[0],ae="PRISMA_INSTRUMENTATION",at=`V${o8}_PRISMA_INSTRUMENTATION`,an=o7.name,ar=class extends o1.w{tracerProvider;constructor(e={}){super(an,o6,e)}setTracerProvider(e){this.tracerProvider=e}init(){return[new o2.o("@prisma/client",[o6])]}enable(){let e=this._config,t={helper:new o5({tracerProvider:this.tracerProvider??nW.g.getTracerProvider(),ignoreSpanTypes:e.ignoreSpanTypes??[]})};global[ae]=t,global[at]=t}disable(){delete global[ae],delete global[at]}isEnabled(){return!!global[at]}};let ai="Prisma";function as(){let e=globalThis.PRISMA_INSTRUMENTATION;return e&&"object"==typeof e&&"helper"in e?e.helper:void 0}class ao extends ar{constructor(){super()}enable(){super.enable();let e=as();e&&"object"==typeof e&&"dispatchEngineSpans"in e&&(e.createEngineSpan=e=>{let t=nW.g.getTracer("prismaV5Compatibility"),n=t._idGenerator;if(!n){Y(()=>{console.warn("[Sentry] Could not find _idGenerator on tracer, skipping Prisma v5 compatibility - some Prisma spans may be missing!")});return}try{e.spans.forEach(e=>{var r;let i=(r=e.kind,"client"===r?nk.M.CLIENT:nk.M.INTERNAL),s=e.parent_span_id,o=e.span_id,a=e.trace_id,l=e.links?.map(e=>({context:{traceId:e.trace_id,spanId:e.span_id,traceFlags:nN.r.SAMPLED}})),c=nW.g.setSpanContext(eY.D.active(),{traceId:a,spanId:s,traceFlags:nN.r.SAMPLED});eY.D.with(c,()=>{t._idGenerator={generateTraceId:()=>a,generateSpanId:()=>o},t.startSpan(e.name,{kind:i,links:l,startTime:e.start_time,attributes:e.attributes}).end(e.end_time),t._idGenerator=n})})}finally{t._idGenerator=n}})}}let aa=eV(ai,e=>new ao),al=e=>({name:ai,setupOnce(){aa()},setup(e){as()&&e.on("spanStart",e=>{let t=tX(e);t.description?.startsWith("prisma:")&&e.setAttribute(e2,"auto.db.otel.prisma"),"prisma:engine:db_query"===t.description&&t.data["db.query.text"]&&e.updateName(t.data["db.query.text"]),"prisma:engine:db_query"!==t.description||t.data["db.system"]||e.setAttribute("db.system","prisma")})}});var ac=n(79805);let au="Hapi",ap=eV(au,()=>new ac.HapiInstrumentation),ad=()=>({name:au,setupOnce(){ap()}}),ah={name:"SentryHapiErrorPlugin",version:S,register:async function(e){e.events.on({name:"request",channels:["error"]},(e,t)=>{if(eZ()!==ef()){let t=e.route;t.path&&eZ().setTransactionName(`${t.method.toUpperCase()} ${t.path}`)}else ig&&P.warn("Isolation scope is still the default isolation scope - skipping setting transactionName");t&&"object"==typeof t&&"error"in t&&t.error&&t2(t.error,{mechanism:{type:"auto.function.hapi",handled:!1}})})}};async function am(e){await e.register(ah);let t=ek();t&&t.on("spanStart",e=>{(function(e){let t=tX(e).data,n=t["hapi.type"];!t[e1]&&n&&e.setAttributes({[e2]:"auto.http.otel.hapi",[e1]:`${n}.hapi`})})(e)}),im(e.register,"hapi")}let af={HONO_TYPE:"hono.type",HONO_NAME:"hono.name"},ag={MIDDLEWARE:"middleware",REQUEST_HANDLER:"request_handler"};class ab extends eK.w{constructor(e={}){super("@sentry/instrumentation-hono","0.0.1",e)}init(){return[new ej.o("hono",[">=4.0.0 <5"],e=>this._patch(e))]}_patch(e){let t=this;class n extends e.Hono{constructor(...e){super(...e),t._wrap(this,"get",t._patchHandler()),t._wrap(this,"post",t._patchHandler()),t._wrap(this,"put",t._patchHandler()),t._wrap(this,"delete",t._patchHandler()),t._wrap(this,"options",t._patchHandler()),t._wrap(this,"patch",t._patchHandler()),t._wrap(this,"all",t._patchHandler()),t._wrap(this,"on",t._patchOnHandler()),t._wrap(this,"use",t._patchMiddlewareHandler())}}try{e.Hono=n}catch{return{...e,Hono:n}}return e}_patchHandler(){let e=this;return function(t){return function(...n){if("string"==typeof n[0]){let r=n[0];if(1===n.length)return t.apply(this,[r]);let i=n.slice(1);return t.apply(this,[r,...i.map(t=>e._wrapHandler(t))])}return t.apply(this,n.map(t=>e._wrapHandler(t)))}}}_patchOnHandler(){let e=this;return function(t){return function(...n){let r=n.slice(2);return t.apply(this,[...n.slice(0,2),...r.map(t=>e._wrapHandler(t))])}}}_patchMiddlewareHandler(){let e=this;return function(t){return function(...n){if("string"==typeof n[0]){let r=n[0];if(1===n.length)return t.apply(this,[r]);let i=n.slice(1);return t.apply(this,[r,...i.map(t=>e._wrapHandler(t))])}return t.apply(this,n.map(t=>e._wrapHandler(t)))}}}_wrapHandler(e){let t=this;return function(n,r){if(!t.isEnabled())return e.apply(this,[n,r]);let i=n.req.path,s=t.tracer.startSpan(i);return eY.D.with(nW.g.setSpan(eY.D.active(),s),()=>t._safeExecute(()=>{let o=e.apply(this,[n,r]);if(H(o))return o.then(n=>{let r=t._determineHandlerType(n);return s.setAttributes({[af.HONO_TYPE]:r,[af.HONO_NAME]:r===ag.REQUEST_HANDLER?i:e.name||"anonymous"}),t.getConfig().responseHook?.(s),n});{let n=t._determineHandlerType(o);return s.setAttributes({[af.HONO_TYPE]:n,[af.HONO_NAME]:n===ag.REQUEST_HANDLER?i:e.name||"anonymous"}),t.getConfig().responseHook?.(s),o}},()=>s.end(),e=>{t._handleError(s,e),s.end()}))}}_safeExecute(e,t,n){try{let r=e();return H(r)?r.then(()=>t(),e=>n(e)):t(),r}catch(e){throw n(e),e}}_determineHandlerType(e){return void 0===e?ag.MIDDLEWARE:ag.REQUEST_HANDLER}_handleError(e,t){t instanceof Error&&(e.setStatus({code:nw.Q.ERROR,message:t.message}),e.recordException(t))}}let ay="Hono",a_=eV(ay,()=>new ab({responseHook:e=>{!function(e){let t=tX(e).data,n=t[af.HONO_TYPE];if(t[e1]||!n)return;e.setAttributes({[e2]:"auto.http.otel.hono",[e1]:`${n}.hono`});let r=t[af.HONO_NAME];if("string"==typeof r&&e.updateName(r),eZ()===ef()){ig&&P.warn("Isolation scope is default isolation scope - skipping setting transactionName");return}let i=t[ny.vO],s=t[ny.Oh];"string"==typeof i&&"string"==typeof s&&eZ().setTransactionName(`${s} ${i}`)}(e)}})),av=()=>({name:ay,setupOnce(){a_()}});function aS(e,t){e.use(async function(e,t){let n=rH(e.req);eZ().setSDKProcessingMetadata({normalizedRequest:n}),await t()}),e.use(async function(e,n){await n(),(t?.shouldHandleError||function(e){return e.res.status>=500})(e)&&(e.res.sentry=t2(e.error,{mechanism:{type:"auto.middleware.hono",handled:!1}}))}),im(e.use,"hono")}let aI=eV("Koa",n(81812).KoaInstrumentation,(e={})=>({ignoreLayersType:e.ignoreLayersType,requestHook(e,t){rM(e,"auto.http.otel.koa");let n=tX(e).data,r=n["koa.type"];r&&e.setAttribute(e1,`${r}.koa`);let i=n["koa.name"];if("string"==typeof i&&e.updateName(i||"< unknown >"),eZ()===ef()){ig&&P.warn("Isolation scope is default isolation scope - skipping setting transactionName");return}let s=n[ny.vO],o=t.context?.request?.method?.toUpperCase()||"GET";s&&eZ().setTransactionName(`${o} ${s}`)}})),aZ=(e={})=>({name:"Koa",setupOnce(){aI(e)}}),aR=e=>{e.use(async(e,t)=>{try{await t()}catch(e){throw t2(e,{mechanism:{handled:!1,type:"auto.middleware.koa"}}),e}}),im(e.use,"koa")};var aC=n(41143);let aW="Connect",ak=eV(aW,()=>new aC.ConnectInstrumentation),aX=()=>({name:aW,setupOnce(){ak()}});function aN(e,t,n,r){t2(e,{mechanism:{handled:!1,type:"auto.middleware.connect"}}),r(e)}let ax=e=>{e.use(aN);let t=ek();t&&t.on("spanStart",e=>{(function(e){let t=tX(e).data,n=t["connect.type"];if(t[e1]||!n)return;e.setAttributes({[e2]:"auto.http.otel.connect",[e1]:`${n}.connect`});let r=t["connect.name"];"string"==typeof r&&e.updateName(r)})(e)}),im(e.use,"connect")};var aG=n(5678);let aw="Knex",aT=eV(aw,()=>new aG.KnexInstrumentation({requireParentSpan:!0})),aH=()=>{let e;return{name:aw,setupOnce(){e=eE(aT())},setup(t){e?.(()=>t.on("spanStart",e=>{let{data:t}=tX(e);"knex.version"in t&&e.setAttribute(e2,"auto.db.otel.knex")}))}}};var aL=n(91047);let aV=new Set(["callProcedure","execSql","execSqlBatch","execBulkLoad","prepare","execute"]),aE="Tedious",aO=eV(aE,()=>new aL.TediousInstrumentation({})),aY=()=>{let e;return{name:aE,setupOnce(){e=eE(aO())},setup(t){e?.(()=>t.on("spanStart",e=>{let{description:t,data:n}=tX(e);if(!t||"mssql"!==n["db.system"])return;let r=t.split(" ")[0]||"";aV.has(r)&&e.setAttribute(e2,"auto.db.otel.tedious")}))}}};var aJ=n(66863);let aK="GenericPool",aj=eV(aK,()=>new aJ.GenericPoolInstrumentation({})),aP=()=>{let e;return{name:aK,setupOnce(){e=eE(aj())},setup(t){e?.(()=>t.on("spanStart",e=>{let t=tX(e).description;("generic-pool.aquire"===t||"generic-pool.acquire"===t)&&e.setAttribute(e2,"auto.db.otel.generic_pool")}))}}};var aA=n(65789);let aF="Dataloader",aM=eV(aF,()=>new aA.DataloaderInstrumentation({requireParentSpan:!0})),az=()=>{let e;return{name:aF,setupOnce(){e=eE(aM())},setup(t){e?.(()=>{t.on("spanStart",e=>{let t=tX(e);t.description?.startsWith("dataloader")&&e.setAttribute(e2,"auto.db.otel.dataloader"),("dataloader.load"===t.description||"dataloader.loadMany"===t.description||"dataloader.batch"===t.description)&&e.setAttribute(e1,"cache.get")})})}}};var aB=n(21155);let aQ="Amqplib",aU={consumeEndHook:e=>{rM(e,"auto.amqplib.otel.consumer")},publishHook:e=>{rM(e,"auto.amqplib.otel.publisher")}},aD=eV(aQ,()=>new aB.AmqplibInstrumentation(aU)),a$=()=>({name:aQ,setupOnce(){aD()}}),aq="gen_ai.system",a0="gen_ai.request.model",a1="gen_ai.request.stream",a2="gen_ai.request.temperature",a9="gen_ai.request.max_tokens",a5="gen_ai.request.frequency_penalty",a3="gen_ai.request.presence_penalty",a4="gen_ai.request.top_p",a7="gen_ai.request.top_k",a6="gen_ai.response.finish_reasons",a8="gen_ai.response.model",le="gen_ai.response.id",lt="gen_ai.usage.input_tokens",ln="gen_ai.usage.output_tokens",lr="gen_ai.usage.total_tokens",li="gen_ai.operation.name",ls="gen_ai.request.messages",lo="gen_ai.response.text",la="gen_ai.request.available_tools",ll="gen_ai.response.streaming",lc="gen_ai.response.tool_calls",lu="gen_ai.usage.input_tokens.cache_write",lp="gen_ai.usage.input_tokens.cached",ld={CHAT:"chat",RESPONSES:"responses"},lh="anthropic.response.timestamp",lm=e=>new TextEncoder().encode(e).length,lf=e=>lm(JSON.stringify(e));function lg(e,t){if(lm(e)<=t)return e;let n=0,r=e.length,i="";for(;n<=r;){let s=Math.floor((n+r)/2),o=e.slice(0,s);lm(o)<=t?(i=o,n=s+1):r=s-1}return i}function lb(e,t){return"string"==typeof e?t:{...e,text:t}}function ly(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function l_(e){return`gen_ai.${ly(e)}`}function lv(e,t){return e?`${e}.${t}`:t}function lS(e,t,n,r,i){void 0!==t&&e.setAttributes({[lt]:t}),void 0!==n&&e.setAttributes({[ln]:n}),(void 0!==t||void 0!==n||void 0!==r||void 0!==i)&&e.setAttributes({[lr]:(t??0)+(n??0)+(r??0)+(i??0)})}function lI(e){return"string"==typeof e?lg(e,2e4):Array.isArray(e)?JSON.stringify(function(e,t){var n,r;if(!Array.isArray(e)||0===e.length||2e4>=lf(e))return e;let i=e.map(lf),s=0,o=e.length;for(let t=e.length-1;t>=0;t--){let e=i[t];if(e&&s+e>2e4)break;e&&(s+=e),o=t}return o===e.length?(n=e[e.length-1],r=2e4,n&&"object"==typeof n?null!==n&&"object"==typeof n&&"content"in n&&"string"==typeof n.content?function(e,t){let n=t-lf({...e,content:""});if(n<=0)return[];let r=lg(e.content,n);return[{...e,content:r}]}(n,r):null!==n&&"object"==typeof n&&"parts"in n&&Array.isArray(n.parts)&&n.parts.length>0?function(e,t){let{parts:n}=e,r=n.map(e=>lb(e,"")),i=t-lf({...e,parts:r});if(i<=0)return[];let s=[];for(let e of n){let t="string"==typeof e?e:e.text,n=lm(t);if(n<=i)s.push(e),i-=n;else if(0===s.length){let n=lg(t,i);n&&s.push(lb(e,n));break}else break}return s.length>0?[{...e,parts:s}]:[]}(n,r):[]:[]):e.slice(o)}(e,2e4)):JSON.stringify(e)}let lZ=new Map;function lR(e,t){let n=t.get(e.span_id);n&&e.data&&(n.inputTokens>0&&(e.data[lt]=n.inputTokens),n.outputTokens>0&&(e.data[ln]=n.outputTokens),(n.inputTokens>0||n.outputTokens>0)&&(e.data["gen_ai.usage.total_tokens"]=n.inputTokens+n.outputTokens))}let lC="ai.prompt",lW="ai.model.id",lk="gen_ai.response.model",lX="gen_ai.usage.input_tokens",lN="gen_ai.usage.output_tokens",lx="ai.toolCall.name",lG="ai.toolCall.id";function lw(e,t){e.setAttribute(e2,t)}function lT(e){let{data:t,description:n}=tX(e);if(!n)return;if(t[lx]&&t[lG]&&"ai.toolCall"===n){(function(e,t){lw(e,"auto.vercelai.otel"),e.setAttribute(e1,"gen_ai.execute_tool"),lL(t,lx,"gen_ai.tool.name"),lL(t,lG,"gen_ai.tool.call.id");let n=t["gen_ai.tool.call.id"];"string"==typeof n&&lZ.set(n,e),t["gen_ai.tool.type"]||e.setAttribute("gen_ai.tool.type","function");let r=t["gen_ai.tool.name"];r&&e.updateName(`execute_tool ${r}`)})(e,t);return}let r=t[lW],i=t["ai.model.provider"];"string"==typeof r&&"string"==typeof i&&r&&i&&function(e,t,n){lw(e,"auto.vercelai.otel");let r=t.replace("ai.","");e.setAttribute("ai.pipeline.name",r),e.updateName(r);let i=n["ai.telemetry.functionId"];if(i&&"string"==typeof i&&(e.updateName(`${r} ${i}`),e.setAttribute("gen_ai.function_id",i)),n[lC]){let t=lI(n[lC]);e.setAttribute("gen_ai.prompt",t)}if(n[lW]&&!n[lk]&&e.setAttribute(lk,n[lW]),e.setAttribute("ai.streaming",t.includes("stream")),"ai.generateText"===t){e.setAttribute(e1,"gen_ai.invoke_agent");return}if("ai.generateText.doGenerate"===t){e.setAttribute(e1,"gen_ai.generate_text"),e.updateName(`generate_text ${n[lW]}`);return}if("ai.streamText"===t){e.setAttribute(e1,"gen_ai.invoke_agent");return}if("ai.streamText.doStream"===t){e.setAttribute(e1,"gen_ai.stream_text"),e.updateName(`stream_text ${n[lW]}`);return}if("ai.generateObject"===t){e.setAttribute(e1,"gen_ai.invoke_agent");return}if("ai.generateObject.doGenerate"===t){e.setAttribute(e1,"gen_ai.generate_object"),e.updateName(`generate_object ${n[lW]}`);return}if("ai.streamObject"===t){e.setAttribute(e1,"gen_ai.invoke_agent");return}if("ai.streamObject.doStream"===t){e.setAttribute(e1,"gen_ai.stream_object"),e.updateName(`stream_object ${n[lW]}`);return}if("ai.embed"===t){e.setAttribute(e1,"gen_ai.invoke_agent");return}if("ai.embed.doEmbed"===t){e.setAttribute(e1,"gen_ai.embed"),e.updateName(`embed ${n[lW]}`);return}if("ai.embedMany"===t){e.setAttribute(e1,"gen_ai.invoke_agent");return}if("ai.embedMany.doEmbed"===t){e.setAttribute(e1,"gen_ai.embed_many"),e.updateName(`embed_many ${n[lW]}`);return}t.startsWith("ai.stream")&&e.setAttribute(e1,"ai.run")}(e,n,t)}function lH(e){if("transaction"===e.type&&e.spans){let t=new Map;for(let n of e.spans)(function(e){let{data:t,origin:n}=e;if("auto.vercelai.otel"===n)for(let e of(lL(t,"ai.usage.completionTokens",lN),lL(t,"ai.usage.promptTokens",lX),lL(t,"ai.usage.cachedInputTokens",lp),"number"==typeof t[lN]&&"number"==typeof t[lX]&&(t["gen_ai.usage.total_tokens"]=t[lN]+t[lX]),lL(t,"ai.prompt.messages","gen_ai.request.messages"),lL(t,"ai.response.text","gen_ai.response.text"),lL(t,"ai.response.toolCalls","gen_ai.response.tool_calls"),lL(t,"ai.response.object","gen_ai.response.object"),lL(t,"ai.prompt.tools","gen_ai.request.available_tools"),lL(t,"ai.toolCall.args","gen_ai.tool.input"),lL(t,"ai.toolCall.result","gen_ai.tool.output"),lL(t,"ai.schema","gen_ai.request.schema"),function(e){let t=e["ai.response.providerMetadata"];if(t)try{let n=JSON.parse(t);if(n.openai&&(lE(e,lp,n.openai.cachedPromptTokens),lE(e,"gen_ai.usage.output_tokens.reasoning",n.openai.reasoningTokens),lE(e,"gen_ai.usage.output_tokens.prediction_accepted",n.openai.acceptedPredictionTokens),lE(e,"gen_ai.usage.output_tokens.prediction_rejected",n.openai.rejectedPredictionTokens),lE(e,"gen_ai.conversation.id",n.openai.responseId)),n.anthropic){let t=n.anthropic.usage?.cache_read_input_tokens??n.anthropic.cacheReadInputTokens;lE(e,lp,t);let r=n.anthropic.usage?.cache_creation_input_tokens??n.anthropic.cacheCreationInputTokens;lE(e,lu,r)}n.bedrock?.usage&&(lE(e,lp,n.bedrock.usage.cacheReadInputTokens),lE(e,lu,n.bedrock.usage.cacheWriteInputTokens)),n.deepseek&&(lE(e,lp,n.deepseek.promptCacheHitTokens),lE(e,"gen_ai.usage.input_tokens.cache_miss",n.deepseek.promptCacheMissTokens))}catch{}}(t),Object.keys(t)))e.startsWith("ai.")&&lL(t,e,`vercel.${e}`)})(n),function(e,t){let n=e.parent_span_id;if(!n)return;let r=e.data[lt],i=e.data[ln];if("number"==typeof r||"number"==typeof i){let e=t.get(n)||{inputTokens:0,outputTokens:0};"number"==typeof r&&(e.inputTokens+=r),"number"==typeof i&&(e.outputTokens+=i),t.set(n,e)}}(n,t);for(let n of e.spans)"gen_ai.invoke_agent"===n.op&&lR(n,t);let n=e.contexts?.trace;n&&"gen_ai.invoke_agent"===n.op&&lR(n,t)}return e}function lL(e,t,n){null!=e[t]&&(e[n]=e[t],delete e[t])}function lV(e){e.on("spanStart",lT),e.addEventProcessor(Object.assign(lH,{id:"VercelAiEventProcessor"}))}function lE(e,t,n){null!=n&&(e[t]=n)}let lO="VercelAI",lY=["generateText","streamText","generateObject","streamObject","embed","embedMany"];class lJ extends eK.w{__init(){this._isPatched=!1}__init2(){this._callbacks=[]}constructor(e={}){super("@sentry/instrumentation-vercel-ai",S,e),lJ.prototype.__init.call(this),lJ.prototype.__init2.call(this)}init(){return new ej.o("ai",[">=3.0.0 <6"],this._patch.bind(this))}callWhenPatched(e){this._isPatched?e():this._callbacks.push(e)}_patch(e){this._isPatched=!0,this._callbacks.forEach(e=>e()),this._callbacks=[];let t=e=>new Proxy(e,{apply:(e,t,n)=>{var r,i;let s=n[0].experimental_telemetry||{},o=s.isEnabled,a=ek(),l=a?.getIntegrationByName(lO),{recordInputs:c,recordOutputs:u}=(r=l?.options,i=!!l&&!!a?.getOptions().sendDefaultPii,{recordInputs:r?.recordInputs!==void 0?r.recordInputs:void 0!==s.recordInputs?s.recordInputs:!0===o||i,recordOutputs:r?.recordOutputs!==void 0?r.recordOutputs:void 0!==s.recordOutputs?s.recordOutputs:!0===o||i});return n[0].experimental_telemetry={...s,isEnabled:void 0===o||o,recordInputs:c,recordOutputs:u},nv(()=>Reflect.apply(e,t,n),e=>{e&&"object"==typeof e&&F(e,"_sentry_active_span",tV())},()=>{},e=>{!function(e){if("object"==typeof e&&null!==e&&"content"in e&&Array.isArray(e.content))for(let r of e.content){var t,n;if("object"==typeof r&&null!==r&&"type"in r&&"error"in r&&"toolName"in r&&"toolCallId"in r&&"tool-error"===r.type&&r.error instanceof Error){let e=(t=r.toolCallId,lZ.get(t));if(e){let t=e.spanContext();eC(e=>{e.setContext("trace",{trace_id:t.traceId,span_id:t.spanId}),e.setTag("vercel.ai.tool.name",r.toolName),e.setTag("vercel.ai.tool.callId",r.toolCallId),e.setLevel("error"),t2(r.error,{mechanism:{type:"auto.vercelai.otel",handled:!1}})}),n=r.toolCallId,lZ.delete(n)}else eC(e=>{e.setTag("vercel.ai.tool.name",r.toolName),e.setTag("vercel.ai.tool.callId",r.toolCallId),e.setLevel("error"),t2(r.error,{mechanism:{type:"auto.vercelai.otel",handled:!1}})})}}}(e)})}});if("[object Module]"===Object.prototype.toString.call(e)){for(let n of lY)e[n]=t(e[n]);return e}{let n=lY.reduce((n,r)=>(n[r]=t(e[r]),n),{});return{...e,...n}}}}let lK=eV(lO,()=>new lJ({})),lj=(e={})=>{let t;return{name:lO,options:e,setupOnce(){t=lK()},afterAllSetup(n){e.force??function(e){let t=e.getIntegrationByName("Modules");return!!t?.getModules?.()?.ai}(n)?lV(n):t?.callWhenPatched(()=>lV(n))}}},lP="OpenAI",lA=["responses.create","chat.completions.create"],lF=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta","response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"];function lM(e){return e.includes("chat.completions")?ld.CHAT:e.includes("responses")?ld.RESPONSES:e.split(".").pop()||"unknown"}function lz(e){return`gen_ai.${lM(e)}`}function lB(e,t,n,r){void 0!==t&&e.setAttributes({"openai.usage.prompt_tokens":t,[lt]:t}),void 0!==n&&e.setAttributes({"openai.usage.completion_tokens":n,[ln]:n}),void 0!==r&&e.setAttributes({[lr]:r})}function lQ(e,t,n,r){e.setAttributes({"openai.response.id":t,[le]:t}),e.setAttributes({"openai.response.model":n,[a8]:n}),e.setAttributes({"openai.response.timestamp":new Date(1e3*r).toISOString()})}async function*lU(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let i of e)null!==i&&"object"==typeof i&&"object"in i&&"chat.completion.chunk"===i.object?function(e,t,n){for(let r of(t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens),e.choices??[]))n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&function(e,t){for(let n of e){let e=n.index;if(void 0!==e&&n.function){if(e in t.chatCompletionToolCalls){let r=t.chatCompletionToolCalls[e];n.function.arguments&&r?.function&&(r.function.arguments+=n.function.arguments)}else t.chatCompletionToolCalls[e]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}}}}}(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}(i,r,n):null!==i&&"object"==typeof i&&"type"in i&&"string"==typeof i.type&&i.type.startsWith("response.")&&function(e,t,n,r){if(!(e&&"object"==typeof e)){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),t2(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if("type"in e){if(!lF.includes(e.type)){t.eventTypes.push(e.type);return}if(n&&("response.output_item.done"===e.type&&"item"in e&&t.responsesApiToolCalls.push(e.item),"response.output_text.delta"===e.type&&"delta"in e&&e.delta)){t.responseTexts.push(e.delta);return}if("response"in e){let{response:r}=e;t.responseId=r.id??t.responseId,t.responseModel=r.model??t.responseModel,t.responseTimestamp=r.created_at??t.responseTimestamp,r.usage&&(t.promptTokens=r.usage.input_tokens,t.completionTokens=r.usage.output_tokens,t.totalTokens=r.usage.total_tokens),r.status&&t.finishReasons.push(r.status),n&&r.output_text&&t.responseTexts.push(r.output_text)}}}(i,r,n,t),yield i}finally{lQ(t,r.responseId,r.responseModel,r.responseTimestamp),lB(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[ll]:!0}),r.finishReasons.length&&t.setAttributes({[a6]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[lo]:r.responseTexts.join("")});let e=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];e.length>0&&t.setAttributes({[lc]:JSON.stringify(e)}),t.end()}}function lD(e,t){if("messages"in t){let n=lI(t.messages);e.setAttributes({[ls]:n})}if("input"in t){let n=lI(t.input);e.setAttributes({[ls]:n})}}let l$=[">=4.0.0 <6"];class lq extends eK.w{constructor(e={}){super("@sentry/instrumentation-openai",S,e)}init(){return new ej.o("openai",l$,this._patch.bind(this))}_patch(e){let t=e.OpenAI,n=function(...e){var n,r;let i=Reflect.construct(t,e),s=ek(),o=s?.getIntegrationByName(lP),{recordInputs:a,recordOutputs:l}=(n=o?.options,r=!!s?.getOptions().sendDefaultPii,{recordInputs:n?.recordInputs??r,recordOutputs:n?.recordOutputs??r});return function e(t,n="",r){return new Proxy(t,{get(t,i){var s;let o=t[i],a=(s=String(i),n?`${n}.${s}`:s);return"function"==typeof o&&lA.includes(a)?async function(...e){let n=r||function(){let e=eI().getClient(),t=e?.getIntegrationByName(lP),n=!!t&&!!e?.getOptions().sendDefaultPii;return{recordInputs:t?.options?.recordInputs??n,recordOutputs:t?.options?.recordOutputs??n}}(),i=function(e,t){let n={[aq]:"openai",[li]:lM(t),[e2]:"auto.ai.openai"};if(e.length>0&&"object"==typeof e[0]&&null!==e[0]){let t=e[0],r=[...Array.isArray(t.tools)?t.tools:[],...t.web_search_options&&"object"==typeof t.web_search_options?[{type:"web_search_options",...t.web_search_options}]:[]];r.length>0&&(n[la]=JSON.stringify(r))}if(e.length>0&&"object"==typeof e[0]&&null!==e[0]){let t=e[0];n[a0]=t.model??"unknown","temperature"in t&&(n[a2]=t.temperature),"top_p"in t&&(n[a4]=t.top_p),"frequency_penalty"in t&&(n[a5]=t.frequency_penalty),"presence_penalty"in t&&(n[a3]=t.presence_penalty),"stream"in t&&(n[a1]=t.stream)}else n[a0]="unknown";return n}(e,a),s=i[a0]||"unknown",l=lM(a),c=e[0];return c&&"object"==typeof c&&!0===c.stream?oO({name:`${l} ${s} stream-response`,op:lz(a),attributes:i},async r=>{try{n.recordInputs&&e[0]&&"object"==typeof e[0]&&lD(r,e[0]);let i=await o.apply(t,e);return lU(i,r,n.recordOutputs??!1)}catch(e){throw r.setStatus({code:2,message:"internal_error"}),t2(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:a}}}),r.end(),e}}):oE({name:`${l} ${s}`,op:lz(a),attributes:i},async r=>{try{n.recordInputs&&e[0]&&"object"==typeof e[0]&&lD(r,e[0]);let i=await o.apply(t,e);return function(e,t,n){if(t&&"object"==typeof t){if(null!==t&&"object"==typeof t&&"object"in t&&"chat.completion"===t.object){if(function(e,t,n){if(lQ(e,t.id,t.model,t.created),t.usage&&lB(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(e=>e.finish_reason).filter(e=>null!==e);if(r.length>0&&e.setAttributes({[a6]:JSON.stringify(r)}),n){let n=t.choices.map(e=>e.message?.tool_calls).filter(e=>Array.isArray(e)&&e.length>0).flat();n.length>0&&e.setAttributes({[lc]:JSON.stringify(n)})}}}(e,t,n),n&&t.choices?.length){let n=t.choices.map(e=>e.message?.content||"");e.setAttributes({[lo]:JSON.stringify(n)})}}else null!==t&&"object"==typeof t&&"object"in t&&"response"===t.object&&(function(e,t,n){if(lQ(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[a6]:JSON.stringify([t.status])}),t.usage&&lB(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n&&Array.isArray(t.output)&&t.output.length>0){let n=t.output.filter(e=>"object"==typeof e&&null!==e&&"function_call"===e.type);n.length>0&&e.setAttributes({[lc]:JSON.stringify(n)})}}(e,t,n),n&&t.output_text&&e.setAttributes({[lo]:t.output_text}))}}(r,i,n.recordOutputs),i}catch(e){throw t2(e,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:a}}}),e}})}:"function"==typeof o?o.bind(t):o&&"object"==typeof o?e(o,a,r):o}})}(i,"",{recordInputs:a,recordOutputs:l})};for(let e of(Object.setPrototypeOf(n,t),Object.setPrototypeOf(n.prototype,t.prototype),Object.getOwnPropertyNames(t)))if(!["length","name","prototype"].includes(e)){let r=Object.getOwnPropertyDescriptor(t,e);r&&Object.defineProperty(n,e,r)}try{e.OpenAI=n}catch(t){Object.defineProperty(e,"OpenAI",{value:n,writable:!0,configurable:!0,enumerable:!0})}if(e.default===t)try{e.default=n}catch(t){Object.defineProperty(e,"default",{value:n,writable:!0,configurable:!0,enumerable:!0})}return e}}let l0=eV(lP,()=>new lq({})),l1=(e={})=>({name:lP,options:e,setupOnce(){l0()}}),l2="Anthropic_AI",l9=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function l5(e,t,n,r){!e||"object"!=typeof e||"type"in e&&"string"==typeof e.type&&"error"===e.type&&(r.setStatus({code:2,message:e.error?.type??"internal_error"}),t2(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),1)||(function(e,t){if("message_delta"===e.type&&e.usage&&"output_tokens"in e.usage&&"number"==typeof e.usage.output_tokens&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&("number"==typeof n.usage.input_tokens&&(t.promptTokens=n.usage.input_tokens),"number"==typeof n.usage.cache_creation_input_tokens&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),"number"==typeof n.usage.cache_read_input_tokens&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}(e,t),"content_block_start"===e.type&&"number"==typeof e.index&&e.content_block&&("tool_use"===e.content_block.type||"server_tool_use"===e.content_block.type)&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]}),function(e,t,n){if("content_block_delta"===e.type&&e.delta){if("number"==typeof e.index&&"partial_json"in e.delta&&"string"==typeof e.delta.partial_json){let n=t.activeToolBlocks[e.index];n&&n.inputJsonParts.push(e.delta.partial_json)}n&&"string"==typeof e.delta.text&&t.responseTexts.push(e.delta.text)}}(e,t,n),function(e,t){let n;if("content_block_stop"!==e.type||"number"!=typeof e.index)return;let r=t.activeToolBlocks[e.index];if(!r)return;let i=r.inputJsonParts.join("");try{n=i?JSON.parse(i):{}}catch{n={__unparsed:i}}t.toolCalls.push({type:"tool_use",id:r.id,name:r.name,input:n}),delete t.activeToolBlocks[e.index]}(e,t))}async function*l3(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let i of e)l5(i,r,n,t),yield i}finally{r.responseId&&t.setAttributes({[le]:r.responseId}),r.responseModel&&t.setAttributes({[a8]:r.responseModel}),lS(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[ll]:!0}),r.finishReasons.length>0&&t.setAttributes({[a6]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[lo]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[lc]:JSON.stringify(r.toolCalls)}),t.end()}}function l4(e,t){if("messages"in t){let n=lI(t.messages);e.setAttributes({[ls]:n})}if("input"in t){let n=lI(t.input);e.setAttributes({[ls]:n})}"prompt"in t&&e.setAttributes({"gen_ai.prompt":JSON.stringify(t.prompt)})}function l7(e,t,n){throw t2(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}let l6=[">=0.19.2 <1.0.0"];class l8 extends eK.w{constructor(e={}){super("@sentry/instrumentation-anthropic-ai",S,e)}init(){return new ej.o("@anthropic-ai/sdk",l6,this._patch.bind(this))}_patch(e){let t=e.Anthropic,n=this.getConfig(),r=function(...e){let r=Reflect.construct(t,e),i=ek(),s=!!i?.getOptions().sendDefaultPii;return function(e,t){let n=!!ek()?.getOptions().sendDefaultPii;return function e(t,n="",r){return new Proxy(t,{get(t,i){let s=t[i],o=lv(n,String(i));return"function"==typeof s&&l9.includes(o)?new Proxy(s,{apply(e,n,i){let a=function(e,t){let n={[aq]:"anthropic",[li]:ly(t),[e2]:"auto.ai.anthropic"};if(e.length>0&&"object"==typeof e[0]&&null!==e[0]){let t=e[0];t.tools&&Array.isArray(t.tools)&&(n[la]=JSON.stringify(t.tools)),n[a0]=t.model??"unknown","temperature"in t&&(n[a2]=t.temperature),"top_p"in t&&(n[a4]=t.top_p),"stream"in t&&(n[a1]=t.stream),"top_k"in t&&(n[a7]=t.top_k),"frequency_penalty"in t&&(n[a5]=t.frequency_penalty),"max_tokens"in t&&(n[a9]=t.max_tokens)}else"models.retrieve"===t||"models.get"===t?n[a0]=e[0]:n[a0]="unknown";return n}(i,o),l=a[a0]??"unknown",c=ly(o),u="object"==typeof i[0]?i[0]:void 0,p=!!u?.stream,d="messages.stream"===o;return p||d?function(e,t,n,r,i,s,o,a,l,c,u){let p=i[a0]??"unknown",d={name:`${s} ${p} stream-response`,op:l_(o),attributes:i};return c&&!u?oO(d,async t=>{try{l.recordInputs&&a&&l4(t,a);let i=await e.apply(n,r);return l3(i,t,l.recordOutputs??!1)}catch(e){return l7(e,t,o)}}):oO(d,e=>{try{l.recordInputs&&a&&l4(e,a);let i=t.apply(n,r);return function(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",e=>{l5(e,r,n,t)}),e.on("message",()=>{t.isRecording()&&(r.responseId&&t.setAttributes({[le]:r.responseId}),r.responseModel&&t.setAttributes({[a8]:r.responseModel}),lS(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[ll]:!0}),r.finishReasons.length>0&&t.setAttributes({[a6]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[lo]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[lc]:JSON.stringify(r.toolCalls)}),t.end())}),e.on("error",e=>{t2(e,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}(i,e,l.recordOutputs??!1)}catch(t){return l7(t,e,o)}})}(s,e,t,i,a,c,o,u,r,p,d):oE({name:`${c} ${l}`,op:l_(o),attributes:a},n=>(r.recordInputs&&u&&l4(n,u),nv(()=>e.apply(t,i),e=>{t2(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:o}}})},()=>{},e=>(function(e,t,n){if(t&&"object"==typeof t){if("type"in t&&"error"===t.type){t.error&&(e.setStatus({code:2,message:t.error.type||"internal_error"}),t2(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}));return}n&&function(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[lo]:t.content.map(e=>e.text).filter(e=>!!e).join("")});let n=[];for(let e of t.content)("tool_use"===e.type||"server_tool_use"===e.type)&&n.push(e);n.length>0&&e.setAttributes({[lc]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[lo]:t.completion}),"input_tokens"in t&&e.setAttributes({[lo]:JSON.stringify(t.input_tokens)})}(e,t),"id"in t&&"model"in t&&(e.setAttributes({[le]:t.id,[a8]:t.model}),"created"in t&&"number"==typeof t.created&&e.setAttributes({[lh]:new Date(1e3*t.created).toISOString()}),"created_at"in t&&"number"==typeof t.created_at&&e.setAttributes({[lh]:new Date(1e3*t.created_at).toISOString()}),"usage"in t&&t.usage&&lS(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}})(n,e,r.recordOutputs))))}}):"function"==typeof s?s.bind(t):s&&"object"==typeof s?e(s,o,r):s}})}(e,"",{recordInputs:n,recordOutputs:n,...t})}(r,{recordInputs:n.recordInputs??s,recordOutputs:n.recordOutputs??s})};for(let e of(Object.setPrototypeOf(r,t),Object.setPrototypeOf(r.prototype,t.prototype),Object.getOwnPropertyNames(t)))if(!["length","name","prototype"].includes(e)){let n=Object.getOwnPropertyDescriptor(t,e);n&&Object.defineProperty(r,e,n)}try{e.Anthropic=r}catch(t){Object.defineProperty(e,"Anthropic",{value:r,writable:!0,configurable:!0,enumerable:!0})}if(e.default===t)try{e.default=r}catch(t){Object.defineProperty(e,"default",{value:r,writable:!0,configurable:!0,enumerable:!0})}return e}}let ce=eV(l2,e=>new l8(e)),ct=(e={})=>({name:l2,options:e,setupOnce(){ce(e)}}),cn="Google_GenAI",cr=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],ci="chats.create";async function*cs(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let i of e)!i||function(e,t){let n=e?.promptFeedback;if(n?.blockReason){let e=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${e}`}),t2(`Content blocked: ${e}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}(i,t)||(function(e,t){"string"==typeof e.responseId&&(t.responseId=e.responseId),"string"==typeof e.modelVersion&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&("number"==typeof n.promptTokenCount&&(t.promptTokens=n.promptTokenCount),"number"==typeof n.candidatesTokenCount&&(t.completionTokens=n.candidatesTokenCount),"number"==typeof n.totalTokenCount&&(t.totalTokens=n.totalTokenCount))}(i,r),function(e,t,n){for(let r of(Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls),e.candidates??[]))for(let e of(r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason),r?.content?.parts??[]))n&&e.text&&t.responseTexts.push(e.text),e.functionCall&&t.toolCalls.push({type:"function",id:e.functionCall.id,name:e.functionCall.name,arguments:e.functionCall.args})}(i,r,n)),yield i}finally{let e={[ll]:!0};r.responseId&&(e[le]=r.responseId),r.responseModel&&(e[a8]=r.responseModel),void 0!==r.promptTokens&&(e[lt]=r.promptTokens),void 0!==r.completionTokens&&(e[ln]=r.completionTokens),void 0!==r.totalTokens&&(e[lr]=r.totalTokens),r.finishReasons.length&&(e[a6]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(e[lo]=r.responseTexts.join("")),n&&r.toolCalls.length&&(e[lc]=JSON.stringify(r.toolCalls)),t.setAttributes(e),t.end()}}function co(e,t){if("model"in e&&"string"==typeof e.model)return e.model;if(t&&"object"==typeof t){if("model"in t&&"string"==typeof t.model)return t.model;if("modelVersion"in t&&"string"==typeof t.modelVersion)return t.modelVersion}return"unknown"}function ca(e,t){if("contents"in t){let n=lI(t.contents);e.setAttributes({[ls]:n})}if("message"in t){let n=lI(t.message);e.setAttributes({[ls]:n})}if("history"in t){let n=lI(t.history);e.setAttributes({[ls]:n})}}function cl(e,t,n,r){let i=t===ci;return new Proxy(e,{apply(e,s,o){let a=o[0],l=function(e,t,n){let r={[aq]:"google_genai",[li]:ly(e),[e2]:"auto.ai.google_genai"};if(t){if(r[a0]=co(t,n),"config"in t&&"object"==typeof t.config&&t.config){let e=t.config;if(Object.assign(r,function(e){let t={};return"temperature"in e&&"number"==typeof e.temperature&&(t[a2]=e.temperature),"topP"in e&&"number"==typeof e.topP&&(t[a4]=e.topP),"topK"in e&&"number"==typeof e.topK&&(t[a7]=e.topK),"maxOutputTokens"in e&&"number"==typeof e.maxOutputTokens&&(t[a9]=e.maxOutputTokens),"frequencyPenalty"in e&&"number"==typeof e.frequencyPenalty&&(t[a5]=e.frequencyPenalty),"presencePenalty"in e&&"number"==typeof e.presencePenalty&&(t[a3]=e.presencePenalty),t}(e)),"tools"in e&&Array.isArray(e.tools)){let t=e.tools.map(e=>e.functionDeclarations);r[la]=JSON.stringify(t)}}}else r[a0]=co({},n);return r}(t,a,n),c=l[a0]??"unknown",u=ly(t);return t.includes("Stream")||t.endsWith("generateContentStream")||t.endsWith("sendMessageStream")?oO({name:`${u} ${c} stream-response`,op:l_(t),attributes:l},async i=>{try{r.recordInputs&&a&&ca(i,a);let t=await e.apply(n,o);return cs(t,i,!!r.recordOutputs)}catch(e){throw i.setStatus({code:2,message:"internal_error"}),t2(e,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),i.end(),e}}):oE({name:i?`${u} ${c} create`:`${u} ${c}`,op:l_(t),attributes:l},s=>(r.recordInputs&&a&&ca(s,a),nv(()=>e.apply(n,o),e=>{t2(e,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},e=>{i||function(e,t,n){if(t&&"object"==typeof t){if(t.usageMetadata&&"object"==typeof t.usageMetadata){let n=t.usageMetadata;"number"==typeof n.promptTokenCount&&e.setAttributes({[lt]:n.promptTokenCount}),"number"==typeof n.candidatesTokenCount&&e.setAttributes({[ln]:n.candidatesTokenCount}),"number"==typeof n.totalTokenCount&&e.setAttributes({[lr]:n.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let n=t.candidates.map(e=>e.content?.parts&&Array.isArray(e.content.parts)?e.content.parts.map(e=>"string"==typeof e.text?e.text:"").filter(e=>e.length>0).join(""):"").filter(e=>e.length>0);n.length>0&&e.setAttributes({[lo]:n.join("")})}if(n&&t.functionCalls){let n=t.functionCalls;Array.isArray(n)&&n.length>0&&e.setAttributes({[lc]:JSON.stringify(n)})}}}(s,e,r.recordOutputs)})))}})}let cc=[">=0.10.0 <2"];class cu extends eK.w{constructor(e={}){super("@sentry/instrumentation-google-genai",S,e)}init(){return new ej.o("@google/genai",cc,e=>this._patch(e),e=>e,[new oZ.X("@google/genai/dist/node/index.cjs",cc,e=>this._patch(e),e=>e)])}_patch(e){let t=e.GoogleGenAI,n=this.getConfig();if("function"!=typeof t)return e;let r=function(...e){let r=Reflect.construct(t,e),i=ek(),s=!!i?.getOptions().sendDefaultPii;return function(e,t){let n=!!ek()?.getOptions().sendDefaultPii;return function e(t,n="",r){return new Proxy(t,{get:(t,i,s)=>{let o=Reflect.get(t,i,s),a=lv(n,String(i));if("function"==typeof o&&function(e){if(cr.includes(e))return!0;let t=e.split(".").pop();return cr.includes(t)}(a)){if(a===ci){let n=cl(o,a,t,r);return function(...t){let i=n(...t);return i&&"object"==typeof i?e(i,"chat",r):i}}return cl(o,a,t,r)}return"function"==typeof o?o.bind(t):o&&"object"==typeof o?e(o,a,r):o}})}(e,"",{recordInputs:n,recordOutputs:n,...t})}(r,{recordInputs:n?.recordInputs??s,recordOutputs:n?.recordOutputs??s})};for(let e of(Object.setPrototypeOf(r,t),Object.setPrototypeOf(r.prototype,t.prototype),Object.getOwnPropertyNames(t)))if(!["length","name","prototype"].includes(e)){let n=Object.getOwnPropertyDescriptor(t,e);n&&Object.defineProperty(r,e,n)}return function(e,t,n){let r=e[t];if("function"==typeof r){try{e[t]=n}catch(r){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0,enumerable:!0})}if(e.default===r)try{e.default=n}catch(t){Object.defineProperty(e,"default",{value:n,writable:!0,configurable:!0,enumerable:!0})}}}(e,"GoogleGenAI",r),e}}let cp=eV(cn,e=>new cu(e)),cd=(e={})=>({name:cn,setupOnce(){cp(e)}}),ch="LangChain",cm="auto.ai.langchain",cf={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},cg=(e,t,n)=>{null!=n&&(e[t]=n)},cb=(e,t,n)=>{let r=Number(n);Number.isNaN(r)||(e[t]=r)};function cy(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return String(e)}}function c_(e){let t=e.toLowerCase();return cf[t]??t}function cv(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function cS(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function cI(e,t,n,r,i,s){return{[aq]:cy(e??"langchain"),[li]:n,[a0]:cy(t),[e2]:cm,...function(e,t,n){let r={},i="kwargs"in e?e.kwargs:void 0;return cb(r,a2,t?.temperature??n?.ls_temperature??i?.temperature),cb(r,a9,t?.max_tokens??n?.ls_max_tokens??i?.max_tokens),cb(r,a4,t?.top_p??i?.top_p),cb(r,a5,t?.frequency_penalty),cb(r,a3,t?.presence_penalty),t&&"stream"in t&&cg(r,a1,!!t.stream),r}(r,i,s)}}function cZ(e={}){let t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,i=e=>{let t=r.get(e);t?.isRecording()&&(t.end(),r.delete(e))},s={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(e,n,i,s,o,a,l,c){let u=function(e,t,n,r,i){let s=cI(i?.ls_provider,r?.model??i?.ls_model_name??"unknown","pipeline",e,r,i);return n&&Array.isArray(t)&&t.length>0&&cg(s,ls,cy(t.map(e=>({role:"user",content:e})))),s}(e,n,t,cS(a),l),p=u[a0],d=u[li];oO({name:`${d} ${p}`,op:"gen_ai.pipeline",attributes:{...u,[e1]:"gen_ai.pipeline"}},e=>(r.set(i,e),e))},handleChatModelStart(e,n,i,s,o,a,l,c){let u=function(e,t,n,r,i){let s=cI(i?.ls_provider??e.id?.[2],r?.model??i?.ls_model_name??"unknown","chat",e,r,i);if(n&&Array.isArray(t)&&t.length>0){let e=t.flat().map(e=>{let t=e._getType;if("function"==typeof t)return{role:c_(t.call(e)),content:cy(e.content)};let n=e.constructor?.name;if(n)return{role:c_(cv(n)),content:cy(e.content)};if(e.type)return{role:c_(String(e.type).toLowerCase()),content:cy(e.content)};if(e.role)return{role:c_(String(e.role)),content:cy(e.content)};if(1===e.lc&&e.kwargs){let t=e.id,n=Array.isArray(t)&&t.length>0?t[t.length-1]:"";return{role:c_("string"==typeof n?cv(n):"user"),content:cy(e.kwargs?.content)}}return{role:"user",content:cy(e.content)}});cg(s,ls,cy(e))}return s}(e,n,t,cS(a),l),p=u[a0],d=u[li];oO({name:`${d} ${p}`,op:"gen_ai.chat",attributes:{...u,[e1]:"gen_ai.chat"}},e=>(r.set(i,e),e))},handleLLMEnd(e,t,s,o,a){let l=r.get(t);if(l?.isRecording()){let r=function(e,t){if(!e)return;let n={};if(Array.isArray(e.generations)){let r=e.generations.flat().map(e=>e.generation_info?.finish_reason).filter(e=>"string"==typeof e);if(r.length>0&&cg(n,a6,cy(r)),function(e,t){let n=[];for(let t of e.flat()){let e=t.message?.content;if(Array.isArray(e))for(let t of e)"tool_use"===t.type&&n.push(t)}n.length>0&&cg(t,lc,cy(n))}(e.generations,n),t){let t=e.generations.flat().map(e=>e.text??e.message?.content).filter(e=>"string"==typeof e);t.length>0&&cg(n,lo,cy(t))}}!function(e,t){if(!e)return;let n=e.tokenUsage,r=e.usage;if(n)cb(t,lt,n.promptTokens),cb(t,ln,n.completionTokens),cb(t,lr,n.totalTokens);else if(r){cb(t,lt,r.input_tokens),cb(t,ln,r.output_tokens);let e=Number(r.input_tokens),n=Number(r.output_tokens),i=(Number.isNaN(e)?0:e)+(Number.isNaN(n)?0:n);i>0&&cb(t,lr,i),void 0!==r.cache_creation_input_tokens&&cb(t,"gen_ai.usage.cache_creation_input_tokens",r.cache_creation_input_tokens),void 0!==r.cache_read_input_tokens&&cb(t,"gen_ai.usage.cache_read_input_tokens",r.cache_read_input_tokens)}}(e.llmOutput,n);let r=e.llmOutput,i=r?.model_name??r?.model;return i&&cg(n,a8,i),r?.id&&cg(n,le,r.id),r?.stop_reason&&cg(n,"gen_ai.response.stop_reason",cy(r.stop_reason)),n}(e,n);r&&l.setAttributes(r),i(t)}},handleLLMError(e,t){let n=r.get(t);n?.isRecording()&&(n.setStatus({code:2,message:"llm_error"}),i(t)),t2(e,{mechanism:{handled:!1,type:`${cm}.llm_error_handler`}})},handleChainStart(e,n,i,s){let o=e.name||"unknown_chain",a={[e2]:"auto.ai.langchain","langchain.chain.name":o};t&&(a["langchain.chain.inputs"]=JSON.stringify(n)),oO({name:`chain ${o}`,op:"gen_ai.invoke_agent",attributes:{...a,[e1]:"gen_ai.invoke_agent"}},e=>(r.set(i,e),e))},handleChainEnd(e,t){let s=r.get(t);s?.isRecording()&&(n&&s.setAttributes({"langchain.chain.outputs":JSON.stringify(e)}),i(t))},handleChainError(e,t){let n=r.get(t);n?.isRecording()&&(n.setStatus({code:2,message:"chain_error"}),i(t)),t2(e,{mechanism:{handled:!1,type:`${cm}.chain_error_handler`}})},handleToolStart(e,n,i,s){let o=e.name||"unknown_tool",a={[e2]:cm,"gen_ai.tool.name":o};t&&(a["gen_ai.tool.input"]=n),oO({name:`execute_tool ${o}`,op:"gen_ai.execute_tool",attributes:{...a,[e1]:"gen_ai.execute_tool"}},e=>(r.set(i,e),e))},handleToolEnd(e,t){let s=r.get(t);s?.isRecording()&&(n&&s.setAttributes({"gen_ai.tool.output":JSON.stringify(e)}),i(t))},handleToolError(e,t){let n=r.get(t);n?.isRecording()&&(n.setStatus({code:2,message:"tool_error"}),i(t)),t2(e,{mechanism:{handled:!1,type:`${cm}.tool_error_handler`}})},copy:()=>s,toJSON:()=>({lc:1,type:"not_implemented",id:s.lc_id}),toJSONNotImplemented:()=>({lc:1,type:"not_implemented",id:s.lc_id})};return s}let cR=[">=0.1.0 <1.0.0"];class cC extends eK.w{constructor(e={}){super("@sentry/instrumentation-langchain",S,e)}init(){let e=[];for(let t of["@langchain/anthropic","@langchain/openai","@langchain/google-genai","@langchain/mistralai","@langchain/google-vertexai","@langchain/groq"])e.push(new ej.o(t,cR,this._patch.bind(this),e=>e,[new oZ.X(`${t}/dist/index.cjs`,cR,this._patch.bind(this),e=>e)]));return e}_patch(e){let t=ek(),n=!!t?.getOptions().sendDefaultPii,r=this.getConfig(),i=cZ({recordInputs:r?.recordInputs??n,recordOutputs:r?.recordOutputs??n});return this._patchRunnableMethods(e,i),e}_patchRunnableMethods(e,t){let n=["ChatAnthropic","ChatOpenAI","ChatGoogleGenerativeAI","ChatMistralAI","ChatVertexAI","ChatGroq"],r=Object.values(e).find(e=>"function"==typeof e&&n.includes(e.name));if(!r)return;let i=r.prototype;for(let e of["invoke","stream","batch"]){let n=i[e];"function"==typeof n&&(i[e]=function(e,t,n){return new Proxy(e,{apply(e,n,r){var i;let s=r[1];(!s||"object"!=typeof s||Array.isArray(s))&&(s={},r[1]=s);let o=(i=s.callbacks)?Array.isArray(i)?i.includes(t)?i:[...i,t]:"object"==typeof i?[i,t]:i:[t];return s.callbacks=o,Reflect.apply(e,n,r)}})}(n,t))}}}let cW=eV(ch,e=>new cC(e)),ck=(e={})=>({name:ch,setupOnce(){cW(e)}});function cX(){return"undefined"!=typeof window&&(!(!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))||function(){let e=I.process;return e?.type==="renderer"}())}let cN=e=>(cX()||Y(()=>{console.warn("The launchDarklyIntegration() can only be used in the browser.")}),{name:"LaunchDarkly"});function cx(){return cX()||Y(()=>{console.warn("The buildLaunchDarklyFlagUsedHandler() can only be used in the browser.")}),{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:()=>null}}let cG=e=>(cX()||Y(()=>{console.warn("The openFeatureIntegration() can only be used in the browser.")}),{name:"OpenFeature"});class cw{constructor(){cX()||Y(()=>{console.warn("The OpenFeatureIntegrationHook can only be used in the browser.")})}after(){}error(){}}let cT=e=>(cX()||Y(()=>{console.warn("The statsigIntegration() can only be used in the browser.")}),{name:"Statsig"}),cH=e=>(cX()||Y(()=>{console.warn("The unleashIntegration() can only be used in the browser.")}),{name:"Unleash"}),cL="flag.evaluation.";function cV(e){let t=eI().getScopeData().contexts.flags,n=t?t.values:[];return n.length&&(void 0===e.contexts&&(e.contexts={}),e.contexts.flags={values:[...n]}),e}function cE(e,t,n=100){let r=eI().getScopeData().contexts;r.flags||(r.flags={values:[]}),function(e,t,n,r){if("boolean"!=typeof n)return;if(e.length>r){W&&P.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let i=e.findIndex(e=>e.flag===t);-1!==i&&e.splice(i,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}(r.flags.values,e,t,n)}function cO(e,t,n=10){if("boolean"!=typeof t)return;let r=tV();if(!r)return;let i=tX(r).data;if(`${cL}${e}` in i){r.setAttribute(`${cL}${e}`,t);return}Object.keys(i).filter(e=>e.startsWith(cL)).length<n&&r.setAttribute(`${cL}${e}`,t)}function cY(e){return function(...t){let n=t[0],r=e.apply(this,t);return"string"==typeof n&&"boolean"==typeof r&&(cE(n,r),cO(n,r)),r}}let cJ=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;"function"==typeof t.isOn&&A(t,"isOn",cY),"function"==typeof t.getFeatureValue&&A(t,"getFeatureValue",cY)},processEvent:(e,t,n)=>cV(e)});var cK=n(87503);function cj(e,t,n,r,i){return cP(e,n),t(e,"addDoc",function(e){return function(t,n){let s=cF(r,"addDoc",t);return i(s),cA(s,()=>e(t,n))}}),t(e,"getDocs",function(e){return function(t){let n=cF(r,"getDocs",t);return i(n),cA(n,()=>e(t))}}),t(e,"setDoc",function(e){return function(t,n,s){let o=cF(r,"setDoc",t.parent||t);return i(o),cA(o,()=>void 0!==s?e(t,n,s):e(t,n))}}),t(e,"deleteDoc",function(e){return function(t){let n=cF(r,"deleteDoc",t.parent||t);return i(n),cA(n,()=>e(t))}}),e}function cP(e,t){for(let n of["addDoc","getDocs","setDoc","deleteDoc"])(0,iu.UW)(e[n])&&t(e,n);return e}function cA(e,t){return eY.D.with(nW.g.setSpan(eY.D.active(),e),()=>(0,iu._W)(()=>t(),t=>{t&&e.recordException(t),e.end()},!0))}function cF(e,t,n){let r=e.startSpan(`${t} ${n.path}`,{kind:nk.M.CLIENT});return function(e,t){let n=t.firestore.app,r=n.options,i=(t.firestore.toJSON()||{}).settings||{},s={[ny.fL]:t.path,[ny.c0]:n.name,[ny.Hy]:"firebase.firestore","firebase.firestore.type":t.type,"firebase.firestore.options.projectId":r.projectId,"firebase.firestore.options.appId":r.appId,"firebase.firestore.options.messagingSenderId":r.messagingSenderId,"firebase.firestore.options.storageBucket":r.storageBucket},{address:o,port:a}=function(e){let t,n;if("string"==typeof e.host){if(e.host.startsWith("[")){if(e.host.endsWith("]"))t=e.host.replace(/^\[|\]$/g,"");else if(e.host.includes("]:")){let r=e.host.lastIndexOf(":");-1!==r&&(t=e.host.slice(1,r).replace(/^\[|\]$/g,""),n=e.host.slice(r+1))}}else if(cK.isIPv6(e.host))t=e.host;else{let r=e.host.lastIndexOf(":");-1!==r?(t=e.host.slice(0,r),n=e.host.slice(r+1)):t=e.host}}return{address:t,port:n?parseInt(n,10):void 0}}(i);o&&(s[ny.dO]=o),a&&(s[ny.QD]=a),e.setAttributes(s)}(r,n),r.setAttribute(ny.J3,t),r}function cM(e,t,n){return function(r){return function(...i){let s="function"==typeof i[0]?i[0]:i[1],o="function"==typeof i[0]?void 0:i[0];if(!s)return r.call(this,...i);let a=async function(...r){let i=process.env.FUNCTION_TARGET||process.env.K_SERVICE||"unknown",o=e.startSpan(`firebase.function.${n}`,{kind:nk.M.SERVER}),a={"faas.name":i,"faas.trigger":n,"faas.provider":"firebase"};return process.env.GCLOUD_PROJECT&&(a["cloud.project_id"]=process.env.GCLOUD_PROJECT),process.env.EVENTARC_CLOUD_EVENT_SOURCE&&(a["cloud.event_source"]=process.env.EVENTARC_CLOUD_EVENT_SOURCE),o.setAttributes(a),t?.requestHook?.(o),eY.D.with(nW.g.setSpan(eY.D.active(),o),async()=>{let e,n;try{n=await s.apply(this,r)}catch(t){e=t}if(t?.responseHook?.(o,e),e&&o.recordException(e),o.end(),e)throw await t?.errorHook?.(o,e),e;return n})};return o?r.call(this,o,a):r.call(this,a)}}}function cz(e,t){for(let n of["onSchedule","onRequest","onCall","onObjectFinalized","onObjectArchived","onObjectDeleted","onObjectMetadataUpdated","onDocumentCreated","onDocumentUpdated","onDocumentDeleted","onDocumentWritten","onDocumentCreatedWithAuthContext","onDocumentUpdatedWithAuthContext","onDocumentDeletedWithAuthContext","onDocumentWrittenWithAuthContext"])(0,iu.UW)(e[n])&&t(e,n);return e}let cB={},cQ=[">=3.0.0 <5"],cU=[">=6.0.0 <7"];class cD extends eK.w{constructor(e=cB){super("@sentry/instrumentation-firebase",S,e)}setConfig(e={}){super.setConfig({...cB,...e})}init(){let e=[];return e.push(function(e,t,n,r,i){let s=()=>{},o=i.firestoreSpanCreationHook;"function"==typeof o&&(s=e=>{(0,iu._W)(()=>o(e),e=>{e&&_.K.error(e?.message)},!0)});let a=new ej.o("@firebase/firestore",t,t=>cj(t,n,r,e,s));for(let i of["@firebase/firestore/dist/lite/index.node.cjs.js","@firebase/firestore/dist/lite/index.node.mjs.js","@firebase/firestore/dist/lite/index.rn.esm2017.js","@firebase/firestore/dist/lite/index.cjs.js"])a.files.push(new oZ.X(i,t,t=>cj(t,n,r,e,s),e=>cP(e,r)));return a}(this.tracer,cQ,this._wrap,this._unwrap,this.getConfig())),e.push(function(e,t,n,r,i){let s=()=>{},o=()=>{},a=i.functions?.errorHook,l=i.functions?.requestHook,c=i.functions?.responseHook;"function"==typeof c&&(o=(e,t)=>{(0,iu._W)(()=>c(e,t),e=>{e&&_.K.error(e?.message)},!0)}),"function"==typeof l&&(s=e=>{(0,iu._W)(()=>l(e),e=>{e&&_.K.error(e?.message)},!0)});let u=new ej.o("firebase-functions",t);return[{name:"firebase-functions/lib/v2/providers/https.js",triggerType:"function"},{name:"firebase-functions/lib/v2/providers/firestore.js",triggerType:"firestore"},{name:"firebase-functions/lib/v2/providers/scheduler.js",triggerType:"scheduler"},{name:"firebase-functions/lib/v2/storage.js",triggerType:"storage"}].forEach(({name:i,triggerType:l})=>{u.files.push(new oZ.X(i,t,t=>(function(e,t,n,r,i,s){switch(cz(e,n),s){case"function":t(e,"onRequest",cM(r,i,"http.request")),t(e,"onCall",cM(r,i,"http.call"));break;case"firestore":t(e,"onDocumentCreated",cM(r,i,"firestore.document.created")),t(e,"onDocumentUpdated",cM(r,i,"firestore.document.updated")),t(e,"onDocumentDeleted",cM(r,i,"firestore.document.deleted")),t(e,"onDocumentWritten",cM(r,i,"firestore.document.written")),t(e,"onDocumentCreatedWithAuthContext",cM(r,i,"firestore.document.created")),t(e,"onDocumentUpdatedWithAuthContext",cM(r,i,"firestore.document.updated")),t(e,"onDocumentDeletedWithAuthContext",cM(r,i,"firestore.document.deleted")),t(e,"onDocumentWrittenWithAuthContext",cM(r,i,"firestore.document.written"));break;case"scheduler":t(e,"onSchedule",cM(r,i,"scheduler.scheduled"));break;case"storage":t(e,"onObjectFinalized",cM(r,i,"storage.object.finalized")),t(e,"onObjectArchived",cM(r,i,"storage.object.archived")),t(e,"onObjectDeleted",cM(r,i,"storage.object.deleted")),t(e,"onObjectMetadataUpdated",cM(r,i,"storage.object.metadataUpdated"))}return e})(t,n,r,e,{requestHook:s,responseHook:o,errorHook:a},l),e=>cz(e,r)))}),u}(this.tracer,cU,this._wrap,this._unwrap,this.getConfig())),e}}let c$="Firebase",cq={firestoreSpanCreationHook:e=>{rM(e,"auto.firebase.otel.firestore"),e.setAttribute(e1,"db.query")},functions:{requestHook:e=>{rM(e,"auto.firebase.otel.functions"),e.setAttribute(e1,"http.request")},errorHook:async(e,t)=>{t&&(t2(t,{mechanism:{type:"auto.firebase.otel.functions",handled:!1}}),await ni(2e3))}}},c0=eV(c$,()=>new cD(cq)),c1=()=>({name:c$,setupOnce(){c0()}});function c2(e,t,n=[t],r="npm"){let i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${r}:@sentry/${e}`,version:S})),version:S}),e._metadata=i}function c9(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}let c5=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],c3=(e={})=>{let t;return{name:"EventFilters",setup(n){t=c7(e,n.getOptions())},processEvent:(n,r,i)=>(t||(t=c7(e,i.getOptions())),!function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;let n=e.transaction;return!!n&&ed(n,t)}(e,t.ignoreTransactions))return W&&P.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${D(e)}`),!0}else{var n;if(n=t.ignoreErrors,n?.length&&c9(e).some(e=>ed(e,n)))return W&&P.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${D(e)}`),!0;if(e.exception?.values?.length&&!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))return W&&P.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${D(e)}`),!0;if(function(e,t){if(!t?.length)return!1;let n=c6(e);return!!n&&ed(n,t)}(e,t.denyUrls))return W&&P.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${D(e)}.
Url: ${c6(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;let n=c6(e);return!n||ed(n,t)}(e,t.allowUrls))return W&&P.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${D(e)}.
Url: ${c6(e)}`),!0}return!1}(n,t)?n:null)}},c4=(e={})=>({...c3(e),name:"InboundFilters"});function c7(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:c5],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function c6(e){try{let t=[...e.exception?.values??[]].reverse().find(e=>e.mechanism?.parent_id===void 0&&e.stacktrace?.frames?.length),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{return W&&P.error(`Cannot extract url for event ${D(e)}`),null}}let c8=new WeakMap,ue=()=>({name:"FunctionToString",setupOnce(){u=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=this.__sentry_original__,n=c8.has(ek())&&void 0!==t?t:this;return u.apply(n,e)}}catch{}},setup(e){c8.set(e,!0)}});function ut(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function un(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function ur(e,t){return e(t.stack||"",1)}function ui(e,t){let n={type:t.name||t.constructor.name,value:t.message},r=ur(e,t);return r.length&&(n.stacktrace={frames:r}),n}let us=(e={})=>{let t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,i){!function(e,t,n,r,i,s){if(!i.exception?.values||!s||!L(s.originalException,Error))return;let o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=function e(t,n,r,i,s,o,a,l){if(o.length>=r+1)return o;let c=[...o];if(L(i[s],Error)){ut(a,l);let o=t(n,i[s]),u=c.length;un(o,s,u,l),c=e(t,n,r,i[s],s,[o,...c],o,u)}return Array.isArray(i.errors)&&i.errors.forEach((i,o)=>{if(L(i,Error)){ut(a,l);let u=t(n,i),p=c.length;un(u,`errors[${o}]`,p,l),c=e(t,n,r,i,s,[u,...c],u,p)}}),c}(e,t,r,s.originalException,n,i.exception.values,o,0))}(ui,i.getOptions().stackParser,n,t,e,r)}}},uo=["X-Client-IP","X-Forwarded-For","Fly-Client-IP","CF-Connecting-IP","Fastly-Client-Ip","True-Client-Ip","X-Real-IP","X-Cluster-Client-IP","X-Forwarded","Forwarded-For","Forwarded","X-Vercel-Forwarded-For"],ua={cookies:!0,data:!0,headers:!0,query_string:!0,url:!0},ul=(e={})=>{let t={...ua,...e.include};return{name:"RequestData",processEvent(e,n,r){let{sdkProcessingMetadata:i={}}=e,{normalizedRequest:s,ipAddress:o}=i,a={...t,ip:t.ip??r.getOptions().sendDefaultPii};return s&&function(e,t,n,r){if(e.request={...e.request,...function(e,t){let n={},r={...e.headers};if(t.headers&&(n.headers=r,t.cookies||delete r.cookie,t.ip||uo.forEach(e=>{delete r[e]})),n.method=e.method,t.url&&(n.url=e.url),t.cookies){let t=e.cookies||(r?.cookie?function(e){let t={},n=0;for(;n<e.length;){let r=e.indexOf("=",n);if(-1===r)break;let i=e.indexOf(";",n);if(-1===i)i=e.length;else if(i<r){n=e.lastIndexOf(";",r-1)+1;continue}let s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,i).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch{t[s]=n}}n=i+1}return t}(r.cookie):void 0);n.cookies=t||{}}return t.query_string&&(n.query_string=e.query_string),t.data&&(n.data=e.data),n}(t,r)},r.ip){var i;let r=t.headers&&(i=t.headers,uo.map(e=>{let t=i[e],n=Array.isArray(t)?t.join(";"):t;return"Forwarded"===e?function(e){if(!e)return null;for(let t of e.split(";"))if(t.startsWith("for="))return t.slice(4);return null}(n):n?.split(",").map(e=>e.trim())}).reduce((e,t)=>t?e.concat(t):e,[]).find(e=>null!==e&&/(?:^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$)|(?:^(?:(?:[a-fA-F\d]{1,4}:){7}(?:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|:[a-fA-F\d]{1,4}|:)|(?:[a-fA-F\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,2}|:)|(?:[a-fA-F\d]{1,4}:){4}(?:(?::[a-fA-F\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,3}|:)|(?:[a-fA-F\d]{1,4}:){3}(?:(?::[a-fA-F\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,4}|:)|(?:[a-fA-F\d]{1,4}:){2}(?:(?::[a-fA-F\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,5}|:)|(?:[a-fA-F\d]{1,4}:){1}(?:(?::[a-fA-F\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}|(?::[a-fA-F\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)/.test(e))||null)||n.ipAddress;r&&(e.user={...e.user,ip_address:r})}}(e,s,{ipAddress:o},a),e}}},uc={},uu={};function up(e,t){uc[e]=uc[e]||[],uc[e].push(t)}function ud(e,t){if(!uu[e]){uu[e]=!0;try{t()}catch(t){W&&P.error(`Error while instrumenting ${e}`,t)}}}function uh(e,t){let n=e&&uc[e];if(n)for(let r of n)try{r(t)}catch(t){W&&P.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${t$(r)}
Error:`,t)}}function um(e){let t="console";up(t,e),ud(t,uf)}function uf(){"console"in I&&E.forEach(function(e){e in I.console&&A(I.console,e,function(t){return O[e]=t,function(...t){uh("console",{args:t,level:e});let n=O[e];n?.apply(I.console,t)}})})}function ug(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}let ub=(e={})=>{let t=new Set(e.levels||E);return{name:"Console",setup(e){um(({args:n,level:r})=>{ek()===e&&t.has(r)&&function(e,t){let n={category:"console",data:{arguments:t,logger:"console"},level:ug(e),message:uy(t)};if("assert"===e){if(!1!==t[0])return;{let e=t.slice(1);n.message=e.length>0?`Assertion failed: ${uy(e)}`:"Assertion failed",n.data.arguments=e}}eB(n,{input:t,level:e})}(r,n)})}}};function uy(e){return"util"in I&&"function"==typeof I.util.format?I.util.format(...e):eu(e," ")}let u_=(e={})=>({name:"ChildProcess",setup(){eO.channel("child_process").subscribe(t=>{t&&"object"==typeof t&&"process"in t&&function(e,t){let n,r=!1;e.on("spawn",()=>{if("/usr/bin/sw_vers"===e.spawnfile){r=!0;return}n={spawnfile:e.spawnfile},t.includeChildProcessArgs&&(n.spawnargs=e.spawnargs)}).on("exit",e=>{r||(r=!0,null!==e&&0!==e&&eB({category:"child_process",message:`Child process exited with code '${e}'`,level:0===e?"info":"warning",data:n}))}).on("error",e=>{r||(r=!0,eB({category:"child_process",message:`Child process errored with '${e.message}'`,level:"error",data:n}))})}(t.process,e)}),eO.channel("worker_threads").subscribe(t=>{t&&"object"==typeof t&&"worker"in t&&function(e,t){let n;e.on("online",()=>{n=e.threadId}).on("error",e=>{!1!==t.captureWorkerErrors?t2(e,{mechanism:{type:"auto.child_process.worker_thread",handled:!1,data:{threadId:String(n)}}}):eB({category:"worker_thread",message:`Worker thread errored with '${e.message}'`,level:"error",data:{threadId:n}})})}(t.worker,e)})}});var uv=n(17718),uS=n(87561),uI=n(70612),uZ=n(49411),uR=n(47261);let uC=(0,uR.promisify)(uS.readFile),uW=(0,uR.promisify)(uS.readdir),uk=(e={})=>{let t;let n={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...e};async function r(e){void 0===t&&(t=i());let n=function(e){if(e.app?.app_memory&&(e.app.app_memory=process.memoryUsage().rss),e.app?.free_memory&&"function"==typeof process.availableMemory){let t=process.availableMemory?.();null!=t&&(e.app.free_memory=t)}return e.device?.free_memory&&(e.device.free_memory=uI.freemem()),e}(await t);return e.contexts={...e.contexts,app:{...n.app,...e.contexts?.app},os:{...n.os,...e.contexts?.os},device:{...n.device,...e.contexts?.device},culture:{...n.culture,...e.contexts?.culture},cloud_resource:{...n.cloud_resource,...e.contexts?.cloud_resource}},e}async function i(){let e={};if(n.os&&(e.os=await uX()),n.app&&(e.app=function(){let e=process.memoryUsage().rss,t={app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:e};if("function"==typeof process.availableMemory){let e=process.availableMemory?.();null!=e&&(t.free_memory=e)}return t}()),n.device&&(e.device=function(e){let t;let n={};try{t=uI.uptime()}catch{}if("number"==typeof t&&(n.boot_time=new Date(Date.now()-1e3*t).toISOString()),n.arch=uI.arch(),(!0===e||e.memory)&&(n.memory_size=uI.totalmem(),n.free_memory=uI.freemem()),!0===e||e.cpu){let e=uI.cpus(),t=e?.[0];t&&(n.processor_count=e.length,n.cpu_description=t.model,n.processor_frequency=t.speed)}return n}(n.device)),n.culture){let t=function(){try{if("string"!=typeof process.versions.icu)return;let e=new Date(9e8),t=new Intl.DateTimeFormat("es",{month:"long"});if("enero"===t.format(e)){let e=Intl.DateTimeFormat().resolvedOptions();return{locale:e.locale,timezone:e.timeZone}}}catch{}}();t&&(e.culture=t)}return n.cloudResource&&(e.cloud_resource=function(){if(process.env.VERCEL)return{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION};if(process.env.AWS_REGION)return{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV};if(process.env.GCP_PROJECT)return{"cloud.provider":"gcp"};if(process.env.ALIYUN_REGION_ID)return{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID};if(process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME)return{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME};if(process.env.IBM_CLOUD_REGION)return{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION};if(process.env.TENCENTCLOUD_REGION)return{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE};else if(process.env.NETLIFY)return{"cloud.provider":"netlify"};else if(process.env.FLY_REGION)return{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION};else if(process.env.DYNO)return{"cloud.provider":"heroku"};else return}()),e}return{name:"Context",processEvent:e=>r(e)}};async function uX(){let e=uI.platform();switch(e){case"darwin":return uT();case"linux":return uL();default:return{name:uN[e]||e,version:uI.release()}}}let uN={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows",ohos:"OpenHarmony",android:"Android"},ux=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],uG={alpine:e=>e,arch:e=>uw(/distrib_release=(.*)/,e),centos:e=>uw(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>uw(/release (..)/,e),mint:e=>uw(/distrib_release=(.*)/,e),red:e=>uw(/release ([^ ]+)/,e),suse:e=>uw(/VERSION = (.*)\n/,e),ubuntu:e=>uw(/distrib_release=(.*)/,e)};function uw(e,t){let n=e.exec(t);return n?n[1]:void 0}async function uT(){let e={kernel_version:uI.release(),name:"Mac OS X",version:`10.${Number(uI.release().split(".")[0])-4}`};try{let t=await new Promise((e,t)=>{(0,uv.execFile)("/usr/bin/sw_vers",(n,r)=>{if(n){t(n);return}e(r)})});e.name=uw(/^ProductName:\s+(.*)$/m,t),e.version=uw(/^ProductVersion:\s+(.*)$/m,t),e.build=uw(/^BuildVersion:\s+(.*)$/m,t)}catch{}return e}function uH(e){return e.split(" ")[0].toLowerCase()}async function uL(){let e={kernel_version:uI.release(),name:"Linux"};try{let t=await uW("/etc"),n=ux.find(e=>t.includes(e.name));if(!n)return e;let r=(0,uZ.join)("/etc",n.name),i=(await uC(r,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;e.name=s.find(e=>i.indexOf(uH(e))>=0)||s[0];let o=uH(e.name);e.version=uG[o]?.(i)}catch{}return e}var uV=n(51747);let uE=new eP(10),uO=new eP(20);async function uY(e,t){let n={};if(t>0&&e.exception?.values){for(let t of e.exception.values)if(t.stacktrace?.frames?.length)for(let e=t.stacktrace.frames.length-1;e>=0;e--){let r=t.stacktrace.frames[e],i=r?.filename;!r||"string"!=typeof i||"number"!=typeof r.lineno||i.startsWith("node:")||i.endsWith(".min.js")||i.endsWith(".min.cjs")||i.endsWith(".min.mjs")||i.startsWith("data:")||void 0!==r.lineno&&r.lineno>1e4||void 0!==r.colno&&r.colno>1e3||(n[i]||(n[i]=[]),n[i].push(r.lineno))}}let r=Object.keys(n);if(0==r.length)return e;let i=[];for(let e of r){if(uO.get(e))continue;let r=n[e];if(!r)continue;r.sort((e,t)=>e-t);let s=function(e,t){var n,r,i,s;if(!e.length)return[];let o=0,a=e[0];if("number"!=typeof a)return[];let l=[uK(n=a,r=t),n+r],c=[];for(;;){if(o===e.length-1){c.push(l);break}let n=e[o+1];if("number"!=typeof n)break;n<=l[1]?l[1]=n+t:(c.push(l),l=[uK(i=n,s=t),i+s]),o++}return c}(r,t);if(s.every(t=>(function(e,t){let n=uE.get(e);if(void 0===n)return!1;for(let e=t[0];e<=t[1];e++)if(void 0===n[e])return!1;return!0})(e,t)))continue;let o=function(e,t,n){let r=e.get(t);return void 0===r?(e.set(t,n),n):r}(uE,e,{});i.push(function(e,t,n){return new Promise((r,i)=>{let s=(0,uS.createReadStream)(e),o=(0,uV.createInterface)({input:s});function a(){s.destroy(),r()}let l=0,c=0,u=t[0];if(void 0===u){a();return}let p=u[0],d=u[1];function h(t){uO.set(e,1),eA&&P.error(`Failed to read file: ${e}. Error: ${t}`),o.close(),o.removeAllListeners(),a()}s.on("error",h),o.on("error",h),o.on("close",a),o.on("line",e=>{if(!(++l<p)&&(n[l]=function(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let i=Math.max(t-60,0);i<5&&(i=0);let s=Math.min(i+140,r);return s>r-5&&(s=r),s===r&&(i=Math.max(s-140,0)),n=n.slice(i,s),i>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}(e,0),l>=d)){if(c===t.length-1){o.close(),o.removeAllListeners();return}let e=t[++c];if(void 0===e){o.close(),o.removeAllListeners();return}p=e[0],d=e[1]}})})}(e,s,o))}if(await Promise.all(i).catch(()=>{eA&&P.log("Failed to read one or more source files and resolve context lines")}),t>0&&e.exception?.values)for(let n of e.exception.values)n.stacktrace?.frames&&n.stacktrace.frames.length>0&&function(e,t,n){for(let r of e)if(r.filename&&void 0===r.context_line&&"number"==typeof r.lineno){let e=n.get(r.filename);if(void 0===e)continue;(function(e,t,n,r){if(void 0===t.lineno||void 0===r){eA&&P.error("Cannot resolve context for frame with no lineno or file contents");return}t.pre_context=[];for(let i=uK(e,n);i<e;i++){let e=r[i];if(void 0===e){uJ(t),eA&&P.error(`Could not find line ${i} in file ${t.filename}`);return}t.pre_context.push(e)}if(void 0===r[e]){uJ(t),eA&&P.error(`Could not find line ${e} in file ${t.filename}`);return}t.context_line=r[e];let i=e+n;t.post_context=[];for(let n=e+1;n<=i;n++){let e=r[n];if(void 0===e)break;t.post_context.push(e)}})(r.lineno,r,t,e)}}(n.stacktrace.frames,t,uE);return e}function uJ(e){delete e.pre_context,delete e.context_line,delete e.post_context}function uK(e,t){return Math.max(1,e-t)}let uj=(e={})=>{let t=void 0!==e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>uY(e,t)}},uP="Http",uA=eV(`${uP}.sentry`,e=>new rN(e)),uF=(e={})=>{let t={sessions:e.trackIncomingRequestsAsSessions,sessionFlushingDelayMS:e.sessionFlushingDelayMS,ignoreRequestBody:e.ignoreIncomingRequestBody,maxRequestBodySize:e.maxIncomingRequestBodySize},n={ignoreIncomingRequests:e.ignoreIncomingRequests,ignoreStaticAssets:e.ignoreStaticAssets,ignoreStatusCodes:e.dropSpansForIncomingRequestStatusCodes},r={breadcrumbs:e.breadcrumbs,propagateTraceInOutgoingRequests:!0,ignoreOutgoingRequests:e.ignoreOutgoingRequests},i=rK(t),s=rF(n),o=e.spans??!1,a=e.disableIncomingRequestSpans??!1,l=o&&!a;return{name:uP,setup(e){l&&s.setup(e)},setupOnce(){i.setupOnce(),uA(r)},processEvent:e=>s.processEvent(e)}};var uM=n(24086);async function uz(){if(void 0===p)try{p=!!(await Promise.resolve().then(n.t.bind(n,85690,19))).url()}catch{p=!1}return p}let uB="__SENTRY_ERROR_LOCAL_VARIABLES__";function uQ(e){return void 0!==e&&(0===e.length||"?"===e||"<anonymous>"===e)}function uU(e,t){return e===t||`Object.${e}`===t||e===`Object.${t}`||uQ(e)&&uQ(t)}function uD(...e){P.log("[LocalVariables]",...e)}let u$=(e={})=>{async function t(){let e=await Promise.resolve().then(n.t.bind(n,85690,19));e.url()||e.open(0)}return{name:"LocalVariablesAsync",async setup(n){if(!n.getOptions().includeLocalVariables)return;if(await uz()){P.warn("Local variables capture has been disabled because the debugger was already enabled");return}let r={...e,debug:P.isEnabled()};t().then(()=>{try{!function(e){let t=new uM.Worker(new URL("data:application/javascript;base64,LyohIEBzZW50cnkvbm9kZS1jb3JlIDEwLjI1LjAgKGQ5Y2Y5YTQpIHwgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdCAqLwppbXBvcnR7U2Vzc2lvbiBhcyBlfWZyb20ibm9kZTppbnNwZWN0b3IvcHJvbWlzZXMiO2ltcG9ydHt3b3JrZXJEYXRhIGFzIHR9ZnJvbSJub2RlOndvcmtlcl90aHJlYWRzIjtjb25zdCBuPWdsb2JhbFRoaXMsaT17fTtjb25zdCBvPSJfX1NFTlRSWV9FUlJPUl9MT0NBTF9WQVJJQUJMRVNfXyI7Y29uc3QgYT10O2Z1bmN0aW9uIHMoLi4uZSl7YS5kZWJ1ZyYmZnVuY3Rpb24oZSl7aWYoISgiY29uc29sZSJpbiBuKSlyZXR1cm4gZSgpO2NvbnN0IHQ9bi5jb25zb2xlLG89e30sYT1PYmplY3Qua2V5cyhpKTthLmZvckVhY2goZT0+e2NvbnN0IG49aVtlXTtvW2VdPXRbZV0sdFtlXT1ufSk7dHJ5e3JldHVybiBlKCl9ZmluYWxseXthLmZvckVhY2goZT0+e3RbZV09b1tlXX0pfX0oKCk9PmNvbnNvbGUubG9nKCJbTG9jYWxWYXJpYWJsZXMgV29ya2VyXSIsLi4uZSkpfWFzeW5jIGZ1bmN0aW9uIGMoZSx0LG4saSl7Y29uc3Qgbz1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuZ2V0UHJvcGVydGllcyIse29iamVjdElkOnQsb3duUHJvcGVydGllczohMH0pO2lbbl09by5yZXN1bHQuZmlsdGVyKGU9PiJsZW5ndGgiIT09ZS5uYW1lJiYhaXNOYU4ocGFyc2VJbnQoZS5uYW1lLDEwKSkpLnNvcnQoKGUsdCk9PnBhcnNlSW50KGUubmFtZSwxMCktcGFyc2VJbnQodC5uYW1lLDEwKSkubWFwKGU9PmUudmFsdWU/LnZhbHVlKX1hc3luYyBmdW5jdGlvbiByKGUsdCxuLGkpe2NvbnN0IG89YXdhaXQgZS5wb3N0KCJSdW50aW1lLmdldFByb3BlcnRpZXMiLHtvYmplY3RJZDp0LG93blByb3BlcnRpZXM6ITB9KTtpW25dPW8ucmVzdWx0Lm1hcChlPT5bZS5uYW1lLGUudmFsdWU/LnZhbHVlXSkucmVkdWNlKChlLFt0LG5dKT0+KGVbdF09bixlKSx7fSl9ZnVuY3Rpb24gdShlLHQpe2UudmFsdWUmJigidmFsdWUiaW4gZS52YWx1ZT92b2lkIDA9PT1lLnZhbHVlLnZhbHVlfHxudWxsPT09ZS52YWx1ZS52YWx1ZT90W2UubmFtZV09YDwke2UudmFsdWUudmFsdWV9PmA6dFtlLm5hbWVdPWUudmFsdWUudmFsdWU6ImRlc2NyaXB0aW9uImluIGUudmFsdWUmJiJmdW5jdGlvbiIhPT1lLnZhbHVlLnR5cGU/dFtlLm5hbWVdPWA8JHtlLnZhbHVlLmRlc2NyaXB0aW9ufT5gOiJ1bmRlZmluZWQiPT09ZS52YWx1ZS50eXBlJiYodFtlLm5hbWVdPSI8dW5kZWZpbmVkPiIpKX1hc3luYyBmdW5jdGlvbiBsKGUsdCl7Y29uc3Qgbj1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuZ2V0UHJvcGVydGllcyIse29iamVjdElkOnQsb3duUHJvcGVydGllczohMH0pLGk9e307Zm9yKGNvbnN0IHQgb2Ygbi5yZXN1bHQpaWYodC52YWx1ZT8ub2JqZWN0SWQmJiJBcnJheSI9PT10LnZhbHVlLmNsYXNzTmFtZSl7Y29uc3Qgbj10LnZhbHVlLm9iamVjdElkO2F3YWl0IGMoZSxuLHQubmFtZSxpKX1lbHNlIGlmKHQudmFsdWU/Lm9iamVjdElkJiYiT2JqZWN0Ij09PXQudmFsdWUuY2xhc3NOYW1lKXtjb25zdCBuPXQudmFsdWUub2JqZWN0SWQ7YXdhaXQgcihlLG4sdC5uYW1lLGkpfWVsc2UgdC52YWx1ZSYmdSh0LGkpO3JldHVybiBpfWxldCBmOyhhc3luYyBmdW5jdGlvbigpe2NvbnN0IHQ9bmV3IGU7dC5jb25uZWN0VG9NYWluVGhyZWFkKCkscygiQ29ubmVjdGVkIHRvIG1haW4gdGhyZWFkIik7bGV0IG49ITE7dC5vbigiRGVidWdnZXIucmVzdW1lZCIsKCk9PntuPSExfSksdC5vbigiRGVidWdnZXIucGF1c2VkIixlPT57bj0hMCxhc3luYyBmdW5jdGlvbihlLHtyZWFzb246dCxkYXRhOntvYmplY3RJZDpufSxjYWxsRnJhbWVzOml9KXtpZigiZXhjZXB0aW9uIiE9PXQmJiJwcm9taXNlUmVqZWN0aW9uIiE9PXQpcmV0dXJuO2lmKGY/LigpLG51bGw9PW4pcmV0dXJuO2NvbnN0IGE9W107Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0Kyspe2NvbnN0e3Njb3BlQ2hhaW46bixmdW5jdGlvbk5hbWU6byx0aGlzOnN9PWlbdF0sYz1uLmZpbmQoZT0+ImxvY2FsIj09PWUudHlwZSkscj0iZ2xvYmFsIiE9PXMuY2xhc3NOYW1lJiZzLmNsYXNzTmFtZT9gJHtzLmNsYXNzTmFtZX0uJHtvfWA6bztpZih2b2lkIDA9PT1jPy5vYmplY3Qub2JqZWN0SWQpYVt0XT17ZnVuY3Rpb246cn07ZWxzZXtjb25zdCBuPWF3YWl0IGwoZSxjLm9iamVjdC5vYmplY3RJZCk7YVt0XT17ZnVuY3Rpb246cix2YXJzOm59fX1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuY2FsbEZ1bmN0aW9uT24iLHtmdW5jdGlvbkRlY2xhcmF0aW9uOmBmdW5jdGlvbigpIHsgdGhpcy4ke299ID0gdGhpcy4ke299IHx8ICR7SlNPTi5zdHJpbmdpZnkoYSl9OyB9YCxzaWxlbnQ6ITAsb2JqZWN0SWQ6bn0pLGF3YWl0IGUucG9zdCgiUnVudGltZS5yZWxlYXNlT2JqZWN0Iix7b2JqZWN0SWQ6bn0pfSh0LGUucGFyYW1zKS50aGVuKGFzeW5jKCk9PntuJiZhd2FpdCB0LnBvc3QoIkRlYnVnZ2VyLnJlc3VtZSIpfSxhc3luYyBlPT57biYmYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5yZXN1bWUiKX0pfSksYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5lbmFibGUiKTtjb25zdCBpPSExIT09YS5jYXB0dXJlQWxsRXhjZXB0aW9ucztpZihhd2FpdCB0LnBvc3QoIkRlYnVnZ2VyLnNldFBhdXNlT25FeGNlcHRpb25zIix7c3RhdGU6aT8iYWxsIjoidW5jYXVnaHQifSksaSl7Y29uc3QgZT1hLm1heEV4Y2VwdGlvbnNQZXJTZWNvbmR8fDUwO2Y9ZnVuY3Rpb24oZSx0LG4pe2xldCBpPTAsbz01LGE9MDtyZXR1cm4gc2V0SW50ZXJ2YWwoKCk9PnswPT09YT9pPmUmJihvKj0yLG4obyksbz44NjQwMCYmKG89ODY0MDApLGE9byk6KGEtPTEsMD09PWEmJnQoKSksaT0wfSwxZTMpLnVucmVmKCksKCk9PntpKz0xfX0oZSxhc3luYygpPT57cygiUmF0ZS1saW1pdCBsaWZ0ZWQuIiksYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5zZXRQYXVzZU9uRXhjZXB0aW9ucyIse3N0YXRlOiJhbGwifSl9LGFzeW5jIGU9PntzKGBSYXRlLWxpbWl0IGV4Y2VlZGVkLiBEaXNhYmxpbmcgY2FwdHVyaW5nIG9mIGNhdWdodCBleGNlcHRpb25zIGZvciAke2V9IHNlY29uZHMuYCksYXdhaXQgdC5wb3N0KCJEZWJ1Z2dlci5zZXRQYXVzZU9uRXhjZXB0aW9ucyIse3N0YXRlOiJ1bmNhdWdodCJ9KX0pfX0pKCkuY2F0Y2goZT0+e3MoIkZhaWxlZCB0byBzdGFydCBkZWJ1Z2dlciIsZSl9KSxzZXRJbnRlcnZhbCgoKT0+e30sMWU0KTs="),{workerData:e,execArgv:[],env:{...process.env,NODE_OPTIONS:void 0}});process.on("exit",()=>{t.terminate()}),t.once("error",e=>{uD("Worker error",e)}),t.once("exit",e=>{uD("Worker exit",e)}),t.unref()}(r)}catch(e){P.error("Failed to start worker",e)}},e=>{P.error("Failed to start inspector",e)})},processEvent:(e,t)=>(function(e,t){if(t.originalException&&"object"==typeof t.originalException&&uB in t.originalException&&Array.isArray(t.originalException[uB])){for(let n of e.exception?.values||[])!function(e,t){let n=(e.stacktrace?.frames||[]).filter(e=>"new Promise"!==e.function);for(let e=0;e<n.length;e++){let r=n.length-e-1,i=t[e],s=n[r];if(!s||!i)break;void 0!==i.vars&&!1!==s.in_app&&uU(s.function,i.function)&&(s.vars=i.vars)}}(n,t.originalException[uB]);t.originalException[uB]=void 0}return e})(e,t)}};function uq(e){if(void 0!==e)return e.slice(-10).reduce((e,t)=>`${e},${t.function},${t.lineno},${t.colno}`,"")}function u0(e){let t=[],n=!1;function r(r){t=[],n||(n=!0,e(r))}return t.push(r),{add:function(e){t.push(e)},next:function(e){let n=t.pop()||r;try{n(e)}catch{r(e)}}}}class u1{constructor(e){this._session=e}static async create(e){return e||new u1(new(await Promise.resolve().then(n.t.bind(n,85690,19))).Session)}configureAndConnect(e,t){this._session.connect(),this._session.on("Debugger.paused",t=>{e(t,()=>{this._session.post("Debugger.resume")})}),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}setPauseOnExceptions(e){this._session.post("Debugger.setPauseOnExceptions",{state:e?"all":"uncaught"})}getLocalVariables(e,t){this._getProperties(e,e=>{let{add:n,next:r}=u0(t);for(let t of e)if(t.value?.objectId&&"Array"===t.value.className){let e=t.value.objectId;n(n=>this._unrollArray(e,t.name,n,r))}else if(t.value?.objectId&&"Object"===t.value.className){let e=t.value.objectId;n(n=>this._unrollObject(e,t.name,n,r))}else t.value&&n(e=>this._unrollOther(t,e,r));r({})})}_getProperties(e,t){this._session.post("Runtime.getProperties",{objectId:e,ownProperties:!0},(e,n)=>{e?t([]):t(n.result)})}_unrollArray(e,t,n,r){this._getProperties(e,e=>{n[t]=e.filter(e=>"length"!==e.name&&!isNaN(parseInt(e.name,10))).sort((e,t)=>parseInt(e.name,10)-parseInt(t.name,10)).map(e=>e.value?.value),r(n)})}_unrollObject(e,t,n,r){this._getProperties(e,e=>{n[t]=e.map(e=>[e.name,e.value?.value]).reduce((e,[t,n])=>(e[t]=n,e),{}),r(n)})}_unrollOther(e,t,n){e.value&&("value"in e.value?void 0===e.value.value||null===e.value.value?t[e.name]=`<${e.value.value}>`:t[e.name]=e.value.value:"description"in e.value&&"function"!==e.value.type?t[e.name]=`<${e.value.description}>`:"undefined"===e.value.type&&(t[e.name]="<undefined>")),n(t)}}let u2=(e={},t)=>{let n;let r=new eP(20),i=!1;return{name:"LocalVariables",async setupOnce(){let s=ek(),o=s?.getOptions();if(o?.includeLocalVariables){if(rG<18){P.log("The `LocalVariables` integration is only supported on Node >= v18.");return}if(await uz()){P.warn("Local variables capture has been disabled because the debugger was already enabled");return}u1.create(t).then(t=>{let s=!1!==e.captureAllExceptions;if(t.configureAndConnect((e,i)=>(function(e,{params:{reason:i,data:s,callFrames:o}},a){if("exception"!==i&&"promiseRejection"!==i){a();return}n?.();let l=function(e,t){if(void 0!==t)return uq(e(t,1))}(e,s.description);if(void 0==l){a();return}let{add:c,next:u}=u0(e=>{r.set(l,e),a()});for(let e=0;e<Math.min(o.length,5);e++){let{scopeChain:n,functionName:r,this:i}=o[e],s=n.find(e=>"local"===e.type),a="global"!==i.className&&i.className?`${i.className}.${r}`:r;if(s?.object.objectId===void 0)c(t=>{t[e]={function:a},u(t)});else{let n=s.object.objectId;c(r=>t.getLocalVariables(n,t=>{r[e]={function:a,vars:t},u(r)}))}}u([])})(o.stackParser,e,i),s),s){var a,l,c;let r,i,s;a=e.maxExceptionsPerSecond||50,l=()=>{P.log("Local variables rate-limit lifted."),t.setPauseOnExceptions(!0)},c=e=>{P.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${e} seconds.`),t.setPauseOnExceptions(!1)},r=0,i=5,s=0,setInterval(()=>{0===s?r>a&&(c(i*=2),i>86400&&(i=86400),s=i):0==(s-=1)&&l(),r=0},1e3).unref(),n=()=>{r+=1}}i=!0},e=>{P.log("The `LocalVariables` integration failed to start.",e)})}},processEvent:e=>i?function(e){for(let t of e.exception?.values||[])!function(e){let t=uq(e.stacktrace?.frames);if(void 0===t)return;let n=r.remove(t);if(void 0===n)return;let i=(e.stacktrace?.frames||[]).filter(e=>"new Promise"!==e.function);for(let e=0;e<i.length;e++){let t=i.length-e-1,r=n[e],s=i[t];if(!s||!r)break;void 0!==r.vars&&!1!==s.in_app&&uU(s.function,r.function)&&(s.vars=r.vars)}}(t);return e}(e):e,_getCachedFramesCount:()=>r.size,_getFirstCachedFrame:()=>r.values()[0]}},u9=(e={})=>rx.major<19?u2(e):u$(e),u5="undefined"==typeof __SENTRY_SERVER_MODULES__?{}:__SENTRY_SERVER_MODULES__,u3=()=>({name:"Modules",processEvent:e=>(e.modules={...e.modules,...u4()},e),getModules:u4});function u4(){return d||(d={...u5,...function(){let e=function(){try{let e=(0,uZ.join)(process.cwd(),"package.json");return JSON.parse((0,uS.readFileSync)(e,"utf8"))}catch{return{}}}();return{...e.dependencies,...e.devDependencies}}(),...ip()?function(){let e=require.main?.paths||[],t=function(){try{return require.cache?Object.keys(require.cache):[]}catch{return[]}}(),n={},r=new Set;return t.forEach(t=>{let i=t,s=()=>{let t=i;if(!(i=(0,uZ.dirname)(t))||t===i||r.has(t))return;if(0>e.indexOf(i))return s();let o=(0,uZ.join)(t,"package.json");if(r.add(t),!(0,uS.existsSync)(o))return s();try{let e=JSON.parse((0,uS.readFileSync)(o,"utf8"));n[e.name]=e.version}catch{}};s()}),n}():{}}),d}let u7=eV("NodeFetch.sentry",r9,e=>e),u6=(e={})=>({name:"NodeFetch",setupOnce(){u7(e)}});function u8(e){Y(()=>{console.error(e)});let t=ek();if(void 0===t){eA&&P.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);return}let n=t.getOptions(),r=n?.shutdownTimeout&&n.shutdownTimeout>0?n.shutdownTimeout:2e3;t.close(r).then(e=>{!e&&eA&&P.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)},e=>{eA&&P.error(e)})}let pe=(e={})=>{let t={exitEvenIfOtherHandlersAreRegistered:!1,...e};return{name:"OnUncaughtException",setup(e){global.process.on("uncaughtException",function(e,t){let n;let r=!1,i=!1,s=!1,o=e.getOptions();return Object.assign(a=>{let l=u8;t.onFatalError?l=t.onFatalError:o.onFatalError&&(l=o.onFatalError);let c=global.process.listeners("uncaughtException").filter(e=>"domainUncaughtExceptionClear"!==e.name&&"sentry_tracingErrorCallback"!==e.tag&&!0!==e._errorHandler).length,u=t.exitEvenIfOtherHandlersAreRegistered||0===c;r?u&&(s?(eA&&P.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),u8(a)):i||(i=!0,setTimeout(()=>{s||(s=!0,l(n,a))},2e3))):(n=a,r=!0,ek()===e&&t2(a,{originalException:a,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"auto.node.onuncaughtexception"}}),!s&&u&&(s=!0,l(a)))},{_errorHandler:!0})}(e,t))}}},pt=[{name:"AI_NoOutputGeneratedError"}],pn=(e={})=>{let t={mode:e.mode??"warn",ignore:[...pt,...e.ignore??[]]};return{name:"OnUnhandledRejection",setup(e){global.process.on("unhandledRejection",function(n,r){if(ek()!==e||function(e,t){let n="object"!=typeof t||null===t?{name:"",message:String(t??"")}:{name:"string"==typeof t.name?t.name:"",message:"string"==typeof t.message?t.message:String(t)};return e.some(e=>(function(e,t){let n=void 0===e.name||ep(t.name,e.name,!0),r=void 0===e.message||ep(t.message,e.message);return n&&r})(e,n))}(t.ignore??[],n))return;let i="strict"===t.mode?"fatal":"error",s=n&&"object"==typeof n?n._sentry_active_span:void 0;(s?e=>oK(s,e):e=>e())(()=>{t2(n,{originalException:r,captureContext:{extra:{unhandledPromiseRejection:!0},level:i},mechanism:{handled:!1,type:"auto.node.onunhandledrejection"}})}),function(e,t){let n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===t?Y(()=>{console.warn(n),console.error(e&&"object"==typeof e&&"stack"in e?e.stack:e)}):"strict"===t&&(Y(()=>{console.warn(n)}),u8(e))}(n,t.mode)})}}},pr=()=>({name:"ProcessSession",setupOnce(){nc(),process.on("beforeExit",()=>{let e=eZ().getSession();e?.status!=="ok"&&nu()})}});var pi=n(88849),ps=n.t(pi,2);let po="Spotlight",pa=(e={})=>{let t={sidecarUrl:e.sidecarUrl||"http://localhost:8969/stream"};return{name:po,setup(e){try{P.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?")}catch{}(function(e,t){let n=function(e){try{return new URL(`${e}`)}catch{P.warn(`[Spotlight] Invalid sidecar URL: ${e}`);return}}(t.sidecarUrl);if(!n)return;let r=0;e.on("beforeEnvelope",e=>{if(r>3){P.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");return}let t=oX(e);oj(()=>{let e=pi.request({method:"POST",path:n.pathname,hostname:n.hostname,port:n.port,headers:{"Content-Type":"application/x-sentry-envelope"}},e=>{e.statusCode&&e.statusCode>=200&&e.statusCode<400&&(r=0),e.on("data",()=>{}),e.on("end",()=>{}),e.setEncoding("utf8")});e.on("error",()=>{r++,P.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")}),e.write(t),e.end()})})})(e,t)}}},pl=(e={})=>({name:"NodeSystemError",processEvent:(t,n,r)=>{if(!function(e){return e instanceof Error&&"errno"in e&&"number"==typeof e.errno&&uR.getSystemErrorMap().has(e.errno)}(n.originalException))return t;let i=n.originalException,s={...i};for(let n of(r.getOptions().sendDefaultPii||!0===e.includePaths||(delete s.path,delete s.dest),t.contexts={...t.contexts,node_system_error:s},t.exception?.values||[]))n.value&&(i.path&&n.value.includes(i.path)&&(n.value=n.value.replace(`'${i.path}'`,"").trim()),i.dest&&n.value.includes(i.dest)&&(n.value=n.value.replace(`'${i.dest}'`,"").trim()));return t}});var pc=n(22286),pu=n.t(pc,2),pp=n(84492),pd=n(65628);let ph=Symbol.for("SentryBufferFullError");function pm(e,t,n=function(e=100){let t=new Set;return{get $(){return Array.from(t)},add:function(n){if(!(t.size<e))return eD(ph);let r=n();return t.add(r),r.then(()=>{t.delete(r)},()=>{t.delete(r)}),r},drain:function(e){if(!t.size)return eU(!0);let n=Promise.allSettled(Array.from(t)).then(()=>!0);return e?Promise.race([n,new Promise(t=>setTimeout(()=>t(!1),e))]):n}}}(e.bufferSize||64)){let r={};return{send:function(i){let s=[];if(oW(i,(t,n)=>{let i=oN[n];(function(e,t,n=Date.now()){return(e[t]||e.all||0)>n})(r,i)?e.recordDroppedEvent("ratelimit_backoff",i):s.push(t)}),0===s.length)return Promise.resolve({});let o=oC(i[0],s),a=t=>{oW(o,(n,r)=>{e.recordDroppedEvent(t,oN[r])})};return n.add(()=>t({body:oX(o)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&W&&P.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=Date.now()){let i={...e},s=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(s)for(let e of s.trim().split(",")){let[t,n,,,s]=e.split(":",5),o=parseInt(t,10),a=(isNaN(o)?60:o)*1e3;if(n)for(let e of n.split(";"))"metric_bucket"===e?(!s||s.split(";").includes("custom"))&&(i[e]=r+a):i[e]=r+a;else i.all=r+a}else o?i.all=r+function(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(o,r):429===t&&(i.all=r+6e4);return i}(r,e),e),e=>{throw a("network_error"),W&&P.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===ph)return W&&P.error("Skipped sending event because buffer is full."),a("queue_overflow"),Promise.resolve({});throw e})},flush:e=>n.drain(e)}}var pf=n(31764);let pg=Symbol("AgentBaseInternalState");class pb extends pi.Agent{constructor(e){super(e),this[pg]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}let{stack:t}=Error();return"string"==typeof t&&t.split("\n").some(e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:"))}createSocket(e,t,n){let r={...t,secureEndpoint:this.isSecureEndpoint(t)};Promise.resolve().then(()=>this.connect(e,r)).then(i=>{if(i instanceof pi.Agent)return i.addRequest(e,r);this[pg].currentSocket=i,super.createSocket(e,t,n)},n)}createConnection(){let e=this[pg].currentSocket;if(this[pg].currentSocket=void 0,!e)throw Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[pg].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[pg]&&(this[pg].defaultPort=e)}get protocol(){return this[pg].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[pg]&&(this[pg].protocol=e)}}function py(...e){P.log("[https-proxy-agent:parse-proxy-response]",...e)}function p_(...e){P.log("[https-proxy-agent]",...e)}class pv extends pb{static __initStatic(){this.protocols=["http","https"]}constructor(e,t){super(t),this.options={},this.proxy="string"==typeof e?new URL(e):e,this.proxyHeaders=t?.headers??{},p_("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),r=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?pI(t,"headers"):null,host:n,port:r}}async connect(e,t){var n;let r;let{proxy:i}=this;if(!t.host)throw TypeError('No "host" provided');if("https:"===i.protocol){p_("Creating `tls.Socket`: %o",this.connectOpts);let e=this.connectOpts.servername||this.connectOpts.host;r=pf.connect({...this.connectOpts,servername:e&&cK.isIP(e)?void 0:e})}else p_("Creating `net.Socket`: %o",this.connectOpts),r=cK.connect(this.connectOpts);let s="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},o=cK.isIPv6(t.host)?`[${t.host}]`:t.host,a=`CONNECT ${o}:${t.port} HTTP/1.1\r
`;if(i.username||i.password){let e=`${decodeURIComponent(i.username)}:${decodeURIComponent(i.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}for(let e of(s.Host=`${o}:${t.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(s)))a+=`${e}: ${s[e]}\r
`;let l=(n=r,new Promise((e,t)=>{let r=0,i=[];function s(){let a=n.read();a?function(a){i.push(a),r+=a.length;let l=Buffer.concat(i,r),c=l.indexOf("\r\n\r\n");if(-1===c){py("have not received end of HTTP headers yet..."),s();return}let u=l.subarray(0,c).toString("ascii").split("\r\n"),p=u.shift();if(!p)return n.destroy(),t(Error("No header received from proxy CONNECT response"));let d=p.split(" "),h=+(d[1]||0),m=d.slice(2).join(" "),f={};for(let e of u){if(!e)continue;let r=e.indexOf(":");if(-1===r)return n.destroy(),t(Error(`Invalid header from proxy CONNECT response: "${e}"`));let i=e.slice(0,r).toLowerCase(),s=e.slice(r+1).trimStart(),o=f[i];"string"==typeof o?f[i]=[o,s]:Array.isArray(o)?o.push(s):f[i]=s}py("got proxy server response: %o %o",p,f),o(),e({connect:{statusCode:h,statusText:m,headers:f},buffered:l})}(a):n.once("readable",s)}function o(){n.removeListener("end",a),n.removeListener("error",l),n.removeListener("readable",s)}function a(){o(),py("onend"),t(Error("Proxy connection ended before receiving CONNECT response"))}function l(e){o(),py("onerror %o",e),t(e)}n.on("error",l),n.on("end",a),s()}));r.write(`${a}\r
`);let{connect:c,buffered:u}=await l;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),200===c.statusCode){if(e.once("socket",pS),t.secureEndpoint){p_("Upgrading socket connection to TLS");let e=t.servername||t.host;return pf.connect({...pI(t,"host","path","port"),socket:r,servername:cK.isIP(e)?void 0:e})}return r}r.destroy();let p=new cK.Socket({writable:!1});return p.readable=!0,e.once("socket",e=>{p_("Replaying proxy buffer for failed request"),e.push(u),e.push(null)}),p}}function pS(e){e.resume()}function pI(e,...t){let n;let r={};for(n in e)t.includes(n)||(r[n]=e[n]);return r}function pZ(e){let t;try{t=new URL(e.url)}catch(t){return Y(()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")}),pm(e,()=>Promise.resolve({}))}let n="https:"===t.protocol,r=function(e,t){let{no_proxy:n}=process.env;if(!n?.split(",").some(t=>e.host.endsWith(t)||e.hostname.endsWith(t)))return t}(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),i=n?pu:ps,s=void 0!==e.keepAlive&&e.keepAlive,o=r?new pv(r):new i.Agent({keepAlive:s,maxSockets:30,timeout:2e3}),a=function(e,t,n){let{hostname:r,pathname:i,port:s,protocol:o,search:a}=new URL(e.url);return function(l){return new Promise((c,u)=>{oj(()=>{var p;let d=(p=l.body,new pp.Readable({read(){this.push(p),this.push(null)}})),h={...e.headers};l.body.length>32768&&(h["content-encoding"]="gzip",d=d.pipe((0,pd.createGzip)()));let m=t.request({method:"POST",agent:n,headers:h,hostname:r,path:`${i}${a}`,port:s,protocol:o,ca:e.caCerts},e=>{e.on("data",()=>{}),e.on("end",()=>{}),e.setEncoding("utf8");let t=e.headers["retry-after"]??null,n=e.headers["x-sentry-rate-limits"]??null;c({statusCode:e.statusCode,headers:{"retry-after":t,"x-sentry-rate-limits":Array.isArray(n)?n[0]||null:n}})});m.on("error",u),d.pipe(m)})})}}(e,e.httpModule??i,o);return pm(e,a)}pv.__initStatic();let pR=new Set(["false","f","n","no","off","0"]),pC=new Set(["true","t","y","yes","on","1"]);function pW(e,t){let n=String(e).toLowerCase();return!pR.has(n)&&(!!pC.has(n)||(t?.strict?null:!!e))}function pk(e){return parseInt(e||"",10)||void 0}let pX=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function pN(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=pX.exec(t);return n?n.slice(1):[]}function px(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:"/";i&&(t=`${i}/${t}`,n="/"===i.charAt(0))}return t=(function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){let r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e})(t.split("/").filter(e=>!!e),!n).join("/"),(n?"/":"")+t||"."}function pG(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function pw(e){return e.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function pT(e=process.argv[1]?function(e){let t=pN(e),n=t[0]||"",r=t[1];return n||r?(r&&(r=r.slice(0,r.length-1)),n+r):"."}(process.argv[1]):process.cwd(),t="\\"===uZ.sep){let n=t?pw(e):e;return e=>{if(!e)return;let r=t?pw(e):e,{dir:i,base:s,ext:o}=uZ.posix.parse(r);(".js"===o||".mjs"===o||".cjs"===o)&&(s=s.slice(0,-1*o.length));let a=decodeURIComponent(s);i||(i=".");let l=i.lastIndexOf("/node_modules");if(l>-1)return`${i.slice(l+14).replace(/\//g,".")}:${a}`;if(i.startsWith(n)){let e=i.slice(n.length+1).replace(/\//g,".");return e?`${e}:${a}`:a}return a}}function pH(e){if(process.env.SENTRY_RELEASE)return process.env.SENTRY_RELEASE;if(I.SENTRY_RELEASE?.id)return I.SENTRY_RELEASE.id;let t=process.env.GITHUB_SHA||process.env.CI_MERGE_REQUEST_SOURCE_BRANCH_SHA||process.env.CI_BUILD_REF||process.env.CI_COMMIT_SHA||process.env.BITBUCKET_COMMIT,n=process.env.APPVEYOR_PULL_REQUEST_HEAD_COMMIT||process.env.APPVEYOR_REPO_COMMIT||process.env.CODEBUILD_RESOLVED_SOURCE_VERSION||process.env.AWS_COMMIT_ID||process.env.BUILD_SOURCEVERSION||process.env.GIT_CLONE_COMMIT_HASH||process.env.BUDDY_EXECUTION_REVISION||process.env.BUILDKITE_COMMIT||process.env.CIRCLE_SHA1||process.env.CIRRUS_CHANGE_IN_REPO||process.env.CF_REVISION||process.env.CM_COMMIT||process.env.CF_PAGES_COMMIT_SHA||process.env.DRONE_COMMIT_SHA||process.env.FC_GIT_COMMIT_SHA||process.env.HEROKU_TEST_RUN_COMMIT_VERSION||process.env.HEROKU_SLUG_COMMIT||process.env.RAILWAY_GIT_COMMIT_SHA||process.env.RENDER_GIT_COMMIT||process.env.SEMAPHORE_GIT_SHA||process.env.TRAVIS_PULL_REQUEST_SHA||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA,r=process.env.CI_COMMIT_ID||process.env.SOURCE_COMMIT||process.env.SOURCE_VERSION||process.env.GIT_COMMIT||process.env.COMMIT_REF||process.env.BUILD_VCS_NUMBER||process.env.CI_COMMIT_SHA;return t||n||r||e}let pL=tQ([90,function(e){let t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/,r=/at (?:async )?(.+?) \(data:(.*?),/;return i=>{let s=i.match(r);if(s)return{filename:`<data:${s[2]}>`,function:s[1]};let o=i.match(n);if(o){let t,n,r,i,s;if(o[1]){let e=(r=o[1]).lastIndexOf(".");if("."===r[e-1]&&e--,e>0){t=r.slice(0,e),n=r.slice(e+1);let i=t.indexOf(".Module");i>0&&(r=r.slice(i+1),t=t.slice(0,i))}i=void 0}n&&(i=t,s=n),"<anonymous>"===n&&(s=void 0,r=void 0),void 0===r&&(s=s||"?",r=i?`${i}.${s}`:s);let a=o[2]?.startsWith("file://")?o[2].slice(7):o[2],l="native"===o[5];return a?.match(/\/[A-Z]:/)&&(a=a.slice(1)),a||!o[5]||l||(a=o[5]),{filename:a?decodeURI(a):void 0,module:e?e(a):void 0,function:r,lineno:pk(o[3]),colno:pk(o[4]),in_app:function(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&void 0!==e&&!e.includes("node_modules/")}(a||"",l)}}if(i.match(t))return{filename:i}}}(pT())]);function pV(e,t){return t?eC(t,()=>{let n=tV(),r=n?tZ(n):eX(t);return[n?tj(n):tK(e,t),r]}):[void 0,void 0]}let pE={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function pO(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function pY(e,t){let n=pj(),r=pj().get(e);void 0===r?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=100&&pK(e,r))}function pJ(e,t=eI(),n=pY){let r=t?.getClient()??ek();if(!r){W&&P.warn("No client available to capture log.");return}let{release:i,environment:s,enableLogs:o=!1,beforeSendLog:a}=r.getOptions();if(!o){W&&P.warn("logging option not enabled, log will not be captured.");return}let[,l]=pV(r,t),c={...e.attributes},{user:{id:u,email:p,username:d}}=function(e){let t=eR().getScopeData();return tA(t,eZ().getScopeData()),tA(t,e.getScopeData()),t}(t);pO(c,"user.id",u,!1),pO(c,"user.email",p,!1),pO(c,"user.name",d,!1),pO(c,"sentry.release",i),pO(c,"sentry.environment",s);let{name:h,version:m}=r.getSdkMetadata()?.sdk??{};pO(c,"sentry.sdk.name",h),pO(c,"sentry.sdk.version",m);let f=r.getIntegrationByName("Replay"),g=f?.getReplayId(!0);pO(c,"sentry.replay_id",g),g&&f?.getRecordingMode()==="buffer"&&pO(c,"sentry._internal.replay_is_buffering",!0);let b=e.message;if(G(b)){let{__sentry_template_string__:e,__sentry_template_values__:t=[]}=b;t?.length&&(c["sentry.message.template"]=e),t.forEach((e,t)=>{c[`sentry.message.parameter.${t}`]=e})}let y=t[ea];pO(c,"sentry.trace.parent_span_id",y?.spanContext().spanId);let _={...e,attributes:c};r.emit("beforeCaptureLog",_);let v=a?Y(()=>a(_)):_;if(!v){r.recordDroppedEvent("before_send","log_item",1),W&&P.warn("beforeSendLog returned null, log will not be captured.");return}let{level:S,message:I,attributes:Z={},severityNumber:R}=v;n(r,{timestamp:er(),level:S,body:I,trace_id:l?.trace_id,severity_number:R??pE[S],attributes:Object.keys(Z).reduce((e,t)=>(e[t]=function(e){switch(typeof e){case"number":if(Number.isInteger(e))return{value:e,type:"integer"};return{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}(Z[t]),e),{})}),r.emit("afterCaptureLog",v)}function pK(e,t){let n=t??pj().get(e)??[];if(0===n.length)return;let r=e.getOptions(),i=function(e,t,n,r){let i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=ta(r)),oC(i,[[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]])}(n,r._metadata,r.tunnel,e.getDsn());pj().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function pj(){return C("clientToLogBufferMap",()=>new WeakMap)}function pP(e,t,n,r=!0){!n||!r&&t in e||(e[t]=n)}function pA(e,t){let n=pM(),r=pM().get(e);void 0===r?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=1e3&&pF(e,r))}function pF(e,t){let n=t??pM().get(e)??[];if(0===n.length)return;let r=e.getOptions(),i=function(e,t,n,r){let i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=ta(r)),oC(i,[[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]])}(n,r._metadata,r.tunnel,e.getDsn());pM().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(i)}function pM(){return C("clientToMetricBufferMap",()=>new WeakMap)}let pz="Not capturing exception because it's already been captured.",pB="Discarded session because of missing or non-string release",pQ=Symbol.for("SentryInternalError"),pU=Symbol.for("SentryDoNotSendEventError");function pD(e){return{message:e,[pQ]:!0}}function p$(e){return{message:e,[pU]:!0}}function pq(e){return!!e&&"object"==typeof e&&pQ in e}function p0(e){return!!e&&"object"==typeof e&&pU in e}function p1(e,t,n,r,i){let s,o=0;e.on(n,()=>{o=0,clearTimeout(s)}),e.on(t,t=>{(o+=r(t))>=8e5?i(e):(clearTimeout(s),s=setTimeout(()=>{i(e)},5e3))}),e.on("flush",()=>{i(e)})}class p2{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){let t="string"==typeof e?function(e){let t=to.exec(e);if(!t){Y(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,i="",s="",o="",a=""]=t.slice(1),l="",c=a,u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){let e=c.match(/^\d+/);e&&(c=e[0])}return tl({host:s,pass:i,path:l,projectId:c,port:o,protocol:n,publicKey:r})}(e):tl(e);if(t&&function(e){if(!W)return!0;let{port:t,projectId:n,protocol:r}=e;return!["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(P.error(`Invalid Sentry Dsn: ${t} missing`),!0))&&(n.match(/^\d+$/)?"http"===r||"https"===r?!(t&&isNaN(parseInt(t,10)))||(P.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):(P.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(P.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1))}(t))return t}(e.dsn):W&&P.warn("No DSN provided, client will not send events."),this._dsn){let t=function(e,t,n){return t||`${function(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/?${function(e,t){let n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}this._options.enableLogs&&p1(this,"afterCaptureLog","flushLogs",p4,pK),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&p1(this,"afterCaptureMetric","flushMetrics",p3,pF)}captureException(e,t,n){let r=Q();if(et(e))return W&&P.log(pz),r;let i={event_id:r,...t};return this._process(this.eventFromException(e,i).then(e=>this._captureEvent(e,i,n))),i.event_id}captureMessage(e,t,n,r){let i={event_id:Q(),...n},s=G(e)?e:String(e),o=w(e)?this.eventFromMessage(s,t,i):this.eventFromException(e,i);return this._process(o.then(e=>this._captureEvent(e,i,r))),i.event_id}captureEvent(e,t,n){let r=Q();if(t?.originalException&&et(t.originalException))return W&&P.log(pz),r;let i={event_id:r,...t},s=e.sdkProcessingMetadata||{},o=s.capturedSpanScope,a=s.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,o||n,a)),i.event_id}captureSession(e){this.sendSession(e),ei(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){let t=this._transport;if(!t)return!0;this.emit("flush");let n=await this._isClientDoneProcessing(e),r=await t.flush(e);return n&&r}async close(e){let t=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){let t=this._integrations[e.name];ew(this,e,this._integrations),t||eG(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){let i=ox(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){if(!t)return;let n=e.sdk||{};e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0}}(e,n?.sdk);let o=function(e,t,n,r){let i=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:ta(r)},...i&&{trace:i}}}(e,i,r,t);return delete e.sdkProcessingMetadata,oC(o,[[{type:s},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(let e of t.attachments||[])n=function(e,t){let[n,r]=e;return[n,[...r,t]]}(n,function(e){let t="string"==typeof e.data?ok(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}(e));this.sendEnvelope(n).then(t=>this.emit("afterSendEvent",e,t))}sendSession(e){let{release:t,environment:n=eQ}=this._options;if("aggregates"in e){let r=e.attrs||{};if(!r.release&&!t){W&&P.warn(pB);return}r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t){W&&P.warn(pB);return}e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);let r=function(e,t,n,r){let i=ox(n);return oC({sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:ta(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){let r=`${e}:${t}`;W&&P.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){let n=this._hooks[e]=this._hooks[e]||new Set,r=(...e)=>t(...e);return n.add(r),()=>{n.delete(r)}}emit(e,...t){let n=this._hooks[e];n&&n.forEach(e=>e(...t))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(e){return W&&P.error("Error while sending envelope:",e),{}}return W&&P.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:e}=this._options;this._integrations=function(e,t){let n={};return t.forEach(t=>{t&&ew(e,t,n)}),n}(this,e),eG(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1,i=t.exception?.values;if(i){for(let e of(r=!0,n=!1,i))if(e.mechanism?.handled===!1){n=!0;break}}let s="ok"===e.status;(s&&0===e.errors||s&&n)&&(ei(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(e=>setTimeout(e,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){let i=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s?.length&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),(function(e,t,n,r,i,s){let{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||Q(),timestamp:t.timestamp||en()},c=n.integrations||e.integrations.map(e=>e.name);(function(e,t){let{environment:n,release:r,dist:i,maxValueLength:s}=t;e.environment=e.environment||n||eQ,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i);let o=e.request;o?.url&&(o.url=s?ec(o.url,s):o.url)})(l,e),c.length>0&&(l.sdk=l.sdk||{},l.sdk.integrations=[...l.sdk.integrations||[],...c]),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){let n=tM(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=n[e.filename])})})}(l,e.stackParser);let u=function(e,t){if(!t)return e;let n=e?e.clone():new eh;return n.update(t),n}(r,n.captureContext);n.mechanism&&$(l,n.mechanism);let p=i?i.getEventProcessors():[],d=eR().getScopeData();s&&tA(d,s.getScopeData()),u&&tA(d,u.getScopeData());let h=[...n.attachments||[],...d.attachments];return h.length&&(n.attachments=h),function(e,t){let{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=t;(function(e,t){let{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(i).length&&(e.user={...i,...e.user}),Object.keys(s).length&&(e.contexts={...s,...e.contexts}),o&&(e.level=o),a&&"transaction"!==e.type&&(e.transaction=a)})(e,t),r&&function(e,t){e.contexts={trace:tZ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:tj(t),...e.sdkProcessingMetadata};let n=tX(tL(t)).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,r),e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],n&&(e.fingerprint=e.fingerprint.concat(n)),e.fingerprint.length||delete e.fingerprint,function(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...s}}(l,d),(function(e,t,n,r=0){try{let i=function e(t,n,r,i){let s=r[i];if(!t||!s)return t;let o=s({...t},n);return(W&&null===o&&P.log(`Event processor "${s.id||"?"}" dropped event`),H(o))?o.then(t=>e(t,n,r,i+1)):e(o,n,r,i+1)}(t,n,e,r);return H(i)?i:eU(i)}catch(e){return eD(e)}})([...p,...d.eventProcessors],l,n).then(e=>(e&&function(e){let t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof o&&o>0)?function(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:t0(e.data,t,n)}}))},...e.user&&{user:t0(e.user,t,n)},...e.contexts&&{contexts:t0(e.contexts,t,n)},...e.extra&&{extra:t0(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=t0(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(e=>({...e,...e.data&&{data:t0(e.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=t0(e.contexts.flags,3,n)),r}(e,o,a):e)})(i,e,t,n,this,r).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:eX(n),...e.contexts};let r=tK(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},n=eI(),r=eZ()){return W&&p9(e)&&P.log(`Captured error event \`${c9(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,r).then(e=>e.event_id,e=>{W&&(p0(e)?P.log(e.message):pq(e)?P.warn(e.message):P.warn(e))})}_processEvent(e,t,n,r){let i=this.getOptions(),{sampleRate:s}=i,o=p5(e),a=p9(e),l=e.type||"error",c=`before send for type \`${l}\``,u=void 0===s?void 0:tg(s);if(a&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error"),eD(p$(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let p="replay_event"===l?"replay":l;return this._prepareEvent(e,t,n,r).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",p),p$("An event processor returned `null`, will not send event.");return t.data&&!0===t.data.__sentry__?e:function(e,t){let n=`${t} must return \`null\` or a valid event.`;if(H(e))return e.then(e=>{if(!T(e)&&null!==e)throw pD(n);return e},e=>{throw pD(`${t} rejected with ${e}`)});if(!T(e)&&null!==e)throw pD(n);return e}(function(e,t,n,r){let{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o,ignoreSpans:a}=t,l=n;if(p9(l)&&i)return i(l,r);if(p5(l)){if(o||a){let t=function(e){let{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:s,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o?.[e4],exclusive_time:o?.[e7],measurements:e.measurements,is_segment:!0}}(l);if(a?.length&&ow(t,a))return null;if(o){let e=o(t);e?l=es(n,{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[e4]:e.profile_id},...e.exclusive_time&&{[e7]:e.exclusive_time}}}},measurements:e.measurements}):tE()}if(l.spans){let t=[],n=l.spans;for(let e of n){if(a?.length&&ow(e,a)){!function(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let t of e)t.parent_span_id===r&&(t.parent_span_id=n)}(n,e);continue}if(o){let n=o(e);n?t.push(n):(tE(),t.push(e))}else t.push(e)}let r=l.spans.length-t.length;r&&e.recordDroppedEvent("before_send","span",r),l.spans=t}}if(s){if(l.spans){let e=l.spans.length;l.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(l,r)}}return l}(this,i,e,t),c)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",p),o){let t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw p$(`${c} returned \`null\`, will not send event.`)}let s=n.getSession()||r.getSession();if(a&&s&&this._updateSessionFromEvent(s,i),o){let e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}let l=i.transaction_info;return o&&l&&i.transaction!==e.transaction&&(i.transaction_info={...l,source:"custom"}),this.sendEvent(i,t),i}).then(null,e=>{if(p0(e)||pq(e))throw e;throw this.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),pD(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{let[n,r]=e.split(":");return{reason:n,category:r,quantity:t}})}_flushOutcomes(){var e;W&&P.log("Flushing outcomes...");let t=this._clearOutcomes();if(0===t.length){W&&P.log("No outcomes to send");return}if(!this._dsn){W&&P.log("No dsn provided, will not send outcomes");return}W&&P.log("Sending outcomes:",t);let n=oC((e=this._options.tunnel&&ta(this._dsn))?{dsn:e}:{},[[{type:"client_report"},{timestamp:en(),discarded_events:t}]]);this.sendEnvelope(n)}}function p9(e){return void 0===e.type}function p5(e){return"transaction"===e.type}function p3(e){let t=0;return e.name&&(t+=2*e.name.length),(t+=8)+p7(e.attributes)}function p4(e){let t=0;return e.message&&(t+=2*e.message.length),t+p7(e.attributes)}function p7(e){if(!e)return 0;let t=0;return Object.values(e).forEach(e=>{Array.isArray(e)?t+=e.length*p6(e[0]):w(e)?t+=p6(e):t+=100}),t}function p6(e){return"string"==typeof e?2*e.length:"number"==typeof e?8:"boolean"==typeof e?4:0}let p8=null;function de(){p8=I.onerror,I.onerror=function(e,t,n,r,i){return uh("error",{column:r,error:i,line:n,msg:e,url:t}),!!p8&&p8.apply(this,arguments)},I.onerror.__SENTRY_INSTRUMENTED__=!0}let dt=null;function dn(){dt=I.onunhandledrejection,I.onunhandledrejection=function(e){return uh("unhandledrejection",e),!dt||dt.apply(this,arguments)},I.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let dr=!1;class di extends p2{constructor(e){(function(){dr||(e.tag="sentry_tracingErrorCallback",dr=!0,function(e){let t="error";up(t,e),ud(t,de)}(e),function(e){let t="unhandledrejection";up(t,e),ud(t,dn)}(e));function e(){let e=tV(),t=e&&tL(e);if(t){let e="internal_error";W&&P.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:2,message:e})}}})(),function(e){let t=e._metadata?.sdk,n=t?.name&&t?.version?`${t?.name}/${t?.version}`:void 0;e.transportOptions={...e.transportOptions,headers:{...n&&{"user-agent":n},...e.transportOptions?.headers}}}(e),super(e)}eventFromException(e,t){let n=function(e,t,n,r){let i=r?.data&&r.data.mechanism||{handled:!0,type:"generic"},[s,o]=function(e,t,n,r){if(X(n))return[n,void 0];if(t.synthetic=!0,T(n)){let t={__serialized__:function e(t,n=3,r=102400){let i=t0(t,n);return~-encodeURI(JSON.stringify(i)).split(/%..|./).length>r?e(t,n-1,r):i}(n,e?.getOptions().normalizeDepth)},i=function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}(n);if(i)return[i,t];let s=function(e){if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message '${e.message}'`),t}if("message"in e&&"string"==typeof e.message)return e.message;let t=function(e){let t=Object.keys(M(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}(e);if(N(e,"ErrorEvent"))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;let n=function(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`${n&&"Object"!==n?`'${n}'`:"Object"} captured as exception with keys: ${t}`}(n),o=r?.syntheticException||Error(s);return o.message=s,[o,t]}let i=r?.syntheticException||Error(n);return i.message=`${n}`,[i,void 0]}(e,i,n,r),a={exception:{values:[ui(t,s)]}};return o&&(a.extra=o),function(e,t,n){let r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}(a,void 0,void 0),$(a,i),{...a,event_id:r?.event_id}}(this,this._options.stackParser,e,t);return n.level="error",eU(n)}eventFromMessage(e,t="info",n){return eU(function(e,t,n="info",r,i){let s={event_id:r?.event_id,level:n};if(i&&r?.syntheticException){let n=ur(e,r.syntheticException);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]},$(s,{synthetic:!0}))}if(G(t)){let{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s}(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureException(e,t,n){return ds(t),super.captureException(e,t,n)}captureEvent(e,t,n){return!e.type&&e.exception?.values&&e.exception.values.length>0&&ds(t),super.captureEvent(e,t,n)}captureCheckIn(e,t,n){let r="checkInId"in e&&e.checkInId?e.checkInId:Q();if(!this._isEnabled())return W&&P.warn("SDK not enabled, will not capture check-in."),r;let{release:i,environment:s,tunnel:o}=this.getOptions(),a={check_in_id:r,monitor_slug:e.monitorSlug,status:e.status,release:i,environment:s};"duration"in e&&(a.duration=e.duration),t&&(a.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone,failure_issue_threshold:t.failureIssueThreshold,recovery_threshold:t.recoveryThreshold});let[l,c]=pV(this,n);c&&(a.contexts={trace:c});let u=function(e,t,n,r,i){let s={sent_at:new Date().toISOString()};return n?.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&i&&(s.dsn=ta(i)),t&&(s.trace=t),oC(s,[[{type:"check_in"},e]])}(a,l,this.getSdkMetadata(),o,this.getDsn());return W&&P.log("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(u),r}_prepareEvent(e,t,n,r){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:e.contexts?.runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,t,n,r)}}function ds(e){let t=eZ().getScopeData().sdkProcessingMetadata.requestSession;if(t){let n=e?.mechanism?.handled??!0;n&&"crashed"!==t.status?t.status="errored":n||(t.status="crashed")}}var da=n(6162);class dl extends di{constructor(e){let t=!1===e.includeServerName?void 0:e.serverName||global.process.env.SENTRY_NAME||uI.hostname(),n={...e,platform:"node",runtime:{name:"node",version:global.process.version},serverName:t};e.openTelemetryInstrumentations&&(0,eH.X)({instrumentations:e.openTelemetryInstrumentations}),c2(n,"node"),P.log(`Initializing Sentry: process: ${process.pid}, thread: ${da.isMainThread?"main":`worker-${da.threadId}`}.`),super(n),this.getOptions().enableLogs&&(this._logOnExitFlushListener=()=>{pK(this)},t&&this.on("beforeCaptureLog",e=>{e.attributes={...e.attributes,"server.address":t}}),process.on("beforeExit",this._logOnExitFlushListener))}get tracer(){if(this._tracer)return this._tracer;let e=nW.g.getTracer("@sentry/node",S);return this._tracer=e,e}async flush(e){return await this.traceProvider?.forceFlush(),this.getOptions().sendClientReports&&this._flushOutcomes(),super.flush(e)}async close(e){this._clientReportInterval&&clearInterval(this._clientReportInterval),this._clientReportOnExitFlushListener&&process.off("beforeExit",this._clientReportOnExitFlushListener),this._logOnExitFlushListener&&process.off("beforeExit",this._logOnExitFlushListener);let t=await super.close(e);return this.traceProvider&&await this.traceProvider.shutdown(),t}startClientReportTracking(){let e=this.getOptions();e.sendClientReports&&(this._clientReportOnExitFlushListener=()=>{this._flushOutcomes()},this._clientReportInterval=setInterval(()=>{eA&&P.log("Flushing client reports based on interval."),this._flushOutcomes()},e.clientReportFlushInterval??6e4).unref(),process.on("beforeExit",this._clientReportOnExitFlushListener))}_getTraceInfoFromScope(e){return e?function(e,t){let n=t[nU],r=n&&nW.g.getSpan(n),i=r?tZ(r):eX(t);return[r?tj(r):tK(e,t),i]}(this,e):[void 0,void 0]}}var dc=n(3827),du=n(85807);function dp(){if(id()&&!I._sentryEsmLoaderHookRegistered){I._sentryEsmLoaderHookRegistered=!0;try{let{addHookMessagePort:e}=(0,dc.createAddHookMessageChannel)();du.register("import-in-the-middle/hook.mjs","file:///C:/xampp/htdocs/_MVP_Video_TecnicoCursos_v7/estudio_ia_videos/node_modules/@sentry/node-core/build/esm/sdk/esmLoader.js",{data:{addHookMessagePort:e,include:[]},transferList:[e]})}catch(e){P.warn("Failed to register 'import-in-the-middle' hook",e)}}}function dd(){return[c4(),ue(),us(),ul(),pl(),ub(),uF(),u6(),pe(),pn(),uj(),u9(),uk(),u_(),pr(),u3()]}function dh(){if(!eA)return;let e=Array.from(n4),t=["SentryContextManager","SentryPropagator"];for(let n of(eN()&&t.push("SentrySpanProcessor"),t))e.includes(n)||P.error(`You have to set up the ${n}. Without this, the OpenTelemetry & Sentry integration will not work properly.`);e.includes("SentrySampler")||P.warn("You have to set up the SentrySampler. Without this, the OpenTelemetry & Sentry integration may still work, but sample rates set for the Sentry SDK will not be respected. If you use a custom sampler, make sure to use `wrapSamplingDecision`.")}function dm(){return[i_(),sH(),sK(),av(),s1(),s3(),s8(),or(),oy(),oI(),al(),ad(),aZ(),aX(),aY(),aP(),sM(),a$(),sU(),lj(),l1(),o0(),c1(),ct(),cd(),ck()]}var df=n(36709),dg=n(12694),db=n(31847),dy=n(40523);let d_=function(e){class t extends e{constructor(...e){super(...e),n7("SentryContextManager")}with(e,t,n,...r){let i=nD(e),s=i?.scope||eI(),o=i?.isolationScope||eZ(),a=!0===e.getValue(nz),l=e.getValue(nB),c=e.getValue(nQ),u=l||s.clone(),p=n$(e,{scope:u,isolationScope:c||(a?o.clone():o)}).deleteValue(nz).deleteValue(nB).deleteValue(nQ);return F(u,nU,p),super.with(p,t,n,...r)}}return t}(n(55188).AsyncLocalStorageContextManager);function dv(e,t={}){e.getOptions().debug&&(_.K.disable(),_.K.setLogger({error:P.error,warn:P.warn,info:P.log,debug:P.log,verbose:P.log},dy.n.DEBUG));let n=function(e,t={}){let n=new dg.u({sampler:new rW(e),resource:(0,df.tM)().merge((0,df.nn)({[ny.Mn]:"node",[db.te]:"sentry",[ny.st]:S})),forceFlushTimeoutMillis:500,spanProcessors:[new rC({timeout:function(e){if(null!=e){if(e>1e6)return ig&&P.warn("`maxSpanWaitDuration` is too high, using the maximum value of 1000000"),1e6;if(e<=0||Number.isNaN(e)){ig&&P.warn("`maxSpanWaitDuration` must be a positive number, using default value instead.");return}return e}}(e.getOptions().maxSpanWaitDuration)}),...t.spanProcessors||[]]});return nW.g.setGlobalTracerProvider(n),nx.u.setGlobalPropagator(new n6),eY.D.setGlobalContextManager(new d_),n}(e,t);e.traceProvider=n}function dS(e={}){let{debug:t}=e;t&&P.enable(),dp(),(function(e){let t=[rQ,rU,iy,ak,sw,sN,ap,a_,sF,aI,sQ,sq,s5,s6,on,oS,ap,sJ,ob,aO,aj,aD,lK,l0,o$,c0,ce,cp,cW];return e?t.filter(t=>{let n=t.id;return e.some(e=>n===e||n.startsWith(`${e}.`))}):t})(e.integrations).forEach(e=>{e(),t&&P.log(`[Sentry] Preloaded ${e.id} instrumentation`)})}function dI(){return dd().filter(e=>"Http"!==e.name&&"NodeFetch"!==e.name).concat(rD(),r6())}function dZ(e){return[...dI(),...eN(e)?dm():[]]}function dR(e={}){return dC(e,dZ)}function dC(e={},t){c2(e,"node");let n=function(e={}){return function(e={},t){let n=function(e,t){var n;let r=function(e){if(void 0!==e)return e;let t=pH();if(void 0!==t)return t}(e.release),i=e.spotlight??pW(process.env.SENTRY_SPOTLIGHT,{strict:!0})??process.env.SENTRY_SPOTLIGHT,s=function(e){if(void 0!==e)return e;let t=process.env.SENTRY_TRACES_SAMPLE_RATE;if(!t)return;let n=parseFloat(t);return isFinite(n)?n:void 0}(e.tracesSampleRate),o={...e,dsn:e.dsn??process.env.SENTRY_DSN,environment:e.environment??process.env.SENTRY_ENVIRONMENT,sendClientReports:e.sendClientReports??!0,transport:e.transport??pZ,stackParser:Array.isArray(n=e.stackParser||pL)?tQ(...n):n,release:r,tracesSampleRate:s,spotlight:i,debug:pW(e.debug??process.env.SENTRY_DEBUG)},a=e.integrations,l=e.defaultIntegrations??t(o);return{...o,integrations:function(e){let t;let n=e.defaultIntegrations||[],r=e.integrations;if(n.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(r))t=[...n,...r];else if("function"==typeof r){let e=r(n);t=Array.isArray(e)?e:[e]}else t=n;return function(e){let t={};return e.forEach(e=>{let{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.values(t)}(t)}({defaultIntegrations:l,integrations:a})}}(e,t);!0===n.debug&&(eA?P.enable():Y(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),!1!==n.registerEsmLoaderHooks&&dp(),rf(),eI().update(n.initialScope),n.spotlight&&!n.integrations.some(({name:e})=>e===po)&&n.integrations.push(pa({sidecarUrl:"string"==typeof n.spotlight?n.spotlight:void 0})),c2(n,"node-core");let r=new dl(n);return eI().setClient(r),r.init(),I._sentryInjectLoaderHookRegister?.(),P.log(`SDK initialized from ${ip()?"CommonJS":"ESM"}`),r.startClientReportTracking(),function(){if(!1!==pW(process.env.SENTRY_USE_ENVIRONMENT)){let e=ty(process.env.SENTRY_TRACE,process.env.SENTRY_BAGGAGE);eI().setPropagationContext(e)}}(),function(e){e.on("createDsc",(e,t)=>{if(!t)return;let n=tX(t).data[eq],{description:r}=t.name?n1(t):{description:void 0};if("url"!==n&&r&&(e.transaction=r),eN()){let n=nq(t.spanContext());e.sampled=void 0==n?void 0:String(n)}})}(r),function(e){e.on("preprocessEvent",e=>{let t=n9();if(!t||"transaction"===e.type)return;e.contexts={trace:tZ(t),...e.contexts};let n=tL(t);return e.sdkProcessingMetadata={dynamicSamplingContext:tj(n),...e.sdkProcessingMetadata},e})}(r),r}(e,dd)}({...e,defaultIntegrations:e.defaultIntegrations??t(e)});return n&&!e.skipOpenTelemetrySetup&&(dv(n,{spanProcessors:e.openTelemetrySpanProcessors}),dh()),n}function dW(e={}){return dC(e,()=>[])}let dk=(e={})=>{let t=e.levels||E,n=e.handled??!0;return{name:"CaptureConsole",setup(e){"console"in I&&um(({args:r,level:i})=>{ek()===e&&t.includes(i)&&function(e,t,n){let r={level:ug(t),extra:{arguments:e}};eC(i=>{if(i.addEventProcessor(e=>(e.logger="console",$(e,{handled:n,type:"auto.core.capture_console"}),e)),"assert"===t){if(!e[0]){let t=`Assertion failed: ${eu(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),t9(t,r)}return}let s=e.find(e=>e instanceof Error);if(s){t2(s,r);return}t9(eu(e," "),r)})}(r,i,n)})}}};function dX(e,t={},n=eI()){let{message:r,name:i,email:s,url:o,source:a,associatedEventId:l,tags:c}=e,u={contexts:{feedback:{contact_email:s,name:i,message:r,url:o,source:a,associated_event_id:l}},type:"feedback",level:"info",tags:c},p=n?.getClient()||ek();return p&&p.emit("beforeSendFeedback",u,t),n.captureEvent(u,t)}function dN(e,t,n){return"util"in I&&"function"==typeof I.util.format?I.util.format(...e):e.map(e=>w(e)?String(e):JSON.stringify(t0(e,t,n))).join(" ")}let dx={[e2]:"auto.log.console"},dG=(e={})=>{let t=e.levels||E;return{name:"ConsoleLogs",setup(e){let{enableLogs:n,normalizeDepth:r=3,normalizeMaxBreadth:i=1e3}=e.getOptions();if(!n){W&&P.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}um(({args:n,level:s})=>{var o;if(ek()!==e||!t.includes(s))return;let a=n[0],l=n.slice(1);if("assert"===s){a||pJ({level:"error",message:l.length>0?`Assertion failed: ${dN(l,r,i)}`:"Assertion failed",attributes:dx});return}let c="log"===s,u=n.length>1&&"string"==typeof n[0]&&(o=n[0],!/%[sdifocO]/.test(o)),p={...dx,...u?function(e,t){let n={},r=Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((e,t)=>{n[`sentry.message.parameter.${t}`]=e}),n}(a,l):{}};pJ({level:c?"info":s,message:dN(n,r,i),severityNumber:c?10:void 0,attributes:p})})}}},dw=["trace","debug","info","warn","error","fatal"];function dT(e={}){let t=new Set(e.levels??dw),n=e.client;return{log(e){let{type:r,level:i,message:s,args:o,tag:a,date:l,...c}=e,u=n||ek();if(!u)return;let p=function(e,t){if("verbose"===e)return"debug";if("silent"===e)return"trace";if(e){let t=dH[e];if(t)return t}if("number"==typeof t){let e=dL[t];if(e)return e}return"info"}(r,i);if(!t.has(p))return;let{normalizeDepth:d=3,normalizeMaxBreadth:h=1e3}=u.getOptions(),m=[];s&&m.push(s),o&&o.length>0&&m.push(dN(o,d,h));let f=m.join(" ");c["sentry.origin"]="auto.log.consola",a&&(c["consola.tag"]=a),r&&(c["consola.type"]=r),null!=i&&"number"==typeof i&&(c["consola.level"]=i),pJ({level:p,message:f,attributes:c})}}}let dH={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},dL={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"},dV=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{var n;if((n=e)&&(function(e,t){let n=e.message,r=t.message;return!!((n||r)&&(!n||r)&&(n||!r)&&n===r&&dO(e,t)&&dE(e,t))}(t,n)||function(e,t){let n=dY(t),r=dY(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&dO(e,t)&&dE(e,t))}(t,n)))return W&&P.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};function dE(e,t){let n=tq(e),r=tq(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let e=0;e<r.length;e++){let t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function dO(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch{return!1}}function dY(e){return e.exception?.values?.[0]}let dJ=(e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,r,i){let{maxValueLength:s}=i.getOptions();return function(e,t={},n,r,i){if(!t.originalException||!X(t.originalException))return e;let s=t.originalException.name||t.originalException.constructor.name,o=function e(t,n,r){try{let i=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(let e of Object.keys(t)){if(-1!==i.indexOf(e))continue;let n=t[e];s[e]=X(n)||"string"==typeof n?r?ec(`${n}`,r):`${n}`:n}if(n&&void 0!==t.cause){if(X(t.cause)){let n=t.cause.name||t.cause.constructor.name;s.cause={[n]:e(t.cause,!1,r)}}else s.cause=t.cause}if("function"==typeof t.toJSON){let e=t.toJSON();for(let t of Object.keys(e)){let n=e[t];s[t]=X(n)?n.toString():n}}return s}catch(e){W&&P.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r,i);if(o){let t={...e.contexts},r=t0(o,n);return T(r)&&(F(r,"__sentry_skip_normalization__",!0),t[s]=r),{...e,contexts:t}}return e}(e,r,t,n,s)}}},dK=()=>({name:"FeatureFlags",processEvent:(e,t,n)=>cV(e),addFeatureFlag(e,t){cE(e,t),cO(e,t)}});function dj(e){return Object.entries(e||nh()).map(([e,t])=>`<meta name="${e}" content="${t}"/>`).join("\n")}let dP=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],dA=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],dF={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},dM=["select","insert","upsert","update","delete"];function dz(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function dB(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function dQ(e,t=!1){return new Proxy(e,{apply:(n,r,i)=>oE({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[e2]:"auto.db.supabase",[e1]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},e=>Reflect.apply(n,r,i).then(t=>(t&&"object"==typeof t&&"error"in t&&t.error?(e.setStatus({code:2}),t2(t.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):e.setStatus({code:1}),e.end(),t)).catch(t=>{throw e.setStatus({code:2}),e.end(),t2(t,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),t}).then(...i))})}let dU=e=>{if(!e){W&&P.warn("Supabase integration was not installed because no Supabase client was provided.");return}(function(e){dB(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(e,t,n){let r=Reflect.apply(e,t,n);return function(e){for(let t of dM)dB(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(e,n,r){let i=Reflect.apply(e,n,r),s=i.constructor;return W&&P.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),dB(s.prototype.then)||(s.prototype.then=new Proxy(s.prototype.then,{apply(e,t,n){let r=function(e,t={}){switch(e){case"GET":return"select";case"POST":if(t.Prefer?.includes("resolution="))return"upsert";return"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(t.method,t.headers);if(!dM.includes(r)||!t?.url?.pathname||"string"!=typeof t.url.pathname)return Reflect.apply(e,t,n);let i=t.url.pathname.split("/"),s=i.length>0?i[i.length-1]:"",o=[];for(let[e,n]of t.url.searchParams.entries())o.push(function(e,t){let n;if(""===t||"*"===t)return"select(*)";if("select"===e)return`select(${t})`;if("or"===e||e.endsWith(".or"))return`${e}${t}`;let[r,...i]=t.split(".");return n=r?.startsWith("fts")?"textSearch":r?.startsWith("plfts")?"textSearch[plain]":r?.startsWith("phfts")?"textSearch[phrase]":r?.startsWith("wfts")?"textSearch[websearch]":r&&dF[r]||"filter",`${n}(${e}, ${i.join(".")})`}(e,n));let a=Object.create(null);if(T(t.body))for(let[e,n]of Object.entries(t.body))a[e]=n;let l=`${"select"===r?"":`${r}${a?"(...) ":""}`}${o.join(" ")} from(${s})`,c={"db.table":s,"db.schema":t.schema,"db.url":t.url.origin,"db.sdk":t.headers["X-Client-Info"],"db.system":"postgresql","db.operation":r,[e2]:"auto.db.supabase",[e1]:"db"};return o.length&&(c["db.query"]=o),Object.keys(a).length&&(c["db.body"]=a),oE({name:l,attributes:c},i=>Reflect.apply(e,t,[]).then(e=>{if(i&&(e&&"object"==typeof e&&"status"in e&&tp(i,e.status||500),i.end()),e.error){let t=Error(e.error.message);e.error.code&&(t.code=e.error.code),e.error.details&&(t.details=e.error.details);let n={};o.length&&(n.query=o),Object.keys(a).length&&(n.body=a),t2(t,e=>(e.addEventProcessor(e=>($(e,{handled:!1,type:"auto.db.supabase.postgres"}),e)),e.setContext("supabase",n),e))}let t={type:"supabase",category:`db.${r}`,message:l},n={};return o.length&&(n.query=o),Object.keys(a).length&&(n.body=a),Object.keys(n).length&&(t.data=n),eB(t),e},e=>{throw i&&(tp(i,500),i.end()),e}).then(...n))}}),dz(s.prototype.then)),i}}),dz(e.prototype[t]))}(r.constructor),r}}),dz(e.prototype.from))})(e.constructor===Function?e:e.constructor),function(e){let t=e.auth;if(!(!t||dB(e.auth))){for(let n of dP){let r=t[n];r&&"function"==typeof e.auth[n]&&(e.auth[n]=dQ(r))}for(let n of dA){let r=t.admin[n];r&&"function"==typeof e.auth.admin[n]&&(e.auth.admin[n]=dQ(r,!0))}dz(e.auth)}}(e)},dD=e=>({setupOnce(){dU(e)},name:"Supabase"}),d$=e=>dD(e.supabaseClient);function dq(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}let d0=dq;function d1(e){return!!e&&void 0!==e._profiler&&"function"==typeof e._profiler.start&&"function"==typeof e._profiler.stop}let d2={startProfiler:function(){let e=ek();if(!e){W&&P.warn("No Sentry client available, profiling is not started");return}let t=e.getIntegrationByName("ProfilingIntegration");if(!t){W&&P.warn("ProfilingIntegration is not available");return}if(!d1(t)){W&&P.warn("Profiler is not available on profiling integration.");return}t._profiler.start()},stopProfiler:function(){let e=ek();if(!e){W&&P.warn("No Sentry client available, profiling is not started");return}let t=e.getIntegrationByName("ProfilingIntegration");if(!t){W&&P.warn("ProfilingIntegration is not available");return}if(!d1(t)){W&&P.warn("Profiler is not available on profiling integration.");return}t._profiler.stop()}},d9=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in I&&!!I.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let i=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){let e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(i||s){let e;let s=i?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,o=t?function(e,t){e=px(e).slice(1),t=px(t).slice(1);let n=pG(e.split("/")),r=pG(t.split("/")),i=Math.min(n.length,r.length),s=i;for(let e=0;e<i;e++)if(n[e]!==r[e]){s=e;break}let o=[];for(let e=s;e<n.length;e++)o.push("..");return(o=o.concat(r.slice(s))).join("/")}(t,s):pN(s)[2]||"";r.filename=`${n}${o}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map(e=>{var t;return{...e,...e.stacktrace&&{stacktrace:{...t=e.stacktrace,frames:t?.frames?.map(e=>i(e))}}}})}}}catch{return e}}(t)),t}}};function d5(e){eI().setClient(e)}let d3={mechanism:{handled:!1,type:"auto.rpc.trpc.middleware"}};function d4(e={}){return async function(t){let{path:n,type:r,next:i,rawInput:s,getRawInput:o}=t,a=ek(),l=a?.getOptions(),c={procedure_path:n,procedure_type:r};if(F(c,"__sentry_override_normalization_depth__",1+(l?.normalizeDepth??5)),(void 0!==e.attachRpcInput?e.attachRpcInput:l?.sendDefaultPii)&&(void 0!==s&&(c.input=t0(s)),void 0!==o&&"function"==typeof o))try{let e=await o();c.input=t0(e)}catch{}return eW(t=>(t.setContext("trpc",c),oO({name:`trpc/${n}`,op:"rpc.server",attributes:{[eq]:"route",[e2]:"auto.rpc.trpc"},forceTransaction:!!e.forceTransaction},async e=>{try{let t=await i();return"object"==typeof t&&null!==t&&"ok"in t&&!t.ok&&"error"in t&&t2(t.error,d3),e.end(),t}catch(t){throw t2(t,d3),e.end(),t}})))}}function d7(e,t,n){try{if(!ek())return;let r=tV();r?.isRecording()&&r.setStatus({code:2,message:"internal_error"}),t2(e,{mechanism:{type:"auto.ai.mcp_server",handled:!1,data:{error_type:t||"handler_execution",...n}}})}catch{}}function d6(e,t){A(e,t,e=>function(n,...r){let i=r[r.length-1];return"function"!=typeof i?e.call(this,n,...r):e.call(this,n,...r.slice(0,-1),function(...e){try{return d8.call(this,i,t,n,e)}catch(t){return W&&P.warn("MCP handler wrapping failed:",t),i.apply(this,e)}})})}function d8(e,t,n,r){try{let i=e.apply(this,r);if(i&&"object"==typeof i&&"function"==typeof i.then)return Promise.resolve(i).catch(e=>{throw he(e,t,n),e});return i}catch(e){throw he(e,t,n),e}}function he(e,t,n){try{let r={};"tool"===t?(r.tool_name=n,"ProtocolValidationError"===e.name||e.message.includes("validation")||e.message.includes("protocol")?d7(e,"validation",r):"ServerTimeoutError"===e.name||e.message.includes("timed out")||e.message.includes("timeout")?d7(e,"timeout",r):d7(e,"tool_execution",r)):"resource"===t?(r.resource_uri=n,d7(e,"resource_execution",r)):"prompt"===t&&(r.prompt_name=n,d7(e,"prompt_execution",r))}catch(e){}}let ht="mcp.method.name",hn="mcp.resource.uri",hr="mcp.prompt.result.description",hi="mcp.request.argument",hs="mcp.logging.message",ho="client.address",ha="client.port",hl="mcp.server",hc="auto.mcp.notification",hu=new Set([ho,ha,hs,hr,"mcp.prompt.result.message_content",hn,"mcp.tool.result.content"]);function hp(e,t){return t?e:Object.entries(e).reduce((e,[t,n])=>(hu.has(t)||t.startsWith(`${hi}.`)||(t.startsWith("mcp.tool.result.")||t.startsWith("mcp.prompt.result."))&&!t.endsWith("_count")&&!t.endsWith("_error")&&!t.endsWith(".is_error")||(e[t]=n),e),{})}function hd(e){return"object"==typeof e&&null!==e&&"jsonrpc"in e&&"2.0"===e.jsonrpc&&"method"in e&&!("id"in e)}function hh(e){return null!=e&&"object"==typeof e}let hm=new WeakMap;function hf(e){let t=hm.get(e);return t||(t=new Map,hm.set(e,t)),t}let hg=new WeakMap;function hb(e){let t={};return hh(e)&&("string"==typeof e.name&&(t.name=e.name),"string"==typeof e.title&&(t.title=e.title),"string"==typeof e.version&&(t.version=e.version)),t}function hy(e,t){let n=e&&"sessionId"in e?e.sessionId:void 0,r=t?{address:t?.requestInfo?.remoteAddress||t?.clientAddress||t?.request?.ip||t?.request?.connection?.remoteAddress,port:t?.requestInfo?.remotePort||t?.clientPort||t?.request?.connection?.remotePort}:{},{mcpTransport:i,networkTransport:s}=function(e){if(!e?.constructor)return{mcpTransport:"unknown",networkTransport:"unknown"};let t="string"==typeof e.constructor?.name?e.constructor.name:"unknown",n="unknown",r=t.toLowerCase();return r.includes("stdio")?n="pipe":(r.includes("http")||r.includes("sse"))&&(n="tcp"),{mcpTransport:t,networkTransport:n}}(e),o=function(e){let t=hg.get(e)?.clientInfo,n={};return t?.name&&(n["mcp.client.name"]=t.name),t?.title&&(n["mcp.client.title"]=t.title),t?.version&&(n["mcp.client.version"]=t.version),n}(e),a=function(e){let t=hg.get(e)?.serverInfo,n={};return t?.name&&(n["mcp.server.name"]=t.name),t?.title&&(n["mcp.server.title"]=t.title),t?.version&&(n["mcp.server.version"]=t.version),n}(e),l=hg.get(e)?.protocolVersion;return{...n&&{"mcp.session.id":n},...r.address&&{[ho]:r.address},...r.port&&{[ha]:r.port},"mcp.transport":i,"network.transport":s,"network.protocol.version":"2.0",...l&&{"mcp.protocol.version":l},...o,...a}}let h_={"tools/call":{targetField:"name",targetAttribute:"mcp.tool.name",captureArguments:!0,argumentsField:"arguments"},"resources/read":{targetField:"uri",targetAttribute:hn,captureUri:!0},"resources/subscribe":{targetField:"uri",targetAttribute:hn},"resources/unsubscribe":{targetField:"uri",targetAttribute:hn},"prompts/get":{targetField:"name",targetAttribute:"mcp.prompt.name",captureName:!0,captureArguments:!0,argumentsField:"arguments"}};function hv(e,t){let n=h_[e];if(!n)return{attributes:{}};let r=n.targetField&&"string"==typeof t?.[n.targetField]?t[n.targetField]:void 0;return{target:r,attributes:r&&n.targetAttribute?{[n.targetAttribute]:r}:{}}}function hS(e,t,n){if("request"===e){let e=hv(t.method,n||{});return{...void 0!==t.id&&{"mcp.request.id":String(t.id)},...e.attributes,...function(e,t){let n={},r=h_[e];if(!r)return n;if(r.captureArguments&&r.argumentsField&&t?.[r.argumentsField]){let e=t[r.argumentsField];if("object"==typeof e&&null!==e)for(let[t,r]of Object.entries(e))n[`${hi}.${t.toLowerCase()}`]=JSON.stringify(r)}return r.captureUri&&t?.uri&&(n[`${hi}.uri`]=JSON.stringify(t.uri)),r.captureName&&t?.name&&(n[`${hi}.name`]=JSON.stringify(t.name)),n}(t.method,n||{})}}return function(e,t){let n={};switch(e){case"notifications/cancelled":t?.requestId&&(n["mcp.cancelled.request_id"]=String(t.requestId)),t?.reason&&(n["mcp.cancelled.reason"]=String(t.reason));break;case"notifications/message":t?.level&&(n["mcp.logging.level"]=String(t.level)),t?.logger&&(n["mcp.logging.logger"]=String(t.logger)),t?.data!==void 0&&(n["mcp.logging.data_type"]=typeof t.data,"string"==typeof t.data?n[hs]=t.data:n[hs]=JSON.stringify(t.data));break;case"notifications/progress":t?.progressToken&&(n["mcp.progress.token"]=String(t.progressToken)),"number"==typeof t?.progress&&(n["mcp.progress.current"]=t.progress),"number"==typeof t?.total&&(n["mcp.progress.total"]=t.total,"number"==typeof t?.progress&&(n["mcp.progress.percentage"]=t.progress/t.total*100)),t?.message&&(n["mcp.progress.message"]=String(t.message));break;case"notifications/resources/updated":if(t?.uri){n[hn]=String(t.uri);let e=nm(String(t.uri));!e||"isRelative"in e||(n["mcp.resource.protocol"]=e.protocol.replace(":",""))}break;case"notifications/initialized":n["mcp.lifecycle.phase"]="initialization_complete",n["mcp.protocol.ready"]=1}return n}(t.method,n||{})}function hI(e,t){return t?`${e} ${t}`:e}function hZ(e){let t,n;switch(e){case"request":t=hl,n="auto.function.mcp_server";break;case"notification-incoming":t="mcp.notification.client_to_server",n=hc;break;case"notification-outgoing":t="mcp.notification.server_to_client",n=hc}return{[e1]:t,[e2]:n,[eq]:"route"}}function hR(e){let t;let{type:n,message:r,transport:i,extra:s,callback:o}=e,{method:a}=r,l=r.params;if("request"===n){let e=hv(a,l||{});t=hI(a,e.target)}else t=a;let c={...hy(i,s),[ht]:a,...hS(n,r,l),...hZ(n)},u=ek();return oE({name:t,forceTransaction:!0,attributes:hp(c,!!u?.getOptions().sendDefaultPii)},o)}let hC=new WeakSet;function hW(e){return hC.has(e)?e:(("object"==typeof e&&null!==e&&"resource"in e&&"tool"in e&&"prompt"in e&&"connect"in e||(W&&P.warn("Did not patch MCP server. Interface is incompatible."),0))&&(A(e,"connect",e=>async function(t,...n){let r=await e.call(this,t,...n);return t.onmessage&&A(t,"onmessage",e=>function(t,n){if("object"==typeof t&&null!==t&&"jsonrpc"in t&&"2.0"===t.jsonrpc&&"method"in t&&"id"in t){if("initialize"===t.method)try{let e=function(e){let t={};return hh(e.params)&&("string"==typeof e.params.protocolVersion&&(t.protocolVersion=e.params.protocolVersion),e.params.clientInfo&&(t.clientInfo=hb(e.params.clientInfo))),t}(t);this.sessionId&&hg.set(this,e)}catch{}return eW(eZ().clone(),()=>{let r=oY(function(e,t,n){let{method:r}=e,i=e.params,s=hv(r,i||{}),o=hI(r,s.target),a={...hy(t,n),[ht]:r,...hS("request",e,i),...hZ("request")},l=ek();return{name:o,op:hl,forceTransaction:!0,attributes:hp(a,!!l?.getOptions().sendDefaultPii)}}(t,this,n));return function(e,t,n,r){hf(e).set(t,{span:n,method:r,startTime:Date.now()})}(this,t.id,r,t.method),oK(r,()=>e.call(this,t,n))})}return hd(t)?hR({type:"notification-incoming",message:t,transport:this,extra:n,callback:()=>e.call(this,t,n)}):e.call(this,t,n)}),t.send&&A(t,"send",e=>async function(...t){let[n]=t;if(hd(n))return hR({type:"notification-outgoing",message:n,transport:this,callback:()=>e.call(this,...t)});if("object"==typeof n&&null!==n&&"jsonrpc"in n&&"2.0"===n.jsonrpc&&"id"in n&&("result"in n||"error"in n)&&null!==n.id&&void 0!==n.id){if(n.error&&function(e){try{if(e&&"object"==typeof e&&"code"in e&&"message"in e&&(-32603===e.code||e.code>=-32099&&e.code<=-32e3)){let t=Error(e.message);t.name=`JsonRpcError_${e.code}`,d7(t,"protocol")}}catch{}}(n.error),hh(n.result)&&(n.result.protocolVersion||n.result.serverInfo))try{let e=function(e){let t={};return hh(e)&&("string"==typeof e.protocolVersion&&(t.protocolVersion=e.protocolVersion),e.serverInfo&&(t.serverInfo=hb(e.serverInfo))),t}(n.result);!function(e,t){if(e.sessionId){let n=hg.get(e)||{};hg.set(e,{...n,...t})}}(this,e)}catch{}!function(e,t,n){let r=hf(e),i=r.get(t);if(i){let{span:e,method:s}=i;if("tools/call"===s){let t=function(e){if(!hh(e))return{};let t=Array.isArray(e.content)?function(e){let t={"mcp.tool.result.content_count":e.length};for(let[n,r]of e.entries()){if(!hh(r))continue;let i=1===e.length?"mcp.tool.result":`mcp.tool.result.${n}`,s=(e,n)=>{"string"==typeof n&&(t[`${i}.${e}`]=n)};s("content_type",r.type),s("mime_type",r.mimeType),s("uri",r.uri),s("name",r.name),"string"==typeof r.text&&(t[`${i}.content`]=r.text),"string"==typeof r.data&&(t[`${i}.data_size`]=r.data.length);let o=r.resource;hh(o)&&(s("resource_uri",o.uri),s("resource_mime_type",o.mimeType))}return t}(e.content):{};return"boolean"==typeof e.isError&&(t["mcp.tool.result.is_error"]=e.isError),t}(n),r=ek(),i=hp(t,!!r?.getOptions().sendDefaultPii);e.setAttributes(i)}else if("prompts/get"===s){let t=function(e){let t={};if(!hh(e))return t;if("string"==typeof e.description&&(t[hr]=e.description),Array.isArray(e.messages)){t["mcp.prompt.result.message_count"]=e.messages.length;let i=e.messages;for(let[e,s]of i.entries()){var n,r;if(!hh(s))continue;let o=1===i.length?"mcp.prompt.result":`mcp.prompt.result.${e}`;if(n="role","string"==typeof(r=s.role)&&(t[1===i.length?`${o}.message_${n}`:`${o}.${n}`]=r),hh(s.content)){let e=s.content;"string"==typeof e.text&&(t[1===i.length?`${o}.message_content`:`${o}.content`]=e.text)}}}return t}(n),r=ek(),i=hp(t,!!r?.getOptions().sendDefaultPii);e.setAttributes(i)}e.end(),r.delete(t)}}(this,n.id,n.result)}return e.call(this,...t)}),t.onclose&&A(t,"onclose",e=>function(...t){return function(e){let t=hm.get(e);if(t){for(let[,e]of t)e.span.setStatus({code:2,message:"cancelled"}),e.span.end();t.clear()}}(this),hg.delete(this),e.call(this,...t)}),t.onerror&&A(t,"onerror",e=>function(t){return function(e){try{d7(e,"transport")}catch{}}(t),e.call(this,t)}),r}),d6(e,"tool"),d6(e,"resource"),d6(e,"prompt"),hC.add(e)),e)}function hk(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}let hX=(e={})=>{let t=e.limit??10;return{name:"ZodErrors",processEvent:(n,r)=>(function(e,t=!1,n,r){var i;if(!n.exception?.values||!r.originalException||!(X(i=r.originalException)&&"ZodError"===i.name&&Array.isArray(i.issues))||0===r.originalException.issues.length)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(hk);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:function(e){let t=new Set;for(let n of e.issues){let e=n.path.map(e=>"number"==typeof e?"<array>":e).join(".");e.length>0&&t.add(e)}let n=Array.from(t);if(0===n.length){let t="variable";if(e.issues.length>0){let n=e.issues[0];void 0!==n&&"expected"in n&&"string"==typeof n.expected&&(t=n.expected)}return`Failed to validate ${t}`}return`Failed to validate keys: ${ec(n.join(", "),100)}`}(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(e){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:"unknown"}}}}})(t,e.saveZodIssuesAsAttachment,n,r)}},{isPromise:hN}=uR.types;function hx(e,...t){P.log(`[ANR] ${e}`,...t)}function hG(){let e=eR().getScopeData();return tA(e,eZ().getScopeData()),tA(e,eI().getScopeData()),e.attachments=[],e.eventProcessors=[],e}async function hw(e){let t={message:"ANR"},n={};for(let r of e.getEventProcessors()){if(null===t)break;t=await r(t,n)}return t?.contexts||{}}let hT=(e={})=>{let t,n;if(rx.major<16||16===rx.major&&rx.minor<17)throw Error("ANR detection requires Node 16.17.0 or later");return I.__SENTRY_GET_SCOPES__=hG,{name:"Anr",startWorker:()=>{!t&&n&&(t=hH(n,e))},stopWorker:()=>{t&&t.then(e=>{e(),t=void 0})},async setup(t){n=t,e.captureStackTrace&&await uz()&&(P.warn("ANR captureStackTrace has been disabled because the debugger was already enabled"),e.captureStackTrace=!1),setImmediate(()=>this.startWorker())}}};async function hH(e,t){let r=e.getDsn();if(!r)return()=>{};let i=await hw(e);delete i.app?.app_memory,delete i.device?.free_memory;let s=e.getOptions(),o=e.getSdkMetadata()||{};o.sdk&&(o.sdk.integrations=s.integrations.map(e=>e.name));let a={debug:P.isEnabled(),dsn:r,tunnel:s.tunnel,environment:s.environment||"production",release:s.release,dist:s.dist,sdkMetadata:o,appRootPath:t.appRootPath,pollInterval:t.pollInterval||50,anrThreshold:t.anrThreshold||5e3,captureStackTrace:!!t.captureStackTrace,maxAnrEvents:t.maxAnrEvents||1,staticTags:t.staticTags||{},contexts:i};if(a.captureStackTrace){let e=await Promise.resolve().then(n.t.bind(n,85690,19));e.url()||e.open(0)}let l=new uM.Worker(new URL("data:application/javascript;base64,LyohIEBzZW50cnkvbm9kZS1jb3JlIDEwLjI1LjAgKGQ5Y2Y5YTQpIHwgaHR0cHM6Ly9naXRodWIuY29tL2dldHNlbnRyeS9zZW50cnktamF2YXNjcmlwdCAqLwppbXBvcnR7U2Vzc2lvbiBhcyB0fWZyb20ibm9kZTppbnNwZWN0b3IiO2ltcG9ydHt3b3JrZXJEYXRhIGFzIG4scGFyZW50UG9ydCBhcyBlfWZyb20ibm9kZTp3b3JrZXJfdGhyZWFkcyI7aW1wb3J0e3Bvc2l4IGFzIHIsc2VwIGFzIG99ZnJvbSJub2RlOnBhdGgiO2ltcG9ydCphcyBpIGZyb20ibm9kZTpodHRwIjtpbXBvcnQqYXMgcyBmcm9tIm5vZGU6aHR0cHMiO2ltcG9ydHtSZWFkYWJsZSBhcyBjfWZyb20ibm9kZTpzdHJlYW0iO2ltcG9ydHtjcmVhdGVHemlwIGFzIHV9ZnJvbSJub2RlOnpsaWIiO2ltcG9ydCphcyBhIGZyb20ibm9kZTpuZXQiO2ltcG9ydCphcyBmIGZyb20ibm9kZTp0bHMiO2NvbnN0IGg9InVuZGVmaW5lZCI9PXR5cGVvZiBfX1NFTlRSWV9ERUJVR19ffHxfX1NFTlRSWV9ERUJVR19fLHA9Z2xvYmFsVGhpcyxsPSIxMC4yNS4wIjtmdW5jdGlvbiBkKCl7cmV0dXJuIG0ocCkscH1mdW5jdGlvbiBtKHQpe2NvbnN0IG49dC5fX1NFTlRSWV9fPXQuX19TRU5UUllfX3x8e307cmV0dXJuIG4udmVyc2lvbj1uLnZlcnNpb258fGwsbltsXT1uW2xdfHx7fX1mdW5jdGlvbiBnKHQsbixlPXApe2NvbnN0IHI9ZS5fX1NFTlRSWV9fPWUuX19TRU5UUllfX3x8e30sbz1yW2xdPXJbbF18fHt9O3JldHVybiBvW3RdfHwob1t0XT1uKCkpfWNvbnN0IHk9e307ZnVuY3Rpb24gYih0KXtpZighKCJjb25zb2xlImluIHApKXJldHVybiB0KCk7Y29uc3Qgbj1wLmNvbnNvbGUsZT17fSxyPU9iamVjdC5rZXlzKHkpO3IuZm9yRWFjaCh0PT57Y29uc3Qgcj15W3RdO2VbdF09blt0XSxuW3RdPXJ9KTt0cnl7cmV0dXJuIHQoKX1maW5hbGx5e3IuZm9yRWFjaCh0PT57blt0XT1lW3RdfSl9fWZ1bmN0aW9uIHYoKXtyZXR1cm4gdygpLmVuYWJsZWR9ZnVuY3Rpb24gXyh0LC4uLm4pe2gmJnYoKSYmYigoKT0+e3AuY29uc29sZVt0XShgU2VudHJ5IExvZ2dlciBbJHt0fV06YCwuLi5uKX0pfWZ1bmN0aW9uIHcoKXtyZXR1cm4gaD9nKCJsb2dnZXJTZXR0aW5ncyIsKCk9Pih7ZW5hYmxlZDohMX0pKTp7ZW5hYmxlZDohMX19Y29uc3QgUz17ZW5hYmxlOmZ1bmN0aW9uKCl7dygpLmVuYWJsZWQ9ITB9LGRpc2FibGU6ZnVuY3Rpb24oKXt3KCkuZW5hYmxlZD0hMX0saXNFbmFibGVkOnYsbG9nOmZ1bmN0aW9uKC4uLnQpe18oImxvZyIsLi4udCl9LHdhcm46ZnVuY3Rpb24oLi4udCl7Xygid2FybiIsLi4udCl9LGVycm9yOmZ1bmN0aW9uKC4uLnQpe18oImVycm9yIiwuLi50KX19LCQ9L2NhcHR1cmVNZXNzYWdlfGNhcHR1cmVFeGNlcHRpb24vO2Z1bmN0aW9uIEUodCl7cmV0dXJuIHRbdC5sZW5ndGgtMV18fHt9fWNvbnN0IHg9Ijxhbm9ueW1vdXM+Ijtjb25zdCBOPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZnVuY3Rpb24gQyh0LG4pe3JldHVybiBOLmNhbGwodCk9PT1gW29iamVjdCAke259XWB9ZnVuY3Rpb24gaih0KXtyZXR1cm4gQyh0LCJTdHJpbmciKX1mdW5jdGlvbiBrKHQpe3JldHVybiBDKHQsIk9iamVjdCIpfWZ1bmN0aW9uIFQodCl7cmV0dXJuIEJvb2xlYW4odD8udGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIHQudGhlbil9ZnVuY3Rpb24gQSh0LG4pe3RyeXtyZXR1cm4gdCBpbnN0YW5jZW9mIG59Y2F0Y2h7cmV0dXJuITF9fWNvbnN0IEk9cDtmdW5jdGlvbiBPKHQsbil7Y29uc3QgZT10LHI9W107aWYoIWU/LnRhZ05hbWUpcmV0dXJuIiI7aWYoSS5IVE1MRWxlbWVudCYmZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZlLmRhdGFzZXQpe2lmKGUuZGF0YXNldC5zZW50cnlDb21wb25lbnQpcmV0dXJuIGUuZGF0YXNldC5zZW50cnlDb21wb25lbnQ7aWYoZS5kYXRhc2V0LnNlbnRyeUVsZW1lbnQpcmV0dXJuIGUuZGF0YXNldC5zZW50cnlFbGVtZW50fXIucHVzaChlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSk7Y29uc3Qgbz1uPy5sZW5ndGg/bi5maWx0ZXIodD0+ZS5nZXRBdHRyaWJ1dGUodCkpLm1hcCh0PT5bdCxlLmdldEF0dHJpYnV0ZSh0KV0pOm51bGw7aWYobz8ubGVuZ3RoKW8uZm9yRWFjaCh0PT57ci5wdXNoKGBbJHt0WzBdfT0iJHt0WzFdfSJdYCl9KTtlbHNle2UuaWQmJnIucHVzaChgIyR7ZS5pZH1gKTtjb25zdCB0PWUuY2xhc3NOYW1lO2lmKHQmJmoodCkpe2NvbnN0IG49dC5zcGxpdCgvXHMrLyk7Zm9yKGNvbnN0IHQgb2YgbilyLnB1c2goYC4ke3R9YCl9fWNvbnN0IGk9WyJhcmlhLWxhYmVsIiwidHlwZSIsIm5hbWUiLCJ0aXRsZSIsImFsdCJdO2Zvcihjb25zdCB0IG9mIGkpe2NvbnN0IG49ZS5nZXRBdHRyaWJ1dGUodCk7biYmci5wdXNoKGBbJHt0fT0iJHtufSJdYCl9cmV0dXJuIHIuam9pbigiIil9ZnVuY3Rpb24gUih0KXtpZihmdW5jdGlvbih0KXtzd2l0Y2goTi5jYWxsKHQpKXtjYXNlIltvYmplY3QgRXJyb3JdIjpjYXNlIltvYmplY3QgRXhjZXB0aW9uXSI6Y2FzZSJbb2JqZWN0IERPTUV4Y2VwdGlvbl0iOmNhc2UiW29iamVjdCBXZWJBc3NlbWJseS5FeGNlcHRpb25dIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiBBKHQsRXJyb3IpfX0odCkpcmV0dXJue21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2ssLi4uRCh0KX07aWYobj10LCJ1bmRlZmluZWQiIT10eXBlb2YgRXZlbnQmJkEobixFdmVudCkpe2NvbnN0IG49e3R5cGU6dC50eXBlLHRhcmdldDpQKHQudGFyZ2V0KSxjdXJyZW50VGFyZ2V0OlAodC5jdXJyZW50VGFyZ2V0KSwuLi5EKHQpfTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEN1c3RvbUV2ZW50JiZBKHQsQ3VzdG9tRXZlbnQpJiYobi5kZXRhaWw9dC5kZXRhaWwpLG59cmV0dXJuIHQ7dmFyIG59ZnVuY3Rpb24gUCh0KXt0cnl7cmV0dXJuIG49dCwidW5kZWZpbmVkIiE9dHlwZW9mIEVsZW1lbnQmJkEobixFbGVtZW50KT9mdW5jdGlvbih0LG49e30pe2lmKCF0KXJldHVybiI8dW5rbm93bj4iO3RyeXtsZXQgZT10O2NvbnN0IHI9NSxvPVtdO2xldCBpPTAscz0wO2NvbnN0IGM9IiA+ICIsdT1jLmxlbmd0aDtsZXQgYTtjb25zdCBmPUFycmF5LmlzQXJyYXkobik/bjpuLmtleUF0dHJzLGg9IUFycmF5LmlzQXJyYXkobikmJm4ubWF4U3RyaW5nTGVuZ3RofHw4MDtmb3IoO2UmJmkrKzxyJiYoYT1PKGUsZiksISgiaHRtbCI9PT1hfHxpPjEmJnMrby5sZW5ndGgqdSthLmxlbmd0aD49aCkpOylvLnB1c2goYSkscys9YS5sZW5ndGgsZT1lLnBhcmVudE5vZGU7cmV0dXJuIG8ucmV2ZXJzZSgpLmpvaW4oYyl9Y2F0Y2h7cmV0dXJuIjx1bmtub3duPiJ9fSh0KTpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9Y2F0Y2h7cmV0dXJuIjx1bmtub3duPiJ9dmFyIG59ZnVuY3Rpb24gRCh0KXtpZigib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPT10KXtjb25zdCBuPXt9O2Zvcihjb25zdCBlIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSkmJihuW2VdPXRbZV0pO3JldHVybiBufXJldHVybnt9fWZ1bmN0aW9uIE0odCxuPTApe3JldHVybiJzdHJpbmciIT10eXBlb2YgdHx8MD09PW58fHQubGVuZ3RoPD1uP3Q6YCR7dC5zbGljZSgwLG4pfS4uLmB9bGV0IFU7ZnVuY3Rpb24gTCh0PWZ1bmN0aW9uKCl7Y29uc3QgdD1wO3JldHVybiB0LmNyeXB0b3x8dC5tc0NyeXB0b30oKSl7dHJ5e2lmKHQ/LnJhbmRvbVVVSUQpcmV0dXJuIHQucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywiIil9Y2F0Y2h7fXJldHVybiBVfHwoVT1bMWU3XSsxZTMrNGUzKzhlMysxZTExKSxVLnJlcGxhY2UoL1swMThdL2csdD0+KHReKDE2Kk1hdGgucmFuZG9tKCkmMTUpPj50LzQpLnRvU3RyaW5nKDE2KSl9ZnVuY3Rpb24gQigpe3JldHVybiBEYXRlLm5vdygpLzFlM31sZXQgRztmdW5jdGlvbiBIKCl7cmV0dXJuKEc/PyhHPWZ1bmN0aW9uKCl7Y29uc3R7cGVyZm9ybWFuY2U6dH09cDtpZighdD8ubm93fHwhdC50aW1lT3JpZ2luKXJldHVybiBCO2NvbnN0IG49dC50aW1lT3JpZ2luO3JldHVybigpPT4obit0Lm5vdygpKS8xZTN9KCkpKSgpfWZ1bmN0aW9uIEoodCl7Y29uc3Qgbj1IKCksZT17c2lkOkwoKSxpbml0OiEwLHRpbWVzdGFtcDpuLHN0YXJ0ZWQ6bixkdXJhdGlvbjowLHN0YXR1czoib2siLGVycm9yczowLGlnbm9yZUR1cmF0aW9uOiExLHRvSlNPTjooKT0+ZnVuY3Rpb24odCl7cmV0dXJue3NpZDpgJHt0LnNpZH1gLGluaXQ6dC5pbml0LHN0YXJ0ZWQ6bmV3IERhdGUoMWUzKnQuc3RhcnRlZCkudG9JU09TdHJpbmcoKSx0aW1lc3RhbXA6bmV3IERhdGUoMWUzKnQudGltZXN0YW1wKS50b0lTT1N0cmluZygpLHN0YXR1czp0LnN0YXR1cyxlcnJvcnM6dC5lcnJvcnMsZGlkOiJudW1iZXIiPT10eXBlb2YgdC5kaWR8fCJzdHJpbmciPT10eXBlb2YgdC5kaWQ/YCR7dC5kaWR9YDp2b2lkIDAsZHVyYXRpb246dC5kdXJhdGlvbixhYm5vcm1hbF9tZWNoYW5pc206dC5hYm5vcm1hbF9tZWNoYW5pc20sYXR0cnM6e3JlbGVhc2U6dC5yZWxlYXNlLGVudmlyb25tZW50OnQuZW52aXJvbm1lbnQsaXBfYWRkcmVzczp0LmlwQWRkcmVzcyx1c2VyX2FnZW50OnQudXNlckFnZW50fX19KGUpfTtyZXR1cm4gdCYmeihlLHQpLGV9ZnVuY3Rpb24geih0LG49e30pe2lmKG4udXNlciYmKCF0LmlwQWRkcmVzcyYmbi51c2VyLmlwX2FkZHJlc3MmJih0LmlwQWRkcmVzcz1uLnVzZXIuaXBfYWRkcmVzcyksdC5kaWR8fG4uZGlkfHwodC5kaWQ9bi51c2VyLmlkfHxuLnVzZXIuZW1haWx8fG4udXNlci51c2VybmFtZSkpLHQudGltZXN0YW1wPW4udGltZXN0YW1wfHxIKCksbi5hYm5vcm1hbF9tZWNoYW5pc20mJih0LmFibm9ybWFsX21lY2hhbmlzbT1uLmFibm9ybWFsX21lY2hhbmlzbSksbi5pZ25vcmVEdXJhdGlvbiYmKHQuaWdub3JlRHVyYXRpb249bi5pZ25vcmVEdXJhdGlvbiksbi5zaWQmJih0LnNpZD0zMj09PW4uc2lkLmxlbmd0aD9uLnNpZDpMKCkpLHZvaWQgMCE9PW4uaW5pdCYmKHQuaW5pdD1uLmluaXQpLCF0LmRpZCYmbi5kaWQmJih0LmRpZD1gJHtuLmRpZH1gKSwibnVtYmVyIj09dHlwZW9mIG4uc3RhcnRlZCYmKHQuc3RhcnRlZD1uLnN0YXJ0ZWQpLHQuaWdub3JlRHVyYXRpb24pdC5kdXJhdGlvbj12b2lkIDA7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIG4uZHVyYXRpb24pdC5kdXJhdGlvbj1uLmR1cmF0aW9uO2Vsc2V7Y29uc3Qgbj10LnRpbWVzdGFtcC10LnN0YXJ0ZWQ7dC5kdXJhdGlvbj1uPj0wP246MH1uLnJlbGVhc2UmJih0LnJlbGVhc2U9bi5yZWxlYXNlKSxuLmVudmlyb25tZW50JiYodC5lbnZpcm9ubWVudD1uLmVudmlyb25tZW50KSwhdC5pcEFkZHJlc3MmJm4uaXBBZGRyZXNzJiYodC5pcEFkZHJlc3M9bi5pcEFkZHJlc3MpLCF0LnVzZXJBZ2VudCYmbi51c2VyQWdlbnQmJih0LnVzZXJBZ2VudD1uLnVzZXJBZ2VudCksIm51bWJlciI9PXR5cGVvZiBuLmVycm9ycyYmKHQuZXJyb3JzPW4uZXJyb3JzKSxuLnN0YXR1cyYmKHQuc3RhdHVzPW4uc3RhdHVzKX1mdW5jdGlvbiBGKHQsbixlPTIpe2lmKCFufHwib2JqZWN0IiE9dHlwZW9mIG58fGU8PTApcmV0dXJuIG47aWYodCYmMD09PU9iamVjdC5rZXlzKG4pLmxlbmd0aClyZXR1cm4gdDtjb25zdCByPXsuLi50fTtmb3IoY29uc3QgdCBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLHQpJiYoclt0XT1GKHJbdF0sblt0XSxlLTEpKTtyZXR1cm4gcn1mdW5jdGlvbiBXKCl7cmV0dXJuIEwoKX1mdW5jdGlvbiBZKCl7cmV0dXJuIEwoKS5zdWJzdHJpbmcoMTYpfWNvbnN0IEs9Il9zZW50cnlTcGFuIjtmdW5jdGlvbiBaKHQsbil7bj9mdW5jdGlvbih0LG4sZSl7dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se3ZhbHVlOmUsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9Y2F0Y2h7aCYmUy5sb2coYEZhaWxlZCB0byBhZGQgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgIiR7bn0iIHRvIG9iamVjdGAsdCl9fSh0LEssbik6ZGVsZXRlIHRbS119ZnVuY3Rpb24gVih0KXtyZXR1cm4gdFtLXX1jbGFzcyBxe2NvbnN0cnVjdG9yKCl7dGhpcy50PSExLHRoaXMubz1bXSx0aGlzLmk9W10sdGhpcy51PVtdLHRoaXMuaD1bXSx0aGlzLnA9e30sdGhpcy5sPXt9LHRoaXMubT17fSx0aGlzLnY9e30sdGhpcy5fPXt9LHRoaXMuUz17dHJhY2VJZDpXKCksc2FtcGxlUmFuZDpNYXRoLnJhbmRvbSgpfX1jbG9uZSgpe2NvbnN0IHQ9bmV3IHE7cmV0dXJuIHQudT1bLi4udGhpcy51XSx0Lmw9ey4uLnRoaXMubH0sdC5tPXsuLi50aGlzLm19LHQudj17Li4udGhpcy52fSx0aGlzLnYuZmxhZ3MmJih0LnYuZmxhZ3M9e3ZhbHVlczpbLi4udGhpcy52LmZsYWdzLnZhbHVlc119KSx0LnA9dGhpcy5wLHQuTj10aGlzLk4sdC5DPXRoaXMuQyx0Lmo9dGhpcy5qLHQuaz10aGlzLmssdC5pPVsuLi50aGlzLmldLHQuaD1bLi4udGhpcy5oXSx0Ll89ey4uLnRoaXMuX30sdC5TPXsuLi50aGlzLlN9LHQuVD10aGlzLlQsdC5BPXRoaXMuQSxaKHQsVih0aGlzKSksdH1zZXRDbGllbnQodCl7dGhpcy5UPXR9c2V0TGFzdEV2ZW50SWQodCl7dGhpcy5BPXR9Z2V0Q2xpZW50KCl7cmV0dXJuIHRoaXMuVH1sYXN0RXZlbnRJZCgpe3JldHVybiB0aGlzLkF9YWRkU2NvcGVMaXN0ZW5lcih0KXt0aGlzLm8ucHVzaCh0KX1hZGRFdmVudFByb2Nlc3Nvcih0KXtyZXR1cm4gdGhpcy5pLnB1c2godCksdGhpc31zZXRVc2VyKHQpe3JldHVybiB0aGlzLnA9dHx8e2VtYWlsOnZvaWQgMCxpZDp2b2lkIDAsaXBfYWRkcmVzczp2b2lkIDAsdXNlcm5hbWU6dm9pZCAwfSx0aGlzLkMmJnoodGhpcy5DLHt1c2VyOnR9KSx0aGlzLkkoKSx0aGlzfWdldFVzZXIoKXtyZXR1cm4gdGhpcy5wfXNldFRhZ3ModCl7cmV0dXJuIHRoaXMubD17Li4udGhpcy5sLC4uLnR9LHRoaXMuSSgpLHRoaXN9c2V0VGFnKHQsbil7cmV0dXJuIHRoaXMubD17Li4udGhpcy5sLFt0XTpufSx0aGlzLkkoKSx0aGlzfXNldEV4dHJhcyh0KXtyZXR1cm4gdGhpcy5tPXsuLi50aGlzLm0sLi4udH0sdGhpcy5JKCksdGhpc31zZXRFeHRyYSh0LG4pe3JldHVybiB0aGlzLm09ey4uLnRoaXMubSxbdF06bn0sdGhpcy5JKCksdGhpc31zZXRGaW5nZXJwcmludCh0KXtyZXR1cm4gdGhpcy5rPXQsdGhpcy5JKCksdGhpc31zZXRMZXZlbCh0KXtyZXR1cm4gdGhpcy5OPXQsdGhpcy5JKCksdGhpc31zZXRUcmFuc2FjdGlvbk5hbWUodCl7cmV0dXJuIHRoaXMuaj10LHRoaXMuSSgpLHRoaXN9c2V0Q29udGV4dCh0LG4pe3JldHVybiBudWxsPT09bj9kZWxldGUgdGhpcy52W3RdOnRoaXMudlt0XT1uLHRoaXMuSSgpLHRoaXN9c2V0U2Vzc2lvbih0KXtyZXR1cm4gdD90aGlzLkM9dDpkZWxldGUgdGhpcy5DLHRoaXMuSSgpLHRoaXN9Z2V0U2Vzc2lvbigpe3JldHVybiB0aGlzLkN9dXBkYXRlKHQpe2lmKCF0KXJldHVybiB0aGlzO2NvbnN0IG49ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dCh0aGlzKTp0LGU9biBpbnN0YW5jZW9mIHE/bi5nZXRTY29wZURhdGEoKTprKG4pP3Q6dm9pZCAwLHt0YWdzOnIsZXh0cmE6byx1c2VyOmksY29udGV4dHM6cyxsZXZlbDpjLGZpbmdlcnByaW50OnU9W10scHJvcGFnYXRpb25Db250ZXh0OmF9PWV8fHt9O3JldHVybiB0aGlzLmw9ey4uLnRoaXMubCwuLi5yfSx0aGlzLm09ey4uLnRoaXMubSwuLi5vfSx0aGlzLnY9ey4uLnRoaXMudiwuLi5zfSxpJiZPYmplY3Qua2V5cyhpKS5sZW5ndGgmJih0aGlzLnA9aSksYyYmKHRoaXMuTj1jKSx1Lmxlbmd0aCYmKHRoaXMuaz11KSxhJiYodGhpcy5TPWEpLHRoaXN9Y2xlYXIoKXtyZXR1cm4gdGhpcy51PVtdLHRoaXMubD17fSx0aGlzLm09e30sdGhpcy5wPXt9LHRoaXMudj17fSx0aGlzLk49dm9pZCAwLHRoaXMuaj12b2lkIDAsdGhpcy5rPXZvaWQgMCx0aGlzLkM9dm9pZCAwLFoodGhpcyx2b2lkIDApLHRoaXMuaD1bXSx0aGlzLnNldFByb3BhZ2F0aW9uQ29udGV4dCh7dHJhY2VJZDpXKCksc2FtcGxlUmFuZDpNYXRoLnJhbmRvbSgpfSksdGhpcy5JKCksdGhpc31hZGRCcmVhZGNydW1iKHQsbil7Y29uc3QgZT0ibnVtYmVyIj09dHlwZW9mIG4/bjoxMDA7aWYoZTw9MClyZXR1cm4gdGhpcztjb25zdCByPXt0aW1lc3RhbXA6QigpLC4uLnQsbWVzc2FnZTp0Lm1lc3NhZ2U/TSh0Lm1lc3NhZ2UsMjA0OCk6dC5tZXNzYWdlfTtyZXR1cm4gdGhpcy51LnB1c2gociksdGhpcy51Lmxlbmd0aD5lJiYodGhpcy51PXRoaXMudS5zbGljZSgtZSksdGhpcy5UPy5yZWNvcmREcm9wcGVkRXZlbnQoImJ1ZmZlcl9vdmVyZmxvdyIsImxvZ19pdGVtIikpLHRoaXMuSSgpLHRoaXN9Z2V0TGFzdEJyZWFkY3J1bWIoKXtyZXR1cm4gdGhpcy51W3RoaXMudS5sZW5ndGgtMV19Y2xlYXJCcmVhZGNydW1icygpe3JldHVybiB0aGlzLnU9W10sdGhpcy5JKCksdGhpc31hZGRBdHRhY2htZW50KHQpe3JldHVybiB0aGlzLmgucHVzaCh0KSx0aGlzfWNsZWFyQXR0YWNobWVudHMoKXtyZXR1cm4gdGhpcy5oPVtdLHRoaXN9Z2V0U2NvcGVEYXRhKCl7cmV0dXJue2JyZWFkY3J1bWJzOnRoaXMudSxhdHRhY2htZW50czp0aGlzLmgsY29udGV4dHM6dGhpcy52LHRhZ3M6dGhpcy5sLGV4dHJhOnRoaXMubSx1c2VyOnRoaXMucCxsZXZlbDp0aGlzLk4sZmluZ2VycHJpbnQ6dGhpcy5rfHxbXSxldmVudFByb2Nlc3NvcnM6dGhpcy5pLHByb3BhZ2F0aW9uQ29udGV4dDp0aGlzLlMsc2RrUHJvY2Vzc2luZ01ldGFkYXRhOnRoaXMuXyx0cmFuc2FjdGlvbk5hbWU6dGhpcy5qLHNwYW46Vih0aGlzKX19c2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKHQpe3JldHVybiB0aGlzLl89Rih0aGlzLl8sdCwyKSx0aGlzfXNldFByb3BhZ2F0aW9uQ29udGV4dCh0KXtyZXR1cm4gdGhpcy5TPXQsdGhpc31nZXRQcm9wYWdhdGlvbkNvbnRleHQoKXtyZXR1cm4gdGhpcy5TfWNhcHR1cmVFeGNlcHRpb24odCxuKXtjb25zdCBlPW4/LmV2ZW50X2lkfHxMKCk7aWYoIXRoaXMuVClyZXR1cm4gaCYmUy53YXJuKCJObyBjbGllbnQgY29uZmlndXJlZCBvbiBzY29wZSAtIHdpbGwgbm90IGNhcHR1cmUgZXhjZXB0aW9uISIpLGU7Y29uc3Qgcj1uZXcgRXJyb3IoIlNlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24iKTtyZXR1cm4gdGhpcy5ULmNhcHR1cmVFeGNlcHRpb24odCx7b3JpZ2luYWxFeGNlcHRpb246dCxzeW50aGV0aWNFeGNlcHRpb246ciwuLi5uLGV2ZW50X2lkOmV9LHRoaXMpLGV9Y2FwdHVyZU1lc3NhZ2UodCxuLGUpe2NvbnN0IHI9ZT8uZXZlbnRfaWR8fEwoKTtpZighdGhpcy5UKXJldHVybiBoJiZTLndhcm4oIk5vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBtZXNzYWdlISIpLHI7Y29uc3Qgbz1uZXcgRXJyb3IodCk7cmV0dXJuIHRoaXMuVC5jYXB0dXJlTWVzc2FnZSh0LG4se29yaWdpbmFsRXhjZXB0aW9uOnQsc3ludGhldGljRXhjZXB0aW9uOm8sLi4uZSxldmVudF9pZDpyfSx0aGlzKSxyfWNhcHR1cmVFdmVudCh0LG4pe2NvbnN0IGU9bj8uZXZlbnRfaWR8fEwoKTtyZXR1cm4gdGhpcy5UPyh0aGlzLlQuY2FwdHVyZUV2ZW50KHQsey4uLm4sZXZlbnRfaWQ6ZX0sdGhpcyksZSk6KGgmJlMud2FybigiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50ISIpLGUpfUkoKXt0aGlzLnR8fCh0aGlzLnQ9ITAsdGhpcy5vLmZvckVhY2godD0+e3QodGhpcyl9KSx0aGlzLnQ9ITEpfX1jbGFzcyBRe2NvbnN0cnVjdG9yKHQsbil7bGV0IGUscjtlPXR8fG5ldyBxLHI9bnx8bmV3IHEsdGhpcy5PPVt7c2NvcGU6ZX1dLHRoaXMuUj1yfXdpdGhTY29wZSh0KXtjb25zdCBuPXRoaXMuUCgpO2xldCBlO3RyeXtlPXQobil9Y2F0Y2godCl7dGhyb3cgdGhpcy5EKCksdH1yZXR1cm4gVChlKT9lLnRoZW4odD0+KHRoaXMuRCgpLHQpLHQ9Pnt0aHJvdyB0aGlzLkQoKSx0fSk6KHRoaXMuRCgpLGUpfWdldENsaWVudCgpe3JldHVybiB0aGlzLmdldFN0YWNrVG9wKCkuY2xpZW50fWdldFNjb3BlKCl7cmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5zY29wZX1nZXRJc29sYXRpb25TY29wZSgpe3JldHVybiB0aGlzLlJ9Z2V0U3RhY2tUb3AoKXtyZXR1cm4gdGhpcy5PW3RoaXMuTy5sZW5ndGgtMV19UCgpe2NvbnN0IHQ9dGhpcy5nZXRTY29wZSgpLmNsb25lKCk7cmV0dXJuIHRoaXMuTy5wdXNoKHtjbGllbnQ6dGhpcy5nZXRDbGllbnQoKSxzY29wZTp0fSksdH1EKCl7cmV0dXJuISh0aGlzLk8ubGVuZ3RoPD0xKSYmISF0aGlzLk8ucG9wKCl9fWZ1bmN0aW9uIFgoKXtjb25zdCB0PW0oZCgpKTtyZXR1cm4gdC5zdGFjaz10LnN0YWNrfHxuZXcgUShnKCJkZWZhdWx0Q3VycmVudFNjb3BlIiwoKT0+bmV3IHEpLGcoImRlZmF1bHRJc29sYXRpb25TY29wZSIsKCk9Pm5ldyBxKSl9ZnVuY3Rpb24gdHQodCl7cmV0dXJuIFgoKS53aXRoU2NvcGUodCl9ZnVuY3Rpb24gbnQodCxuKXtjb25zdCBlPVgoKTtyZXR1cm4gZS53aXRoU2NvcGUoKCk9PihlLmdldFN0YWNrVG9wKCkuc2NvcGU9dCxuKHQpKSl9ZnVuY3Rpb24gZXQodCl7cmV0dXJuIFgoKS53aXRoU2NvcGUoKCk9PnQoWCgpLmdldElzb2xhdGlvblNjb3BlKCkpKX1mdW5jdGlvbiBydCh0KXtjb25zdCBuPW0odCk7cmV0dXJuIG4uYWNzP24uYWNzOnt3aXRoSXNvbGF0aW9uU2NvcGU6ZXQsd2l0aFNjb3BlOnR0LHdpdGhTZXRTY29wZTpudCx3aXRoU2V0SXNvbGF0aW9uU2NvcGU6KHQsbik9PmV0KG4pLGdldEN1cnJlbnRTY29wZTooKT0+WCgpLmdldFNjb3BlKCksZ2V0SXNvbGF0aW9uU2NvcGU6KCk9PlgoKS5nZXRJc29sYXRpb25TY29wZSgpfX1mdW5jdGlvbiBvdCgpe3JldHVybiBydChkKCkpLmdldEN1cnJlbnRTY29wZSgpLmdldENsaWVudCgpfWZ1bmN0aW9uIGl0KHQpe2lmKHQpe2lmKCJvYmplY3QiPT10eXBlb2YgdCYmImRlcmVmImluIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmRlcmVmKXRyeXtyZXR1cm4gdC5kZXJlZigpfWNhdGNoe3JldHVybn1yZXR1cm4gdH19ZnVuY3Rpb24gc3QodCl7Y29uc3Qgbj10O3JldHVybntzY29wZTpuLl9zZW50cnlTY29wZSxpc29sYXRpb25TY29wZTppdChuLl9zZW50cnlJc29sYXRpb25TY29wZSl9fWNvbnN0IGN0PS9ec2VudHJ5LS87ZnVuY3Rpb24gdXQodCl7Y29uc3Qgbj1mdW5jdGlvbih0KXtpZighdHx8IWoodCkmJiFBcnJheS5pc0FycmF5KHQpKXJldHVybjtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0LnJlZHVjZSgodCxuKT0+e2NvbnN0IGU9YXQobik7cmV0dXJuIE9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKFtuLGVdKT0+e3Rbbl09ZX0pLHR9LHt9KTtyZXR1cm4gYXQodCl9KHQpO2lmKCFuKXJldHVybjtjb25zdCBlPU9iamVjdC5lbnRyaWVzKG4pLnJlZHVjZSgodCxbbixlXSk9PntpZihuLm1hdGNoKGN0KSl7dFtuLnNsaWNlKDcpXT1lfXJldHVybiB0fSx7fSk7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmxlbmd0aD4wP2U6dm9pZCAwfWZ1bmN0aW9uIGF0KHQpe3JldHVybiB0LnNwbGl0KCIsIikubWFwKHQ9Pntjb25zdCBuPXQuaW5kZXhPZigiPSIpO2lmKC0xPT09bilyZXR1cm5bXTtyZXR1cm5bdC5zbGljZSgwLG4pLHQuc2xpY2UobisxKV0ubWFwKHQ9Pnt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh0LnRyaW0oKSl9Y2F0Y2h7cmV0dXJufX0pfSkucmVkdWNlKCh0LFtuLGVdKT0+KG4mJmUmJih0W25dPWUpLHQpLHt9KX1jb25zdCBmdD0vXm8oXGQrKVwuLztmdW5jdGlvbiBodCh0LG49ITEpe2NvbnN0e2hvc3Q6ZSxwYXRoOnIscGFzczpvLHBvcnQ6aSxwcm9qZWN0SWQ6cyxwcm90b2NvbDpjLHB1YmxpY0tleTp1fT10O3JldHVybmAke2N9Oi8vJHt1fSR7biYmbz9gOiR7b31gOiIifUAke2V9JHtpP2A6JHtpfWA6IiJ9LyR7cj9gJHtyfS9gOnJ9JHtzfWB9ZnVuY3Rpb24gcHQodCl7Y29uc3Qgbj10LmdldE9wdGlvbnMoKSx7aG9zdDplfT10LmdldERzbigpfHx7fTtsZXQgcjtyZXR1cm4gbi5vcmdJZD9yPVN0cmluZyhuLm9yZ0lkKTplJiYocj1mdW5jdGlvbih0KXtjb25zdCBuPXQubWF0Y2goZnQpO3JldHVybiBuPy5bMV19KGUpKSxyfWZ1bmN0aW9uIGx0KHQpe2NvbnN0e3NwYW5JZDpuLHRyYWNlSWQ6ZSxpc1JlbW90ZTpyfT10LnNwYW5Db250ZXh0KCksbz1yP246eXQodCkucGFyZW50X3NwYW5faWQsaT1zdCh0KS5zY29wZTtyZXR1cm57cGFyZW50X3NwYW5faWQ6byxzcGFuX2lkOnI/aT8uZ2V0UHJvcGFnYXRpb25Db250ZXh0KCkucHJvcGFnYXRpb25TcGFuSWR8fFkoKTpuLHRyYWNlX2lkOmV9fWZ1bmN0aW9uIGR0KHQpe3JldHVybiB0JiZ0Lmxlbmd0aD4wP3QubWFwKCh7Y29udGV4dDp7c3BhbklkOnQsdHJhY2VJZDpuLHRyYWNlRmxhZ3M6ZSwuLi5yfSxhdHRyaWJ1dGVzOm99KT0+KHtzcGFuX2lkOnQsdHJhY2VfaWQ6bixzYW1wbGVkOjE9PT1lLGF0dHJpYnV0ZXM6bywuLi5yfSkpOnZvaWQgMH1mdW5jdGlvbiBtdCh0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/Z3QodCk6QXJyYXkuaXNBcnJheSh0KT90WzBdK3RbMV0vMWU5OnQgaW5zdGFuY2VvZiBEYXRlP2d0KHQuZ2V0VGltZSgpKTpIKCl9ZnVuY3Rpb24gZ3QodCl7cmV0dXJuIHQ+OTk5OTk5OTk5OT90LzFlMzp0fWZ1bmN0aW9uIHl0KHQpe2lmKGZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0LmdldFNwYW5KU09OfSh0KSlyZXR1cm4gdC5nZXRTcGFuSlNPTigpO2NvbnN0e3NwYW5JZDpuLHRyYWNlSWQ6ZX09dC5zcGFuQ29udGV4dCgpO2lmKGZ1bmN0aW9uKHQpe2NvbnN0IG49dDtyZXR1cm4hIShuLmF0dHJpYnV0ZXMmJm4uc3RhcnRUaW1lJiZuLm5hbWUmJm4uZW5kVGltZSYmbi5zdGF0dXMpfSh0KSl7Y29uc3R7YXR0cmlidXRlczpyLHN0YXJ0VGltZTpvLG5hbWU6aSxlbmRUaW1lOnMsc3RhdHVzOmMsbGlua3M6dX09dDtyZXR1cm57c3Bhbl9pZDpuLHRyYWNlX2lkOmUsZGF0YTpyLGRlc2NyaXB0aW9uOmkscGFyZW50X3NwYW5faWQ6InBhcmVudFNwYW5JZCJpbiB0P3QucGFyZW50U3BhbklkOiJwYXJlbnRTcGFuQ29udGV4dCJpbiB0P3QucGFyZW50U3BhbkNvbnRleHQ/LnNwYW5JZDp2b2lkIDAsc3RhcnRfdGltZXN0YW1wOm10KG8pLHRpbWVzdGFtcDptdChzKXx8dm9pZCAwLHN0YXR1czpidChjKSxvcDpyWyJzZW50cnkub3AiXSxvcmlnaW46clsic2VudHJ5Lm9yaWdpbiJdLGxpbmtzOmR0KHUpfX1yZXR1cm57c3Bhbl9pZDpuLHRyYWNlX2lkOmUsc3RhcnRfdGltZXN0YW1wOjAsZGF0YTp7fX19ZnVuY3Rpb24gYnQodCl7aWYodCYmMCE9PXQuY29kZSlyZXR1cm4gMT09PXQuY29kZT8ib2siOnQubWVzc2FnZXx8ImludGVybmFsX2Vycm9yIn1mdW5jdGlvbiB2dCh0KXtyZXR1cm4gdC5fc2VudHJ5Um9vdFNwYW58fHR9ZnVuY3Rpb24gX3QodCl7Y29uc3Qgbj1vdCgpO2lmKCFuKXJldHVybnt9O2NvbnN0IGU9dnQodCkscj15dChlKSxvPXIuZGF0YSxpPWUuc3BhbkNvbnRleHQoKS50cmFjZVN0YXRlLHM9aT8uZ2V0KCJzZW50cnkuc2FtcGxlX3JhdGUiKT8/b1sic2VudHJ5LnNhbXBsZV9yYXRlIl0/P29bInNlbnRyeS5wcmV2aW91c190cmFjZV9zYW1wbGVfcmF0ZSJdO2Z1bmN0aW9uIGModCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBzJiYic3RyaW5nIiE9dHlwZW9mIHN8fCh0LnNhbXBsZV9yYXRlPWAke3N9YCksdH1jb25zdCB1PWUuX2Zyb3plbkRzYztpZih1KXJldHVybiBjKHUpO2NvbnN0IGE9aT8uZ2V0KCJzZW50cnkuZHNjIiksZj1hJiZ1dChhKTtpZihmKXJldHVybiBjKGYpO2NvbnN0IGg9ZnVuY3Rpb24odCxuKXtjb25zdCBlPW4uZ2V0T3B0aW9ucygpLHtwdWJsaWNLZXk6cn09bi5nZXREc24oKXx8e30sbz17ZW52aXJvbm1lbnQ6ZS5lbnZpcm9ubWVudHx8InByb2R1Y3Rpb24iLHJlbGVhc2U6ZS5yZWxlYXNlLHB1YmxpY19rZXk6cix0cmFjZV9pZDp0LG9yZ19pZDpwdChuKX07cmV0dXJuIG4uZW1pdCgiY3JlYXRlRHNjIixvKSxvfSh0LnNwYW5Db250ZXh0KCkudHJhY2VJZCxuKSxwPW9bInNlbnRyeS5zb3VyY2UiXSxsPXIuZGVzY3JpcHRpb247cmV0dXJuInVybCIhPT1wJiZsJiYoaC50cmFuc2FjdGlvbj1sKSxmdW5jdGlvbigpe2lmKCJib29sZWFuIj09dHlwZW9mIF9fU0VOVFJZX1RSQUNJTkdfXyYmIV9fU0VOVFJZX1RSQUNJTkdfXylyZXR1cm4hMTtjb25zdCB0PW90KCk/LmdldE9wdGlvbnMoKTtyZXR1cm4hKCF0fHxudWxsPT10LnRyYWNlc1NhbXBsZVJhdGUmJiF0LnRyYWNlc1NhbXBsZXIpfSgpJiYoaC5zYW1wbGVkPVN0cmluZyhmdW5jdGlvbih0KXtjb25zdHt0cmFjZUZsYWdzOm59PXQuc3BhbkNvbnRleHQoKTtyZXR1cm4gMT09PW59KGUpKSxoLnNhbXBsZV9yYW5kPWk/LmdldCgic2VudHJ5LnNhbXBsZV9yYW5kIik/P3N0KGUpLnNjb3BlPy5nZXRQcm9wYWdhdGlvbkNvbnRleHQoKS5zYW1wbGVSYW5kLnRvU3RyaW5nKCkpLGMoaCksbi5lbWl0KCJjcmVhdGVEc2MiLGgsZSksaH1mdW5jdGlvbiB3dCh0LG49MTAwLGU9MS8wKXt0cnl7cmV0dXJuIFN0KCIiLHQsbixlKX1jYXRjaCh0KXtyZXR1cm57RVJST1I6YCoqbm9uLXNlcmlhbGl6YWJsZSoqICgke3R9KWB9fX1mdW5jdGlvbiBTdCh0LG4sZT0xLzAscj0xLzAsbz1mdW5jdGlvbigpe2NvbnN0IHQ9bmV3IFdlYWtTZXQ7ZnVuY3Rpb24gbihuKXtyZXR1cm4hIXQuaGFzKG4pfHwodC5hZGQobiksITEpfWZ1bmN0aW9uIGUobil7dC5kZWxldGUobil9cmV0dXJuW24sZV19KCkpe2NvbnN0W2ksc109bztpZihudWxsPT1ufHxbImJvb2xlYW4iLCJzdHJpbmciXS5pbmNsdWRlcyh0eXBlb2Ygbil8fCJudW1iZXIiPT10eXBlb2YgbiYmTnVtYmVyLmlzRmluaXRlKG4pKXJldHVybiBuO2NvbnN0IGM9ZnVuY3Rpb24odCxuKXt0cnl7aWYoImRvbWFpbiI9PT10JiZuJiYib2JqZWN0Ij09dHlwZW9mIG4mJm4uTSlyZXR1cm4iW0RvbWFpbl0iO2lmKCJkb21haW5FbWl0dGVyIj09PXQpcmV0dXJuIltEb21haW5FbWl0dGVyXSI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJm49PT1nbG9iYWwpcmV0dXJuIltHbG9iYWxdIjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmbj09PXdpbmRvdylyZXR1cm4iW1dpbmRvd10iO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJm49PT1kb2N1bWVudClyZXR1cm4iW0RvY3VtZW50XSI7aWYoIm9iamVjdCI9PXR5cGVvZihlPW4pJiZudWxsIT09ZSYmKGUuX19pc1Z1ZXx8ZS5VKSlyZXR1cm4iW1Z1ZVZpZXdNb2RlbF0iO2lmKGZ1bmN0aW9uKHQpe3JldHVybiBrKHQpJiYibmF0aXZlRXZlbnQiaW4gdCYmInByZXZlbnREZWZhdWx0ImluIHQmJiJzdG9wUHJvcGFnYXRpb24iaW4gdH0obikpcmV0dXJuIltTeW50aGV0aWNFdmVudF0iO2lmKCJudW1iZXIiPT10eXBlb2YgbiYmIU51bWJlci5pc0Zpbml0ZShuKSlyZXR1cm5gWyR7bn1dYDtpZigiZnVuY3Rpb24iPT10eXBlb2YgbilyZXR1cm5gW0Z1bmN0aW9uOiAke2Z1bmN0aW9uKHQpe3RyeXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQubmFtZXx8eH1jYXRjaHtyZXR1cm4geH19KG4pfV1gO2lmKCJzeW1ib2wiPT10eXBlb2YgbilyZXR1cm5gWyR7U3RyaW5nKG4pfV1gO2lmKCJiaWdpbnQiPT10eXBlb2YgbilyZXR1cm5gW0JpZ0ludDogJHtTdHJpbmcobil9XWA7Y29uc3Qgcj1mdW5jdGlvbih0KXtjb25zdCBuPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4gbj8uY29uc3RydWN0b3I/bi5jb25zdHJ1Y3Rvci5uYW1lOiJudWxsIHByb3RvdHlwZSJ9KG4pO3JldHVybi9eSFRNTChcdyopRWxlbWVudCQvLnRlc3Qocik/YFtIVE1MRWxlbWVudDogJHtyfV1gOmBbb2JqZWN0ICR7cn1dYH1jYXRjaCh0KXtyZXR1cm5gKipub24tc2VyaWFsaXphYmxlKiogKCR7dH0pYH12YXIgZX0odCxuKTtpZighYy5zdGFydHNXaXRoKCJbb2JqZWN0ICIpKXJldHVybiBjO2lmKG4uX19zZW50cnlfc2tpcF9ub3JtYWxpemF0aW9uX18pcmV0dXJuIG47Y29uc3QgdT0ibnVtYmVyIj09dHlwZW9mIG4uX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fP24uX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fOmU7aWYoMD09PXUpcmV0dXJuIGMucmVwbGFjZSgib2JqZWN0ICIsIiIpO2lmKGkobikpcmV0dXJuIltDaXJjdWxhciB+XSI7Y29uc3QgYT1uO2lmKGEmJiJmdW5jdGlvbiI9PXR5cGVvZiBhLnRvSlNPTil0cnl7cmV0dXJuIFN0KCIiLGEudG9KU09OKCksdS0xLHIsbyl9Y2F0Y2h7fWNvbnN0IGY9QXJyYXkuaXNBcnJheShuKT9bXTp7fTtsZXQgaD0wO2NvbnN0IHA9UihuKTtmb3IoY29uc3QgdCBpbiBwKXtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHAsdCkpY29udGludWU7aWYoaD49cil7Zlt0XT0iW01heFByb3BlcnRpZXMgfl0iO2JyZWFrfWNvbnN0IG49cFt0XTtmW3RdPVN0KHQsbix1LTEscixvKSxoKyt9cmV0dXJuIHMobiksZn1mdW5jdGlvbiAkdCh0LG4pe2NvbnN0IGU9bi5yZXBsYWNlKC9cXC9nLCIvIikucmVwbGFjZSgvW3xcXHt9KClbXF1eJCsqPy5dL2csIlxcJCYiKTtsZXQgcj10O3RyeXtyPWRlY29kZVVSSSh0KX1jYXRjaHt9cmV0dXJuIHIucmVwbGFjZSgvXFwvZywiLyIpLnJlcGxhY2UoL3dlYnBhY2s6XC8/L2csIiIpLnJlcGxhY2UobmV3IFJlZ0V4cChgKGZpbGU6Ly8pPy8qJHtlfS8qYCwiaWciKSwiYXBwOi8vLyIpfWZ1bmN0aW9uIEV0KHQsbj1bXSl7cmV0dXJuW3Qsbl19ZnVuY3Rpb24geHQodCxuKXtjb25zdCBlPXRbMV07Zm9yKGNvbnN0IHQgb2YgZSl7aWYobih0LHRbMF0udHlwZSkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gTnQodCl7Y29uc3Qgbj1tKHApO3JldHVybiBuLmVuY29kZVBvbHlmaWxsP24uZW5jb2RlUG9seWZpbGwodCk6KG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpfWZ1bmN0aW9uIEN0KHQpe2NvbnN0W24sZV09dDtsZXQgcj1KU09OLnN0cmluZ2lmeShuKTtmdW5jdGlvbiBvKHQpeyJzdHJpbmciPT10eXBlb2Ygcj9yPSJzdHJpbmciPT10eXBlb2YgdD9yK3Q6W050KHIpLHRdOnIucHVzaCgic3RyaW5nIj09dHlwZW9mIHQ/TnQodCk6dCl9Zm9yKGNvbnN0IHQgb2YgZSl7Y29uc3RbbixlXT10O2lmKG8oYFxuJHtKU09OLnN0cmluZ2lmeShuKX1cbmApLCJzdHJpbmciPT10eXBlb2YgZXx8ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpbyhlKTtlbHNle2xldCB0O3RyeXt0PUpTT04uc3RyaW5naWZ5KGUpfWNhdGNoe3Q9SlNPTi5zdHJpbmdpZnkod3QoZSkpfW8odCl9fXJldHVybiJzdHJpbmciPT10eXBlb2Ygcj9yOmZ1bmN0aW9uKHQpe2NvbnN0IG49dC5yZWR1Y2UoKHQsbik9PnQrbi5sZW5ndGgsMCksZT1uZXcgVWludDhBcnJheShuKTtsZXQgcj0wO2Zvcihjb25zdCBuIG9mIHQpZS5zZXQobixyKSxyKz1uLmxlbmd0aDtyZXR1cm4gZX0ocil9Y29uc3QganQ9e3Nlc3Npb246InNlc3Npb24iLHNlc3Npb25zOiJzZXNzaW9uIixhdHRhY2htZW50OiJhdHRhY2htZW50Iix0cmFuc2FjdGlvbjoidHJhbnNhY3Rpb24iLGV2ZW50OiJlcnJvciIsY2xpZW50X3JlcG9ydDoiaW50ZXJuYWwiLHVzZXJfcmVwb3J0OiJkZWZhdWx0Iixwcm9maWxlOiJwcm9maWxlIixwcm9maWxlX2NodW5rOiJwcm9maWxlIixyZXBsYXlfZXZlbnQ6InJlcGxheSIscmVwbGF5X3JlY29yZGluZzoicmVwbGF5IixjaGVja19pbjoibW9uaXRvciIsZmVlZGJhY2s6ImZlZWRiYWNrIixzcGFuOiJzcGFuIixyYXdfc2VjdXJpdHk6InNlY3VyaXR5Iixsb2c6ImxvZ19pdGVtIixtZXRyaWM6Im1ldHJpYyIsdHJhY2VfbWV0cmljOiJtZXRyaWMifTtmdW5jdGlvbiBrdCh0KXtpZighdD8uc2RrKXJldHVybjtjb25zdHtuYW1lOm4sdmVyc2lvbjplfT10LnNkaztyZXR1cm57bmFtZTpuLHZlcnNpb246ZX19ZnVuY3Rpb24gVHQodCxuLGUscil7Y29uc3Qgbz1rdChlKSxpPXQudHlwZSYmInJlcGxheV9ldmVudCIhPT10LnR5cGU/dC50eXBlOiJldmVudCI7IWZ1bmN0aW9uKHQsbil7aWYoIW4pcmV0dXJuIHQ7Y29uc3QgZT10LnNka3x8e307dC5zZGs9ey4uLmUsbmFtZTplLm5hbWV8fG4ubmFtZSx2ZXJzaW9uOmUudmVyc2lvbnx8bi52ZXJzaW9uLGludGVncmF0aW9uczpbLi4udC5zZGs/LmludGVncmF0aW9uc3x8W10sLi4ubi5pbnRlZ3JhdGlvbnN8fFtdXSxwYWNrYWdlczpbLi4udC5zZGs/LnBhY2thZ2VzfHxbXSwuLi5uLnBhY2thZ2VzfHxbXV0sc2V0dGluZ3M6dC5zZGs/LnNldHRpbmdzfHxuLnNldHRpbmdzP3suLi50LnNkaz8uc2V0dGluZ3MsLi4ubi5zZXR0aW5nc306dm9pZCAwfX0odCxlPy5zZGspO2NvbnN0IHM9ZnVuY3Rpb24odCxuLGUscil7Y29uc3Qgbz10LnNka1Byb2Nlc3NpbmdNZXRhZGF0YT8uZHluYW1pY1NhbXBsaW5nQ29udGV4dDtyZXR1cm57ZXZlbnRfaWQ6dC5ldmVudF9pZCxzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi5uJiZ7c2RrOm59LC4uLiEhZSYmciYme2RzbjpodChyKX0sLi4ubyYme3RyYWNlOm99fX0odCxvLHIsbik7ZGVsZXRlIHQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhO3JldHVybiBFdChzLFtbe3R5cGU6aX0sdF1dKX1jb25zdCBBdD0iX19TRU5UUllfU1VQUFJFU1NfVFJBQ0lOR19fIjtmdW5jdGlvbiBJdCh0KXtjb25zdCBuPXJ0KGQoKSk7cmV0dXJuIG4uc3VwcHJlc3NUcmFjaW5nP24uc3VwcHJlc3NUcmFjaW5nKHQpOmZ1bmN0aW9uKC4uLnQpe2NvbnN0IG49cnQoZCgpKTtpZigyPT09dC5sZW5ndGgpe2NvbnN0W2Uscl09dDtyZXR1cm4gZT9uLndpdGhTZXRTY29wZShlLHIpOm4ud2l0aFNjb3BlKHIpfXJldHVybiBuLndpdGhTY29wZSh0WzBdKX0obj0+e24uc2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKHtbQXRdOiEwfSk7Y29uc3QgZT10KCk7cmV0dXJuIG4uc2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKHtbQXRdOnZvaWQgMH0pLGV9KX1jbGFzcyBPdHtjb25zdHJ1Y3Rvcih0KXt0aGlzLkw9MCx0aGlzLkI9W10sdGhpcy5HKHQpfXRoZW4odCxuKXtyZXR1cm4gbmV3IE90KChlLHIpPT57dGhpcy5CLnB1c2goWyExLG49PntpZih0KXRyeXtlKHQobikpfWNhdGNoKHQpe3IodCl9ZWxzZSBlKG4pfSx0PT57aWYobil0cnl7ZShuKHQpKX1jYXRjaCh0KXtyKHQpfWVsc2Ugcih0KX1dKSx0aGlzLkgoKX0pfWNhdGNoKHQpe3JldHVybiB0aGlzLnRoZW4odD0+dCx0KX1maW5hbGx5KHQpe3JldHVybiBuZXcgT3QoKG4sZSk9PntsZXQgcixvO3JldHVybiB0aGlzLnRoZW4obj0+e289ITEscj1uLHQmJnQoKX0sbj0+e289ITAscj1uLHQmJnQoKX0pLnRoZW4oKCk9PntvP2Uocik6bihyKX0pfSl9SCgpe2lmKDA9PT10aGlzLkwpcmV0dXJuO2NvbnN0IHQ9dGhpcy5CLnNsaWNlKCk7dGhpcy5CPVtdLHQuZm9yRWFjaCh0PT57dFswXXx8KDE9PT10aGlzLkwmJnRbMV0odGhpcy5KKSwyPT09dGhpcy5MJiZ0WzJdKHRoaXMuSiksdFswXT0hMCl9KX1HKHQpe2NvbnN0IG49KHQsbik9PnswPT09dGhpcy5MJiYoVChuKT9uLnRoZW4oZSxyKToodGhpcy5MPXQsdGhpcy5KPW4sdGhpcy5IKCkpKX0sZT10PT57bigxLHQpfSxyPXQ9PntuKDIsdCl9O3RyeXt0KGUscil9Y2F0Y2godCl7cih0KX19fWZ1bmN0aW9uIFJ0KHQsbil7Y29uc3R7ZmluZ2VycHJpbnQ6ZSxzcGFuOnIsYnJlYWRjcnVtYnM6byxzZGtQcm9jZXNzaW5nTWV0YWRhdGE6aX09bjshZnVuY3Rpb24odCxuKXtjb25zdHtleHRyYTplLHRhZ3M6cix1c2VyOm8sY29udGV4dHM6aSxsZXZlbDpzLHRyYW5zYWN0aW9uTmFtZTpjfT1uO09iamVjdC5rZXlzKGUpLmxlbmd0aCYmKHQuZXh0cmE9ey4uLmUsLi4udC5leHRyYX0pO09iamVjdC5rZXlzKHIpLmxlbmd0aCYmKHQudGFncz17Li4uciwuLi50LnRhZ3N9KTtPYmplY3Qua2V5cyhvKS5sZW5ndGgmJih0LnVzZXI9ey4uLm8sLi4udC51c2VyfSk7T2JqZWN0LmtleXMoaSkubGVuZ3RoJiYodC5jb250ZXh0cz17Li4uaSwuLi50LmNvbnRleHRzfSk7cyYmKHQubGV2ZWw9cyk7YyYmInRyYW5zYWN0aW9uIiE9PXQudHlwZSYmKHQudHJhbnNhY3Rpb249Yyl9KHQsbiksciYmZnVuY3Rpb24odCxuKXt0LmNvbnRleHRzPXt0cmFjZTpsdChuKSwuLi50LmNvbnRleHRzfSx0LnNka1Byb2Nlc3NpbmdNZXRhZGF0YT17ZHluYW1pY1NhbXBsaW5nQ29udGV4dDpfdChuKSwuLi50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YX07Y29uc3QgZT12dChuKSxyPXl0KGUpLmRlc2NyaXB0aW9uO3ImJiF0LnRyYW5zYWN0aW9uJiYidHJhbnNhY3Rpb24iPT09dC50eXBlJiYodC50cmFuc2FjdGlvbj1yKX0odCxyKSxmdW5jdGlvbih0LG4pe3QuZmluZ2VycHJpbnQ9dC5maW5nZXJwcmludD9BcnJheS5pc0FycmF5KHQuZmluZ2VycHJpbnQpP3QuZmluZ2VycHJpbnQ6W3QuZmluZ2VycHJpbnRdOltdLG4mJih0LmZpbmdlcnByaW50PXQuZmluZ2VycHJpbnQuY29uY2F0KG4pKTt0LmZpbmdlcnByaW50Lmxlbmd0aHx8ZGVsZXRlIHQuZmluZ2VycHJpbnR9KHQsZSksZnVuY3Rpb24odCxuKXtjb25zdCBlPVsuLi50LmJyZWFkY3J1bWJzfHxbXSwuLi5uXTt0LmJyZWFkY3J1bWJzPWUubGVuZ3RoP2U6dm9pZCAwfSh0LG8pLGZ1bmN0aW9uKHQsbil7dC5zZGtQcm9jZXNzaW5nTWV0YWRhdGE9ey4uLnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLC4uLm59fSh0LGkpfWNvbnN0IFB0PVN5bWJvbC5mb3IoIlNlbnRyeUJ1ZmZlckZ1bGxFcnJvciIpO2Z1bmN0aW9uIER0KHQ9MTAwKXtjb25zdCBuPW5ldyBTZXQ7ZnVuY3Rpb24gZSh0KXtuLmRlbGV0ZSh0KX1yZXR1cm57Z2V0ICQoKXtyZXR1cm4gQXJyYXkuZnJvbShuKX0sYWRkOmZ1bmN0aW9uKHIpe2lmKCEobi5zaXplPHQpKXJldHVybiBvPVB0LG5ldyBPdCgodCxuKT0+e24obyl9KTt2YXIgbztjb25zdCBpPXIoKTtyZXR1cm4gbi5hZGQoaSksaS50aGVuKCgpPT5lKGkpLCgpPT5lKGkpKSxpfSxkcmFpbjpmdW5jdGlvbih0KXtpZighbi5zaXplKXJldHVybiBlPSEwLG5ldyBPdCh0PT57dChlKX0pO3ZhciBlO2NvbnN0IHI9UHJvbWlzZS5hbGxTZXR0bGVkKEFycmF5LmZyb20obikpLnRoZW4oKCk9PiEwKTtpZighdClyZXR1cm4gcjtjb25zdCBvPVtyLG5ldyBQcm9taXNlKG49PnNldFRpbWVvdXQoKCk9Pm4oITEpLHQpKV07cmV0dXJuIFByb21pc2UucmFjZShvKX19fWZ1bmN0aW9uIE10KHQse3N0YXR1c0NvZGU6bixoZWFkZXJzOmV9LHI9RGF0ZS5ub3coKSl7Y29uc3Qgbz17Li4udH0saT1lPy5bIngtc2VudHJ5LXJhdGUtbGltaXRzIl0scz1lPy5bInJldHJ5LWFmdGVyIl07aWYoaSlmb3IoY29uc3QgdCBvZiBpLnRyaW0oKS5zcGxpdCgiLCIpKXtjb25zdFtuLGUsLCxpXT10LnNwbGl0KCI6Iiw1KSxzPXBhcnNlSW50KG4sMTApLGM9MWUzKihpc05hTihzKT82MDpzKTtpZihlKWZvcihjb25zdCB0IG9mIGUuc3BsaXQoIjsiKSkibWV0cmljX2J1Y2tldCI9PT10JiZpJiYhaS5zcGxpdCgiOyIpLmluY2x1ZGVzKCJjdXN0b20iKXx8KG9bdF09citjKTtlbHNlIG8uYWxsPXIrY31lbHNlIHM/by5hbGw9citmdW5jdGlvbih0LG49RGF0ZS5ub3coKSl7Y29uc3QgZT1wYXJzZUludChgJHt0fWAsMTApO2lmKCFpc05hTihlKSlyZXR1cm4gMWUzKmU7Y29uc3Qgcj1EYXRlLnBhcnNlKGAke3R9YCk7cmV0dXJuIGlzTmFOKHIpPzZlNDpyLW59KHMscik6NDI5PT09biYmKG8uYWxsPXIrNmU0KTtyZXR1cm4gb31mdW5jdGlvbiBVdCh0LG4sZT1EdCh0LmJ1ZmZlclNpemV8fDY0KSl7bGV0IHI9e307cmV0dXJue3NlbmQ6ZnVuY3Rpb24odCl7Y29uc3Qgbz1bXTtpZih4dCh0LCh0LG4pPT57Y29uc3QgZT1mdW5jdGlvbih0KXtyZXR1cm4ganRbdF19KG4pOyhmdW5jdGlvbih0LG4sZT1EYXRlLm5vdygpKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4gdFtuXXx8dC5hbGx8fDB9KHQsbik+ZX0pKHIsZSl8fG8ucHVzaCh0KX0pLDA9PT1vLmxlbmd0aClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtjb25zdCBpPUV0KHRbMF0sbykscz10PT57eHQoaSwodCxuKT0+e30pfTtyZXR1cm4gZS5hZGQoKCk9Pm4oe2JvZHk6Q3QoaSl9KS50aGVuKHQ9Pih2b2lkIDAhPT10LnN0YXR1c0NvZGUmJih0LnN0YXR1c0NvZGU8MjAwfHx0LnN0YXR1c0NvZGU+PTMwMCkmJmgmJlMud2FybihgU2VudHJ5IHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBjb2RlICR7dC5zdGF0dXNDb2RlfSB0byBzZW50IGV2ZW50LmApLHI9TXQocix0KSx0KSx0PT57dGhyb3cgcygpLGgmJlMuZXJyb3IoIkVuY291bnRlcmVkIGVycm9yIHJ1bm5pbmcgdHJhbnNwb3J0IHJlcXVlc3Q6Iix0KSx0fSkpLnRoZW4odD0+dCx0PT57aWYodD09PVB0KXJldHVybiBoJiZTLmVycm9yKCJTa2lwcGVkIHNlbmRpbmcgZXZlbnQgYmVjYXVzZSBidWZmZXIgaXMgZnVsbC4iKSxzKCksUHJvbWlzZS5yZXNvbHZlKHt9KTt0aHJvdyB0fSl9LGZsdXNoOnQ9PmUuZHJhaW4odCl9fWNvbnN0IEx0PS9eKFxTKzpcXHxcLz8pKFtcc1xTXSo/KSgoPzpcLnsxLDJ9fFteL1xcXSs/fCkoXC5bXi4vXFxdKnwpKSg/OlsvXFxdKikkLztmdW5jdGlvbiBCdCh0KXtjb25zdCBuPWZ1bmN0aW9uKHQpe2NvbnN0IG49dC5sZW5ndGg+MTAyND9gPHRydW5jYXRlZD4ke3Quc2xpY2UoLTEwMjQpfWA6dCxlPUx0LmV4ZWMobik7cmV0dXJuIGU/ZS5zbGljZSgxKTpbXX0odCksZT1uWzBdfHwiIjtsZXQgcj1uWzFdO3JldHVybiBlfHxyPyhyJiYocj1yLnNsaWNlKDAsci5sZW5ndGgtMSkpLGUrcik6Ii4ifWZ1bmN0aW9uIEd0KHQsbj0hMSl7cmV0dXJuIShufHx0JiYhdC5zdGFydHNXaXRoKCIvIikmJiF0Lm1hdGNoKC9eW0EtWl06LykmJiF0LnN0YXJ0c1dpdGgoIi4iKSYmIXQubWF0Y2goL15bYS16QS1aXShbYS16QS1aMC05LlwtK10pKjpcL1wvLykpJiZ2b2lkIDAhPT10JiYhdC5pbmNsdWRlcygibm9kZV9tb2R1bGVzLyIpfWNvbnN0IEh0PVN5bWJvbCgiQWdlbnRCYXNlSW50ZXJuYWxTdGF0ZSIpO2NsYXNzIEp0IGV4dGVuZHMgaS5BZ2VudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzW0h0XT17fX1pc1NlY3VyZUVuZHBvaW50KHQpe2lmKHQpe2lmKCJib29sZWFuIj09dHlwZW9mIHQuc2VjdXJlRW5kcG9pbnQpcmV0dXJuIHQuc2VjdXJlRW5kcG9pbnQ7aWYoInN0cmluZyI9PXR5cGVvZiB0LnByb3RvY29sKXJldHVybiJodHRwczoiPT09dC5wcm90b2NvbH1jb25zdHtzdGFjazpufT1uZXcgRXJyb3I7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBuJiZuLnNwbGl0KCJcbiIpLnNvbWUodD0+LTEhPT10LmluZGV4T2YoIihodHRwcy5qczoiKXx8LTEhPT10LmluZGV4T2YoIm5vZGU6aHR0cHM6IikpfWNyZWF0ZVNvY2tldCh0LG4sZSl7Y29uc3Qgcj17Li4ubixzZWN1cmVFbmRwb2ludDp0aGlzLmlzU2VjdXJlRW5kcG9pbnQobil9O1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PnRoaXMuY29ubmVjdCh0LHIpKS50aGVuKG89PntpZihvIGluc3RhbmNlb2YgaS5BZ2VudClyZXR1cm4gby5hZGRSZXF1ZXN0KHQscik7dGhpc1tIdF0uY3VycmVudFNvY2tldD1vLHN1cGVyLmNyZWF0ZVNvY2tldCh0LG4sZSl9LGUpfWNyZWF0ZUNvbm5lY3Rpb24oKXtjb25zdCB0PXRoaXNbSHRdLmN1cnJlbnRTb2NrZXQ7aWYodGhpc1tIdF0uY3VycmVudFNvY2tldD12b2lkIDAsIXQpdGhyb3cgbmV3IEVycm9yKCJObyBzb2NrZXQgd2FzIHJldHVybmVkIGluIHRoZSBgY29ubmVjdCgpYCBmdW5jdGlvbiIpO3JldHVybiB0fWdldCBkZWZhdWx0UG9ydCgpe3JldHVybiB0aGlzW0h0XS5kZWZhdWx0UG9ydD8/KCJodHRwczoiPT09dGhpcy5wcm90b2NvbD80NDM6ODApfXNldCBkZWZhdWx0UG9ydCh0KXt0aGlzW0h0XSYmKHRoaXNbSHRdLmRlZmF1bHRQb3J0PXQpfWdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzW0h0XS5wcm90b2NvbD8/KHRoaXMuaXNTZWN1cmVFbmRwb2ludCgpPyJodHRwczoiOiJodHRwOiIpfXNldCBwcm90b2NvbCh0KXt0aGlzW0h0XSYmKHRoaXNbSHRdLnByb3RvY29sPXQpfX1mdW5jdGlvbiB6dCguLi50KXtTLmxvZygiW2h0dHBzLXByb3h5LWFnZW50OnBhcnNlLXByb3h5LXJlc3BvbnNlXSIsLi4udCl9ZnVuY3Rpb24gRnQodCl7cmV0dXJuIG5ldyBQcm9taXNlKChuLGUpPT57bGV0IHI9MDtjb25zdCBvPVtdO2Z1bmN0aW9uIGkoKXtjb25zdCBjPXQucmVhZCgpO2M/ZnVuY3Rpb24oYyl7by5wdXNoKGMpLHIrPWMubGVuZ3RoO2NvbnN0IHU9QnVmZmVyLmNvbmNhdChvLHIpLGE9dS5pbmRleE9mKCJcclxuXHJcbiIpO2lmKC0xPT09YSlyZXR1cm4genQoImhhdmUgbm90IHJlY2VpdmVkIGVuZCBvZiBIVFRQIGhlYWRlcnMgeWV0Li4uIiksdm9pZCBpKCk7Y29uc3QgZj11LnN1YmFycmF5KDAsYSkudG9TdHJpbmcoImFzY2lpIikuc3BsaXQoIlxyXG4iKSxoPWYuc2hpZnQoKTtpZighaClyZXR1cm4gdC5kZXN0cm95KCksZShuZXcgRXJyb3IoIk5vIGhlYWRlciByZWNlaXZlZCBmcm9tIHByb3h5IENPTk5FQ1QgcmVzcG9uc2UiKSk7Y29uc3QgcD1oLnNwbGl0KCIgIiksbD0rKHBbMV18fDApLGQ9cC5zbGljZSgyKS5qb2luKCIgIiksbT17fTtmb3IoY29uc3QgbiBvZiBmKXtpZighbiljb250aW51ZTtjb25zdCByPW4uaW5kZXhPZigiOiIpO2lmKC0xPT09cilyZXR1cm4gdC5kZXN0cm95KCksZShuZXcgRXJyb3IoYEludmFsaWQgaGVhZGVyIGZyb20gcHJveHkgQ09OTkVDVCByZXNwb25zZTogIiR7bn0iYCkpO2NvbnN0IG89bi5zbGljZSgwLHIpLnRvTG93ZXJDYXNlKCksaT1uLnNsaWNlKHIrMSkudHJpbVN0YXJ0KCkscz1tW29dOyJzdHJpbmciPT10eXBlb2Ygcz9tW29dPVtzLGldOkFycmF5LmlzQXJyYXkocyk/cy5wdXNoKGkpOm1bb109aX16dCgiZ290IHByb3h5IHNlcnZlciByZXNwb25zZTogJW8gJW8iLGgsbSkscygpLG4oe2Nvbm5lY3Q6e3N0YXR1c0NvZGU6bCxzdGF0dXNUZXh0OmQsaGVhZGVyczptfSxidWZmZXJlZDp1fSl9KGMpOnQub25jZSgicmVhZGFibGUiLGkpfWZ1bmN0aW9uIHMoKXt0LnJlbW92ZUxpc3RlbmVyKCJlbmQiLGMpLHQucmVtb3ZlTGlzdGVuZXIoImVycm9yIix1KSx0LnJlbW92ZUxpc3RlbmVyKCJyZWFkYWJsZSIsaSl9ZnVuY3Rpb24gYygpe3MoKSx6dCgib25lbmQiKSxlKG5ldyBFcnJvcigiUHJveHkgY29ubmVjdGlvbiBlbmRlZCBiZWZvcmUgcmVjZWl2aW5nIENPTk5FQ1QgcmVzcG9uc2UiKSl9ZnVuY3Rpb24gdSh0KXtzKCksenQoIm9uZXJyb3IgJW8iLHQpLGUodCl9dC5vbigiZXJyb3IiLHUpLHQub24oImVuZCIsYyksaSgpfSl9ZnVuY3Rpb24gV3QoLi4udCl7Uy5sb2coIltodHRwcy1wcm94eS1hZ2VudF0iLC4uLnQpfWNsYXNzIFl0IGV4dGVuZHMgSnR7c3RhdGljIF9faW5pdFN0YXRpYygpe3RoaXMucHJvdG9jb2xzPVsiaHR0cCIsImh0dHBzIl19Y29uc3RydWN0b3IodCxuKXtzdXBlcihuKSx0aGlzLm9wdGlvbnM9e30sdGhpcy5wcm94eT0ic3RyaW5nIj09dHlwZW9mIHQ/bmV3IFVSTCh0KTp0LHRoaXMucHJveHlIZWFkZXJzPW4/LmhlYWRlcnM/P3t9LFd0KCJDcmVhdGluZyBuZXcgSHR0cHNQcm94eUFnZW50IGluc3RhbmNlOiAlbyIsdGhpcy5wcm94eS5ocmVmKTtjb25zdCBlPSh0aGlzLnByb3h5Lmhvc3RuYW1lfHx0aGlzLnByb3h5Lmhvc3QpLnJlcGxhY2UoL15cW3xcXSQvZywiIikscj10aGlzLnByb3h5LnBvcnQ/cGFyc2VJbnQodGhpcy5wcm94eS5wb3J0LDEwKToiaHR0cHM6Ij09PXRoaXMucHJveHkucHJvdG9jb2w/NDQzOjgwO3RoaXMuY29ubmVjdE9wdHM9e0FMUE5Qcm90b2NvbHM6WyJodHRwLzEuMSJdLC4uLm4/WnQobiwiaGVhZGVycyIpOm51bGwsaG9zdDplLHBvcnQ6cn19YXN5bmMgY29ubmVjdCh0LG4pe2NvbnN0e3Byb3h5OmV9PXRoaXM7aWYoIW4uaG9zdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdObyAiaG9zdCIgcHJvdmlkZWQnKTtsZXQgcjtpZigiaHR0cHM6Ij09PWUucHJvdG9jb2wpe1d0KCJDcmVhdGluZyBgdGxzLlNvY2tldGA6ICVvIix0aGlzLmNvbm5lY3RPcHRzKTtjb25zdCB0PXRoaXMuY29ubmVjdE9wdHMuc2VydmVybmFtZXx8dGhpcy5jb25uZWN0T3B0cy5ob3N0O3I9Zi5jb25uZWN0KHsuLi50aGlzLmNvbm5lY3RPcHRzLHNlcnZlcm5hbWU6dCYmYS5pc0lQKHQpP3ZvaWQgMDp0fSl9ZWxzZSBXdCgiQ3JlYXRpbmcgYG5ldC5Tb2NrZXRgOiAlbyIsdGhpcy5jb25uZWN0T3B0cykscj1hLmNvbm5lY3QodGhpcy5jb25uZWN0T3B0cyk7Y29uc3Qgbz0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5wcm94eUhlYWRlcnM/dGhpcy5wcm94eUhlYWRlcnMoKTp7Li4udGhpcy5wcm94eUhlYWRlcnN9LGk9YS5pc0lQdjYobi5ob3N0KT9gWyR7bi5ob3N0fV1gOm4uaG9zdDtsZXQgcz1gQ09OTkVDVCAke2l9OiR7bi5wb3J0fSBIVFRQLzEuMVxyXG5gO2lmKGUudXNlcm5hbWV8fGUucGFzc3dvcmQpe2NvbnN0IHQ9YCR7ZGVjb2RlVVJJQ29tcG9uZW50KGUudXNlcm5hbWUpfToke2RlY29kZVVSSUNvbXBvbmVudChlLnBhc3N3b3JkKX1gO29bIlByb3h5LUF1dGhvcml6YXRpb24iXT1gQmFzaWMgJHtCdWZmZXIuZnJvbSh0KS50b1N0cmluZygiYmFzZTY0Iil9YH1vLkhvc3Q9YCR7aX06JHtuLnBvcnR9YCxvWyJQcm94eS1Db25uZWN0aW9uIl18fChvWyJQcm94eS1Db25uZWN0aW9uIl09dGhpcy5rZWVwQWxpdmU/IktlZXAtQWxpdmUiOiJjbG9zZSIpO2Zvcihjb25zdCB0IG9mIE9iamVjdC5rZXlzKG8pKXMrPWAke3R9OiAke29bdF19XHJcbmA7Y29uc3QgYz1GdChyKTtyLndyaXRlKGAke3N9XHJcbmApO2NvbnN0e2Nvbm5lY3Q6dSxidWZmZXJlZDpofT1hd2FpdCBjO2lmKHQuZW1pdCgicHJveHlDb25uZWN0Iix1KSx0aGlzLmVtaXQoInByb3h5Q29ubmVjdCIsdSx0KSwyMDA9PT11LnN0YXR1c0NvZGUpe2lmKHQub25jZSgic29ja2V0IixLdCksbi5zZWN1cmVFbmRwb2ludCl7V3QoIlVwZ3JhZGluZyBzb2NrZXQgY29ubmVjdGlvbiB0byBUTFMiKTtjb25zdCB0PW4uc2VydmVybmFtZXx8bi5ob3N0O3JldHVybiBmLmNvbm5lY3Qoey4uLlp0KG4sImhvc3QiLCJwYXRoIiwicG9ydCIpLHNvY2tldDpyLHNlcnZlcm5hbWU6YS5pc0lQKHQpP3ZvaWQgMDp0fSl9cmV0dXJuIHJ9ci5kZXN0cm95KCk7Y29uc3QgcD1uZXcgYS5Tb2NrZXQoe3dyaXRhYmxlOiExfSk7cmV0dXJuIHAucmVhZGFibGU9ITAsdC5vbmNlKCJzb2NrZXQiLHQ9PntXdCgiUmVwbGF5aW5nIHByb3h5IGJ1ZmZlciBmb3IgZmFpbGVkIHJlcXVlc3QiKSx0LnB1c2goaCksdC5wdXNoKG51bGwpfSkscH19ZnVuY3Rpb24gS3QodCl7dC5yZXN1bWUoKX1mdW5jdGlvbiBadCh0LC4uLm4pe2NvbnN0IGU9e307bGV0IHI7Zm9yKHIgaW4gdCluLmluY2x1ZGVzKHIpfHwoZVtyXT10W3JdKTtyZXR1cm4gZX1ZdC5fX2luaXRTdGF0aWMoKTtmdW5jdGlvbiBWdCh0KXtyZXR1cm4gdC5yZXBsYWNlKC9eW0EtWl06LywiIikucmVwbGFjZSgvXFwvZywiLyIpfWNvbnN0IHF0PW47bGV0IFF0LFh0PTAsdG49e307ZnVuY3Rpb24gbm4odCl7cXQuZGVidWcmJmNvbnNvbGUubG9nKGBbQU5SIFdvcmtlcl0gJHt0fWApfXZhciBlbixybixvbjtjb25zdCBzbj1mdW5jdGlvbih0KXtsZXQgbjt0cnl7bj1uZXcgVVJMKHQudXJsKX1jYXRjaChuKXtyZXR1cm4gYigoKT0+e2NvbnNvbGUud2FybigiW0BzZW50cnkvbm9kZV06IEludmFsaWQgZHNuIG9yIHR1bm5lbCBvcHRpb24sIHdpbGwgbm90IHNlbmQgYW55IGV2ZW50cy4gVGhlIHR1bm5lbCBvcHRpb24gbXVzdCBiZSBhIGZ1bGwgVVJMIHdoZW4gdXNlZC4iKX0pLFV0KHQsKCk9PlByb21pc2UucmVzb2x2ZSh7fSkpfWNvbnN0IGU9Imh0dHBzOiI9PT1uLnByb3RvY29sLHI9ZnVuY3Rpb24odCxuKXtjb25zdHtub19wcm94eTplfT1wcm9jZXNzLmVudixyPWU/LnNwbGl0KCIsIikuc29tZShuPT50Lmhvc3QuZW5kc1dpdGgobil8fHQuaG9zdG5hbWUuZW5kc1dpdGgobikpO3JldHVybiByP3ZvaWQgMDpufShuLHQucHJveHl8fChlP3Byb2Nlc3MuZW52Lmh0dHBzX3Byb3h5OnZvaWQgMCl8fHByb2Nlc3MuZW52Lmh0dHBfcHJveHkpLG89ZT9zOmksYT12b2lkIDAhPT10LmtlZXBBbGl2ZSYmdC5rZWVwQWxpdmUsZj1yP25ldyBZdChyKTpuZXcgby5BZ2VudCh7a2VlcEFsaXZlOmEsbWF4U29ja2V0czozMCx0aW1lb3V0OjJlM30pLGg9ZnVuY3Rpb24odCxuLGUpe2NvbnN0e2hvc3RuYW1lOnIscGF0aG5hbWU6byxwb3J0OmkscHJvdG9jb2w6cyxzZWFyY2g6YX09bmV3IFVSTCh0LnVybCk7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBuZXcgUHJvbWlzZSgoaCxwKT0+e0l0KCgpPT57bGV0IGw9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBjKHtyZWFkKCl7dGhpcy5wdXNoKHQpLHRoaXMucHVzaChudWxsKX19KX0oZi5ib2R5KTtjb25zdCBkPXsuLi50LmhlYWRlcnN9O2YuYm9keS5sZW5ndGg+MzI3NjgmJihkWyJjb250ZW50LWVuY29kaW5nIl09Imd6aXAiLGw9bC5waXBlKHUoKSkpO2NvbnN0IG09bi5yZXF1ZXN0KHttZXRob2Q6IlBPU1QiLGFnZW50OmUsaGVhZGVyczpkLGhvc3RuYW1lOnIscGF0aDpgJHtvfSR7YX1gLHBvcnQ6aSxwcm90b2NvbDpzLGNhOnQuY2FDZXJ0c30sdD0+e3Qub24oImRhdGEiLCgpPT57fSksdC5vbigiZW5kIiwoKT0+e30pLHQuc2V0RW5jb2RpbmcoInV0ZjgiKTtjb25zdCBuPXQuaGVhZGVyc1sicmV0cnktYWZ0ZXIiXT8/bnVsbCxlPXQuaGVhZGVyc1sieC1zZW50cnktcmF0ZS1saW1pdHMiXT8/bnVsbDtoKHtzdGF0dXNDb2RlOnQuc3RhdHVzQ29kZSxoZWFkZXJzOnsicmV0cnktYWZ0ZXIiOm4sIngtc2VudHJ5LXJhdGUtbGltaXRzIjpBcnJheS5pc0FycmF5KGUpP2VbMF18fG51bGw6ZX19KX0pO20ub24oImVycm9yIixwKSxsLnBpcGUobSl9KX0pfX0odCx0Lmh0dHBNb2R1bGU/P28sZik7cmV0dXJuIFV0KHQsaCl9KHt1cmw6KGVuPXF0LmRzbixybj1xdC50dW5uZWwsb249cXQuc2RrTWV0YWRhdGEuc2RrLHJufHxgJHtmdW5jdGlvbih0KXtyZXR1cm5gJHtmdW5jdGlvbih0KXtjb25zdCBuPXQucHJvdG9jb2w/YCR7dC5wcm90b2NvbH06YDoiIixlPXQucG9ydD9gOiR7dC5wb3J0fWA6IiI7cmV0dXJuYCR7bn0vLyR7dC5ob3N0fSR7ZX0ke3QucGF0aD9gLyR7dC5wYXRofWA6IiJ9L2FwaS9gfSh0KX0ke3QucHJvamVjdElkfS9lbnZlbG9wZS9gfShlbil9PyR7ZnVuY3Rpb24odCxuKXtjb25zdCBlPXtzZW50cnlfdmVyc2lvbjoiNyJ9O3JldHVybiB0LnB1YmxpY0tleSYmKGUuc2VudHJ5X2tleT10LnB1YmxpY0tleSksbiYmKGUuc2VudHJ5X2NsaWVudD1gJHtuLm5hbWV9LyR7bi52ZXJzaW9ufWApLG5ldyBVUkxTZWFyY2hQYXJhbXMoZSkudG9TdHJpbmcoKX0oZW4sb24pfWApfSk7YXN5bmMgZnVuY3Rpb24gY24oKXtpZihRdCl7bm4oIlNlbmRpbmcgYWJub3JtYWwgc2Vzc2lvbiIpLHooUXQse3N0YXR1czoiYWJub3JtYWwiLGFibm9ybWFsX21lY2hhbmlzbToiYW5yX2ZvcmVncm91bmQiLHJlbGVhc2U6cXQucmVsZWFzZSxlbnZpcm9ubWVudDpxdC5lbnZpcm9ubWVudH0pO2NvbnN0IHQ9ZnVuY3Rpb24odCxuLGUscil7Y29uc3Qgbz1rdChlKTtyZXR1cm4gRXQoe3NlbnRfYXQ6KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLC4uLm8mJntzZGs6b30sLi4uISFyJiZuJiZ7ZHNuOmh0KG4pfX0sWyJhZ2dyZWdhdGVzImluIHQ/W3t0eXBlOiJzZXNzaW9ucyJ9LHRdOlt7dHlwZToic2Vzc2lvbiJ9LHQudG9KU09OKCldXSl9KFF0LHF0LmRzbixxdC5zZGtNZXRhZGF0YSxxdC50dW5uZWwpO25uKEpTT04uc3RyaW5naWZ5KHQpKSxhd2FpdCBzbi5zZW5kKHQpO3RyeXtlPy5wb3N0TWVzc2FnZSgic2Vzc2lvbi1lbmRlZCIpfWNhdGNoe319fWZ1bmN0aW9uIHVuKHQpe2lmKCF0KXJldHVybjtjb25zdCBuPWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm5bXTtjb25zdCBuPUFycmF5LmZyb20odCk7cmV0dXJuL3NlbnRyeVdyYXBwZWQvLnRlc3QoRShuKS5mdW5jdGlvbnx8IiIpJiZuLnBvcCgpLG4ucmV2ZXJzZSgpLCQudGVzdChFKG4pLmZ1bmN0aW9ufHwiIikmJihuLnBvcCgpLCQudGVzdChFKG4pLmZ1bmN0aW9ufHwiIikmJm4ucG9wKCkpLG4uc2xpY2UoMCw1MCkubWFwKHQ9Pih7Li4udCxmaWxlbmFtZTp0LmZpbGVuYW1lfHxFKG4pLmZpbGVuYW1lLGZ1bmN0aW9uOnQuZnVuY3Rpb258fCI/In0pKX0odCk7aWYocXQuYXBwUm9vdFBhdGgpZm9yKGNvbnN0IHQgb2Ygbil0LmZpbGVuYW1lJiYodC5maWxlbmFtZT0kdCh0LmZpbGVuYW1lLHF0LmFwcFJvb3RQYXRoKSk7cmV0dXJuIG59YXN5bmMgZnVuY3Rpb24gYW4odCxuKXtpZihYdD49cXQubWF4QW5yRXZlbnRzKXJldHVybjtYdCs9MSxhd2FpdCBjbigpLG5uKCJTZW5kaW5nIGV2ZW50Iik7Y29uc3QgZT17ZXZlbnRfaWQ6TCgpLGNvbnRleHRzOnF0LmNvbnRleHRzLHJlbGVhc2U6cXQucmVsZWFzZSxlbnZpcm9ubWVudDpxdC5lbnZpcm9ubWVudCxkaXN0OnF0LmRpc3QscGxhdGZvcm06Im5vZGUiLGxldmVsOiJlcnJvciIsZXhjZXB0aW9uOnt2YWx1ZXM6W3t0eXBlOiJBcHBsaWNhdGlvbk5vdFJlc3BvbmRpbmciLHZhbHVlOmBBcHBsaWNhdGlvbiBOb3QgUmVzcG9uZGluZyBmb3IgYXQgbGVhc3QgJHtxdC5hbnJUaHJlc2hvbGR9IG1zYCxzdGFja3RyYWNlOntmcmFtZXM6dW4odCl9LG1lY2hhbmlzbTp7dHlwZToiQU5SIn19XX0sdGFnczpxdC5zdGF0aWNUYWdzfTtuJiZmdW5jdGlvbih0LG4pe2lmKFJ0KHQsbiksIXQuY29udGV4dHM/LnRyYWNlKXtjb25zdHt0cmFjZUlkOmUscGFyZW50U3BhbklkOnIscHJvcGFnYXRpb25TcGFuSWQ6b309bi5wcm9wYWdhdGlvbkNvbnRleHQ7dC5jb250ZXh0cz17dHJhY2U6e3RyYWNlX2lkOmUsc3Bhbl9pZDpvfHxZKCkscGFyZW50X3NwYW5faWQ6cn0sLi4udC5jb250ZXh0c319fShlLG4pLGZ1bmN0aW9uKHQpe2lmKDA9PT1PYmplY3Qua2V5cyh0bikubGVuZ3RoKXJldHVybjtjb25zdCBuPXF0LmFwcFJvb3RQYXRoP3t9OnRuO2lmKHF0LmFwcFJvb3RQYXRoKWZvcihjb25zdFt0LGVdb2YgT2JqZWN0LmVudHJpZXModG4pKW5bJHQodCxxdC5hcHBSb290UGF0aCldPWU7Y29uc3QgZT1uZXcgTWFwO2Zvcihjb25zdCByIG9mIHQuZXhjZXB0aW9uPy52YWx1ZXN8fFtdKWZvcihjb25zdCB0IG9mIHIuc3RhY2t0cmFjZT8uZnJhbWVzfHxbXSl7Y29uc3Qgcj10LmFic19wYXRofHx0LmZpbGVuYW1lO3ImJm5bcl0mJmUuc2V0KHIsbltyXSl9aWYoZS5zaXplPjApe2NvbnN0IG49W107Zm9yKGNvbnN0W3Qscl1vZiBlLmVudHJpZXMoKSluLnB1c2goe3R5cGU6InNvdXJjZW1hcCIsY29kZV9maWxlOnQsZGVidWdfaWQ6cn0pO3QuZGVidWdfbWV0YT17aW1hZ2VzOm59fX0oZSk7Y29uc3Qgcj1UdChlLHF0LmRzbixxdC5zZGtNZXRhZGF0YSxxdC50dW5uZWwpO25uKEpTT04uc3RyaW5naWZ5KHIpKSxhd2FpdCBzbi5zZW5kKHIpLGF3YWl0IHNuLmZsdXNoKDJlMyksWHQ+PXF0Lm1heEFuckV2ZW50cyYmc2V0VGltZW91dCgoKT0+e3Byb2Nlc3MuZXhpdCgwKX0sNWUzKX1sZXQgZm47aWYobm4oIlN0YXJ0ZWQiKSxxdC5jYXB0dXJlU3RhY2tUcmFjZSl7bm4oIkNvbm5lY3RpbmcgdG8gZGVidWdnZXIiKTtjb25zdCBuPW5ldyB0O24uY29ubmVjdFRvTWFpblRocmVhZCgpLG5uKCJDb25uZWN0ZWQgdG8gZGVidWdnZXIiKTtjb25zdCBlPW5ldyBNYXA7bi5vbigiRGVidWdnZXIuc2NyaXB0UGFyc2VkIix0PT57ZS5zZXQodC5wYXJhbXMuc2NyaXB0SWQsdC5wYXJhbXMudXJsKX0pLG4ub24oIkRlYnVnZ2VyLnBhdXNlZCIsdD0+e2lmKCJvdGhlciI9PT10LnBhcmFtcy5yZWFzb24pdHJ5e25uKCJEZWJ1Z2dlciBwYXVzZWQiKTtjb25zdCBpPVsuLi50LnBhcmFtcy5jYWxsRnJhbWVzXSxzPXF0LmFwcFJvb3RQYXRoP2Z1bmN0aW9uKHQ9KHByb2Nlc3MuYXJndlsxXT9CdChwcm9jZXNzLmFyZ3ZbMV0pOnByb2Nlc3MuY3dkKCkpLG49IlxcIj09PW8pe2NvbnN0IGU9bj9WdCh0KTp0O3JldHVybiB0PT57aWYoIXQpcmV0dXJuO2NvbnN0IG89bj9WdCh0KTp0O2xldHtkaXI6aSxiYXNlOnMsZXh0OmN9PXIucGFyc2Uobyk7Ii5qcyIhPT1jJiYiLm1qcyIhPT1jJiYiLmNqcyIhPT1jfHwocz1zLnNsaWNlKDAsLTEqYy5sZW5ndGgpKTtjb25zdCB1PWRlY29kZVVSSUNvbXBvbmVudChzKTtpfHwoaT0iLiIpO2NvbnN0IGE9aS5sYXN0SW5kZXhPZigiL25vZGVfbW9kdWxlcyIpO2lmKGE+LTEpcmV0dXJuYCR7aS5zbGljZShhKzE0KS5yZXBsYWNlKC9cLy9nLCIuIil9OiR7dX1gO2lmKGkuc3RhcnRzV2l0aChlKSl7Y29uc3QgdD1pLnNsaWNlKGUubGVuZ3RoKzEpLnJlcGxhY2UoL1wvL2csIi4iKTtyZXR1cm4gdD9gJHt0fToke3V9YDp1fXJldHVybiB1fX0ocXQuYXBwUm9vdFBhdGgpOigpPT57fSxjPWkubWFwKHQ9PmZ1bmN0aW9uKHQsbixlKXtjb25zdCByPW4/bi5yZXBsYWNlKC9eZmlsZTpcL1wvLywiIik6dm9pZCAwLG89dC5sb2NhdGlvbi5jb2x1bW5OdW1iZXI/dC5sb2NhdGlvbi5jb2x1bW5OdW1iZXIrMTp2b2lkIDAsaT10LmxvY2F0aW9uLmxpbmVOdW1iZXI/dC5sb2NhdGlvbi5saW5lTnVtYmVyKzE6dm9pZCAwO3JldHVybntmaWxlbmFtZTpyLG1vZHVsZTplKHIpLGZ1bmN0aW9uOnQuZnVuY3Rpb25OYW1lfHwiPyIsY29sbm86byxsaW5lbm86aSxpbl9hcHA6cj9HdChyKTp2b2lkIDB9fSh0LGUuZ2V0KHQubG9jYXRpb24uc2NyaXB0SWQpLHMpKSx1PXNldFRpbWVvdXQoKCk9PnthbihjKS50aGVuKG51bGwsKCk9PntubigiU2VuZGluZyBBTlIgZXZlbnQgZmFpbGVkLiIpfSl9LDVlMyk7bi5wb3N0KCJSdW50aW1lLmV2YWx1YXRlIix7ZXhwcmVzc2lvbjoiZ2xvYmFsLl9fU0VOVFJZX0dFVF9TQ09QRVNfXygpOyIsc2lsZW50OiEwLHJldHVybkJ5VmFsdWU6ITB9LCh0LGUpPT57dCYmbm4oYEVycm9yIGV4ZWN1dGluZyBzY3JpcHQ6ICcke3QubWVzc2FnZX0nYCksY2xlYXJUaW1lb3V0KHUpO2NvbnN0IHI9ZT8ucmVzdWx0P2UucmVzdWx0LnZhbHVlOnZvaWQgMDtuLnBvc3QoIkRlYnVnZ2VyLnJlc3VtZSIpLG4ucG9zdCgiRGVidWdnZXIuZGlzYWJsZSIpLGFuKGMscikudGhlbihudWxsLCgpPT57bm4oIlNlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZC4iKX0pfSl9Y2F0Y2godCl7dGhyb3cgbi5wb3N0KCJEZWJ1Z2dlci5yZXN1bWUiKSxuLnBvc3QoIkRlYnVnZ2VyLmRpc2FibGUiKSx0fX0pLGZuPSgpPT57dHJ5e24ucG9zdCgiRGVidWdnZXIuZW5hYmxlIiwoKT0+e24ucG9zdCgiRGVidWdnZXIucGF1c2UiKX0pfWNhdGNoe319fWNvbnN0e3BvbGw6aG59PWZ1bmN0aW9uKHQsbixlLHIpe2NvbnN0IG89dCgpO2xldCBpPSExLHM9ITA7cmV0dXJuIHNldEludGVydmFsKCgpPT57Y29uc3QgdD1vLmdldFRpbWVNcygpOyExPT09aSYmdD5uK2UmJihpPSEwLHMmJnIoKSksdDxuK2UmJihpPSExKX0sMjApLHtwb2xsOigpPT57by5yZXNldCgpfSxlbmFibGVkOnQ9PntzPXR9fX0oZnVuY3Rpb24oKXtsZXQgdD1wcm9jZXNzLmhydGltZSgpO3JldHVybntnZXRUaW1lTXM6KCk9Pntjb25zdFtuLGVdPXByb2Nlc3MuaHJ0aW1lKHQpO3JldHVybiBNYXRoLmZsb29yKDFlMypuK2UvMWU2KX0scmVzZXQ6KCk9Pnt0PXByb2Nlc3MuaHJ0aW1lKCl9fX0scXQucG9sbEludGVydmFsLHF0LmFuclRocmVzaG9sZCxmdW5jdGlvbigpe25uKCJXYXRjaGRvZyB0aW1lb3V0IiksZm4/KG5uKCJQYXVzaW5nIGRlYnVnZ2VyIHRvIGNhcHR1cmUgc3RhY2sgdHJhY2UiKSxmbigpKToobm4oIkNhcHR1cmluZyBldmVudCB3aXRob3V0IGEgc3RhY2sgdHJhY2UiKSxhbigpLnRoZW4obnVsbCwoKT0+e25uKCJTZW5kaW5nIEFOUiBldmVudCBmYWlsZWQgb24gd2F0Y2hkb2cgdGltZW91dC4iKX0pKX0pO2U/Lm9uKCJtZXNzYWdlIix0PT57dC5zZXNzaW9uJiYoUXQ9Sih0LnNlc3Npb24pKSx0LmRlYnVnSW1hZ2VzJiYodG49dC5kZWJ1Z0ltYWdlcyksaG4oKX0pOw=="),{workerData:a,execArgv:[],env:{...process.env,NODE_OPTIONS:void 0}});process.on("exit",()=>{l.terminate()});let c=setInterval(()=>{try{let e=eZ().getSession(),t=e?{...e,toJSON:void 0}:void 0;l.postMessage({session:t,debugImages:tM(s.stackParser)})}catch{}},a.pollInterval);return c.unref(),l.on("message",e=>{"session-ended"===e&&(hx("ANR event sent from ANR worker. Clearing session in this thread."),eZ().setSession(void 0))}),l.once("error",e=>{clearInterval(c),hx("ANR worker error",e)}),l.once("exit",e=>{clearInterval(c),hx("ANR worker exit",e)}),l.unref(),()=>{l.terminate(),clearInterval(c)}}function hL(e){let t=ek()?.getIntegrationByName("Anr");if(!t)return e();t.stopWorker();let n=e();return hN(n)?n.finally(()=>t.startWorker()):(t.startWorker(),n)}function hV(e,...t){let[n,r,i,s]=t;if(Array.isArray(r)){let t={...i};t["sentry.message.template"]=n,r.forEach((e,n)=>{t[`sentry.message.parameter.${n}`]=e}),pJ({level:e,message:(0,uR.format)(n,...r),attributes:t},s?.scope)}else pJ({level:e,message:n,attributes:r},s?.scope)}let hE=["trace","debug","info","warn","error","fatal"],hO=Symbol.for("level"),hY=Symbol.for("message"),hJ=Symbol.for("splat");function hK(e,t){class n extends e{constructor(e){super(e),this._levels=new Set(t?.levels??hE)}log(e,t){try{if(setImmediate(()=>{this.emit("logged",e)}),"object"!=typeof e||null==e)return;let t=e[hO],{level:n,message:r,timestamp:i,...s}=e;s[hO]=void 0,s[hY]=void 0,s[hJ]=void 0;let o=hj[t]??"info";this._levels.has(o)&&hV(o,r,{...s,"sentry.origin":"auto.log.winston"})}catch{}t&&t()}}return n}let hj={silly:"trace",debug:"debug",verbose:"debug",http:"debug",info:"info",notice:"info",warn:"warn",warning:"warn",error:"error",emerg:"fatal",alert:"fatal",crit:"fatal"},hP=[["january","1"],["february","2"],["march","3"],["april","4"],["may","5"],["june","6"],["july","7"],["august","8"],["september","9"],["october","10"],["november","11"],["december","12"],["jan","1"],["feb","2"],["mar","3"],["apr","4"],["may","5"],["jun","6"],["jul","7"],["aug","8"],["sep","9"],["oct","10"],["nov","11"],["dec","12"],["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]];function hA(e){return hP.reduce((e,[t,n])=>e.replace(RegExp(t,"gi"),n),e)}let hF="Automatic instrumentation of CronJob only supports crontab string",hM={instrumentCron:function(e,t){let n=!1;return new Proxy(e,{construct(e,r){let[i,s,o,a,l,...c]=r;if("string"!=typeof i)throw Error(hF);if(n)throw Error(`A job named '${t}' has already been scheduled`);n=!0;let u=hA(i);return new e(i,async function(e,n){return nr(t,async()=>{try{await s(e,n)}catch(e){throw t2(e,{mechanism:{handled:!1,type:"auto.function.cron.instrumentCron"}}),e}},{schedule:{type:"crontab",value:u},timezone:l||void 0})},o,a,l,...c)},get:(e,r)=>"from"===r?r=>{let{cronTime:i,onTick:s,timeZone:o}=r;if("string"!=typeof i)throw Error(hF);if(n)throw Error(`A job named '${t}' has already been scheduled`);n=!0;let a=hA(i);return r.onTick=async(e,n)=>nr(t,async()=>{try{await s(e,n)}catch(e){throw t2(e,{mechanism:{handled:!1,type:"auto.function.cron.instrumentCron"}}),e}},{schedule:{type:"crontab",value:a},timezone:o||void 0}),e.from(r)}:e[r]})},instrumentNodeCron:function(e){return new Proxy(e,{get:(e,t)=>"schedule"===t&&e.schedule?new Proxy(e.schedule,{apply(e,t,n){let[r,i,s]=n,o=s?.name,a=s?.timezone;if(!o)throw Error('Missing "name" for scheduled job. A name is required for Sentry check-in monitoring.');let l=async()=>nr(o,async()=>{try{return await i()}catch(e){throw t2(e,{mechanism:{handled:!1,type:"auto.function.node-cron.instrumentNodeCron"}}),e}},{schedule:{type:"crontab",value:hA(r)},timezone:a});return e.apply(t,[r,l,s])}}):e[t]})},instrumentNodeSchedule:function(e){return new Proxy(e,{get:(e,t)=>"scheduleJob"===t?new Proxy(e.scheduleJob,{apply(e,t,n){let[r,i,s]=n;if("string"!=typeof r||"string"!=typeof i||"function"!=typeof s)throw Error("Automatic instrumentation of 'node-schedule' requires the first parameter of 'scheduleJob' to be a job name string and the second parameter to be a crontab string");async function o(){return nr(r,async()=>{await s?.()},{schedule:{type:"crontab",value:hA(i)}})}return e.apply(t,[r,i,o])}}):e[t]})}};function hz(...e){hV("trace",...e)}function hB(...e){hV("debug",...e)}function hQ(...e){hV("info",...e)}function hU(...e){hV("warn",...e)}function hD(...e){hV("error",...e)}function h$(...e){hV("fatal",...e)}function hq(e,t,n,r){!function(e,t){let n=t?.scope??eI(),r=t?.captureSerializedMetric??pA,i=n?.getClient()??ek();if(!i){W&&P.warn("No client available to capture metric.");return}let{_experiments:s,enableMetrics:o,beforeSendMetric:a}=i.getOptions();if(!(o??s?.enableMetrics??!0)){W&&P.warn("metrics option not enabled, metric will not be captured.");return}let l=function(e,t,n){let{release:r,environment:i}=t.getOptions(),s={...e.attributes},{user:{id:o,email:a,username:l}}=function(e){let t=eR().getScopeData();return tA(t,eZ().getScopeData()),tA(t,e.getScopeData()),t}(n);pP(s,"user.id",o,!1),pP(s,"user.email",a,!1),pP(s,"user.name",l,!1),pP(s,"sentry.release",r),pP(s,"sentry.environment",i);let{name:c,version:u}=t.getSdkMetadata()?.sdk??{};pP(s,"sentry.sdk.name",c),pP(s,"sentry.sdk.version",u);let p=t.getIntegrationByName("Replay"),d=p?.getReplayId(!0);return pP(s,"sentry.replay_id",d),d&&p?.getRecordingMode()==="buffer"&&pP(s,"sentry._internal.replay_is_buffering",!0),{...e,attributes:s}}(e,i,n),c=a||s?.beforeSendMetric,u=c?c(l):l;if(!u){W&&P.log("`beforeSendMetric` returned `null`, will not send metric.");return}let p=function(e,t,n){let r={};for(let t in e.attributes)void 0!==e.attributes[t]&&(r[t]=function(e){switch(typeof e){case"number":if(Number.isInteger(e))return{value:e,type:"integer"};return{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}(e.attributes[t]));let[,i]=pV(t,n),s=n[ea],o=s?s.spanContext().traceId:i?.trace_id,a=s?s.spanContext().spanId:void 0;return{timestamp:er(),trace_id:o??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:r}}(u,i,n);W&&P.log("[Metric]",p),r(i,p),i.emit("afterCaptureMetric",l)}({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function h0(e,t=1,n){hq("counter",e,t,n)}function h1(e,t,n){hq("gauge",e,t,n)}function h2(e,t,n){hq("distribution",e,t,n)}var h9=n(26447);let h5=Symbol("sentry-track-pino-logger"),h3={error:{levels:[],handled:!0},log:{levels:["trace","debug","info","warn","error","fatal"]}},h4=Object.assign((e={})=>{let t={autoInstrument:!1!==e.autoInstrument,error:{...h3.error,...e.error},log:{...h3.log,...e.log}};return{name:"Pino",setup:e=>{var n;let r=!!e.getOptions().enableLogs;n={channelName:"pino-log",module:{name:"pino",versionRange:">=8.0.0 < 9.10.0",filePath:"lib/tools.js"},functionQuery:{functionName:"asJson",kind:"Sync"}},id()&&(h||(h=[]),h.push(n),I._sentryInjectLoaderHookRegister=()=>{if(I._sentryInjectLoaderHookRegistered)return;I._sentryInjectLoaderHookRegistered=!0;let e=h||[];new h9({instrumentations:e}).patch();try{du.register("@apm-js-collab/tracing-hooks/hook.mjs","file:///C:/xampp/htdocs/_MVP_Video_TecnicoCursos_v7/estudio_ia_videos/node_modules/@sentry/node-core/build/esm/sdk/injectLoader.js",{data:{instrumentations:e}})}catch(e){P.warn("Failed to register '@apm-js-collab/tracing-hooks' hook",e)}});let i=(0,eO.tracingChannel)("orchestrion:pino:pino-log"),s=(0,eO.tracingChannel)("pino_asJson");function o(e,n,i){if(!function(e){let n=e[h5];return"track"===n||"ignore"!==n&&t.autoInstrument}(e))return;let s=function(e){let{level:t,time:n,pid:r,hostname:i,...s}=e;return s}(i),[o,a,l]=n,c=e?.levels?.labels?.[l]||"info";if(r&&t.log.levels.includes(c)&&pJ({level:c,message:a,attributes:{...s,"sentry.origin":"auto.log.pino","pino.logger.level":l}}),t.error.levels.includes(c)){let e={level:ug(c)};eC(n=>{if(n.addEventProcessor(e=>(e.logger="pino",$(e,{handled:t.error.handled,type:"pino"}),e)),o.err){t2(o.err,e);return}t9(a,e)})}}i.end.subscribe(e=>{let{self:t,arguments:n,result:r}=e;o(t,n,JSON.parse(r))}),s.end.subscribe(e=>{let{instance:t,arguments:n,result:r}=e;o(t,n,JSON.parse(r))})}}},{trackLogger(e){e&&"object"==typeof e&&"levels"in e&&(e[h5]="track")},untrackLogger(e){e&&"object"==typeof e&&"levels"in e&&(e[h5]="ignore")}})}};