exports.id=2694,exports.ids=[2694],exports.modules={788751:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=788751,e.exports=t},318993:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=318993,e.exports=t},745773:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=745773,e.exports=t},991254:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=991254,e.exports=t},5213:(e,t,o)=>{"use strict";o.d(t,{D:()=>s,U:()=>i});var r=o(487561);let l=e=>{let t=process.env.RATE_LIMIT_DEBUG_LOG;if(t)try{(0,r.appendFileSync)(t,`${JSON.stringify({ts:Date.now(),...e})}
`,{encoding:"utf-8"})}catch(e){"true"===process.env.DEBUG_RATE_LIMIT&&console.error("[rate-limit] debug log failed",e)}},n=()=>{let e=globalThis.process;if(e)return e.__app_rate_limit_store__||(e.__app_rate_limit_store__=new Map),e.__app_rate_limit_store__;let t=globalThis;return t.__app_rate_limit_store__||(t.__app_rate_limit_store__=new Map),t.__app_rate_limit_store__};function s(e,t,o){let r=n(),s=Date.now(),i=r.get(e),a=i?s-i.lastRequest:0;if(!i||a>=o&&s>=(i.blockedUntil||0))return r.set(e,{windowStart:s,lastRequest:s,count:1,blockedUntil:0}),"true"===process.env.DEBUG_RATE_LIMIT&&console.info("[rate-limit] reset",{key:e,limit:t,windowMs:o,idle:a}),l({type:"reset",key:e,limit:t,windowMs:o,idle:a}),{allowed:!0,retryAfterSec:0};if((i=r.get(e)).blockedUntil&&s<i.blockedUntil){let o=Math.max(0,Math.ceil((i.blockedUntil-s)/1e3));return"true"===process.env.DEBUG_RATE_LIMIT&&console.info("[rate-limit] still-blocked",{key:e,retryAfterSec:o}),l({type:"blocked",key:e,count:i.count,limit:t,retryAfterSec:o}),i.lastRequest=s,{allowed:!1,retryAfterSec:o}}if(i.count>=t){i.blockedUntil=i.windowStart+o,i.blockedUntil<=s&&(i.blockedUntil=s+o);let r=Math.max(0,Math.ceil((i.blockedUntil-s)/1e3));return"true"===process.env.DEBUG_RATE_LIMIT&&console.info("[rate-limit] blocked",{key:e,count:i.count,limit:t,retryAfterSec:r}),l({type:"blocked",key:e,count:i.count,limit:t,retryAfterSec:r}),i.lastRequest=s,{allowed:!1,retryAfterSec:r}}return i.count+=1,i.lastRequest=s,"true"===process.env.DEBUG_RATE_LIMIT&&console.info("[rate-limit] allowed",{key:e,count:i.count,limit:t,idle:a}),l({type:"allowed",key:e,count:i.count,limit:t,idle:a}),{allowed:!0,retryAfterSec:0}}function i(e){return n().get(e)}},848588:(e,t,o)=>{"use strict";o.d(t,{k:()=>a});var r=o(592048),l=o.n(r),n=o(555315),s=o.n(n);class i{constructor(){this.maxFileSize=10485760,this.maxFiles=5,this.logDir=s().join(process.cwd(),"..","logs"),l().existsSync(this.logDir)||l().mkdirSync(this.logDir,{recursive:!0}),this.currentLogFile=s().join(this.logDir,`app-${this.getDateString()}.log`)}static getInstance(){return i.instance||(i.instance=new i),i.instance}getDateString(){let e=new Date;return`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}`}getTimestamp(){return new Date().toISOString()}formatConsole(e){let t={DEBUG:"\x1b[36m",INFO:"\x1b[37m",WARN:"\x1b[33m",ERROR:"\x1b[31m",FATAL:"\x1b[35m",RESET:"\x1b[0m"},o=t[e.level],r={DEBUG:"\uD83D\uDD0D",INFO:"â„¹ï¸",WARN:"âš ï¸",ERROR:"âŒ",FATAL:"\uD83D\uDC80"}[e.level],l=`${o}[${e.timestamp}] ${r} ${e.level} [${e.component}] ${e.message}${t.RESET}`;return e.data&&(l+=`
${o}   Data: ${JSON.stringify(e.data,null,2)}${t.RESET}`),e.stack&&(l+=`
${o}   Stack: ${e.stack}${t.RESET}`),l}writeToFile(e){try{this.rotateIfNeeded();let t=JSON.stringify(e)+"\n";l().appendFileSync(this.currentLogFile,t,"utf-8")}catch(e){console.error("Erro ao escrever log:",e)}}rotateIfNeeded(){try{if(l().existsSync(this.currentLogFile)&&l().statSync(this.currentLogFile).size>=this.maxFileSize){let e=Date.now(),t=this.currentLogFile.replace(".log",`-${e}.log`);l().renameSync(this.currentLogFile,t),this.cleanOldLogs()}}catch(e){console.error("Erro ao rotacionar logs:",e)}}cleanOldLogs(){try{let e=l().readdirSync(this.logDir).filter(e=>e.endsWith(".log")).map(e=>({name:e,path:s().join(this.logDir,e),time:l().statSync(s().join(this.logDir,e)).mtime.getTime()})).sort((e,t)=>t.time-e.time);e.length>this.maxFiles&&e.slice(this.maxFiles).forEach(e=>{l().unlinkSync(e.path)})}catch(e){console.error("Erro ao limpar logs antigos:",e)}}log(e,t,o,r,l){let n={timestamp:this.getTimestamp(),level:e,component:t,message:o,data:r};l&&(n.stack=l.stack),console.log(this.formatConsole(n)),this.writeToFile(n)}debug(e,t,o){this.log("DEBUG",e,t,o)}info(e,t,o){this.log("INFO",e,t,o)}warn(e,t,o){this.log("WARN",e,t,o)}error(e,t,o,r){this.log("ERROR",e,t,r,o)}fatal(e,t,o,r){this.log("FATAL",e,t,r,o)}analyzeLogs(e){let t=e||this.currentLogFile;if(!l().existsSync(t))throw Error(`Arquivo de log n\xe3o encontrado: ${t}`);let o=l().readFileSync(t,"utf-8").split("\n").filter(e=>e.trim()).map(e=>{try{return JSON.parse(e)}catch{return null}}).filter(e=>null!==e),r={totalLogs:o.length,byLevel:{DEBUG:o.filter(e=>"DEBUG"===e.level).length,INFO:o.filter(e=>"INFO"===e.level).length,WARN:o.filter(e=>"WARN"===e.level).length,ERROR:o.filter(e=>"ERROR"===e.level).length,FATAL:o.filter(e=>"FATAL"===e.level).length},byComponent:{},errors:o.filter(e=>"ERROR"===e.level||"FATAL"===e.level),warnings:o.filter(e=>"WARN"===e.level),timeRange:{start:o[0]?.timestamp||"",end:o[o.length-1]?.timestamp||""}};return o.forEach(e=>{r.byComponent[e.component]||(r.byComponent[e.component]=0),r.byComponent[e.component]++}),r}searchLogs(e,t,o,r){let n=r||this.currentLogFile;return l().existsSync(n)?l().readFileSync(n,"utf-8").split("\n").filter(e=>e.trim()).map(e=>{try{return JSON.parse(e)}catch{return null}}).filter(e=>null!==e).filter(r=>(!t||r.level===t)&&(!o||r.component===o)&&(!e||JSON.stringify(r).toLowerCase().includes(e.toLowerCase()))):[]}printAnalysis(e){console.log("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"),console.log("â•‘                    \uD83D\uDCCA AN\xc1LISE DE LOGS                            â•‘"),console.log("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"),console.log(`ðŸ“‹ Total de Logs: ${e.totalLogs}`),console.log(`â° Per\xedodo: ${e.timeRange.start} â†’ ${e.timeRange.end}
`),console.log("\uD83D\uDCCA Por N\xedvel:"),console.log(`   ðŸ” DEBUG: ${e.byLevel.DEBUG}`),console.log(`   â„¹ï¸  INFO:  ${e.byLevel.INFO}`),console.log(`   âš ï¸  WARN:  ${e.byLevel.WARN}`),console.log(`   âŒ ERROR: ${e.byLevel.ERROR}`),console.log(`   ðŸ’€ FATAL: ${e.byLevel.FATAL}
`),console.log("\uD83D\uDCE6 Por Componente:"),Object.entries(e.byComponent).sort(([,e],[,t])=>t-e).forEach(([e,t])=>{console.log(`   - ${e}: ${t}`)}),e.errors.length>0&&(console.log(`
âŒ Erros Recentes (${e.errors.length}):`),e.errors.slice(-5).forEach(e=>{console.log(`   [${e.timestamp}] ${e.component}: ${e.message}`)})),e.warnings.length>0&&(console.log(`
âš ï¸  Avisos Recentes (${e.warnings.length}):`),e.warnings.slice(-5).forEach(e=>{console.log(`   [${e.timestamp}] ${e.component}: ${e.message}`)})),console.log("\n")}getLogFiles(){return l().readdirSync(this.logDir).filter(e=>e.endsWith(".log")).map(e=>s().join(this.logDir,e))}clearLogs(){let e=this.getLogFiles();e.forEach(e=>l().unlinkSync(e)),console.log(`âœ… ${e.length} arquivos de log removidos`)}}let a=i.getInstance()},895412:(e,t,o)=>{"use strict";o.d(t,{s:()=>l});var r=o(868355);function l(e){let t=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL||"",o=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||process.env.SUPABASE_ANON_KEY||"",l=(e.headers.get("authorization")||e.headers.get("Authorization"))??"",n={};return l&&(n.Authorization=l),(0,r.createClient)(t,o,{global:{headers:n},auth:{persistSession:!1,autoRefreshToken:!0}})}},831006:(e,t,o)=>{"use strict";o.d(t,{WT:()=>s,g7:()=>l,vJ:()=>n});let r=()=>{let e=globalThis;return e.__metrics||(e.__metrics={rate_limit_hits:0,errors:{},startTime:Date.now()}),e.__metrics};function l(){let e=r();e.rate_limit_hits+=1}function n(e){let t=r();t.errors[e]=(t.errors[e]||0)+1}function s(){let e=r();return{rate_limit_hits:e.rate_limit_hits,errors_total:Object.values(e.errors).reduce((e,t)=>e+t,0),errors_by_code:{...e.errors},uptime_ms:Date.now()-e.startTime}}}};