"use strict";exports.id=2004,exports.ids=[2004],exports.modules={942004:(e,s,i)=>{i.d(s,{Z:()=>k});var a=i(210326),t=i(517577),r=i(482610),l=i(483431),d=i(506598),c=i(464070),o=i(870293),n=i(6309),m=i(871059),x=i(794893),h=i(821608),p=i(110976),f=i(269145),j=i(211962),v=i(707937),y=i(583855),u=i(188378),g=i(898091),b=i(925574);let k=()=>{let e=(0,t.useRef)(null),[s,i]=(0,t.useState)(!1),[k,N]=(0,t.useState)(0),[w,z]=(0,t.useState)(300),[C,$]=(0,t.useState)(1),[S,T]=(0,t.useState)(null),[Z,M]=(0,t.useState)([{id:"track-video-1",name:"Video Track 1",type:"video",height:60,locked:!1,visible:!0,color:"#3b82f6"},{id:"track-audio-1",name:"Audio Track 1",type:"audio",height:40,locked:!1,visible:!0,color:"#10b981"},{id:"track-overlay-1",name:"Overlay Track 1",type:"overlay",height:50,locked:!1,visible:!0,color:"#f59e0b"}]),[K,V]=(0,t.useState)([{id:"obj-1",name:"Slide 1",type:"video",startTime:0,duration:30,track:0,keyframes:[{id:"kf-1",time:0,property:"opacity",value:0,easing:"power2.out"},{id:"kf-2",time:2,property:"opacity",value:1,easing:"power2.out"},{id:"kf-3",time:28,property:"opacity",value:1,easing:"power2.in"},{id:"kf-4",time:30,property:"opacity",value:0,easing:"power2.in"}],properties:{x:0,y:0,scale:1,opacity:1}},{id:"obj-2",name:"Narration 1",type:"audio",startTime:2,duration:26,track:1,keyframes:[{id:"kf-5",time:2,property:"volume",value:0,easing:"power1.out"},{id:"kf-6",time:4,property:"volume",value:1,easing:"power1.out"}],properties:{volume:1}},{id:"obj-3",name:"Title Text",type:"text",startTime:5,duration:20,track:2,keyframes:[{id:"kf-7",time:5,property:"y",value:-50,easing:"back.out(1.7)"},{id:"kf-8",time:7,property:"y",value:0,easing:"back.out(1.7)"}],properties:{x:100,y:50,scale:1,opacity:1,color:"#ffffff"}}]),_=(0,t.useCallback)(()=>{if(i(!s),s)b.p8.killTweensOf("*");else{let e=b.p8.timeline({onUpdate:()=>{N(e.time())},onComplete:()=>{i(!1),N(0)}});K.forEach(s=>{s.keyframes.forEach(s=>{e.set({},{},s.time)})}),e.play()}},[s,K]),A=e=>`${Math.floor(e/60).toString().padStart(2,"0")}:${Math.floor(e%60).toString().padStart(2,"0")}:${Math.floor(e%1*30).toString().padStart(2,"0")}`,O=e=>e/w*1e3*C,E=e=>e/(1e3*C)*w,R=e=>{let s={id:`track-${e}-${Date.now()}`,name:`${e.charAt(0).toUpperCase()+e.slice(1)} Track ${Z.filter(s=>s.type===e).length+1}`,type:e,height:"audio"===e?40:"video"===e?60:50,locked:!1,visible:!0,color:"video"===e?"#3b82f6":"audio"===e?"#10b981":"#f59e0b"};M([...Z,s])},D=(e,s)=>{V(K.map(i=>i.id===e?{...i,...s}:i))},I=(e,s,i)=>{let a={id:`kf-${Date.now()}`,time:k,property:s,value:i,easing:"power2.out"};D(e,{keyframes:[...K.find(s=>s.id===e)?.keyframes||[],a]})},P=(e,s)=>{let i=K.find(s=>s.id===e);i&&D(e,{keyframes:i.keyframes.filter(e=>e.id!==s)})};return(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"h-16 bg-white dark:bg-gray-800 border-b flex items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(r.z,{size:"sm",variant:"ghost",onClick:()=>N(0),children:a.jsx(n.Z,{className:"h-4 w-4"})}),a.jsx(r.z,{size:"sm",onClick:_,children:s?a.jsx(m.Z,{className:"h-4 w-4"}):a.jsx(x.Z,{className:"h-4 w-4"})}),a.jsx(r.z,{size:"sm",variant:"ghost",onClick:()=>i(!1),children:a.jsx(h.Z,{className:"h-4 w-4"})}),a.jsx(r.z,{size:"sm",variant:"ghost",onClick:()=>N(w),children:a.jsx(p.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm font-mono",children:[A(k)," / ",A(w)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(f.Z,{className:"h-4 w-4"}),a.jsx(d.i,{value:[100],max:100,step:1,className:"w-20"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(r.z,{size:"sm",variant:"ghost",onClick:()=>$(Math.max(.1,C/1.5)),children:a.jsx(j.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm w-12 text-center",children:[Math.round(100*C),"%"]}),a.jsx(r.z,{size:"sm",variant:"ghost",onClick:()=>$(Math.min(5,1.5*C)),children:a.jsx(v.Z,{className:"h-4 w-4"})})]})]})]}),(0,a.jsxs)("div",{className:"h-8 bg-gray-50 dark:bg-gray-700 border-b flex",children:[a.jsx("div",{className:"w-48 border-r"}),(0,a.jsxs)("div",{className:"flex-1 relative overflow-x-auto",children:[a.jsx("div",{className:"flex h-full",style:{width:`${1e3*C}px`},children:Array.from({length:Math.ceil(w/10)},(e,s)=>a.jsx("div",{className:"border-r border-gray-300 dark:border-gray-600 flex-shrink-0 relative",style:{width:`${10/w*1e3*C}px`},children:a.jsx("div",{className:"absolute top-0 left-1 text-xs text-gray-500",children:A(10*s)})},s))}),a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10 pointer-events-none",style:{left:`${O(k)}px`},children:a.jsx("div",{className:"absolute -top-1 -left-2 w-4 h-3 bg-red-500 clip-path-triangle"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-48 bg-white dark:bg-gray-800 border-r",children:[a.jsx("div",{className:"p-2 border-b",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(r.z,{size:"sm",onClick:()=>R("video"),children:[a.jsx(y.Z,{className:"h-3 w-3 mr-1"}),"Video"]}),(0,a.jsxs)(r.z,{size:"sm",onClick:()=>R("audio"),children:[a.jsx(y.Z,{className:"h-3 w-3 mr-1"}),"Audio"]}),(0,a.jsxs)(r.z,{size:"sm",onClick:()=>R("overlay"),children:[a.jsx(y.Z,{className:"h-3 w-3 mr-1"}),"Text"]})]})}),Z.map((e,s)=>(0,a.jsxs)("div",{className:"border-b p-2 flex items-center justify-between",style:{height:`${e.height}px`},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-sm font-medium",children:e.name})]}),a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx(r.z,{size:"sm",variant:"ghost",children:a.jsx(u.Z,{className:"h-3 w-3"})})})]},e.id))]}),a.jsx("div",{ref:e,className:"flex-1 overflow-auto cursor-pointer",onClick:e=>{let s=e.currentTarget.getBoundingClientRect();N(Math.max(0,Math.min(w,E(e.clientX-s.left-200))))},children:a.jsx("div",{style:{width:`${1e3*C}px`},children:Z.map((e,s)=>(0,a.jsxs)("div",{className:"border-b relative",style:{height:`${e.height}px`},children:[a.jsx("div",{className:"absolute inset-0 bg-gray-50 dark:bg-gray-700"}),K.filter(e=>e.track===s).map(e=>(0,a.jsxs)("div",{className:`absolute top-1 bottom-1 rounded cursor-move border-2 transition-colors
                        ${S===e.id?"border-blue-500 bg-blue-200 dark:bg-blue-800":"border-gray-400 bg-white dark:bg-gray-600"}
                      `,style:{left:`${O(e.startTime)}px`,width:`${O(e.duration)}px`},onClick:s=>{s.stopPropagation(),T(e.id)},children:[(0,a.jsxs)("div",{className:"p-1 truncate",children:[a.jsx("div",{className:"text-xs font-medium",children:e.name}),a.jsx("div",{className:"text-xs text-gray-500",children:A(e.duration)})]}),e.keyframes.map(s=>a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-yellow-400",style:{left:`${O(s.time-e.startTime)}px`},title:`${s.property}: ${s.value}`},s.id))]},e.id))]},e.id))})})]}),S&&a.jsx("div",{className:"h-48 bg-white dark:bg-gray-800 border-t p-4",children:(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"text-sm",children:["Keyframe Editor - ",K.find(e=>e.id===S)?.name]})}),(0,a.jsxs)(l.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx(o._,{children:"Opacity"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(d.i,{value:[K.find(e=>e.id===S)?.properties.opacity||1],onValueChange:([e])=>{S&&D(S,{properties:{...K.find(e=>e.id===S)?.properties,opacity:e}})},min:0,max:1,step:.1,className:"flex-1"}),a.jsx(r.z,{size:"sm",onClick:()=>S&&I(S,"opacity",1),children:"+Key"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(o._,{children:"Scale"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(d.i,{value:[K.find(e=>e.id===S)?.properties.scale||1],onValueChange:([e])=>{S&&D(S,{properties:{...K.find(e=>e.id===S)?.properties,scale:e}})},min:.1,max:3,step:.1,className:"flex-1"}),a.jsx(r.z,{size:"sm",onClick:()=>S&&I(S,"scale",1),children:"+Key"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(o._,{children:"Rotation"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(d.i,{value:[K.find(e=>e.id===S)?.properties.rotation||0],onValueChange:([e])=>{S&&D(S,{properties:{...K.find(e=>e.id===S)?.properties,rotation:e}})},min:-180,max:180,step:1,className:"flex-1"}),a.jsx(r.z,{size:"sm",onClick:()=>S&&I(S,"rotation",0),children:"+Key"})]})]}),(0,a.jsxs)("div",{children:[a.jsx(o._,{children:"Position X"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(c.I,{type:"number",value:K.find(e=>e.id===S)?.properties.x||0,onChange:e=>{S&&D(S,{properties:{...K.find(e=>e.id===S)?.properties,x:parseInt(e.target.value)}})},className:"flex-1"}),a.jsx(r.z,{size:"sm",onClick:()=>S&&I(S,"x",0),children:"+Key"})]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(o._,{className:"text-sm",children:"Keyframes"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Time: ",A(k)]})]}),a.jsx("div",{className:"mt-2 space-y-1 max-h-20 overflow-y-auto",children:K.find(e=>e.id===S)?.keyframes.map(e=>a.jsxs("div",{className:"flex items-center justify-between text-xs p-1 bg-gray-50 dark:bg-gray-700 rounded",children:[a.jsxs("span",{children:[A(e.time)," - ",e.property,": ",e.value]}),a.jsx(r.z,{size:"sm",variant:"ghost",onClick:()=>S&&P(S,e.id),children:a.jsx(g.Z,{className:"h-3 w-3"})})]},e.id))})]})]})]})})]})}}};