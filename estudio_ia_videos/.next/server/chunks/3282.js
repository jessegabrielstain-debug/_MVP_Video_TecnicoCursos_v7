"use strict";exports.id=3282,exports.ids=[3282],exports.modules={878674:(e,a,t)=>{t.d(a,{r:()=>es});var s={};t.r(s);var l=t(210326),i=t(517577);let r={elements:[],layers:[{id:"layer-1",name:"Background",visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0},{id:"layer-2",name:"Content",visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0}],timeline:{duration:30,currentTime:0,playing:!1,loop:!1,keyframes:[],markers:[]},selectedElementId:null,clipboard:[],history:[],historyIndex:-1,canvas:{width:1920,height:1080,backgroundColor:"#ffffff",zoom:1,pan:{x:0,y:0}},tools:{activeTool:"select",brush:{size:10,color:"#000000",opacity:1}},preview:{enabled:!1,quality:"medium",showGrid:!0,showRulers:!0,showGuides:!0}};var n=t(858441),c=t(120485);let o=e=>!!e&&"object"==typeof e&&"src"in e&&"string"==typeof e.src,d=()=>{!function(e){let[a,t]=(0,i.useState)(r),[s,l]=(0,i.useState)(!1),[n,c]=(0,i.useState)(null);(0,i.useRef)();let o=(0,i.useCallback)((e,a,s)=>{let l={id:`history-${Date.now()}`,timestamp:new Date,action:e,data:a,description:s};t(e=>({...e,history:[...e.history.slice(0,e.historyIndex+1),l],historyIndex:e.historyIndex+1}))},[]);(0,i.useCallback)((e,a={})=>{let s={id:`element-${Date.now()}`,type:e,name:`${e} ${Date.now()}`,x:100,y:100,width:200,height:100,rotation:0,opacity:1,visible:!0,locked:!1,layerId:"layer-2",style:{},...function(e){switch(e){case"text":return{content:"Text Element",fontSize:24,fontFamily:"Arial",fontWeight:"normal",color:"#000000",textAlign:"left",lineHeight:1.2,letterSpacing:0};case"image":return{src:"",alt:"Image",fit:"cover"};case"shape":return{shape:"rectangle",fill:"#3b82f6",stroke:"#1e40af",strokeWidth:2};case"avatar":return{avatarId:"default",pose:"standing",expression:"neutral",clothing:"casual",background:"transparent",lighting:"natural",animation:"idle"};default:return{}}}(e),...a};return t(e=>({...e,elements:[...e.elements,s],selectedElementId:s.id})),o("createElement",s,`Created ${e} element`),s.id},[o]),(0,i.useCallback)((e,a)=>{t(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,...a}:t)})),o("updateElement",{elementId:e,updates:a},"Updated element")},[o]),(0,i.useCallback)(e=>{t(a=>({...a,elements:a.elements.filter(a=>a.id!==e),selectedElementId:a.selectedElementId===e?null:a.selectedElementId})),o("deleteElement",{elementId:e},"Deleted element")},[o]),(0,i.useCallback)(e=>{t(a=>{let t=a.elements.find(a=>a.id===e);if(!t)return a;let s={...t,id:`element-${Date.now()}`,name:`${t.name} Copy`,x:t.x+20,y:t.y+20};return{...a,elements:[...a.elements,s],selectedElementId:s.id}}),o("duplicateElement",{elementId:e},"Duplicated element")},[o]),(0,i.useCallback)(e=>{t(a=>({...a,selectedElementId:e}))},[]),(0,i.useCallback)(()=>{t(e=>({...e,selectedElementId:null}))},[]),(0,i.useCallback)(e=>{let a={id:`layer-${Date.now()}`,name:e||`Layer ${Date.now()}`,visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0};return t(e=>({...e,layers:[...e.layers,a]})),o("createLayer",a,`Created layer: ${a.name}`),a.id},[o]),(0,i.useCallback)((e,a)=>{t(t=>({...t,layers:t.layers.map(t=>t.id===e?{...t,...a}:t)})),o("updateLayer",{layerId:e,updates:a},"Updated layer")},[o]),(0,i.useCallback)(e=>{t(a=>{let t=a.elements.filter(a=>a.layerId===e),s=a.elements.filter(a=>a.layerId!==e);return{...a,layers:a.layers.filter(a=>a.id!==e),elements:s,selectedElementId:t.some(e=>e.id===a.selectedElementId)?null:a.selectedElementId}}),o("deleteLayer",{layerId:e},"Deleted layer")},[o]),(0,i.useCallback)((e,a)=>{t(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,layerId:a}:t)})),o("moveElementToLayer",{elementId:e,targetLayerId:a},"Moved element to layer")},[o]),(0,i.useCallback)(()=>{t(e=>({...e,timeline:{...e.timeline,playing:!0}}))},[]),(0,i.useCallback)(()=>{t(e=>({...e,timeline:{...e.timeline,playing:!1}}))},[]),(0,i.useCallback)(e=>{t(a=>({...a,timeline:{...a.timeline,currentTime:Math.max(0,Math.min(e,a.timeline.duration))}}))},[]),(0,i.useCallback)(e=>{t(a=>({...a,timeline:{...a.timeline,duration:Math.max(1,e)}}))},[]),(0,i.useCallback)((e,a)=>{t(t=>({...t,canvas:{...t.canvas,width:e,height:a}})),o("setCanvasSize",{width:e,height:a},"Changed canvas size")},[o]),(0,i.useCallback)(e=>{t(a=>({...a,canvas:{...a.canvas,zoom:Math.max(.1,Math.min(5,e))}}))},[]),(0,i.useCallback)((e,a)=>{t(t=>({...t,canvas:{...t.canvas,pan:{x:e,y:a}}}))},[]),(0,i.useCallback)(e=>{t(a=>({...a,tools:{...a.tools,activeTool:e}}))},[]),(0,i.useCallback)(()=>{a.historyIndex>0&&t(e=>({...e,historyIndex:e.historyIndex-1}))},[a.historyIndex]),(0,i.useCallback)(()=>{a.historyIndex<a.history.length-1&&t(e=>({...e,historyIndex:e.historyIndex+1}))},[a.historyIndex,a.history.length]),(0,i.useCallback)(()=>{if(!a.selectedElementId)return;let e=a.elements.find(e=>e.id===a.selectedElementId);e&&t(a=>({...a,clipboard:[e]}))},[a.selectedElementId,a.elements]),(0,i.useCallback)(()=>{if(0===a.clipboard.length)return;let e=a.clipboard[0],s={...e,id:`element-${Date.now()}`,name:`${e.name} Copy`,x:e.x+20,y:e.y+20};t(e=>({...e,elements:[...e.elements,s],selectedElementId:s.id})),o("pasteElements",[s],"Pasted element")},[a.clipboard,o]),(0,i.useCallback)(async()=>{},[void 0,a]),(0,i.useCallback)(async e=>{l(!0);try{let a=localStorage.getItem(`editor-project-${e}`);if(a){let e=JSON.parse(a);t(e.state)}}catch(e){c("Failed to load project")}finally{l(!1)}},[]),a.historyIndex,a.historyIndex,a.history.length}();let{generateContent:e,optimizeContent:a}=(0,n.X)(),{shareDocument:t,inviteUser:s}=(0,c.H)(),[l,d]=(0,i.useState)([]),[m,x]=(0,i.useState)({duration:6e4,currentTime:0,playbackRate:1,isPlaying:!1,loop:!1,markers:[],zoom:1,viewportStart:0,viewportEnd:6e4}),[u,h]=(0,i.useState)({width:1920,height:1080,zoom:1,pan:{x:0,y:0},rotation:{x:0,y:0,z:0},projection:"perspective",camera:{position:{x:0,y:0,z:10},target:{x:0,y:0,z:0},fov:45}}),[y,p]=(0,i.useState)({states:[],currentIndex:-1,maxStates:50}),[f,g]=(0,i.useState)({isDragging:!1,draggedItem:null,dropTarget:null,dragPreview:null}),[b,j]=(0,i.useState)({selectedLayers:[],selectedKeyframes:[],selectionBounds:null}),[v,k]=(0,i.useState)(null),[w,N]=(0,i.useState)(!1),[C,z]=(0,i.useState)(!1),[Z,S]=(0,i.useState)(null),L=(0,i.useRef)();(0,i.useEffect)(()=>(I(),()=>{L.current&&cancelAnimationFrame(L.current)}),[]),(0,i.useEffect)(()=>{if(m.isPlaying){let e=()=>{x(e=>{let a=e.currentTime+16.67*e.playbackRate;return a>=e.duration?e.loop?{...e,currentTime:0}:{...e,currentTime:e.duration,isPlaying:!1}:{...e,currentTime:a}}),L.current=requestAnimationFrame(e)};L.current=requestAnimationFrame(e)}else L.current&&cancelAnimationFrame(L.current)},[m.isPlaying,m.playbackRate,m.loop,m.duration]);let I=async()=>{try{N(!0),d([{id:"background",name:"Background",type:"image",visible:!0,locked:!1,opacity:1,blendMode:"normal",position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},content:{src:"https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=industrial%20workplace%20safety%20training%20environment&image_size=landscape_16_9",type:"image"},keyframes:[],effects:[],metadata:{duration:6e4,startTime:0,endTime:6e4,tags:["background","workplace"],compliance:{nrStandards:["NR-12"],accessibilityLevel:"AA",safetyRating:95,warnings:[],suggestions:[]}}}]),em("Initial state")}catch(e){S("Failed to initialize editor"),console.error("Editor initialization error:",e)}finally{N(!1)}},M=(0,i.useCallback)((e,a)=>{let t={id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${e.charAt(0).toUpperCase()+e.slice(1)} Layer`,type:e,visible:!0,locked:!1,opacity:1,blendMode:"normal",position:{x:0,y:0,z:l.length},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},content:a||eL(e),keyframes:[],effects:[],metadata:{duration:m.duration,startTime:m.currentTime,endTime:m.currentTime+5e3,tags:[e],compliance:{nrStandards:[],accessibilityLevel:"AA",safetyRating:80,warnings:[],suggestions:[]}}};return d(e=>[...e,t]),em(`Added ${e} layer`),t},[l.length,m.currentTime,m.duration]),A=(0,i.useCallback)(e=>{d(a=>a.filter(a=>a.id!==e)),j(a=>({...a,selectedLayers:a.selectedLayers.filter(a=>a!==e)})),em("Removed layer")},[]),E=(0,i.useCallback)(e=>{let a=l.find(a=>a.id===e);if(!a)throw Error("Layer not found");let t={...a,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${a.name} Copy`,position:{...a.position,x:a.position.x+50,y:a.position.y+50}};return d(e=>[...e,t]),em("Duplicated layer"),t},[l]),$=(0,i.useCallback)((e,a)=>{d(t=>{let s=t.findIndex(a=>a.id===e);if(-1===s)return t;let l=[...t],[i]=l.splice(s,1);return l.splice(a,0,i),l}),em("Moved layer")},[]),R=(0,i.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,...a}:t)),em("Updated layer")},[]),P=(0,i.useCallback)(e=>{R(e,{visible:!l.find(a=>a.id===e)?.visible})},[l,R]),T=(0,i.useCallback)(e=>{R(e,{locked:!l.find(a=>a.id===e)?.locked})},[l,R]),D=(0,i.useCallback)(e=>{x(a=>({...a,currentTime:Math.max(0,Math.min(e,a.duration))}))},[]),O=(0,i.useCallback)(()=>{x(e=>({...e,isPlaying:!0}))},[]),V=(0,i.useCallback)(()=>{x(e=>({...e,isPlaying:!1}))},[]),_=(0,i.useCallback)(()=>{x(e=>({...e,isPlaying:!1,currentTime:0}))},[]),q=(0,i.useCallback)(e=>{x(a=>({...a,playbackRate:Math.max(.1,Math.min(e,4))}))},[]),U=(0,i.useCallback)(e=>{let a={...e,id:`marker_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};x(e=>({...e,markers:[...e.markers,a].sort((e,a)=>e.time-a.time)})),em("Added marker")},[]),F=(0,i.useCallback)(e=>{x(a=>({...a,markers:a.markers.filter(a=>a.id!==e)})),em("Removed marker")},[]),K=(0,i.useCallback)(e=>{x(a=>({...a,zoom:Math.max(.1,Math.min(e,10))}))},[]),J=(0,i.useCallback)((e,a,t)=>{let s={id:`keyframe_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,time:a,properties:t,easing:"ease-in-out",interpolation:"bezier"};return d(a=>a.map(a=>a.id===e?{...a,keyframes:[...a.keyframes,s].sort((e,a)=>e.time-a.time)}:a)),em("Added keyframe"),s},[]),B=(0,i.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,keyframes:t.keyframes.filter(e=>e.id!==a)}:t)),em("Removed keyframe")},[]),H=(0,i.useCallback)((e,a,t)=>{d(s=>s.map(s=>s.id===e?{...s,keyframes:s.keyframes.map(e=>e.id===a?{...e,...t}:e)}:s)),em("Updated keyframe")},[]),W=(0,i.useCallback)((e,a,t)=>{H(e,a,{time:t})},[H]),G=(0,i.useCallback)((e,a)=>{let t={...a,id:`effect_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return d(a=>a.map(a=>a.id===e?{...a,effects:[...a.effects,t]}:a)),em("Added effect"),t},[]),X=(0,i.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,effects:t.effects.filter(e=>e.id!==a)}:t)),em("Removed effect")},[]),Y=(0,i.useCallback)((e,a,t)=>{d(s=>s.map(s=>s.id===e?{...s,effects:s.effects.map(e=>e.id===a?{...e,...t}:e)}:s)),em("Updated effect")},[]),Q=(0,i.useCallback)(e=>{h(a=>({...a,zoom:Math.max(.1,Math.min(e,10))}))},[]),ee=(0,i.useCallback)(e=>{h(a=>({...a,pan:e}))},[]),ea=(0,i.useCallback)(e=>{h(a=>({...a,rotation:e}))},[]),et=(0,i.useCallback)(()=>{h(e=>({...e,zoom:1,pan:{x:0,y:0},rotation:{x:0,y:0,z:0}}))},[]),es=(0,i.useCallback)(()=>{et()},[et]),el=(0,i.useCallback)((e,a=!1)=>{j(t=>({...t,selectedLayers:a?t.selectedLayers.includes(e)?t.selectedLayers.filter(a=>a!==e):[...t.selectedLayers,e]:[e]}))},[]),ei=(0,i.useCallback)((e,a=!1)=>{j(t=>({...t,selectedKeyframes:a?t.selectedKeyframes.includes(e)?t.selectedKeyframes.filter(a=>a!==e):[...t.selectedKeyframes,e]:[e]}))},[]),er=(0,i.useCallback)(()=>{j({selectedLayers:[],selectedKeyframes:[],selectionBounds:null})},[]),en=(0,i.useCallback)(()=>{j(e=>({...e,selectedLayers:l.map(e=>e.id)}))},[l]),ec=(0,i.useCallback)(()=>{b.selectedLayers.length>0&&k({type:"layer",data:l.filter(e=>b.selectedLayers.includes(e.id)),timestamp:new Date})},[l,b.selectedLayers]),eo=(0,i.useCallback)(()=>{ec(),b.selectedLayers.forEach(e=>A(e))},[ec,b.selectedLayers,A]),ed=(0,i.useCallback)(()=>{if(!v||"layer"!==v.type)return;let e=v.data.map(e=>({...e,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${e.name} Copy`,position:{...e.position,x:e.position.x+50,y:e.position.y+50}}));d(a=>[...a,...e]),em("Pasted layers")},[v]),em=(0,i.useCallback)(e=>{let a={id:`state_${Date.now()}`,timestamp:new Date,layers:JSON.parse(JSON.stringify(l)),timeline:JSON.parse(JSON.stringify(m)),viewport:JSON.parse(JSON.stringify(u)),description:e};p(e=>{let t=e.states.slice(0,e.currentIndex+1);return t.push(a),t.length>e.maxStates&&t.shift(),{...e,states:t,currentIndex:t.length-1}})},[l,m,u]),ex=(0,i.useCallback)(()=>{if(y.currentIndex>0){let e=y.states[y.currentIndex-1];d(e.layers),x(e.timeline),h(e.viewport),p(e=>({...e,currentIndex:e.currentIndex-1}))}},[y]),eu=(0,i.useCallback)(()=>{if(y.currentIndex<y.states.length-1){let e=y.states[y.currentIndex+1];d(e.layers),x(e.timeline),h(e.viewport),p(e=>({...e,currentIndex:e.currentIndex+1}))}},[y]),eh=(0,i.useCallback)(async e=>{z(!0);try{let a=await eI(e);return M(eM(e),a)}finally{z(!1)}},[M]),ey=(0,i.useCallback)(async e=>{z(!0);try{let a={layers:l,timeline:m,viewport:u,metadata:{version:"1.0",created:new Date,format:e}};if("json"===e)return new Blob([JSON.stringify(a,null,2)],{type:"application/json"});throw Error(`Export format ${e} not yet implemented`)}finally{z(!1)}},[l,m,u]),ep=(0,i.useCallback)(async(e,a)=>{let t=l.find(a=>a.id===e);if(!t)throw Error("Layer not found");if("json"===a)return new Blob([JSON.stringify(t,null,2)],{type:"application/json"});throw Error(`Export format ${a} not yet implemented`)},[l]),ef=(0,i.useCallback)(async(a,t)=>{z(!0);try{let s=await e(a,{type:t,context:"safety-training"});return M(t,s)}finally{z(!1)}},[e,M]),eg=(0,i.useCallback)(async()=>{z(!0);try{let e=await Promise.all(l.map(async e=>{let t=await a(e.content,{type:"layer-optimization",goals:["performance","engagement","accessibility"]});return{...e,content:t}}));d(e),em("Optimized timeline")}finally{z(!1)}},[l,a]),eb=(0,i.useCallback)(async e=>{let a=l.find(a=>a.id===e);return a?[{id:"fade_in",name:"Fade In",type:"transition",enabled:!0,parameters:{duration:1e3,easing:"ease-in"},startTime:a.metadata.startTime,duration:1e3},{id:"glow",name:"Safety Glow",type:"filter",enabled:!0,parameters:{color:"#FFD700",intensity:.5},startTime:a.metadata.startTime,duration:a.metadata.duration}]:[]},[l]),ej=(0,i.useCallback)(async()=>{em("Auto-synced timeline")},[]),ev=(0,i.useCallback)(async()=>await t("editor-project",{layers:l,timeline:m,viewport:u}),[l,m,u,t]),ek=(0,i.useCallback)(async(e,a)=>{await s(e,a)},[s]),ew=(0,i.useCallback)(async()=>{let e=[],a=[],t=new Set,s="AAA",i=0;return l.forEach(l=>{l.metadata.compliance.warnings.forEach(a=>e.push(a)),l.metadata.compliance.suggestions.forEach(e=>a.push(e)),l.metadata.compliance.nrStandards.forEach(e=>t.add(e)),"A"===l.metadata.compliance.accessibilityLevel?s="A":"AA"===l.metadata.compliance.accessibilityLevel&&"AAA"===s&&(s="AA"),i+=l.metadata.compliance.safetyRating}),i=l.length>0?i/l.length:0,{nrStandards:Array.from(t),accessibilityLevel:s,safetyRating:i,warnings:[...new Set(e)],suggestions:[...new Set(a)]}},[l]),eN=(0,i.useCallback)(async()=>{z(!0);try{let e=await Promise.all(l.map(async e=>{if(e.metadata.compliance.warnings.length>0){let t=await a(e.content,{type:"compliance-optimization",goals:["accessibility","safety","standards"],constraints:{nrStandards:e.metadata.compliance.nrStandards,accessibilityLevel:"AA"}});return{...e,content:t,metadata:{...e.metadata,compliance:{...e.metadata.compliance,warnings:[],safetyRating:Math.min(100,e.metadata.compliance.safetyRating+10)}}}}return e}));d(e),em("Fixed compliance issues")}finally{z(!1)}},[l,a]),eC=(0,i.useCallback)(async()=>{let e=await ew();return`
# Relat\xf3rio de Acessibilidade

## Resumo
- N\xedvel de Acessibilidade: ${e.accessibilityLevel}
- Avalia\xe7\xe3o de Seguran\xe7a: ${e.safetyRating.toFixed(1)}/100
- Normas NR: ${e.nrStandards.join(", ")}

## Avisos (${e.warnings.length})
${e.warnings.map(e=>`- ${e}`).join("\n")}

## Sugest\xf5es (${e.suggestions.length})
${e.suggestions.map(e=>`- ${e}`).join("\n")}

## Camadas Analisadas
${l.map(e=>`
### ${e.name}
- Tipo: ${e.type}
- Dura\xe7\xe3o: ${e.metadata.duration/1e3}s
- Avalia\xe7\xe3o: ${e.metadata.compliance.safetyRating}/100
`).join("\n")}
    `},[ew,l]),ez=(0,i.useCallback)(async()=>{z(!0);try{let e=l.map(e=>({...e,effects:e.effects.filter(e=>e.enabled),keyframes:e.keyframes.filter((e,a,t)=>0===a||a===t.length-1||Math.abs(e.time-t[a-1].time)>100)}));d(e),em("Optimized performance")}finally{z(!1)}},[l]),eZ=(0,i.useCallback)(async()=>{let e=l.map(e=>o(e.content)?e.content.src:null).filter(e=>"string"==typeof e&&e.length>0);await Promise.all(e.map(e=>new Promise((a,t)=>{let s=new Image;s.onload=a,s.onerror=t,s.src=e})))},[l]),eS=(0,i.useCallback)(()=>{"caches"in window&&caches.delete("editor-assets")},[]),eL=e=>{switch(e){case"text":return{text:"Novo texto",fontSize:24,color:"#000000"};case"image":return{src:"",alt:"Nova imagem"};case"video":case"audio":return{src:"",autoplay:!1,loop:!1};case"animation":return{type:"fade",duration:1e3};case"interaction":return{type:"button",action:"next"};case"safety":return{type:"warning",message:"Aten\xe7\xe3o: \xe1rea de risco"};default:return{}}},eI=async e=>({src:URL.createObjectURL(e),name:e.name,size:e.size}),eM=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":"image";return{layers:l,timeline:m,viewport:u,history:y,dragDrop:f,selection:b,clipboard:v,isLoading:w,isProcessing:C,error:Z,addLayer:M,removeLayer:A,duplicateLayer:E,moveLayer:$,updateLayer:R,toggleLayerVisibility:P,toggleLayerLock:T,setCurrentTime:D,play:O,pause:V,stop:_,setPlaybackRate:q,addMarker:U,removeMarker:F,setTimelineZoom:K,addKeyframe:J,removeKeyframe:B,updateKeyframe:H,moveKeyframe:W,addEffect:G,removeEffect:X,updateEffect:Y,setViewportZoom:Q,setViewportPan:ee,setViewportRotation:ea,resetViewport:et,fitToContent:es,selectLayer:el,selectKeyframe:ei,clearSelection:er,selectAll:en,copy:ec,cut:eo,paste:ed,undo:ex,redo:eu,saveState:em,importAsset:eh,exportProject:ey,exportLayer:ep,generateContent:ef,optimizeTimeline:eg,suggestEffects:eb,autoSync:ej,shareProject:ev,inviteCollaborator:ek,validateCompliance:ew,fixComplianceIssues:eN,generateAccessibilityReport:eC,optimizePerformance:ez,preloadAssets:eZ,clearCache:eS}};var m=t(482610),x=t(483431),u=t(55009),h=t(506598),y=t(962329),p=t(830370),f=t(161182),g=t(671709),b=t(849758),j=t(256562),v=t(701572),k=t(253468),w=t(758038),N=t(549163),C=t(31215),z=t(63685),Z=t(331540),S=t(376993),L=t(323133),I=t(899316),M=t(143810);let A=(0,t(862881).Z)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var E=t(920176),$=t(599598),R=t(100924),P=t(971312),T=t(898360),D=t(630361),O=t(6309),V=t(871059),_=t(794893),q=t(821608),U=t(110976),F=t(9015),K=t(707937),J=t(211962),B=t(454689),H=t(188378),W=t(350949),G=t(112714),X=t(891216),Y=t(43426),Q=t(898091),ee=t(303634),ea=t(136283),et=t(747405);let es=({projectId:e,initialData:a,onSave:t,onExport:r,className:n})=>{let c=d(),o=(0,i.useRef)(null),es=(0,i.useRef)(null),[el,ei]=(0,i.useState)("layers"),[er,en]=(0,i.useState)("select"),[ec,eo]=(0,i.useState)(!0),[ed,em]=(0,i.useState)(!0),[ex,eu]=(0,i.useState)("2d"),[eh,ey]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"z":e.preventDefault(),e.shiftKey?c.redo():c.undo();break;case"c":e.preventDefault(),c.copy();break;case"x":e.preventDefault(),c.cut();break;case"v":e.preventDefault(),c.paste();break;case"s":e.preventDefault(),ep();break;case"a":e.preventDefault(),c.selectAll()}switch(e.key){case"v":en("select");break;case"m":en("move");break;case"t":en("text");break;case" ":e.preventDefault(),c.timeline.isPlaying?c.pause():c.play()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]);let ep=(0,i.useCallback)(()=>{let e={layers:c.layers,timeline:c.timeline,viewport:c.viewport};t?.(e)},[c,t]),ef=(0,i.useCallback)(async e=>{try{let a=await c.exportProject(e),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`project.${e}`,s.click(),URL.revokeObjectURL(t),r?.(e)}catch(e){console.error("Export failed:",e)}},[c,r]),eg=(0,i.useCallback)(async e=>{let a=e.target.files;if(a)for(let e of Array.from(a))try{await c.importAsset(e)}catch(e){console.error("Import failed:",e)}},[c]),eb=e=>{let a=Math.floor(e/1e3);return`${Math.floor(a/60)}:${(a%60).toString().padStart(2,"0")}`},ej=e=>{switch(e){case"text":return f.Z;case"image":return g.Z;case"video":return b.Z;case"audio":return j.Z;case"animation":return v.Z;case"interaction":return k.Z;case"safety":return w.Z;default:return N.Z}};return c.isLoading?l.jsx("div",{className:"flex items-center justify-center h-96",children:(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{children:"Carregando editor..."})]})}):(0,l.jsxs)("div",{className:(0,et.cn)("flex flex-col h-screen bg-gray-100",n),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white border-b",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:ep,title:"Salvar (Ctrl+S)",children:l.jsx(C.Z,{className:"w-4 h-4"})}),(0,l.jsxs)("label",{children:[l.jsx(m.z,{variant:"ghost",size:"sm",title:"Importar arquivo",asChild:!0,children:l.jsx("span",{children:l.jsx(z.Z,{className:"w-4 h-4"})})}),l.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*,audio/*",onChange:eg,className:"hidden"})]}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>ef("json"),title:"Exportar projeto",children:l.jsx(Z.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.shareProject(),title:"Compartilhar",children:l.jsx(S.Z,{className:"w-4 h-4"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.undo,disabled:c.history.currentIndex<=0,title:"Desfazer (Ctrl+Z)",children:l.jsx(L.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.redo,disabled:c.history.currentIndex>=c.history.states.length-1,title:"Refazer (Ctrl+Shift+Z)",children:l.jsx(I.Z,{className:"w-4 h-4"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.copy,disabled:0===c.selection.selectedLayers.length,title:"Copiar (Ctrl+C)",children:l.jsx(M.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.cut,disabled:0===c.selection.selectedLayers.length,title:"Recortar (Ctrl+X)",children:l.jsx(s.Cut,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.paste,disabled:!c.clipboard,title:"Colar (Ctrl+V)",children:l.jsx(A,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex items-center gap-1 border-r pr-2",children:[{id:"select",icon:E.Z,title:"Selecionar (V)"},{id:"move",icon:$.Z,title:"Mover (M)"},{id:"text",icon:f.Z,title:"Texto (T)"},{id:"image",icon:g.Z,title:"Imagem"},{id:"video",icon:b.Z,title:"V\xeddeo"},{id:"audio",icon:j.Z,title:"\xc1udio"},{id:"animation",icon:v.Z,title:"Anima\xe7\xe3o"},{id:"interaction",icon:k.Z,title:"Intera\xe7\xe3o"},{id:"safety",icon:w.Z,title:"Seguran\xe7a"}].map(e=>l.jsx(m.z,{variant:er===e.id?"default":"ghost",size:"sm",onClick:()=>en(e.id),title:e.title,children:l.jsx(e.icon,{className:"w-4 h-4"})},e.id))}),(0,l.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[l.jsx(m.z,{variant:ec?"default":"ghost",size:"sm",onClick:()=>eo(!ec),title:"Mostrar grade",children:l.jsx(R.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>eu("2d"===ex?"3d":"2d"),title:`Modo ${"2d"===ex?"3D":"2D"}`,children:"2d"===ex?"3D":"2D"}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>ey(!eh),title:"Tela cheia",children:l.jsx(P.Z,{className:"w-4 h-4"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.optimizeTimeline(),disabled:c.isProcessing,title:"Otimizar com IA",children:l.jsx(T.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.validateCompliance(),title:"Verificar conformidade",children:l.jsx(D.Z,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 border-b",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.setCurrentTime(0),title:"Ir para o in\xedcio",children:l.jsx(O.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.timeline.isPlaying?c.pause:c.play,title:c.timeline.isPlaying?"Pausar (Espa\xe7o)":"Reproduzir (Espa\xe7o)",children:c.timeline.isPlaying?l.jsx(V.Z,{className:"w-4 h-4"}):l.jsx(_.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:c.stop,title:"Parar",children:l.jsx(q.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.setCurrentTime(c.timeline.duration),title:"Ir para o fim",children:l.jsx(U.Z,{className:"w-4 h-4"})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("span",{className:"text-sm font-mono",children:eb(c.timeline.currentTime)}),l.jsx("span",{className:"text-sm text-gray-500",children:"/"}),l.jsx("span",{className:"text-sm font-mono text-gray-500",children:eb(c.timeline.duration)})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("span",{className:"text-sm",children:"Velocidade:"}),(0,l.jsxs)("select",{value:c.timeline.playbackRate,onChange:e=>c.setPlaybackRate(Number(e.target.value)),className:"text-sm border rounded px-2 py-1",children:[l.jsx("option",{value:.25,children:"0.25x"}),l.jsx("option",{value:.5,children:"0.5x"}),l.jsx("option",{value:1,children:"1x"}),l.jsx("option",{value:1.5,children:"1.5x"}),l.jsx("option",{value:2,children:"2x"})]})]}),c.isProcessing&&(0,l.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"text-sm",children:"Processando..."})]})]}),(0,l.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex-1 relative bg-gray-100 overflow-hidden",children:[ed&&(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:"absolute top-0 left-8 right-0 h-8 bg-white border-b flex items-end",children:Array.from({length:Math.ceil(c.viewport.width/50)},(e,a)=>(0,l.jsxs)("div",{className:"relative",style:{width:50*c.viewport.zoom},children:[l.jsx("div",{className:"absolute bottom-0 left-0 w-px h-2 bg-gray-400"}),l.jsx("span",{className:"absolute bottom-0 left-1 text-xs text-gray-500",children:50*a})]},a))}),l.jsx("div",{className:"absolute top-8 left-0 bottom-0 w-8 bg-white border-r flex flex-col justify-end",children:Array.from({length:Math.ceil(c.viewport.height/50)},(e,a)=>(0,l.jsxs)("div",{className:"relative",style:{height:50*c.viewport.zoom},children:[l.jsx("div",{className:"absolute top-0 right-0 h-px w-2 bg-gray-400"}),l.jsx("span",{className:"absolute top-1 right-1 text-xs text-gray-500 transform -rotate-90 origin-center",style:{fontSize:"10px"},children:50*a})]},a))})]}),(0,l.jsxs)("div",{className:(0,et.cn)("absolute bg-white shadow-lg",ed?"top-8 left-8":"top-4 left-4"),style:{width:c.viewport.width*c.viewport.zoom,height:c.viewport.height*c.viewport.zoom,transform:`translate(${c.viewport.pan.x}px, ${c.viewport.pan.y}px)`},children:[l.jsx("canvas",{ref:o,width:c.viewport.width,height:c.viewport.height,className:"w-full h-full",style:{background:ec?"radial-gradient(circle, #ccc 1px, transparent 1px)":"white",backgroundSize:ec?"20px 20px":"auto"}}),c.layers.filter(e=>e.visible).map(e=>{let a=ej(e.type);return(0,l.jsxs)("div",{className:(0,et.cn)("absolute border-2 cursor-pointer transition-all",c.selection.selectedLayers.includes(e.id)?"border-blue-500 bg-blue-50":"border-transparent hover:border-gray-300"),style:{left:e.position.x,top:e.position.y,width:100,height:60,transform:`scale(${e.scale.x}, ${e.scale.y}) rotate(${e.rotation.z}deg)`,opacity:e.opacity,zIndex:e.position.z},onClick:()=>c.selectLayer(e.id),children:[l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white rounded",children:"image"===e.type&&e.content?.src?l.jsx("img",{src:e.content.src,alt:e.name,className:"w-full h-full object-cover rounded"}):"text"===e.type?l.jsx("div",{className:"text-center text-xs",style:{fontSize:Math.min(e.content?.fontSize||12,12),color:e.content?.color||"#000"},children:e.content?.text||e.name}):l.jsx(a,{className:"w-6 h-6 text-gray-400"})}),e.locked&&l.jsx(F.Z,{className:"absolute -top-2 -right-2 w-4 h-4 text-red-500 bg-white rounded-full p-0.5"})]},e.id)})]}),(0,l.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[l.jsx(m.z,{variant:"outline",size:"sm",onClick:()=>c.setViewportZoom(1.2*c.viewport.zoom),title:"Zoom in",children:l.jsx(K.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"outline",size:"sm",onClick:()=>c.setViewportZoom(c.viewport.zoom/1.2),title:"Zoom out",children:l.jsx(J.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"outline",size:"sm",onClick:c.resetViewport,title:"Reset view",children:l.jsx(B.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"outline",size:"sm",onClick:c.fitToContent,title:"Fit to content",children:l.jsx(P.Z,{className:"w-4 h-4"})})]})]}),l.jsx("div",{className:"w-80 bg-white border-l flex flex-col",children:(0,l.jsxs)(u.mQ,{value:el,onValueChange:ei,className:"flex-1",children:[(0,l.jsxs)(u.dr,{className:"grid w-full grid-cols-4",children:[(0,l.jsxs)(u.SP,{value:"layers",children:[l.jsx(N.Z,{className:"w-4 h-4 mr-1"}),"Camadas"]}),(0,l.jsxs)(u.SP,{value:"properties",children:[l.jsx(H.Z,{className:"w-4 h-4 mr-1"}),"Props"]}),(0,l.jsxs)(u.SP,{value:"effects",children:[l.jsx(v.Z,{className:"w-4 h-4 mr-1"}),"Efeitos"]}),(0,l.jsxs)(u.SP,{value:"ai",children:[l.jsx(T.Z,{className:"w-4 h-4 mr-1"}),"IA"]})]}),l.jsx(u.nU,{value:"layers",className:"flex-1 p-4",children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-medium",children:"Camadas"}),(0,l.jsxs)("div",{className:"flex gap-1",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.addLayer("text"),title:"Adicionar camada de texto",children:l.jsx(f.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.addLayer("image"),title:"Adicionar camada de imagem",children:l.jsx(g.Z,{className:"w-4 h-4"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.addLayer("safety"),title:"Adicionar elemento de seguran\xe7a",children:l.jsx(w.Z,{className:"w-4 h-4"})})]})]}),l.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:c.layers.map((e,a)=>{let t=ej(e.type),s=c.selection.selectedLayers.includes(e.id);return(0,l.jsxs)("div",{className:(0,et.cn)("flex items-center gap-2 p-2 rounded cursor-pointer",s?"bg-blue-100":"hover:bg-gray-100"),onClick:()=>c.selectLayer(e.id),children:[l.jsx(t,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"flex-1 text-sm truncate",children:e.name}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[e.metadata.compliance.warnings.length>0&&l.jsx(W.Z,{className:"w-3 h-3 text-yellow-500"}),e.metadata.compliance.safetyRating>=90&&l.jsx(D.Z,{className:"w-3 h-3 text-green-500"}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),c.toggleLayerVisibility(e.id)},className:"p-0 h-auto",children:e.visible?l.jsx(G.Z,{className:"w-3 h-3"}):l.jsx(X.Z,{className:"w-3 h-3 text-gray-400"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),c.toggleLayerLock(e.id)},className:"p-0 h-auto",children:e.locked?l.jsx(F.Z,{className:"w-3 h-3 text-red-500"}):l.jsx(Y.Z,{className:"w-3 h-3"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),c.removeLayer(e.id)},className:"p-0 h-auto text-red-500 hover:text-red-700",children:l.jsx(Q.Z,{className:"w-3 h-3"})})]})]},e.id)})})]})}),l.jsx(u.nU,{value:"properties",className:"flex-1 p-4",children:c.selection.selectedLayers.length>0?l.jsx("div",{className:"space-y-4",children:c.selection.selectedLayers.map(e=>{let a=c.layers.find(a=>a.id===e);return a?(0,l.jsxs)(x.Zb,{children:[l.jsx(x.Ol,{className:"pb-2",children:l.jsx(x.ll,{className:"text-sm",children:a.name})}),(0,l.jsxs)(x.aY,{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Opacidade"}),l.jsx(h.i,{value:[100*a.opacity],onValueChange:([a])=>c.updateLayer(e,{opacity:a/100}),min:0,max:100,step:1,className:"mt-1"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"X"}),l.jsx("input",{type:"number",value:a.position.x,onChange:t=>c.updateLayer(e,{position:{...a.position,x:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Y"}),l.jsx("input",{type:"number",value:a.position.y,onChange:t=>c.updateLayer(e,{position:{...a.position,y:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Z"}),l.jsx("input",{type:"number",value:a.position.z,onChange:t=>c.updateLayer(e,{position:{...a.position,z:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Escala X"}),l.jsx("input",{type:"number",step:"0.1",value:a.scale.x,onChange:t=>c.updateLayer(e,{scale:{...a.scale,x:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Escala Y"}),l.jsx("input",{type:"number",step:"0.1",value:a.scale.y,onChange:t=>c.updateLayer(e,{scale:{...a.scale,y:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Rota\xe7\xe3o"}),l.jsx("input",{type:"number",value:a.rotation.z,onChange:t=>c.updateLayer(e,{rotation:{...a.rotation,z:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]})]}),"text"===a.type&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Texto"}),l.jsx("textarea",{value:a.content?.text||"",onChange:t=>c.updateLayer(e,{content:{...a.content,text:t.target.value}}),className:"w-full text-xs border rounded px-2 py-1 mt-1",rows:3})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Tamanho"}),l.jsx("input",{type:"number",value:a.content?.fontSize||16,onChange:t=>c.updateLayer(e,{content:{...a.content,fontSize:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-xs font-medium",children:"Cor"}),l.jsx("input",{type:"color",value:a.content?.color||"#000000",onChange:t=>c.updateLayer(e,{content:{...a.content,color:t.target.value}}),className:"w-full h-6 border rounded"})]})]})]}),(0,l.jsxs)("div",{className:"pt-2 border-t",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs font-medium",children:"Conformidade"}),(0,l.jsxs)(y.C,{variant:a.metadata.compliance.safetyRating>=90?"default":"secondary",children:[a.metadata.compliance.safetyRating,"/100"]})]}),l.jsx(p.E,{value:a.metadata.compliance.safetyRating,className:"h-2"}),a.metadata.compliance.nrStandards.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.metadata.compliance.nrStandards.map(e=>l.jsx(y.C,{variant:"outline",className:"text-xs",children:e},e))})]})]})]},e):null})}):(0,l.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[l.jsx(N.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Selecione uma camada para ver as propriedades"})]})}),l.jsx(u.nU,{value:"effects",className:"flex-1 p-4",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-medium",children:"Efeitos"}),c.selection.selectedLayers.length>0&&(0,l.jsxs)(m.z,{variant:"outline",size:"sm",onClick:async()=>{let e=c.selection.selectedLayers[0];await c.suggestEffects(e)},children:[l.jsx(ee.Z,{className:"w-4 h-4 mr-1"}),"Sugerir"]})]}),c.selection.selectedLayers.length>0?c.selection.selectedLayers.map(e=>{let a=c.layers.find(a=>a.id===e);return a?(0,l.jsxs)(x.Zb,{children:[l.jsx(x.Ol,{className:"pb-2",children:(0,l.jsxs)(x.ll,{className:"text-sm",children:[a.name," - Efeitos"]})}),l.jsx(x.aY,{children:a.effects.length>0?l.jsx("div",{className:"space-y-2",children:a.effects.map(a=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,l.jsxs)("div",{children:[l.jsx("span",{className:"text-sm font-medium",children:a.name}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[a.type," • ",eb(a.duration)]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.updateEffect(e,a.id,{enabled:!a.enabled}),className:"p-0 h-auto",children:a.enabled?l.jsx(G.Z,{className:"w-3 h-3"}):l.jsx(X.Z,{className:"w-3 h-3 text-gray-400"})}),l.jsx(m.z,{variant:"ghost",size:"sm",onClick:()=>c.removeEffect(e,a.id),className:"p-0 h-auto text-red-500",children:l.jsx(Q.Z,{className:"w-3 h-3"})})]})]},a.id))}):(0,l.jsxs)("div",{className:"text-center text-gray-500 py-4",children:[l.jsx(v.Z,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Nenhum efeito aplicado"})]})})]},e):null}):(0,l.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[l.jsx(v.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Selecione uma camada para gerenciar efeitos"})]})]})}),l.jsx(u.nU,{value:"ai",className:"flex-1 p-4",children:(0,l.jsxs)("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-medium",children:"Assistente de IA"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(m.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.optimizeTimeline(),disabled:c.isProcessing,children:[l.jsx(T.Z,{className:"w-4 h-4 mr-2"}),"Otimizar Timeline"]}),(0,l.jsxs)(m.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.validateCompliance(),disabled:c.isProcessing,children:[l.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Verificar Conformidade"]}),(0,l.jsxs)(m.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.fixComplianceIssues(),disabled:c.isProcessing,children:[l.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Corrigir Problemas"]}),(0,l.jsxs)(m.z,{variant:"outline",className:"w-full justify-start",onClick:()=>c.generateAccessibilityReport(),disabled:c.isProcessing,children:[l.jsx(ea.Z,{className:"w-4 h-4 mr-2"}),"Relat\xf3rio de Acessibilidade"]})]}),(0,l.jsxs)("div",{className:"pt-4 border-t",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Gerar Conte\xfado"}),(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("textarea",{placeholder:"Descreva o conte\xfado que deseja gerar...",className:"w-full text-sm border rounded px-2 py-1",rows:3}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","text"),disabled:c.isProcessing,children:[l.jsx(f.Z,{className:"w-4 h-4 mr-1"}),"Texto"]}),(0,l.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","image"),disabled:c.isProcessing,children:[l.jsx(g.Z,{className:"w-4 h-4 mr-1"}),"Imagem"]}),(0,l.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","animation"),disabled:c.isProcessing,children:[l.jsx(v.Z,{className:"w-4 h-4 mr-1"}),"Anima\xe7\xe3o"]}),(0,l.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>c.generateContent("","safety"),disabled:c.isProcessing,children:[l.jsx(w.Z,{className:"w-4 h-4 mr-1"}),"Seguran\xe7a"]})]})]})]}),(0,l.jsxs)("div",{className:"pt-4 border-t",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Estat\xedsticas do Projeto"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Camadas:"}),l.jsx("span",{children:c.layers.length})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Dura\xe7\xe3o:"}),l.jsx("span",{children:eb(c.timeline.duration)})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Keyframes:"}),l.jsx("span",{children:c.layers.reduce((e,a)=>e+a.keyframes.length,0)})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Efeitos:"}),l.jsx("span",{children:c.layers.reduce((e,a)=>e+a.effects.length,0)})]})]})]})]})})]})})]}),(0,l.jsxs)("div",{className:"h-48 bg-gray-50 border-t",children:[(0,l.jsxs)("div",{className:"h-8 bg-white border-b flex items-center px-4",children:[l.jsx("span",{className:"text-sm font-medium",children:"Timeline"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[l.jsx("span",{className:"text-xs",children:"Zoom:"}),l.jsx(h.i,{value:[c.timeline.zoom],onValueChange:([e])=>c.setTimelineZoom(e),min:.1,max:5,step:.1,className:"w-20"})]})]}),(0,l.jsxs)("div",{ref:es,className:"flex-1 relative overflow-x-auto overflow-y-hidden",style:{height:"calc(100% - 2rem)"},children:[l.jsx("div",{className:"h-6 bg-gray-100 border-b flex",children:Array.from({length:Math.ceil(c.timeline.duration/1e3)},(e,a)=>l.jsx("div",{className:"relative border-r border-gray-300",style:{width:100*c.timeline.zoom},children:(0,l.jsxs)("span",{className:"absolute top-0 left-1 text-xs",children:[a,"s"]})},a))}),l.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-red-500 z-10 pointer-events-none",style:{left:c.timeline.currentTime/1e3*100*c.timeline.zoom},children:l.jsx("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-red-500 transform rotate-45"})}),l.jsx("div",{className:"flex-1",children:c.layers.map((e,a)=>(0,l.jsxs)("div",{className:"h-8 border-b border-gray-200 flex items-center relative",children:[l.jsx("div",{className:(0,et.cn)("absolute h-6 rounded border-2 flex items-center px-2","video"===e.type?"bg-blue-100 border-blue-300":"audio"===e.type?"bg-green-100 border-green-300":"text"===e.type?"bg-yellow-100 border-yellow-300":"image"===e.type?"bg-purple-100 border-purple-300":"bg-gray-100 border-gray-300"),style:{left:e.metadata.startTime/1e3*100*c.timeline.zoom,width:e.metadata.duration/1e3*100*c.timeline.zoom,top:4},children:l.jsx("span",{className:"text-xs font-medium truncate",children:e.name})}),e.keyframes.map(e=>l.jsx("div",{className:"absolute w-2 h-2 bg-orange-500 rounded-full border border-white cursor-pointer",style:{left:e.time/1e3*100*c.timeline.zoom-4,top:12},onClick:()=>c.selectKeyframe(e.id),title:`Keyframe at ${eb(e.time)}`},e.id))]},e.id))}),c.timeline.markers.map(e=>l.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-yellow-500 cursor-pointer",style:{left:e.time/1e3*100*c.timeline.zoom},title:e.title,children:l.jsx("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-yellow-500 rounded-full text-xs flex items-center justify-center text-white",children:"safety"===e.type?"⚠":"quiz"===e.type?"?":"checkpoint"===e.type?"✓":"•"})},e.id))]})]}),c.error&&l.jsx("div",{className:"absolute bottom-4 left-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded",children:c.error})]})}},506598:(e,a,t)=>{t.d(a,{i:()=>n});var s=t(210326),l=t(517577),i=t(87131),r=t(747405);let n=l.forwardRef(({className:e,...a},t)=>(0,s.jsxs)(i.fC,{ref:t,className:(0,r.cn)("relative flex w-full touch-none select-none items-center",e),...a,children:[s.jsx(i.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(i.e6,{className:"absolute h-full bg-primary"})}),s.jsx(i.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));n.displayName=i.fC.displayName},891216:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},671709:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},549163:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])},43426:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])},9015:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},920176:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]])},599598:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]])},256562:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},899316:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]])},454689:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},31215:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6309:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]])},110976:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]])},821608:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},161182:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]])},323133:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])},269145:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},707937:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},211962:(e,a,t)=>{t.d(a,{Z:()=>s});let s=(0,t(862881).Z)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])}};