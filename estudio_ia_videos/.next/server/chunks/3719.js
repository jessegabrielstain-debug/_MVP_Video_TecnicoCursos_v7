"use strict";exports.id=3719,exports.ids=[3719],exports.modules={33719:(e,a,t)=>{t.d(a,{r:()=>es});var s=t(10326),l=t(17577);let i={elements:[],layers:[{id:"layer-1",name:"Background",visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0,elements:[]},{id:"layer-2",name:"Content",visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0,elements:[]}],timeline:{duration:30,currentTime:0,playing:!1,loop:!1,keyframes:[],markers:[]},selectedElements:[],clipboard:[],history:[],historyIndex:-1,canvas:{width:1920,height:1080,backgroundColor:"#ffffff",zoom:1,pan:{x:0,y:0}},tools:{activeTool:"select",brush:{size:10,color:"#000000",opacity:1}},preview:{enabled:!1,quality:"medium",showGrid:!0,showRulers:!0,showGuides:!0}};var r=t(58441),n=t(20485);let c=e=>!!e&&"object"==typeof e&&"src"in e&&"string"==typeof e.src,o=()=>{!function(e){let[a,t]=(0,l.useState)(i),[s,r]=(0,l.useState)(!1),[n,c]=(0,l.useState)(null);(0,l.useRef)();let o=(0,l.useCallback)((e,a,s)=>{let l={id:`history-${Date.now()}`,timestamp:new Date,action:e,data:a,description:s};t(e=>({...e,history:[...e.history.slice(0,e.historyIndex+1),l],historyIndex:e.historyIndex+1}))},[]);(0,l.useCallback)((e,a={})=>{let s={id:`element-${Date.now()}`,type:e,name:`${e} ${Date.now()}`,layerId:"layer-2",position:{x:100,y:100,z:0},size:{width:200,height:100},rotation:0,opacity:1,visible:!0,locked:!1,animations:[],properties:{...function(e){switch(e){case"text":return{content:"Text Element",fontSize:24,fontFamily:"Arial",fontWeight:"normal",color:"#000000",textAlign:"left",lineHeight:1.2,letterSpacing:0};case"image":return{src:"",alt:"Image",fit:"cover"};case"shape":return{shape:"rectangle",fill:"#3b82f6",stroke:"#1e40af",strokeWidth:2};case"avatar":return{avatarId:"default",pose:"standing",expression:"neutral",clothing:"casual",background:"transparent",lighting:"natural",animation:"idle"};default:return{}}}(e),...a}};return t(e=>({...e,elements:[...e.elements,s],selectedElements:[s.id]})),o("createElement",s,`Created ${e} element`),s.id},[o]),(0,l.useCallback)((e,a)=>{t(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,...a}:t)})),o("updateElement",{elementId:e,updates:a},"Updated element")},[o]),(0,l.useCallback)(e=>{t(a=>({...a,elements:a.elements.filter(a=>a.id!==e),selectedElements:a.selectedElements.filter(a=>a!==e)})),o("deleteElement",{elementId:e},"Deleted element")},[o]),(0,l.useCallback)(e=>{t(a=>{let t=a.elements.find(a=>a.id===e);if(!t)return a;let s={...t,id:`element-${Date.now()}`,name:`${t.name} Copy`,position:{...t.position,x:t.position.x+20,y:t.position.y+20}};return{...a,elements:[...a.elements,s],selectedElements:[s.id]}}),o("duplicateElement",{elementId:e},"Duplicated element")},[o]),(0,l.useCallback)(e=>{t(a=>({...a,selectedElements:[e]}))},[]),(0,l.useCallback)(()=>{t(e=>({...e,selectedElements:[]}))},[]),(0,l.useCallback)(e=>{let a={id:`layer-${Date.now()}`,name:e||`Layer ${Date.now()}`,visible:!0,locked:!1,opacity:1,blendMode:"normal",expanded:!0,elements:[]};return t(e=>({...e,layers:[...e.layers,a]})),o("createLayer",a,`Created layer: ${a.name}`),a.id},[o]),(0,l.useCallback)((e,a)=>{t(t=>({...t,layers:t.layers.map(t=>t.id===e?{...t,...a}:t)})),o("updateLayer",{layerId:e,updates:a},"Updated layer")},[o]),(0,l.useCallback)(e=>{t(a=>{let t=a.elements.filter(a=>a.layerId===e),s=a.elements.filter(a=>a.layerId!==e);return{...a,layers:a.layers.filter(a=>a.id!==e),elements:s,selectedElements:a.selectedElements.filter(e=>!t.some(a=>a.id===e))}}),o("deleteLayer",{layerId:e},"Deleted layer")},[o]),(0,l.useCallback)((e,a)=>{t(t=>({...t,elements:t.elements.map(t=>t.id===e?{...t,layerId:a}:t)})),o("moveElementToLayer",{elementId:e,targetLayerId:a},"Moved element to layer")},[o]),(0,l.useCallback)(()=>{t(e=>({...e,timeline:{...e.timeline,playing:!0}}))},[]),(0,l.useCallback)(()=>{t(e=>({...e,timeline:{...e.timeline,playing:!1}}))},[]),(0,l.useCallback)(e=>{t(a=>({...a,timeline:{...a.timeline,currentTime:Math.max(0,Math.min(e,a.timeline.duration))}}))},[]),(0,l.useCallback)(e=>{t(a=>({...a,timeline:{...a.timeline,duration:Math.max(1,e)}}))},[]),(0,l.useCallback)((e,a)=>{t(t=>({...t,canvas:{...t.canvas,width:e,height:a}})),o("setCanvasSize",{width:e,height:a},"Changed canvas size")},[o]),(0,l.useCallback)(e=>{t(a=>({...a,canvas:{...a.canvas,zoom:Math.max(.1,Math.min(5,e))}}))},[]),(0,l.useCallback)((e,a)=>{t(t=>({...t,canvas:{...t.canvas,pan:{x:e,y:a}}}))},[]),(0,l.useCallback)(e=>{t(a=>({...a,tools:{...a.tools,activeTool:e}}))},[]),(0,l.useCallback)(()=>{a.historyIndex>0&&t(e=>({...e,historyIndex:e.historyIndex-1}))},[a.historyIndex]),(0,l.useCallback)(()=>{a.historyIndex<a.history.length-1&&t(e=>({...e,historyIndex:e.historyIndex+1}))},[a.historyIndex,a.history.length]),(0,l.useCallback)(()=>{if(0===a.selectedElements.length)return;let e=a.elements.filter(e=>a.selectedElements.includes(e.id));e.length>0&&t(a=>({...a,clipboard:e}))},[a.selectedElements,a.elements]),(0,l.useCallback)(()=>{if(0===a.clipboard.length)return;let e=a.clipboard.map(e=>({...e,id:`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`${e.name} Copy`,position:{...e.position,x:e.position.x+20,y:e.position.y+20}}));t(a=>({...a,elements:[...a.elements,...e],selectedElements:e.map(e=>e.id)})),o("pasteElements",e,"Pasted elements")},[a.clipboard,o]),(0,l.useCallback)(async()=>{},[void 0,a]),(0,l.useCallback)(async e=>{r(!0);try{let a=localStorage.getItem(`editor-project-${e}`);if(a){let e=JSON.parse(a);t(e.state)}}catch(e){c("Failed to load project")}finally{r(!1)}},[]),a.historyIndex,a.historyIndex,a.history.length}();let{generateContent:e,optimizeContent:a}=(0,r.X)(),{shareDocument:t,inviteUser:s}=(0,n.H)(),[o,d]=(0,l.useState)([]),[m,x]=(0,l.useState)({duration:6e4,currentTime:0,playbackRate:1,isPlaying:!1,loop:!1,markers:[],zoom:1,viewportStart:0,viewportEnd:6e4}),[u,h]=(0,l.useState)({width:1920,height:1080,zoom:1,pan:{x:0,y:0},rotation:{x:0,y:0,z:0},projection:"perspective",camera:{position:{x:0,y:0,z:10},target:{x:0,y:0,z:0},fov:45}}),[p,y]=(0,l.useState)({states:[],currentIndex:-1,maxStates:50}),[f,g]=(0,l.useState)({isDragging:!1,draggedItem:null,dropTarget:null,dragPreview:null}),[b,j]=(0,l.useState)({selectedLayers:[],selectedKeyframes:[],selectionBounds:null}),[v,w]=(0,l.useState)(null),[N,k]=(0,l.useState)(!1),[C,z]=(0,l.useState)(!1),[Z,S]=(0,l.useState)(null),L=(0,l.useRef)();(0,l.useEffect)(()=>($(),()=>{L.current&&cancelAnimationFrame(L.current)}),[]),(0,l.useEffect)(()=>{if(m.isPlaying){let e=()=>{x(e=>{let a=e.currentTime+16.67*e.playbackRate;return a>=e.duration?e.loop?{...e,currentTime:0}:{...e,currentTime:e.duration,isPlaying:!1}:{...e,currentTime:a}}),L.current=requestAnimationFrame(e)};L.current=requestAnimationFrame(e)}else L.current&&cancelAnimationFrame(L.current)},[m.isPlaying,m.playbackRate,m.loop,m.duration]);let $=async()=>{try{k(!0),d([{id:"background",name:"Background",type:"image",visible:!0,locked:!1,opacity:1,blendMode:"normal",position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},content:{src:"https://trae-api-us.mchost.guru/api/ide/v1/text_to_image?prompt=industrial%20workplace%20safety%20training%20environment&image_size=landscape_16_9",type:"image"},keyframes:[],effects:[],metadata:{duration:6e4,startTime:0,endTime:6e4,tags:["background","workplace"],compliance:{nrStandards:["NR-12"],accessibilityLevel:"AA",safetyRating:95,warnings:[],suggestions:[]}}}]),em("Initial state")}catch(e){S("Failed to initialize editor"),console.error("Editor initialization error:",e)}finally{k(!1)}},A=(0,l.useCallback)((e,a)=>{let t={id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${e.charAt(0).toUpperCase()+e.slice(1)} Layer`,type:e,visible:!0,locked:!1,opacity:1,blendMode:"normal",position:{x:0,y:0,z:o.length},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},content:a||eL(e),keyframes:[],effects:[],metadata:{duration:m.duration,startTime:m.currentTime,endTime:m.currentTime+5e3,tags:[e],compliance:{nrStandards:[],accessibilityLevel:"AA",safetyRating:80,warnings:[],suggestions:[]}}};return d(e=>[...e,t]),em(`Added ${e} layer`),t},[o.length,m.currentTime,m.duration]),E=(0,l.useCallback)(e=>{d(a=>a.filter(a=>a.id!==e)),j(a=>({...a,selectedLayers:a.selectedLayers.filter(a=>a!==e)})),em("Removed layer")},[]),I=(0,l.useCallback)(e=>{let a=o.find(a=>a.id===e);if(!a)throw Error("Layer not found");let t={...a,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${a.name} Copy`,position:{...a.position,x:a.position.x+50,y:a.position.y+50}};return d(e=>[...e,t]),em("Duplicated layer"),t},[o]),R=(0,l.useCallback)((e,a)=>{d(t=>{let s=t.findIndex(a=>a.id===e);if(-1===s)return t;let l=[...t],[i]=l.splice(s,1);return l.splice(a,0,i),l}),em("Moved layer")},[]),P=(0,l.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,...a}:t)),em("Updated layer")},[]),T=(0,l.useCallback)(e=>{P(e,{visible:!o.find(a=>a.id===e)?.visible})},[o,P]),D=(0,l.useCallback)(e=>{P(e,{locked:!o.find(a=>a.id===e)?.locked})},[o,P]),M=(0,l.useCallback)(e=>{x(a=>({...a,currentTime:Math.max(0,Math.min(e,a.duration))}))},[]),O=(0,l.useCallback)(()=>{x(e=>({...e,isPlaying:!0}))},[]),_=(0,l.useCallback)(()=>{x(e=>({...e,isPlaying:!1}))},[]),U=(0,l.useCallback)(()=>{x(e=>({...e,isPlaying:!1,currentTime:0}))},[]),F=(0,l.useCallback)(e=>{x(a=>({...a,playbackRate:Math.max(.1,Math.min(e,4))}))},[]),V=(0,l.useCallback)(e=>{let a={...e,id:`marker_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};x(e=>({...e,markers:[...e.markers,a].sort((e,a)=>e.time-a.time)})),em("Added marker")},[]),K=(0,l.useCallback)(e=>{x(a=>({...a,markers:a.markers.filter(a=>a.id!==e)})),em("Removed marker")},[]),J=(0,l.useCallback)(e=>{x(a=>({...a,zoom:Math.max(.1,Math.min(e,10))}))},[]),q=(0,l.useCallback)((e,a,t)=>{let s={id:`keyframe_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,time:a,properties:t,easing:"ease-in-out",interpolation:"bezier"};return d(a=>a.map(a=>a.id===e?{...a,keyframes:[...a.keyframes,s].sort((e,a)=>e.time-a.time)}:a)),em("Added keyframe"),s},[]),B=(0,l.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,keyframes:t.keyframes.filter(e=>e.id!==a)}:t)),em("Removed keyframe")},[]),W=(0,l.useCallback)((e,a,t)=>{d(s=>s.map(s=>s.id===e?{...s,keyframes:s.keyframes.map(e=>e.id===a?{...e,...t}:e)}:s)),em("Updated keyframe")},[]),G=(0,l.useCallback)((e,a,t)=>{W(e,a,{time:t})},[W]),X=(0,l.useCallback)((e,a)=>{let t={...a,id:`effect_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return d(a=>a.map(a=>a.id===e?{...a,effects:[...a.effects,t]}:a)),em("Added effect"),t},[]),Y=(0,l.useCallback)((e,a)=>{d(t=>t.map(t=>t.id===e?{...t,effects:t.effects.filter(e=>e.id!==a)}:t)),em("Removed effect")},[]),H=(0,l.useCallback)((e,a,t)=>{d(s=>s.map(s=>s.id===e?{...s,effects:s.effects.map(e=>e.id===a?{...e,...t}:e)}:s)),em("Updated effect")},[]),Q=(0,l.useCallback)(e=>{h(a=>({...a,zoom:Math.max(.1,Math.min(e,10))}))},[]),ee=(0,l.useCallback)(e=>{h(a=>({...a,pan:e}))},[]),ea=(0,l.useCallback)(e=>{h(a=>({...a,rotation:e}))},[]),et=(0,l.useCallback)(()=>{h(e=>({...e,zoom:1,pan:{x:0,y:0},rotation:{x:0,y:0,z:0}}))},[]),es=(0,l.useCallback)(()=>{et()},[et]),el=(0,l.useCallback)((e,a=!1)=>{j(t=>({...t,selectedLayers:a?t.selectedLayers.includes(e)?t.selectedLayers.filter(a=>a!==e):[...t.selectedLayers,e]:[e]}))},[]),ei=(0,l.useCallback)((e,a=!1)=>{j(t=>({...t,selectedKeyframes:a?t.selectedKeyframes.includes(e)?t.selectedKeyframes.filter(a=>a!==e):[...t.selectedKeyframes,e]:[e]}))},[]),er=(0,l.useCallback)(()=>{j({selectedLayers:[],selectedKeyframes:[],selectionBounds:null})},[]),en=(0,l.useCallback)(()=>{j(e=>({...e,selectedLayers:o.map(e=>e.id)}))},[o]),ec=(0,l.useCallback)(()=>{b.selectedLayers.length>0&&w({type:"layer",data:o.filter(e=>b.selectedLayers.includes(e.id)),timestamp:new Date})},[o,b.selectedLayers]),eo=(0,l.useCallback)(()=>{ec(),b.selectedLayers.forEach(e=>E(e))},[ec,b.selectedLayers,E]),ed=(0,l.useCallback)(()=>{if(!v||"layer"!==v.type)return;let e=v.data.map(e=>({...e,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${e.name} Copy`,position:{...e.position,x:e.position.x+50,y:e.position.y+50}}));d(a=>[...a,...e]),em("Pasted layers")},[v]),em=(0,l.useCallback)(e=>{let a={id:`state_${Date.now()}`,timestamp:new Date,layers:JSON.parse(JSON.stringify(o)),timeline:JSON.parse(JSON.stringify(m)),viewport:JSON.parse(JSON.stringify(u)),description:e};y(e=>{let t=e.states.slice(0,e.currentIndex+1);return t.push(a),t.length>e.maxStates&&t.shift(),{...e,states:t,currentIndex:t.length-1}})},[o,m,u]),ex=(0,l.useCallback)(()=>{if(p.currentIndex>0){let e=p.states[p.currentIndex-1];d(e.layers),x(e.timeline),h(e.viewport),y(e=>({...e,currentIndex:e.currentIndex-1}))}},[p]),eu=(0,l.useCallback)(()=>{if(p.currentIndex<p.states.length-1){let e=p.states[p.currentIndex+1];d(e.layers),x(e.timeline),h(e.viewport),y(e=>({...e,currentIndex:e.currentIndex+1}))}},[p]),eh=(0,l.useCallback)(async e=>{z(!0);try{let a=await e$(e);return A(eA(e),a)}finally{z(!1)}},[A]),ep=(0,l.useCallback)(async e=>{z(!0);try{let a={layers:o,timeline:m,viewport:u,metadata:{version:"1.0",created:new Date,format:e}};if("json"===e)return new Blob([JSON.stringify(a,null,2)],{type:"application/json"});throw Error(`Export format ${e} not yet implemented`)}finally{z(!1)}},[o,m,u]),ey=(0,l.useCallback)(async(e,a)=>{let t=o.find(a=>a.id===e);if(!t)throw Error("Layer not found");if("json"===a)return new Blob([JSON.stringify(t,null,2)],{type:"application/json"});throw Error(`Export format ${a} not yet implemented`)},[o]),ef=(0,l.useCallback)(async(a,t)=>{z(!0);try{let s="text"===t?"text":"image"===t?"image":"audio"===t?"audio":"text",l=await e({type:s,prompt:a,model:"gpt-4",parameters:{},context:{previousContent:"safety-training"}}),i=l?l.content:eL(t);return A(t,i)}finally{z(!1)}},[e,A]),eg=(0,l.useCallback)(async()=>{z(!0);try{let e=await Promise.all(o.map(async e=>{let t=await a(e.content,{type:"layer-optimization",goals:["performance","engagement","accessibility"]});return{...e,content:t}}));d(e),em("Optimized timeline")}finally{z(!1)}},[o,a]),eb=(0,l.useCallback)(async e=>{let a=o.find(a=>a.id===e);return a?[{id:"fade_in",name:"Fade In",type:"transition",enabled:!0,parameters:{duration:1e3,easing:"ease-in"},startTime:a.metadata.startTime,duration:1e3},{id:"glow",name:"Safety Glow",type:"filter",enabled:!0,parameters:{color:"#FFD700",intensity:.5},startTime:a.metadata.startTime,duration:a.metadata.duration}]:[]},[o]),ej=(0,l.useCallback)(async()=>{em("Auto-synced timeline")},[]),ev=(0,l.useCallback)(async()=>await t("editor-project",{layers:o,timeline:m,viewport:u}),[o,m,u,t]),ew=(0,l.useCallback)(async(e,a)=>{await s(e,a)},[s]),eN=(0,l.useCallback)(async()=>{let e=[],a=[],t=new Set,s="AAA",l=0;return o.forEach(i=>{i.metadata.compliance.warnings.forEach(a=>e.push(a)),i.metadata.compliance.suggestions.forEach(e=>a.push(e)),i.metadata.compliance.nrStandards.forEach(e=>t.add(e)),"A"===i.metadata.compliance.accessibilityLevel?s="A":"AA"===i.metadata.compliance.accessibilityLevel&&"AAA"===s&&(s="AA"),l+=i.metadata.compliance.safetyRating}),l=o.length>0?l/o.length:0,{nrStandards:Array.from(t),accessibilityLevel:s,safetyRating:l,warnings:[...new Set(e)],suggestions:[...new Set(a)]}},[o]),ek=(0,l.useCallback)(async()=>{z(!0);try{let e=await Promise.all(o.map(async e=>{if(e.metadata.compliance.warnings.length>0){let t=await a(e.content,{type:"compliance-optimization",goals:["accessibility","safety","standards"],constraints:{nrStandards:e.metadata.compliance.nrStandards,accessibilityLevel:"AA"}});return{...e,content:t,metadata:{...e.metadata,compliance:{...e.metadata.compliance,warnings:[],safetyRating:Math.min(100,e.metadata.compliance.safetyRating+10)}}}}return e}));d(e),em("Fixed compliance issues")}finally{z(!1)}},[o,a]),eC=(0,l.useCallback)(async()=>{let e=await eN();return`
# Relat\xf3rio de Acessibilidade

## Resumo
- N\xedvel de Acessibilidade: ${e.accessibilityLevel}
- Avalia\xe7\xe3o de Seguran\xe7a: ${e.safetyRating.toFixed(1)}/100
- Normas NR: ${e.nrStandards.join(", ")}

## Avisos (${e.warnings.length})
${e.warnings.map(e=>`- ${e}`).join("\n")}

## Sugest\xf5es (${e.suggestions.length})
${e.suggestions.map(e=>`- ${e}`).join("\n")}

## Camadas Analisadas
${o.map(e=>`
### ${e.name}
- Tipo: ${e.type}
- Dura\xe7\xe3o: ${e.metadata.duration/1e3}s
- Avalia\xe7\xe3o: ${e.metadata.compliance.safetyRating}/100
`).join("\n")}
    `},[eN,o]),ez=(0,l.useCallback)(async()=>{z(!0);try{let e=o.map(e=>({...e,effects:e.effects.filter(e=>e.enabled),keyframes:e.keyframes.filter((e,a,t)=>0===a||a===t.length-1||Math.abs(e.time-t[a-1].time)>100)}));d(e),em("Optimized performance")}finally{z(!1)}},[o]),eZ=(0,l.useCallback)(async()=>{let e=o.map(e=>c(e.content)?e.content.src:null).filter(e=>"string"==typeof e&&e.length>0);await Promise.all(e.map(e=>new Promise((a,t)=>{let s=new Image;s.onload=a,s.onerror=t,s.src=e})))},[o]),eS=(0,l.useCallback)(()=>{"caches"in window&&caches.delete("editor-assets")},[]),eL=e=>{switch(e){case"text":return{text:"Novo texto",fontSize:24,color:"#000000"};case"image":return{src:"",alt:"Nova imagem"};case"video":case"audio":return{src:"",autoplay:!1,loop:!1};case"animation":return{type:"fade",duration:1e3};case"interaction":return{type:"button",action:"next"};case"safety":return{type:"warning",message:"Aten\xe7\xe3o: \xe1rea de risco"};default:return{}}},e$=async e=>({src:URL.createObjectURL(e),name:e.name,size:e.size}),eA=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":"image";return{layers:o,timeline:m,viewport:u,history:p,dragDrop:f,selection:b,clipboard:v,isLoading:N,isProcessing:C,error:Z,addLayer:A,removeLayer:E,duplicateLayer:I,moveLayer:R,updateLayer:P,toggleLayerVisibility:T,toggleLayerLock:D,setCurrentTime:M,play:O,pause:_,stop:U,setPlaybackRate:F,addMarker:V,removeMarker:K,setTimelineZoom:J,addKeyframe:q,removeKeyframe:B,updateKeyframe:W,moveKeyframe:G,addEffect:X,removeEffect:Y,updateEffect:H,setViewportZoom:Q,setViewportPan:ee,setViewportRotation:ea,resetViewport:et,fitToContent:es,selectLayer:el,selectKeyframe:ei,clearSelection:er,selectAll:en,copy:ec,cut:eo,paste:ed,undo:ex,redo:eu,saveState:em,importAsset:eh,exportProject:ep,exportLayer:ey,generateContent:ef,optimizeTimeline:eg,suggestEffects:eb,autoSync:ej,shareProject:ev,inviteCollaborator:ew,validateCompliance:eN,fixComplianceIssues:ek,generateAccessibilityReport:eC,optimizePerformance:ez,preloadAssets:eZ,clearCache:eS}};var d=t(82610),m=t(83431),x=t(55009),u=t(6598),h=t(62329),p=t(30370),y=t(61182),f=t(71709),g=t(49758),b=t(56562),j=t(1572),v=t(53468),w=t(58038),N=t(49163),k=t(31215),C=t(63685),z=t(31540),Z=t(76993),S=t(23133),L=t(99316),$=t(43810),A=t(87444),E=t(8600),I=t(20176),R=t(99598),P=t(924),T=t(71312),D=t(98360),M=t(30361),O=t(6309),_=t(71059),U=t(94893),F=t(21608),V=t(10976),K=t(9015),J=t(7937),q=t(11962),B=t(54689),W=t(88378),G=t(50949),X=t(12714),Y=t(91216),H=t(43426),Q=t(98091),ee=t(3634),ea=t(36283),et=t(47405);let es=({projectId:e,initialData:a,onSave:t,onExport:i,className:r})=>{let n=o(),c=(0,l.useRef)(null),es=(0,l.useRef)(null),[el,ei]=(0,l.useState)("layers"),[er,en]=(0,l.useState)("select"),[ec,eo]=(0,l.useState)(!0),[ed,em]=(0,l.useState)(!0),[ex,eu]=(0,l.useState)("2d"),[eh,ep]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"z":e.preventDefault(),e.shiftKey?n.redo():n.undo();break;case"c":e.preventDefault(),n.copy();break;case"x":e.preventDefault(),n.cut();break;case"v":e.preventDefault(),n.paste();break;case"s":e.preventDefault(),ey();break;case"a":e.preventDefault(),n.selectAll()}switch(e.key){case"v":en("select");break;case"m":en("move");break;case"t":en("text");break;case" ":e.preventDefault(),n.timeline.isPlaying?n.pause():n.play()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]);let ey=(0,l.useCallback)(()=>{let e={layers:n.layers,timeline:n.timeline,viewport:n.viewport};t?.(e)},[n,t]),ef=(0,l.useCallback)(async e=>{try{let a=await n.exportProject(e),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`project.${e}`,s.click(),URL.revokeObjectURL(t),i?.(e)}catch(e){console.error("Export failed:",e)}},[n,i]),eg=(0,l.useCallback)(async e=>{let a=e.target.files;if(a)for(let e of Array.from(a))try{await n.importAsset(e)}catch(e){console.error("Import failed:",e)}},[n]),eb=e=>{let a=Math.floor(e/1e3);return`${Math.floor(a/60)}:${(a%60).toString().padStart(2,"0")}`},ej=e=>{switch(e){case"text":return y.Z;case"image":return f.Z;case"video":return g.Z;case"audio":return b.Z;case"animation":return j.Z;case"interaction":return v.Z;case"safety":return w.Z;default:return N.Z}};return n.isLoading?s.jsx("div",{className:"flex items-center justify-center h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Carregando editor..."})]})}):(0,s.jsxs)("div",{className:(0,et.cn)("flex flex-col h-screen bg-gray-100",r),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white border-b",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:ey,title:"Salvar (Ctrl+S)",children:s.jsx(k.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("label",{children:[s.jsx(d.z,{variant:"ghost",size:"sm",title:"Importar arquivo",asChild:!0,children:s.jsx("span",{children:s.jsx(C.Z,{className:"w-4 h-4"})})}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*,audio/*",onChange:eg,className:"hidden"})]}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>ef("json"),title:"Exportar projeto",children:s.jsx(z.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.shareProject(),title:"Compartilhar",children:s.jsx(Z.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.undo,disabled:n.history.currentIndex<=0,title:"Desfazer (Ctrl+Z)",children:s.jsx(S.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.redo,disabled:n.history.currentIndex>=n.history.states.length-1,title:"Refazer (Ctrl+Shift+Z)",children:s.jsx(L.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.copy,disabled:0===n.selection.selectedLayers.length,title:"Copiar (Ctrl+C)",children:s.jsx($.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.cut,disabled:0===n.selection.selectedLayers.length,title:"Recortar (Ctrl+X)",children:s.jsx(A.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.paste,disabled:!n.clipboard,title:"Colar (Ctrl+V)",children:s.jsx(E.Z,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex items-center gap-1 border-r pr-2",children:[{id:"select",icon:I.Z,title:"Selecionar (V)"},{id:"move",icon:R.Z,title:"Mover (M)"},{id:"text",icon:y.Z,title:"Texto (T)"},{id:"image",icon:f.Z,title:"Imagem"},{id:"video",icon:g.Z,title:"V\xeddeo"},{id:"audio",icon:b.Z,title:"\xc1udio"},{id:"animation",icon:j.Z,title:"Anima\xe7\xe3o"},{id:"interaction",icon:v.Z,title:"Intera\xe7\xe3o"},{id:"safety",icon:w.Z,title:"Seguran\xe7a"}].map(e=>s.jsx(d.z,{variant:er===e.id?"default":"ghost",size:"sm",onClick:()=>en(e.id),title:e.title,children:s.jsx(e.icon,{className:"w-4 h-4"})},e.id))}),(0,s.jsxs)("div",{className:"flex items-center gap-1 border-r pr-2",children:[s.jsx(d.z,{variant:ec?"default":"ghost",size:"sm",onClick:()=>eo(!ec),title:"Mostrar grade",children:s.jsx(P.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>eu("2d"===ex?"3d":"2d"),title:`Modo ${"2d"===ex?"3D":"2D"}`,children:"2d"===ex?"3D":"2D"}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>ep(!eh),title:"Tela cheia",children:s.jsx(T.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.optimizeTimeline(),disabled:n.isProcessing,title:"Otimizar com IA",children:s.jsx(D.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.validateCompliance(),title:"Verificar conformidade",children:s.jsx(M.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 border-b",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.setCurrentTime(0),title:"Ir para o in\xedcio",children:s.jsx(O.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.timeline.isPlaying?n.pause:n.play,title:n.timeline.isPlaying?"Pausar (Espa\xe7o)":"Reproduzir (Espa\xe7o)",children:n.timeline.isPlaying?s.jsx(_.Z,{className:"w-4 h-4"}):s.jsx(U.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:n.stop,title:"Parar",children:s.jsx(F.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.setCurrentTime(n.timeline.duration),title:"Ir para o fim",children:s.jsx(V.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"text-sm font-mono",children:eb(n.timeline.currentTime)}),s.jsx("span",{className:"text-sm text-gray-500",children:"/"}),s.jsx("span",{className:"text-sm font-mono text-gray-500",children:eb(n.timeline.duration)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"text-sm",children:"Velocidade:"}),(0,s.jsxs)("select",{value:n.timeline.playbackRate,onChange:e=>n.setPlaybackRate(Number(e.target.value)),className:"text-sm border rounded px-2 py-1",children:[s.jsx("option",{value:.25,children:"0.25x"}),s.jsx("option",{value:.5,children:"0.5x"}),s.jsx("option",{value:1,children:"1x"}),s.jsx("option",{value:1.5,children:"1.5x"}),s.jsx("option",{value:2,children:"2x"})]})]}),n.isProcessing&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm",children:"Processando..."})]})]}),(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-1 relative bg-gray-100 overflow-hidden",children:[ed&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"absolute top-0 left-8 right-0 h-8 bg-white border-b flex items-end",children:Array.from({length:Math.ceil(n.viewport.width/50)},(e,a)=>(0,s.jsxs)("div",{className:"relative",style:{width:50*n.viewport.zoom},children:[s.jsx("div",{className:"absolute bottom-0 left-0 w-px h-2 bg-gray-400"}),s.jsx("span",{className:"absolute bottom-0 left-1 text-xs text-gray-500",children:50*a})]},a))}),s.jsx("div",{className:"absolute top-8 left-0 bottom-0 w-8 bg-white border-r flex flex-col justify-end",children:Array.from({length:Math.ceil(n.viewport.height/50)},(e,a)=>(0,s.jsxs)("div",{className:"relative",style:{height:50*n.viewport.zoom},children:[s.jsx("div",{className:"absolute top-0 right-0 h-px w-2 bg-gray-400"}),s.jsx("span",{className:"absolute top-1 right-1 text-xs text-gray-500 transform -rotate-90 origin-center",style:{fontSize:"10px"},children:50*a})]},a))})]}),(0,s.jsxs)("div",{className:(0,et.cn)("absolute bg-white shadow-lg",ed?"top-8 left-8":"top-4 left-4"),style:{width:n.viewport.width*n.viewport.zoom,height:n.viewport.height*n.viewport.zoom,transform:`translate(${n.viewport.pan.x}px, ${n.viewport.pan.y}px)`},children:[s.jsx("canvas",{ref:c,width:n.viewport.width,height:n.viewport.height,className:"w-full h-full",style:{background:ec?"radial-gradient(circle, #ccc 1px, transparent 1px)":"white",backgroundSize:ec?"20px 20px":"auto"}}),n.layers.filter(e=>e.visible).map(e=>{let a=ej(e.type);return(0,s.jsxs)("div",{className:(0,et.cn)("absolute border-2 cursor-pointer transition-all",n.selection.selectedLayers.includes(e.id)?"border-blue-500 bg-blue-50":"border-transparent hover:border-gray-300"),style:{left:e.position.x,top:e.position.y,width:100,height:60,transform:`scale(${e.scale.x}, ${e.scale.y}) rotate(${e.rotation.z}deg)`,opacity:e.opacity,zIndex:e.position.z},onClick:()=>n.selectLayer(e.id),children:[s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white rounded",children:"image"===e.type&&e.content?.src?s.jsx("img",{src:e.content.src,alt:e.name,className:"w-full h-full object-cover rounded"}):"text"===e.type?s.jsx("div",{className:"text-center text-xs",style:{fontSize:Math.min(e.content?.fontSize||12,12),color:e.content?.color||"#000"},children:e.content?.text||e.name}):s.jsx(a,{className:"w-6 h-6 text-gray-400"})}),e.locked&&s.jsx(K.Z,{className:"absolute -top-2 -right-2 w-4 h-4 text-red-500 bg-white rounded-full p-0.5"})]},e.id)})]}),(0,s.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[s.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>n.setViewportZoom(1.2*n.viewport.zoom),title:"Zoom in",children:s.jsx(J.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>n.setViewportZoom(n.viewport.zoom/1.2),title:"Zoom out",children:s.jsx(q.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"outline",size:"sm",onClick:n.resetViewport,title:"Reset view",children:s.jsx(B.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"outline",size:"sm",onClick:n.fitToContent,title:"Fit to content",children:s.jsx(T.Z,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"w-80 bg-white border-l flex flex-col",children:(0,s.jsxs)(x.mQ,{value:el,onValueChange:ei,className:"flex-1",children:[(0,s.jsxs)(x.dr,{className:"grid w-full grid-cols-4",children:[(0,s.jsxs)(x.SP,{value:"layers",children:[s.jsx(N.Z,{className:"w-4 h-4 mr-1"}),"Camadas"]}),(0,s.jsxs)(x.SP,{value:"properties",children:[s.jsx(W.Z,{className:"w-4 h-4 mr-1"}),"Props"]}),(0,s.jsxs)(x.SP,{value:"effects",children:[s.jsx(j.Z,{className:"w-4 h-4 mr-1"}),"Efeitos"]}),(0,s.jsxs)(x.SP,{value:"ai",children:[s.jsx(D.Z,{className:"w-4 h-4 mr-1"}),"IA"]})]}),s.jsx(x.nU,{value:"layers",className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Camadas"}),(0,s.jsxs)("div",{className:"flex gap-1",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.addLayer("text"),title:"Adicionar camada de texto",children:s.jsx(y.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.addLayer("image"),title:"Adicionar camada de imagem",children:s.jsx(f.Z,{className:"w-4 h-4"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.addLayer("safety"),title:"Adicionar elemento de seguran\xe7a",children:s.jsx(w.Z,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:n.layers.map((e,a)=>{let t=ej(e.type),l=n.selection.selectedLayers.includes(e.id);return(0,s.jsxs)("div",{className:(0,et.cn)("flex items-center gap-2 p-2 rounded cursor-pointer",l?"bg-blue-100":"hover:bg-gray-100"),onClick:()=>n.selectLayer(e.id),children:[s.jsx(t,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"flex-1 text-sm truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[e.metadata.compliance.warnings.length>0&&s.jsx(G.Z,{className:"w-3 h-3 text-yellow-500"}),e.metadata.compliance.safetyRating>=90&&s.jsx(M.Z,{className:"w-3 h-3 text-green-500"}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),n.toggleLayerVisibility(e.id)},className:"p-0 h-auto",children:e.visible?s.jsx(X.Z,{className:"w-3 h-3"}):s.jsx(Y.Z,{className:"w-3 h-3 text-gray-400"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),n.toggleLayerLock(e.id)},className:"p-0 h-auto",children:e.locked?s.jsx(K.Z,{className:"w-3 h-3 text-red-500"}):s.jsx(H.Z,{className:"w-3 h-3"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),n.removeLayer(e.id)},className:"p-0 h-auto text-red-500 hover:text-red-700",children:s.jsx(Q.Z,{className:"w-3 h-3"})})]})]},e.id)})})]})}),s.jsx(x.nU,{value:"properties",className:"flex-1 p-4",children:n.selection.selectedLayers.length>0?s.jsx("div",{className:"space-y-4",children:n.selection.selectedLayers.map(e=>{let a=n.layers.find(a=>a.id===e);return a?(0,s.jsxs)(m.Zb,{children:[s.jsx(m.Ol,{className:"pb-2",children:s.jsx(m.ll,{className:"text-sm",children:a.name})}),(0,s.jsxs)(m.aY,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Opacidade"}),s.jsx(u.i,{value:[100*a.opacity],onValueChange:([a])=>n.updateLayer(e,{opacity:a/100}),min:0,max:100,step:1,className:"mt-1"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"X"}),s.jsx("input",{type:"number",value:a.position.x,onChange:t=>n.updateLayer(e,{position:{...a.position,x:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Y"}),s.jsx("input",{type:"number",value:a.position.y,onChange:t=>n.updateLayer(e,{position:{...a.position,y:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Z"}),s.jsx("input",{type:"number",value:a.position.z,onChange:t=>n.updateLayer(e,{position:{...a.position,z:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Escala X"}),s.jsx("input",{type:"number",step:"0.1",value:a.scale.x,onChange:t=>n.updateLayer(e,{scale:{...a.scale,x:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Escala Y"}),s.jsx("input",{type:"number",step:"0.1",value:a.scale.y,onChange:t=>n.updateLayer(e,{scale:{...a.scale,y:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Rota\xe7\xe3o"}),s.jsx("input",{type:"number",value:a.rotation.z,onChange:t=>n.updateLayer(e,{rotation:{...a.rotation,z:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]})]}),"text"===a.type&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Texto"}),s.jsx("textarea",{value:a.content?.text||"",onChange:t=>n.updateLayer(e,{content:{...a.content,text:t.target.value}}),className:"w-full text-xs border rounded px-2 py-1 mt-1",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Tamanho"}),s.jsx("input",{type:"number",value:a.content?.fontSize||16,onChange:t=>n.updateLayer(e,{content:{...a.content,fontSize:Number(t.target.value)}}),className:"w-full text-xs border rounded px-1 py-0.5"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Cor"}),s.jsx("input",{type:"color",value:a.content?.color||"#000000",onChange:t=>n.updateLayer(e,{content:{...a.content,color:t.target.value}}),className:"w-full h-6 border rounded"})]})]})]}),(0,s.jsxs)("div",{className:"pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Conformidade"}),(0,s.jsxs)(h.C,{variant:a.metadata.compliance.safetyRating>=90?"default":"secondary",children:[a.metadata.compliance.safetyRating,"/100"]})]}),s.jsx(p.E,{value:a.metadata.compliance.safetyRating,className:"h-2"}),a.metadata.compliance.nrStandards.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.metadata.compliance.nrStandards.map(e=>s.jsx(h.C,{variant:"outline",className:"text-xs",children:e},e))})]})]})]},e):null})}):(0,s.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[s.jsx(N.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"Selecione uma camada para ver as propriedades"})]})}),s.jsx(x.nU,{value:"effects",className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Efeitos"}),n.selection.selectedLayers.length>0&&(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:async()=>{let e=n.selection.selectedLayers[0];await n.suggestEffects(e)},children:[s.jsx(ee.Z,{className:"w-4 h-4 mr-1"}),"Sugerir"]})]}),n.selection.selectedLayers.length>0?n.selection.selectedLayers.map(e=>{let a=n.layers.find(a=>a.id===e);return a?(0,s.jsxs)(m.Zb,{children:[s.jsx(m.Ol,{className:"pb-2",children:(0,s.jsxs)(m.ll,{className:"text-sm",children:[a.name," - Efeitos"]})}),s.jsx(m.aY,{children:a.effects.length>0?s.jsx("div",{className:"space-y-2",children:a.effects.map(a=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,s.jsxs)("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:a.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[a.type," • ",eb(a.duration)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.updateEffect(e,a.id,{enabled:!a.enabled}),className:"p-0 h-auto",children:a.enabled?s.jsx(X.Z,{className:"w-3 h-3"}):s.jsx(Y.Z,{className:"w-3 h-3 text-gray-400"})}),s.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>n.removeEffect(e,a.id),className:"p-0 h-auto text-red-500",children:s.jsx(Q.Z,{className:"w-3 h-3"})})]})]},a.id))}):(0,s.jsxs)("div",{className:"text-center text-gray-500 py-4",children:[s.jsx(j.Z,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"Nenhum efeito aplicado"})]})})]},e):null}):(0,s.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[s.jsx(j.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"Selecione uma camada para gerenciar efeitos"})]})]})}),s.jsx(x.nU,{value:"ai",className:"flex-1 p-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Assistente de IA"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>n.optimizeTimeline(),disabled:n.isProcessing,children:[s.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Otimizar Timeline"]}),(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>n.validateCompliance(),disabled:n.isProcessing,children:[s.jsx(M.Z,{className:"w-4 h-4 mr-2"}),"Verificar Conformidade"]}),(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>n.fixComplianceIssues(),disabled:n.isProcessing,children:[s.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Corrigir Problemas"]}),(0,s.jsxs)(d.z,{variant:"outline",className:"w-full justify-start",onClick:()=>n.generateAccessibilityReport(),disabled:n.isProcessing,children:[s.jsx(ea.Z,{className:"w-4 h-4 mr-2"}),"Relat\xf3rio de Acessibilidade"]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Gerar Conte\xfado"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("textarea",{placeholder:"Descreva o conte\xfado que deseja gerar...",className:"w-full text-sm border rounded px-2 py-1",rows:3}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>n.generateContent("","text"),disabled:n.isProcessing,children:[s.jsx(y.Z,{className:"w-4 h-4 mr-1"}),"Texto"]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>n.generateContent("","image"),disabled:n.isProcessing,children:[s.jsx(f.Z,{className:"w-4 h-4 mr-1"}),"Imagem"]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>n.generateContent("","animation"),disabled:n.isProcessing,children:[s.jsx(j.Z,{className:"w-4 h-4 mr-1"}),"Anima\xe7\xe3o"]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>n.generateContent("","safety"),disabled:n.isProcessing,children:[s.jsx(w.Z,{className:"w-4 h-4 mr-1"}),"Seguran\xe7a"]})]})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Estat\xedsticas do Projeto"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Camadas:"}),s.jsx("span",{children:n.layers.length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Dura\xe7\xe3o:"}),s.jsx("span",{children:eb(n.timeline.duration)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Keyframes:"}),s.jsx("span",{children:n.layers.reduce((e,a)=>e+a.keyframes.length,0)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Efeitos:"}),s.jsx("span",{children:n.layers.reduce((e,a)=>e+a.effects.length,0)})]})]})]})]})})]})})]}),(0,s.jsxs)("div",{className:"h-48 bg-gray-50 border-t",children:[(0,s.jsxs)("div",{className:"h-8 bg-white border-b flex items-center px-4",children:[s.jsx("span",{className:"text-sm font-medium",children:"Timeline"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsx("span",{className:"text-xs",children:"Zoom:"}),s.jsx(u.i,{value:[n.timeline.zoom],onValueChange:([e])=>n.setTimelineZoom(e),min:.1,max:5,step:.1,className:"w-20"})]})]}),(0,s.jsxs)("div",{ref:es,className:"flex-1 relative overflow-x-auto overflow-y-hidden",style:{height:"calc(100% - 2rem)"},children:[s.jsx("div",{className:"h-6 bg-gray-100 border-b flex",children:Array.from({length:Math.ceil(n.timeline.duration/1e3)},(e,a)=>s.jsx("div",{className:"relative border-r border-gray-300",style:{width:100*n.timeline.zoom},children:(0,s.jsxs)("span",{className:"absolute top-0 left-1 text-xs",children:[a,"s"]})},a))}),s.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-red-500 z-10 pointer-events-none",style:{left:n.timeline.currentTime/1e3*100*n.timeline.zoom},children:s.jsx("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-red-500 transform rotate-45"})}),s.jsx("div",{className:"flex-1",children:n.layers.map((e,a)=>(0,s.jsxs)("div",{className:"h-8 border-b border-gray-200 flex items-center relative",children:[s.jsx("div",{className:(0,et.cn)("absolute h-6 rounded border-2 flex items-center px-2","video"===e.type?"bg-blue-100 border-blue-300":"audio"===e.type?"bg-green-100 border-green-300":"text"===e.type?"bg-yellow-100 border-yellow-300":"image"===e.type?"bg-purple-100 border-purple-300":"bg-gray-100 border-gray-300"),style:{left:e.metadata.startTime/1e3*100*n.timeline.zoom,width:e.metadata.duration/1e3*100*n.timeline.zoom,top:4},children:s.jsx("span",{className:"text-xs font-medium truncate",children:e.name})}),e.keyframes.map(e=>s.jsx("div",{className:"absolute w-2 h-2 bg-orange-500 rounded-full border border-white cursor-pointer",style:{left:e.time/1e3*100*n.timeline.zoom-4,top:12},onClick:()=>n.selectKeyframe(e.id),title:`Keyframe at ${eb(e.time)}`},e.id))]},e.id))}),n.timeline.markers.map(e=>s.jsx("div",{className:"absolute top-6 bottom-0 w-px bg-yellow-500 cursor-pointer",style:{left:e.time/1e3*100*n.timeline.zoom},title:e.title,children:s.jsx("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-yellow-500 rounded-full text-xs flex items-center justify-center text-white",children:"safety"===e.type?"⚠":"quiz"===e.type?"?":"checkpoint"===e.type?"✓":"•"})},e.id))]})]}),n.error&&s.jsx("div",{className:"absolute bottom-4 left-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded",children:n.error})]})}},6598:(e,a,t)=>{t.d(a,{i:()=>n});var s=t(10326),l=t(17577),i=t(87131),r=t(47405);let n=l.forwardRef(({className:e,...a},t)=>(0,s.jsxs)(i.fC,{ref:t,className:(0,r.cn)("relative flex w-full touch-none select-none items-center",e),...a,children:[s.jsx(i.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(i.e6,{className:"absolute h-full bg-primary"})}),s.jsx(i.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));n.displayName=i.fC.displayName}};