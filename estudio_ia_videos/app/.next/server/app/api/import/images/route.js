(()=>{var e={};e.id=2710,e.ids=[2710],e.modules={92885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},16305:()=>{},86844:(e,r,s)=>{"use strict";s.r(r),s.d(r,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var t={};s.r(t),s.d(t,{POST:()=>l,dynamic:()=>p});var a=s(49303),i=s(88716),o=s(60670),n=s(87070),c=s(26231),u=s(91232);let p="force-dynamic";async function l(e){try{let r=await (0,c.default)(u.L);if(!r?.user?.id)return n.NextResponse.json({error:"N\xe3o autenticado"},{status:401});let s=await e.formData(),t=[];for(let[e,r]of s.entries())r instanceof File&&r.type.startsWith("image/")&&t.push(r);if(0===t.length)return n.NextResponse.json({error:"Nenhuma imagem fornecida"},{status:400});let a=t.map((e,r)=>({id:`image-slide-${r+1}`,slideNumber:r+1,title:e.name.replace(/\.[^/.]+$/,""),duration:5,elements:[{id:`image-${r}`,type:"image",content:URL.createObjectURL(e),style:{x:0,y:0,width:1920,height:1080}}],source:"image",thumbnail:URL.createObjectURL(e)}));return n.NextResponse.json({success:!0,slides:a,imageCount:a.length})}catch(e){return console.error("Erro ao importar imagens:",e),n.NextResponse.json({error:"Erro ao processar imagens"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/import/images/route",pathname:"/api/import/images",filename:"route",bundlePath:"app/api/import/images/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\app\\api\\import\\images\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h}=d,f="/api/import/images/route";function v(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},91232:(e,r,s)=>{"use strict";s.d(r,{L:()=>g});var t=s(74194),a=s(92885),i=s(98691),o=s(80772),n=s(64198),c=s(8204);let u=process.env.NEXT_PUBLIC_SUPABASE_URL||"",p=process.env.SUPABASE_SERVICE_ROLE_KEY||"",l=!!(u&&p)&&u.includes("supabase.co"),d=l?(0,a.createClient)(u,p,{auth:{persistSession:!1,autoRefreshToken:!1}}):null,m=[(0,o.Z)({name:"Credentials",credentials:{email:{label:"Email",type:"email",placeholder:"seu@email.com"},password:{label:"Senha",type:"password"}},async authorize(e){let r=String(e?.email||"").trim().toLowerCase(),s=String(e?.password||"");if(!r||!s)throw Error("Email e senha s\xe3o obrigat\xf3rios");if(!l||!d)throw console.warn("⚠️ Supabase n\xe3o configurado. Configure as vari\xe1veis de ambiente ou use credenciais de teste."),Error("Servi\xe7o de autentica\xe7\xe3o indispon\xedvel");try{let{data:e,error:t}=await d.from("users").select("id, email, name, role, tier, password_hash, avatar_url, metadata").eq("email",r).single();if(t||!e||!await (0,i.qu)(s,e.password_hash))throw Error("Credenciais inv\xe1lidas");let a=e.metadata&&"object"==typeof e.metadata?e.metadata:{};return{id:e.id,email:e.email,name:e.name,role:e.role||"user",subscriptionTier:e.tier||"free",tier:e.tier||"free",preferences:a,image:e.avatar_url}}catch(e){throw console.error("Erro na autentica\xe7\xe3o:",e),Error("Credenciais inv\xe1lidas")}}})];process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET&&m.push((0,c.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})),process.env.SMTP_HOST&&process.env.SMTP_USER&&process.env.SMTP_PASS&&m.push((0,n.Z)({server:{host:process.env.SMTP_HOST,port:parseInt(process.env.SMTP_PORT||"587",10),auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASS}},from:process.env.SMTP_FROM||process.env.SMTP_USER}));let g={...l?{adapter:(0,t.S3)({url:u,secret:p})}:{},providers:m,callbacks:{async jwt({token:e,user:r}){if(r)e.id=r.id,e.email=r.email,e.role=r.role||"user",e.subscriptionTier=r.subscriptionTier||r.tier||"free",e.preferences=r.preferences||{};else if(e.sub&&l&&d&&(!e.role||!e.subscriptionTier))try{let{data:r}=await d.from("users").select("role, tier, metadata").eq("id",e.sub).single();r&&(e.role=r.role||"user",e.subscriptionTier=r.tier||"free",e.preferences=r.metadata||{})}catch(e){console.error("Erro ao carregar perfil do usu\xe1rio no JWT:",e)}return e},session:async({session:e,token:r})=>(e.user&&(e.user.id=r.id||r.sub,e.user.role=r.role||"user",e.user.subscriptionTier=r.subscriptionTier||"free",e.user.preferences=r.preferences||{}),e)},pages:{signIn:"/login",error:"/auth/error",verifyRequest:"/auth/verify-request",newUser:"/register"},session:{strategy:"jwt",maxAge:2592e3},secret:process.env.NEXTAUTH_SECRET||"test-secret",debug:!1}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[9276,5972,6231,5326],()=>s(86844));module.exports=t})();