(()=>{var e={};e.id=5461,e.ids=[5461],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},72254:e=>{"use strict";e.exports=require("node:buffer")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},58359:()=>{},93739:()=>{},70281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{GET:()=>c,dynamic:()=>l});var o=r(49303),i=r(88716),a=r(60670),u=r(87070),n=r(97361);let l="force-dynamic";async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("language")||void 0,s=(0,n.U)(),o=await s.listVoices(r);return u.NextResponse.json({success:!0,voices:o,total:o.length})}catch(e){return console.error("Erro ao listar vozes:",e),u.NextResponse.json({success:!1,error:"Erro ao listar vozes TTS"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/tts/voices/route",pathname:"/api/tts/voices",filename:"route",bundlePath:"app/api/tts/voices/route"},resolvedPagePath:"C:\\xampp\\htdocs\\_MVP_Video_TecnicoCursos_v7\\estudio_ia_videos\\app\\app\\api\\tts\\voices\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:d,serverHooks:h}=p,m="/api/tts/voices/route";function v(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},97361:(e,t,r)=>{"use strict";r.d(t,{U:()=>u});var s=r(90766),o=r(15135);class i{constructor(){this.googleClient=null,this.azureConfig=null,this.initializeProviders()}initializeProviders(){try{(process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.GOOGLE_CLOUD_PROJECT)&&(this.googleClient=new s.vL({keyFilename:process.env.GOOGLE_APPLICATION_CREDENTIALS}))}catch(e){console.warn("Google TTS n\xe3o dispon\xedvel:",e)}try{process.env.AZURE_SPEECH_KEY&&(this.azureConfig=o.SpeechConfig.fromSubscription(process.env.AZURE_SPEECH_KEY,process.env.AZURE_SPEECH_REGION||"eastus"))}catch(e){console.warn("Azure TTS n\xe3o dispon\xedvel:",e)}}async listVoices(e){let t=[];if(this.googleClient)try{let[r]=await this.googleClient.listVoices({languageCode:e});r.voices?.forEach(e=>{e.languageCodes?.forEach(r=>{t.push({id:`google-${e.name}`,name:e.name||"",language:this.getLanguageName(r),languageCode:r,gender:this.mapGender(e.ssmlGender),provider:"google",isPremium:e.name?.includes("Neural")||e.name?.includes("WaveNet")})})})}catch(e){console.error("Erro ao listar vozes Google:",e)}if(this.azureConfig)try{let r=new o.SpeechSynthesizer(this.azureConfig);(await r.getVoicesAsync(e)).voices.forEach(e=>{t.push({id:`azure-${e.shortName}`,name:e.localName,language:e.locale,languageCode:e.locale,gender:1===e.gender?"female":"male",provider:"azure",isPremium:"Neural"===e.voiceType})})}catch(e){console.error("Erro ao listar vozes Azure:",e)}return 0===t.length?this.getMockVoices(e):t.sort((e,t)=>e.language.localeCompare(t.language))}async synthesize(e){let t=this.getProviderFromVoiceId(e.voiceId);switch(t){case"google":return this.synthesizeGoogle(e);case"azure":return this.synthesizeAzure(e);case"elevenlabs":return this.synthesizeElevenLabs(e);default:throw Error(`Provider n\xe3o suportado: ${t}`)}}async synthesizeGoogle(e){if(!this.googleClient)throw Error("Google TTS n\xe3o configurado");let t=e.voiceId.replace("google-",""),r={input:{text:e.text},voice:{name:t,languageCode:this.getLanguageCodeFromVoice(t)},audioConfig:{audioEncoding:"MP3",speakingRate:e.speed||1,pitch:e.pitch||0,volumeGainDb:this.volumeToDb(e.volume||100)}},[s]=await this.googleClient.synthesizeSpeech(r);return{audioUrl:await this.saveAudio(s.audioContent,`tts-${Date.now()}.mp3`),duration:await this.estimateAudioDuration(e.text),provider:"google",cost:this.calculateCost("google",e.text.length),format:"mp3"}}async synthesizeAzure(e){if(!this.azureConfig)throw Error("Azure TTS n\xe3o configurado");let t=e.voiceId.replace("azure-","");this.azureConfig.speechSynthesisVoiceName=t,this.azureConfig.speechSynthesisOutputFormat=o.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3;let r=`
      <speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
        <voice name="${t}">
          <prosody rate="${e.speed||1}" pitch="${e.pitch||0}st" volume="${e.volume||100}">
            ${e.text}
          </prosody>
        </voice>
      </speak>
    `,s=new o.SpeechSynthesizer(this.azureConfig);return new Promise((t,i)=>{s.speakSsmlAsync(r,async r=>{r.reason===o.ResultReason.SynthesizingAudioCompleted?t({audioUrl:await this.saveAudio(Buffer.from(r.audioData),`tts-${Date.now()}.mp3`),duration:r.audioDuration/1e7,provider:"azure",cost:this.calculateCost("azure",e.text.length),format:"mp3"}):i(Error(`Erro Azure TTS: ${r.errorDetails}`)),s.close()},e=>{s.close(),i(e)})})}async synthesizeElevenLabs(e){if(!process.env.ELEVENLABS_API_KEY)throw Error("ElevenLabs API key n\xe3o configurada");let t=e.voiceId.replace("elevenlabs-",""),r=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${t}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":process.env.ELEVENLABS_API_KEY},body:JSON.stringify({text:e.text,model_id:"eleven_multilingual_v2",voice_settings:{stability:.5,similarity_boost:.75,style:0,use_speaker_boost:!0}})});if(!r.ok)throw Error(`ElevenLabs API error: ${r.statusText}`);let s=await r.arrayBuffer();return{audioUrl:await this.saveAudio(Buffer.from(s),`tts-${Date.now()}.mp3`),duration:await this.estimateAudioDuration(e.text),provider:"elevenlabs",cost:this.calculateCost("elevenlabs",e.text.length),format:"mp3"}}getProviderFromVoiceId(e){return e.startsWith("google-")?"google":e.startsWith("azure-")?"azure":e.startsWith("elevenlabs-")?"elevenlabs":"google"}getLanguageCodeFromVoice(e){let t=e.match(/([a-z]{2}-[A-Z]{2})/);return t?t[1]:"pt-BR"}getLanguageName(e){return({"pt-BR":"Portugu\xeas (Brasil)","pt-PT":"Portugu\xeas (Portugal)","en-US":"English (US)","en-GB":"English (UK)","es-ES":"Espa\xf1ol (Espa\xf1a)","es-MX":"Espa\xf1ol (M\xe9xico)","fr-FR":"Fran\xe7ais (France)","de-DE":"Deutsch (Deutschland)","it-IT":"Italiano (Italia)","ja-JP":"日本語 (日本)","ko-KR":"한국어 (대한민국)","zh-CN":"中文 (简体)","zh-TW":"中文 (繁體)","ru-RU":"Русский (Россия)","ar-SA":"العربية (السعودية)","hi-IN":"हिन्दी (भारत)","nl-NL":"Nederlands (Nederland)","pl-PL":"Polski (Polska)","tr-TR":"T\xfcrk\xe7e (T\xfcrkiye)","sv-SE":"Svenska (Sverige)","da-DK":"Dansk (Danmark)","no-NO":"Norsk (Norge)","fi-FI":"Suomi (Suomi)"})[e]||e}mapGender(e){switch(e){case"MALE":case 1:return"male";case"FEMALE":case 2:return"female";default:return"neutral"}}volumeToDb(e){return(e-100)*.96}async saveAudio(e,t){let s=r(92048).promises,o=r(55315),i=o.join(process.cwd(),"public","tts-audio");await s.mkdir(i,{recursive:!0});let a=o.join(i,t);return await s.writeFile(a,e),`/tts-audio/${t}`}async estimateAudioDuration(e){return Math.ceil(e.split(/\s+/).length/2.3)}calculateCost(e,t){return t*(({google:16e-6,azure:16e-6,elevenlabs:3e-4})[e]||16e-6)}getMockVoices(e){let t=[{id:"google-pt-BR-Neural2-A",name:"pt-BR-Neural2-A",language:"Portugu\xeas (Brasil)",languageCode:"pt-BR",gender:"female",provider:"google",isPremium:!0},{id:"google-pt-BR-Neural2-B",name:"pt-BR-Neural2-B",language:"Portugu\xeas (Brasil)",languageCode:"pt-BR",gender:"male",provider:"google",isPremium:!0},{id:"google-en-US-Neural2-A",name:"en-US-Neural2-A",language:"English (US)",languageCode:"en-US",gender:"female",provider:"google",isPremium:!0},{id:"google-es-ES-Neural2-A",name:"es-ES-Neural2-A",language:"Espa\xf1ol (Espa\xf1a)",languageCode:"es-ES",gender:"female",provider:"google",isPremium:!0}];return e?t.filter(t=>t.languageCode===e):t}}let a=null;function u(){return a||(a=new i),a}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,5135,766],()=>r(70281));module.exports=s})();