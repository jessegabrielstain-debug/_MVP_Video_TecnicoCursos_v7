(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{6427:function(e,t,s){Promise.resolve().then(s.bind(s,1130))},1130:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S},dynamic:function(){return I}});var r=s(7437),a=s(2265),n=s(9589),l=s(6337),i=s(2926),c=s(5395),o=s(5805),d=s(8708),u=s(4508);let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.fC,{ref:t,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});m.displayName=d.fC.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.Ee,{ref:t,className:(0,u.cn)("aspect-square h-full w-full",s),...a})});x.displayName=d.Ee.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.NY,{ref:t,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});function f(e){let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})}function p(e){let{children:t}=e;return(0,r.jsx)("div",{className:"inline-block relative",children:t})}function g(e){let{className:t="",children:s}=e;return(0,r.jsx)("div",{className:t,children:s})}function b(e){let{className:t="",children:s}=e;return(0,r.jsx)("div",{className:["z-50 rounded-md border bg-popover p-2 text-popover-foreground shadow-md",t].join(" "),children:s})}function j(e){let{users:t,currentUserId:s,connected:a,latency:n}=e,l=t.filter(e=>e.id!==s);return(0,r.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-white border-b",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:a?(0,r.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Conectado"}),null!=n&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",n,"ms)"]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-1 text-red-600",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Desconectado"})]})}),l.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-px h-6 bg-gray-200"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 text-gray-600"}),(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-600",children:[l.length," ",1===l.length?"usu\xe1rio":"usu\xe1rios"," online"]})]}),(0,r.jsx)("div",{className:"flex -space-x-2",children:(0,r.jsxs)(f,{children:[l.slice(0,5).map(e=>(0,r.jsxs)(p,{children:[(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"relative",style:{borderColor:e.color,borderWidth:2,borderRadius:"50%"},children:[(0,r.jsxs)(m,{className:"w-8 h-8",children:[e.avatar&&(0,r.jsx)(x,{src:e.avatar,alt:e.name}),(0,r.jsx)(h,{style:{backgroundColor:e.color+"20",color:e.color},children:e.name.substring(0,2).toUpperCase()})]}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white"})]})}),(0,r.jsx)(b,{children:(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsx)("div",{className:"font-semibold",children:e.name}),(0,r.jsx)("div",{className:"text-gray-500",children:e.email}),e.lastSeen&&(0,r.jsxs)("div",{className:"text-gray-400 mt-1",children:["\xdaltima atividade: ",new Date(e.lastSeen).toLocaleTimeString()]})]})})]},e.id)),l.length>5&&(0,r.jsxs)(p,{children:[(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-200 rounded-full text-xs font-semibold text-gray-600",children:["+",l.length-5]})}),(0,r.jsx)(b,{children:(0,r.jsx)("div",{className:"text-xs",children:l.slice(5).map(e=>(0,r.jsx)("div",{children:e.name},e.id))})})]})]})})]}),0===l.length&&a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-px h-6 bg-gray-200"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Voc\xea est\xe1 sozinho no projeto"})]})]})}function v(e){let{cursors:t,users:s}=e,[n,l]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=[];for(let[r,a]of t.entries()){let t=s.find(e=>e.id===r);t&&e.push({userId:r,userName:t.name,color:t.color,position:a})}l(e)},[t,s]),(0,r.jsx)("div",{className:"pointer-events-none fixed inset-0 z-50",children:n.map(e=>(0,r.jsx)(y,{userName:e.userName,color:e.color,x:e.position.x,y:e.position.y},e.userId))})}function y(e){let{userName:t,color:s,x:a,y:n}=e;return(0,r.jsxs)("div",{className:"absolute transition-transform duration-100 ease-out",style:{transform:"translate(".concat(a,"px, ").concat(n,"px)"),willChange:"transform"},children:[(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:(0,r.jsx)("path",{d:"M5.65376 12.3673L8.49826 17.3421C8.89176 18.0291 9.92176 18.0291 10.3153 17.3421L13.1598 12.3673C13.3776 11.9976 13.7376 11.7376 14.1476 11.6476L19.9626 10.3076C20.7226 10.1376 20.9826 9.16757 20.4426 8.62757L16.2326 4.41757C15.9226 4.10757 15.7626 3.68757 15.7926 3.25757L16.0326 -2.34243e-05C16.0826 -0.800024 15.1826 -1.20002 14.6726 -0.690024L4.84376 9.13757C4.32376 9.65757 4.66376 10.5676 5.42376 10.6876L11.0138 11.6176C11.4338 11.6876 11.8138 11.9476 12.0338 12.3173L12.9338 13.9673",fill:s})}),(0,r.jsx)("div",{className:"ml-6 -mt-4 px-2 py-1 rounded text-xs font-medium text-white whitespace-nowrap",style:{backgroundColor:s,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:t})]})}function N(e){let{projectId:t,currentUser:s,onChangeReceived:i}=e,[c,o]=(0,a.useState)([]),[d,u]=(0,a.useState)(null),m=(0,a.useRef)(null),x=function(e){var t;let[s,r]=(0,a.useState)({connected:!1,users:[],cursors:new Map,locks:new Map,latency:null}),n=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(e.enabled)return r(e=>({...e,connected:!0})),()=>r(e=>({...e,connected:!1}))},[e.enabled,e.projectId,null===(t=e.user)||void 0===t?void 0:t.id]);let l=(0,a.useCallback)(e=>{},[]),i=(0,a.useCallback)(e=>{},[]),c=(0,a.useCallback)(async e=>!0,[]),o=(0,a.useCallback)(e=>{},[]),d=(0,a.useCallback)(()=>{},[]),u=(0,a.useCallback)(()=>{},[]);return{...s,error:n.current,broadcastChange:l,broadcastCursor:i,lockEntity:c,unlockEntity:o,ping:d,requestSync:u,service:null}}({projectId:t,user:s,enabled:!0,onChange:e=>{console.log("Change received:",e),h(e),null==i||i(e)},onUserJoined:e=>{console.log("User joined:",e.name)},onUserLeft:e=>{console.log("User left:",e)},onError:e=>{console.error("Collaboration error:",e)}});(0,a.useEffect)(()=>{let e=e=>{if(!m.current)return;let t=m.current.getBoundingClientRect();e.clientX,t.left,e.clientY,t.top,x.broadcastCursor({x:e.clientX,y:e.clientY,timestamp:Date.now()})},t=m.current;if(t)return t.addEventListener("mousemove",e),()=>t.removeEventListener("mousemove",e)},[x]);let h=(0,a.useCallback)(e=>{switch(e.type){case"add":o(t=>[...t,{id:e.entityId,...e.data}]);break;case"update":o(t=>t.map(t=>t.id===e.entityId?{...t,...e.data}:t));break;case"delete":o(t=>t.filter(t=>t.id!==e.entityId));break;case"move":o(t=>t.map(t=>t.id===e.entityId?{...t,...e.data}:t))}},[]),f=(0,a.useCallback)(()=>{let e={id:"clip-".concat(Date.now()),type:"video",name:"New Clip",start:0,duration:5,track:0};o(t=>[...t,e]),x.broadcastChange({type:"add",entityType:"clip",entityId:e.id,data:e})},[x]),p=(0,a.useCallback)(async e=>{if(!await x.lockEntity(e)){alert("This clip is being edited by another user");return}o(t=>t.filter(t=>t.id!==e)),x.broadcastChange({type:"delete",entityType:"clip",entityId:e,data:{}}),x.unlockEntity(e)},[x]),g=(0,a.useCallback)(async(e,t)=>{if(!await x.lockEntity(e)){alert("This clip is being edited by another user");return}o(s=>s.map(s=>s.id===e?{...s,...t}:s)),x.broadcastChange({type:"update",entityType:"clip",entityId:e,data:t}),setTimeout(()=>{x.unlockEntity(e)},1e3)},[x]);return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)(j,{users:[s,...x.users],currentUserId:s.id,connected:x.connected,latency:x.latency}),(0,r.jsxs)("div",{ref:m,className:"flex-1 relative bg-gray-100 overflow-auto",children:[(0,r.jsx)(v,{cursors:x.cursors,users:x.users}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Adicionar Clip"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[c.map(e=>{let t=x.locks.has(e.id),a=x.locks.get(e.id),i=(null==a?void 0:a.userId)===s.id;return(0,r.jsx)("div",{className:"\n                    p-4 bg-white rounded-lg shadow\n                    ".concat(d===e.id?"ring-2 ring-blue-500":"","\n                    ").concat(t&&!i?"opacity-50":"","\n                  "),onClick:()=>u(e.id),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[i?(0,r.jsx)(n.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(l.Z,{className:"w-4 h-4 text-red-600"}),!i&&(0,r.jsx)("span",{className:"text-red-600",children:null==a?void 0:a.userName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.duration,"s | Track ",e.track]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>g(e.id,{name:"".concat(e.name," (edited)")}),disabled:t&&!i,className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Editar"}),(0,r.jsx)("button",{onClick:()=>p(e.id),disabled:t&&!i,className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Deletar"})]})]})},e.id)}),0===c.length&&(0,r.jsx)("div",{className:"text-center py-12 text-gray-500",children:'Nenhum clip ainda. Clique em "Adicionar Clip" para come\xe7ar.'})]})]})]}),(0,r.jsxs)("div",{className:"px-4 py-2 bg-gray-50 border-t text-xs text-gray-600 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[c.length," ",1===c.length?"clip":"clips"]}),(0,r.jsx)("div",{children:x.error&&(0,r.jsxs)("span",{className:"text-red-600",children:["Erro: ",x.error.message]})})]})]})}h.displayName=d.NY.displayName;var w=s(6070),C=s(2869),k=s(8223),E=s(6815);let I="force-dynamic";function S(){let[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[c,o]=(0,a.useState)("demo-project-001"),[d,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("collab_user_name"),t=localStorage.getItem("collab_user_email");e&&n(e),t&&i(t)},[]);let m=()=>{if(!s.trim()){alert("Por favor, digite seu nome");return}let e={id:"user-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:s.trim(),email:l.trim()||"".concat(s.toLowerCase().replace(/\s/g,""),"@example.com"),color:function(){let e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"];return e[Math.floor(Math.random()*e.length)]}(),lastSeen:new Date};localStorage.setItem("collab_user_name",e.name),localStorage.setItem("collab_user_email",e.email),u(e),t(!0)};return e&&d?(0,r.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:["Projeto: ",c]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Voc\xea: ",d.name]})]}),(0,r.jsx)(C.z,{onClick:()=>{t(!1),u(null)},variant:"outline",children:"Sair"})]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(N,{projectId:c,currentUser:d,onChangeReceived:e=>{console.log("Change received in page:",e)}})})]}):(0,r.jsx)("div",{className:"container mx-auto py-20",children:(0,r.jsxs)(w.Zb,{className:"max-w-lg mx-auto",children:[(0,r.jsxs)(w.Ol,{children:[(0,r.jsx)(w.ll,{className:"text-3xl font-bold",children:"Colabora\xe7\xe3o em Tempo Real"}),(0,r.jsx)(w.SZ,{children:"Entre no projeto para colaborar com outros usu\xe1rios"})]}),(0,r.jsxs)(w.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(E._,{htmlFor:"projectId",children:"ID do Projeto"}),(0,r.jsx)(k.I,{id:"projectId",value:c,onChange:e=>o(e.target.value),placeholder:"demo-project-001"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Use o mesmo ID para colaborar com outros usu\xe1rios"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(E._,{htmlFor:"userName",children:"Seu Nome"}),(0,r.jsx)(k.I,{id:"userName",value:s,onChange:e=>n(e.target.value),placeholder:"Digite seu nome",onKeyPress:e=>"Enter"===e.key&&m()})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(E._,{htmlFor:"userEmail",children:"Email (opcional)"}),(0,r.jsx)(k.I,{id:"userEmail",type:"email",value:l,onChange:e=>i(e.target.value),placeholder:"seu@email.com",onKeyPress:e=>"Enter"===e.key&&m()})]}),(0,r.jsx)(C.z,{onClick:m,className:"w-full",disabled:!s.trim(),children:"Entrar no Projeto"}),(0,r.jsxs)("div",{className:"pt-4 border-t",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Como testar:"}),(0,r.jsxs)("ol",{className:"text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[(0,r.jsx)("li",{children:"Abra esta p\xe1gina em m\xfaltiplas abas ou navegadores"}),(0,r.jsx)("li",{children:"Use o mesmo ID de projeto em todas"}),(0,r.jsx)("li",{children:"Use nomes diferentes para cada usu\xe1rio"}),(0,r.jsx)("li",{children:"Veja mudan\xe7as em tempo real!"})]})]})]})]})})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return a}});var r=s(7437);let a=s(2265).forwardRef((e,t)=>{let{className:s="",variant:a="default",size:n="default",...l}=e;return(0,r.jsx)("button",{ref:t,className:["inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-blue-600 dark:text-blue-400 bg-transparent"}[a],{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}[n],s].join(" "),...l})});a.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return n},SZ:function(){return i},Zb:function(){return a},aY:function(){return c},ll:function(){return l}});var r=s(7437);function a(e){let{className:t="",...s}=e;return(0,r.jsx)("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm "+t,...s})}function n(e){let{className:t="",...s}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 "+t,...s})}function l(e){let{className:t="",...s}=e;return(0,r.jsx)("h3",{className:"text-2xl font-semibold leading-none tracking-tight "+t,...s})}function i(e){let{className:t="",...s}=e;return(0,r.jsx)("p",{className:"text-sm text-muted-foreground "+t,...s})}function c(e){let{className:t="",...s}=e;return(0,r.jsx)("div",{className:"p-6 pt-0 "+t,...s})}s(2265)},8223:function(e,t,s){"use strict";s.d(t,{I:function(){return a}});var r=s(7437);let a=s(2265).forwardRef((e,t)=>{let{className:s="",...a}=e;return(0,r.jsx)("input",{ref:t,className:["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm","ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",s].join(" "),...a})});a.displayName="Input"},6815:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var r=s(7437);function a(e){let{className:t="",...s}=e;return(0,r.jsx)("label",{className:["text-sm font-medium leading-none ",t].join(" "),...s})}s(2265)},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.Z)(t))}}},function(e){e.O(0,[590,434,971,117,744],function(){return e(e.s=6427)}),_N_E=e.O()}]);