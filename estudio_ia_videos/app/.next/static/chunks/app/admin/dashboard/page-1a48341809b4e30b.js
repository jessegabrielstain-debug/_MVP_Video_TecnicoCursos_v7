(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{3681:function(e,t,s){Promise.resolve().then(s.bind(s,8196))},8196:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(7437),a=s(2265),i=s(4822),c=s(4428),l=s(1239),n=s(5805),o=s(6865),h=s(4489);class m{startMonitoring(){if("PerformanceObserver"in window&&this.setupPerformanceObserver(),setInterval(()=>{if("memory"in performance){let e=performance.memory;this.metrics.memory=e.usedJSHeapSize/e.jsHeapSizeLimit,this.metrics.memory>this.thresholds.memory&&this.alert("high_memory","Memory usage: ".concat((100*this.metrics.memory).toFixed(1),"%"),"high")}},3e4),window.addEventListener("error",e=>{this.metrics.errorRate++,h.Xe.trackError(e.error)}),window.addEventListener("unhandledrejection",e=>{this.metrics.errorRate++,h.Xe.trackError(Error(e.reason))}),"connection"in navigator){let e=navigator.connection;e&&this.monitorConnection(e)}}setupPerformanceObserver(){try{new PerformanceObserver(e=>{for(let t of e.getEntries()){let e=t.name,s=t.startTime;h.Xe.trackWebVital(e,s),"LCP"===e&&s>2500&&this.alert("poor_lcp","LCP: ".concat(s,"ms (>2500ms)"),"medium"),"FID"===e&&s>100&&this.alert("poor_fid","FID: ".concat(s,"ms (>100ms)"),"medium")}}).observe({entryTypes:["paint","largest-contentful-paint","first-input"]})}catch(e){console.warn("Performance Observer n\xe3o suportado")}}monitorConnection(e){let t=()=>{let t=e.effectiveType;("slow-2g"===t||"2g"===t)&&this.alert("slow_connection","Conex\xe3o lenta: ".concat(t),"low"),h.Xe.trackEvent("connection_change",{effectiveType:t,downlink:e.downlink,rtt:e.rtt})};e.addEventListener("change",t),t()}alert(e,t,s){let r={type:e,message:t,timestamp:Date.now(),severity:s};this.alerts.push(r),this.alerts.length>100&&(this.alerts=this.alerts.slice(-100)),("critical"===s?console.error:"high"===s?console.error:"medium"===s?console.warn:console.log)("[".concat(s.toUpperCase(),"] ").concat(t)),h.Xe.trackEvent("system_alert",{type:e,severity:s,message:t}),"critical"===s&&this.notifyCriticalAlert(t)}notifyCriticalAlert(e){console.error("\uD83D\uDEA8 CRITICAL ALERT:",e),"Notification"in window&&"granted"===Notification.permission&&new Notification("Alerta Cr\xedtico do Sistema",{body:e,icon:"/icon-192.png",tag:"critical-alert"})}getMetrics(){return{...this.metrics}}getAlerts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.alerts.slice(-e).reverse()}getHealthStatus(){let e=[this.metrics.responseTime>this.thresholds.responseTime,this.metrics.errorRate>this.thresholds.errorRate,this.metrics.memory>this.thresholds.memory,this.metrics.cpu>this.thresholds.cpu].filter(Boolean).length;return 0===e?"healthy":e<=1?"degraded":"unhealthy"}generateHealthReport(){let e=this.getHealthStatus(),t=this.getMetrics(),s=this.getAlerts(5);return"\n╔════════════════════════════════════════╗\n║      RELAT\xd3RIO DE SA\xdaDE DO SISTEMA     ║\n╚════════════════════════════════════════╝\n\nStatus: ".concat("healthy"===e?"✅":"degraded"===e?"⚠️":"❌"," ").concat(e.toUpperCase(),"\n\nM\xe9tricas:\n  CPU: ").concat((100*t.cpu).toFixed(1),"%\n  Mem\xf3ria: ").concat((100*t.memory).toFixed(1),"%\n  Response Time: ").concat(t.responseTime.toFixed(0),"ms\n  Error Rate: ").concat((100*t.errorRate).toFixed(2),"%\n  Usu\xe1rios Ativos: ").concat(t.activeUsers,"\n  Requests/min: ").concat(t.requestsPerMinute,"\n\nAlertas Recentes (").concat(s.length,"):\n").concat(s.map(e=>"  ".concat("critical"===e.severity?"\uD83D\uDEA8":"high"===e.severity?"⚠️":"ℹ️"," ").concat(e.message)).join("\n")||"  Nenhum alerta","\n\nTimestamp: ").concat(new Date().toISOString(),"\n    ").trim()}constructor(){this.metrics={cpu:0,memory:0,responseTime:0,errorRate:0,activeUsers:0,requestsPerMinute:0},this.alerts=[],this.thresholds={responseTime:1e3,errorRate:.05,memory:.85,cpu:.8},this.startMonitoring()}}let d=new m;console.log("\uD83D\uDD0D Production Monitor ativado"),setInterval(()=>{console.log(d.generateHealthReport())},6e4);class x{async set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{ttl:r=this.defaultTTL,storage:a="memory",compress:i=!1,version:c=this.version}=s,l={data:t,timestamp:Date.now(),ttl:r,version:c,hits:0,size:this.estimateSize(t)};switch(a){case"memory":this.setMemoryCache(e,l);break;case"localStorage":this.setLocalStorage(e,l,i);break;case"indexedDB":await this.setIndexedDB(e,l)}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"memory",s=null;switch(t){case"memory":s=this.getMemoryCache(e);break;case"localStorage":s=this.getLocalStorage(e);break;case"indexedDB":s=await this.getIndexedDB(e)}return s?this.isExpired(s)?(await this.delete(e,t),null):(s.hits++,s.data):null}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"memory";switch(t){case"memory":let s=this.memoryCache.get(e);s&&(this.currentMemorySize-=s.size),this.memoryCache.delete(e);break;case"localStorage":localStorage.removeItem("cache_".concat(e));break;case"indexedDB":await this.deleteFromIndexedDB(e)}}async clear(e){e&&"memory"!==e||(this.memoryCache.clear(),this.currentMemorySize=0),e&&"localStorage"!==e||Object.keys(localStorage).filter(e=>e.startsWith("cache_")).forEach(e=>localStorage.removeItem(e)),e&&"indexedDB"!==e||await this.clearIndexedDB()}getStats(){let e=Array.from(this.memoryCache.values());return{memory:{entries:this.memoryCache.size,size:this.currentMemorySize,maxSize:this.maxMemorySize,utilization:this.currentMemorySize/this.maxMemorySize*100,hits:e.reduce((e,t)=>e+t.hits,0)},localStorage:this.getLocalStorageStats(),version:this.version}}setMemoryCache(e,t){for(;this.currentMemorySize+t.size>this.maxMemorySize;)this.evictLeastUsed();this.memoryCache.set(e,t),this.currentMemorySize+=t.size}getMemoryCache(e){return this.memoryCache.get(e)||null}evictLeastUsed(){if(0===this.memoryCache.size)return;let e="",t=1/0;for(let[s,r]of this.memoryCache)r.hits<t&&(t=r.hits,e=s);if(e){let t=this.memoryCache.get(e);t&&(this.currentMemorySize-=t.size),this.memoryCache.delete(e)}}setLocalStorage(e,t,s){try{let r=JSON.stringify(t);s&&(r=this.compress(r)),localStorage.setItem("cache_".concat(e),r)}catch(e){console.warn("LocalStorage cache set failed:",e),this.clearOldLocalStorage()}}getLocalStorage(e){try{let t=localStorage.getItem("cache_".concat(e));if(!t)return null;let s=this.decompress(t);return JSON.parse(s)}catch(e){return console.warn("LocalStorage cache get failed:",e),null}}clearOldLocalStorage(){Date.now(),Object.keys(localStorage).filter(e=>e.startsWith("cache_")).forEach(e=>{try{let t=localStorage.getItem(e);if(t){let s=JSON.parse(t);this.isExpired(s)&&localStorage.removeItem(e)}}catch(t){localStorage.removeItem(e)}})}getLocalStorageStats(){let e=Object.keys(localStorage).filter(e=>e.startsWith("cache_")),t=0;return e.forEach(e=>{let s=localStorage.getItem(e);s&&(t+=2*s.length)}),{entries:e.length,size:t}}async setIndexedDB(e,t){try{let s=(await this.openIndexedDB()).transaction(["cache"],"readwrite").objectStore("cache");await s.put({key:e,...t})}catch(e){console.warn("IndexedDB cache set failed:",e)}}async getIndexedDB(e){try{let t=(await this.openIndexedDB()).transaction(["cache"],"readonly").objectStore("cache").get(e);return await t||null}catch(e){return console.warn("IndexedDB cache get failed:",e),null}}async deleteFromIndexedDB(e){try{let t=(await this.openIndexedDB()).transaction(["cache"],"readwrite").objectStore("cache");await t.delete(e)}catch(e){console.warn("IndexedDB cache delete failed:",e)}}async clearIndexedDB(){try{let e=(await this.openIndexedDB()).transaction(["cache"],"readwrite").objectStore("cache");await e.clear()}catch(e){console.warn("IndexedDB cache clear failed:",e)}}openIndexedDB(){return new Promise((e,t)=>{let s=indexedDB.open("SmartCache",1);s.onerror=()=>t(s.error),s.onsuccess=()=>e(s.result),s.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("cache")||t.createObjectStore("cache",{keyPath:"key"})}})}isExpired(e){return Date.now()-e.timestamp>e.ttl}estimateSize(e){try{let t=JSON.stringify(e);return 2*t.length}catch(e){return 1024}}compress(e){return btoa(e)}decompress(e){try{return atob(e)}catch(t){return e}}constructor(){this.memoryCache=new Map,this.defaultTTL=3e5,this.maxMemorySize=52428800,this.currentMemorySize=0,this.version="1.0.0"}}let u=new x;var g=s(6070),y=s(5974),p=s(6604),v=s(4508);let f=a.forwardRef((e,t)=>{let{className:s,value:a,...i}=e;return(0,r.jsx)(p.fC,{ref:t,className:(0,v.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...i,children:(0,r.jsx)(p.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});function j(){var e,t,s,m,x,p;let[v,j]=(0,a.useState)("healthy"),[S,w]=(0,a.useState)(null),[N,b]=(0,a.useState)(null),[D,C]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=()=>{j(d.getHealthStatus()),w(d.getMetrics()),b(u.getStats()),C(h.Xe.getStats())};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,r.jsxs)("div",{className:"space-y-4 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"System Dashboard"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Monitoramento em tempo real"})]}),(0,r.jsxs)(y.C,{variant:"healthy"===v?"default":"destructive",className:"text-lg px-4 py-2",children:["healthy"===v?"✅":"degraded"===v?"⚠️":"❌"," ",v.toUpperCase()]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{className:"pb-2",children:(0,r.jsxs)(g.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"}),"CPU Usage"]})}),(0,r.jsxs)(g.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[(null==S?void 0:S.cpu)?(100*S.cpu).toFixed(1):"0","%"]}),(0,r.jsx)(f,{value:(null==S?void 0:S.cpu)?100*S.cpu:0,className:"mt-2"})]})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{className:"pb-2",children:(0,r.jsxs)(g.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),"Memory"]})}),(0,r.jsxs)(g.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[(null==S?void 0:S.memory)?(100*S.memory).toFixed(1):"0","%"]}),(0,r.jsx)(f,{value:(null==S?void 0:S.memory)?100*S.memory:0,className:"mt-2"})]})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{className:"pb-2",children:(0,r.jsxs)(g.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Response Time"]})}),(0,r.jsxs)(g.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[(null==S?void 0:null===(e=S.responseTime)||void 0===e?void 0:e.toFixed(0))||"0","ms"]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Average"})]})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{className:"pb-2",children:(0,r.jsxs)(g.ll,{className:"text-sm font-medium flex items-center gap-2",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),"Active Users"]})}),(0,r.jsxs)(g.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==S?void 0:S.activeUsers)||"0"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Online now"})]})]})]}),N&&(0,r.jsxs)(g.Zb,{children:[(0,r.jsxs)(g.Ol,{children:[(0,r.jsx)(g.ll,{children:"Cache Statistics"}),(0,r.jsx)(g.SZ,{children:"Multi-layer cache performance"})]}),(0,r.jsx)(g.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm",children:"Memory Cache"}),(0,r.jsxs)(y.C,{variant:"secondary",children:[(null===(t=N.memory)||void 0===t?void 0:t.entries)||0," entries |",(((null===(s=N.memory)||void 0===s?void 0:s.size)||0)/1024/1024).toFixed(2)," MB"]})]}),(0,r.jsx)(f,{value:(null===(m=N.memory)||void 0===m?void 0:m.utilization)||0}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[(0,r.jsxs)("span",{children:["Hit Rate: ",(null===(x=N.memory)||void 0===x?void 0:x.hits)||0," hits"]}),(0,r.jsxs)("span",{children:["Utilization: ",((null===(p=N.memory)||void 0===p?void 0:p.utilization)||0).toFixed(1),"%"]})]})]})})]}),D&&(0,r.jsxs)(g.Zb,{children:[(0,r.jsxs)(g.Ol,{children:[(0,r.jsx)(g.ll,{children:"Telemetry Statistics"}),(0,r.jsx)(g.SZ,{children:"Event tracking and monitoring"})]}),(0,r.jsx)(g.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:D.events||0}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Events"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:D.metrics||0}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Metrics"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:D.errors||0}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Errors"})]})]})})]}),(0,r.jsxs)(g.Zb,{children:[(0,r.jsx)(g.Ol,{children:(0,r.jsxs)(g.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5"}),"Recent Alerts"]})}),(0,r.jsxs)(g.aY,{children:[d.getAlerts(5).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start gap-2 py-2 border-b border-gray-800 last:border-0",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full mt-1 ".concat("critical"===e.severity?"bg-red-500":"high"===e.severity?"bg-orange-500":"medium"===e.severity?"bg-yellow-500":"bg-blue-500")}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-white",children:e.message}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,r.jsx)(y.C,{variant:"outline",className:"text-xs",children:e.severity})]},t)),0===d.getAlerts(5).length&&(0,r.jsx)("p",{className:"text-gray-400 text-center py-4",children:"No recent alerts"})]})]})]})}f.displayName=p.fC.displayName;var S=s(6678);function w(){return(0,r.jsx)(S.S,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-950",children:(0,r.jsx)(j,{})})})}}},function(e){e.O(0,[590,690,363,971,117,744],function(){return e(e.s=3681)}),_N_E=e.O()}]);